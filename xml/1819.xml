<bug>
          <bug_id>1819</bug_id>
          
          <creation_ts>2009-01-07 10:31:00 +0100</creation_ts>
          <short_desc>Refactor qx.lang.* for improved API</short_desc>
          <delta_ts>2014-03-03 15:19:20 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>framework</product>
          <component>core</component>
          <version>0.8.1</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>FIXED</resolution>
          
          
          
          
          
          <priority>P3</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>0.8.2</target_milestone>
          
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sebastian Werner">info</reporter>
          <assigned_to name="Andreas Ecker">qooxdoo</assigned_to>
          <cc>info</cc>
          <qa_contact name="qooxdoo bugs mailing list">qooxdoo-bugs</qa_contact>
          <cf_browser>---</cf_browser>
          

      

      

      

          <long_desc isprivate="0">
            <commentid>7244</commentid>
            <who name="Sebastian Werner">info</who>
            <bug_when>2009-01-07 10:31:52 +0100</bug_when>
            <thetext>The API of qx.lang.* is filled with legacy code. 

Some features are not used by the framework itself, but add bloat to even small packages of qooxdoo. These should be marked as deprecated. Other methods have kept their old naming for years even when the names chosen previously are often bad like &#39;carefullyMergeWith&#39;. 

Another thing which may be improved is the overall naming of the methods to be more sleek and this way in a better standing when compared to the methods in jQuery etc.</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>7245</commentid>
            <who name="Sebastian Werner">info</who>
            <bug_when>2009-01-07 10:33:02 +0100</bug_when>
            <thetext>to me</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>7246</commentid>
            <who name="Sebastian Werner">info</who>
            <bug_when>2009-01-07 10:34:01 +0100</bug_when>
            <thetext>First things have been renamed or marked as deprecated. This is just a first set of modifications. </thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>7253</commentid>
            <who name="Andreas Ecker">qooxdoo</who>
            <bug_when>2009-01-07 14:00:44 +0100</bug_when>
            <thetext>Assign this temporarily to me. The scope, goal and procedure for those renamings are to be determined and agreed upon first - as discussed. Please postpone any pending code changes to allow for the best possible and stable results.</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>7268</commentid>
            <who name="Andreas Ecker">qooxdoo</who>
            <bug_when>2009-01-09 09:21:35 +0100</bug_when>
            <thetext>See http://qooxdoo.org/documentation/general/library_features/language for a partly complete collection of API and feature set. Any help in fleshing out this document (particularly the other frameworks Prototype, YUI, jQuery) is appreciated.</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>7269</commentid>
              <attachid>420</attachid>
            <who name="Andreas Ecker">qooxdoo</who>
            <bug_when>2009-01-09 09:31:20 +0100</bug_when>
            <thetext>Created attachment 420
Patch for qx.lang.Number</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>7270</commentid>
              <attachid>421</attachid>
            <who name="Andreas Ecker">qooxdoo</who>
            <bug_when>2009-01-09 09:32:57 +0100</bug_when>
            <thetext>Created attachment 421
Patch for qx.lang.Array</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>7271</commentid>
              <attachid>422</attachid>
            <who name="Andreas Ecker">qooxdoo</who>
            <bug_when>2009-01-09 10:18:44 +0100</bug_when>
            <thetext>Created attachment 422
Patch for qx.lang.Object</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>7272</commentid>
              <attachid>423</attachid>
            <who name="Andreas Ecker">qooxdoo</who>
            <bug_when>2009-01-09 10:20:49 +0100</bug_when>
            <thetext>Created attachment 423
Patch for qx.Class</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>8221</commentid>
            <who name="Andreas Ecker">qooxdoo</who>
            <bug_when>2009-03-03 15:21:34 +0100</bug_when>
            <thetext>Deprecated copy() methods in Array and Object, please use clone() instead, r18259, r18260, r18270, r18272.</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>8224</commentid>
            <who name="Andreas Ecker">qooxdoo</who>
            <bug_when>2009-03-03 16:08:36 +0100</bug_when>
            <thetext>Most changes applied to be available for release 0.8.2. 

Not applied yet is to optimize the generic handling of shadowed object keys in IE. While this is particularly useful for qx.Class.define(), in most other places (framework as well as user code) the (minor?) performance penalty in IE could be circumvented by using a trimmed down version that gets the keys without testing for shadowed ones. To be looked at for another release, though.</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>11843</commentid>
            <who name="Andreas Ecker">qooxdoo</who>
            <bug_when>2009-09-03 10:25:05 +0200</bug_when>
            <thetext>to 0.9</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>14731</commentid>
            <who name="Andreas Ecker">qooxdoo</who>
            <bug_when>2009-11-24 20:25:54 +0100</bug_when>
            <thetext>mass renaming of 0.9 target to 1.0 (for issues with status &quot;NEW&quot;)</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>15772</commentid>
            <who name="Andreas Ecker">qooxdoo</who>
            <bug_when>2009-12-11 19:57:06 +0100</bug_when>
            <thetext>The relevant topics of this bug have already been resolved for 0.8.2. Therefore I&#39;ll back-target the milestone to 0.8.2 as fixed.
</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>36445</commentid>
            <who name="Martin Wittemann">martin.wittemann</who>
            <bug_when>2014-03-03 15:19:20 +0100</bug_when>
            <thetext>Closed all bugs already shipped with a release.</thetext>
          </long_desc>
      
          <attachment isobsolete="0" ispatch="1" isprivate="0" isurl="0">
            <attachid>420</attachid>
            <date>2009-01-09 09:31:00 +0100</date>
            <delta_ts>2009-01-09 09:31:20 +0100</delta_ts>
            <desc>Patch for qx.lang.Number</desc>
            <filename>qx_lang_Number.js.patch</filename>
            <type>text/plain</type>
            <size>1595</size>
            <attacher>qooxdoo</attacher>
            
              <data encoding="base64">SW5kZXg6IGZyYW1ld29yay9zb3VyY2UvY2xhc3MvcXgvbGFuZy9OdW1iZXIuanMNCj09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT0NCi0tLSBmcmFtZXdvcmsvc291cmNlL2NsYXNzL3F4L2xhbmcvTnVtYmVyLmpzCShyZXZpc2lv
biAxNzE3NikNCisrKyBmcmFtZXdvcmsvc291cmNlL2NsYXNzL3F4L2xhbmcvTnVtYmVyLmpzCSh3
b3JraW5nIGNvcHkpDQpAQCAtMzEsMTIgKzMxLDE4IEBADQogICAgIC8qKgogICAgICAqIENoZWNr
IHdoZXRoZXIgdGhlIG51bWJlciBpcyBpbiBhIGdpdmVuIHJhbmdlCiAgICAgICoKKyAgICAgKiBA
ZGVwcmVjYXRlZCBMZWdhY3kgY29kZSAtIHVudXNlZCBpbiB0aGUgZnJhbWV3b3JrIQogICAgICAq
IEBwYXJhbSBuciB7TnVtYmVyfSB0aGUgbnVtYmVyIHRvIGNoZWNrCiAgICAgICogQHBhcmFtIHZt
aW4ge0ludGVnZXJ9IGxvd2VyIGJvdW5kIG9mIHRoZSByYW5nZQogICAgICAqIEBwYXJhbSB2bWF4
IHtJbnRlZ2VyfSB1cHBlciBib3VuZCBvZiB0aGUgcmFuZ2UKICAgICAgKiBAcmV0dXJuIHtCb29s
ZWFufSB3aGV0aGVyIHRoZSBudW1iZXIgaXMgPj0gdm1pbiBhbmQgPD0gdm1heAogICAgICAqLwot
ICAgIGlzSW5SYW5nZSA6IGZ1bmN0aW9uKG5yLCB2bWluLCB2bWF4KSB7CisgICAgaXNJblJhbmdl
IDogZnVuY3Rpb24obnIsIHZtaW4sIHZtYXgpIAorICAgIHsKKyAgICAgIGlmIChxeC5jb3JlLlZh
cmlhbnQuaXNTZXQoInF4LmRlYnVnIiwgIm9uIikpIHsKKyAgICAgICAgcXgubG9nLkxvZ2dlci5k
ZXByZWNhdGVkTWV0aG9kV2FybmluZyhhcmd1bWVudHMuY2FsbGVlKTsKKyAgICAgIH0gICAgICAK
KyAgICAgIAogICAgICAgcmV0dXJuIG5yID49IHZtaW4gJiYgbnIgPD0gdm1heDsKICAgICB9LAog
CkBAIC00NCwxMiArNTAsMTggQEANCiAgICAgLyoqCiAgICAgICogQ2hlY2sgd2hldGhlciB0aGUg
bnVtYmVyIGlzIGJldHdlZW4gYSBnaXZlbiByYW5nZQogICAgICAqCisgICAgICogQGRlcHJlY2F0
ZWQgTGVnYWN5IGNvZGUgLSB1bnVzZWQgaW4gdGhlIGZyYW1ld29yayEKICAgICAgKiBAcGFyYW0g
bnIge051bWJlcn0gdGhlIG51bWJlciB0byBjaGVjawogICAgICAqIEBwYXJhbSB2bWluIHtJbnRl
Z2VyfSBsb3dlciBib3VuZCBvZiB0aGUgcmFuZ2UKICAgICAgKiBAcGFyYW0gdm1heCB7SW50ZWdl
cn0gdXBwZXIgYm91bmQgb2YgdGhlIHJhbmdlCiAgICAgICogQHJldHVybiB7Qm9vbGVhbn0gd2hl
dGhlciB0aGUgbnVtYmVyIGlzID4gdm1pbiBhbmQgPCB2bWF4CiAgICAgICovCi0gICAgaXNCZXR3
ZWVuUmFuZ2UgOiBmdW5jdGlvbihuciwgdm1pbiwgdm1heCkgeworICAgIGlzQmV0d2VlblJhbmdl
IDogZnVuY3Rpb24obnIsIHZtaW4sIHZtYXgpIAorICAgIHsKKyAgICAgIGlmIChxeC5jb3JlLlZh
cmlhbnQuaXNTZXQoInF4LmRlYnVnIiwgIm9uIikpIHsKKyAgICAgICAgcXgubG9nLkxvZ2dlci5k
ZXByZWNhdGVkTWV0aG9kV2FybmluZyhhcmd1bWVudHMuY2FsbGVlKTsKKyAgICAgIH0gICAgICAK
KyAgICAgIAogICAgICAgcmV0dXJuIG5yID4gdm1pbiAmJiBuciA8IHZtYXg7CiAgICAgfSwKIAo=
</data>

          </attachment>
          <attachment isobsolete="0" ispatch="1" isprivate="0" isurl="0">
            <attachid>421</attachid>
            <date>2009-01-09 09:32:00 +0100</date>
            <delta_ts>2009-01-09 09:32:57 +0100</delta_ts>
            <desc>Patch for qx.lang.Array</desc>
            <filename>qx_lang_Array.js.patch</filename>
            <type>text/plain</type>
            <size>2040</size>
            <attacher>qooxdoo</attacher>
            
              <data encoding="base64">SW5kZXg6IGZyYW1ld29yay9zb3VyY2UvY2xhc3MvcXgvbGFuZy9BcnJheS5qcw0KPT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PQ0KLS0tIGZyYW1ld29yay9zb3VyY2UvY2xhc3MvcXgvbGFuZy9BcnJheS5qcwkocmV2aXNpb24g
MTcxNzcpDQorKysgZnJhbWV3b3JrL3NvdXJjZS9jbGFzcy9xeC9sYW5nL0FycmF5LmpzCSh3b3Jr
aW5nIGNvcHkpDQpAQCAtMTA2LDEwICsxMDYsMTYgQEANCiAgICAgLyoqCiAgICAgICogUmV0dXJu
IGEgY29weSBvZiB0aGUgZ2l2ZW4gYXJyCiAgICAgICoKKyAgICAgKiBAZGVwcmVjYXRlZCBVc2Ug
e0BsaW5rICNjbG9uZX0gaW5zdGVhZAogICAgICAqIEBwYXJhbSBhcnIge0FycmF5fSB0aGUgYXJy
IHRvIGNvcHkKICAgICAgKiBAcmV0dXJuIHtBcnJheX0gY29weSBvZiB0aGUgYXJyCiAgICAgICov
Ci0gICAgY29weSA6IGZ1bmN0aW9uKGFycikgeworICAgIGNvcHkgOiBmdW5jdGlvbihhcnIpIAor
ICAgIHsKKyAgICAgIGlmIChxeC5jb3JlLlZhcmlhbnQuaXNTZXQoInF4LmRlYnVnIiwgIm9uIikp
IHsKKyAgICAgICAgcXgubG9nLkxvZ2dlci5kZXByZWNhdGVkTWV0aG9kV2FybmluZyhhcmd1bWVu
dHMuY2FsbGVlLCAiVXNlIGNsb25lKCkgaW5zdGVhZC4iKTsKKyAgICAgIH0KKyAgICAgICAgICAg
IAogICAgICAgcmV0dXJuIGFyci5jb25jYXQoKTsKICAgICB9LAogCkBAIC0xMjksMTAgKzEzNSwx
NiBAQA0KICAgICAvKioKICAgICAgKiBSZXR1cm4gdGhlIGxhc3QgZWxlbWVudCBvZiBhbiBhcnIK
ICAgICAgKgorICAgICAqIEBkZXByZWNhdGVkIEZvciBwZXJmb3JtYW5jZSByZWFzb25zIGl0J3Mg
YmV0dGVyIHRvIG9taXQgdGhlIGZ1bmN0aW9uIGNhbGwKICAgICAgKiBAcGFyYW0gYXJyIHtBcnJh
eX0gdGhlIGFycgogICAgICAqIEByZXR1cm4ge3Zhcn0gdGhlIGxhc3QgZWxlbWVudCBvZiB0aGUg
YXJyCiAgICAgICovCi0gICAgZ2V0TGFzdCA6IGZ1bmN0aW9uKGFycikgeworICAgIGdldExhc3Qg
OiBmdW5jdGlvbihhcnIpIAorICAgIHsKKyAgICAgIGlmIChxeC5jb3JlLlZhcmlhbnQuaXNTZXQo
InF4LmRlYnVnIiwgIm9uIikpIHsKKyAgICAgICAgcXgubG9nLkxvZ2dlci5kZXByZWNhdGVkTWV0
aG9kV2FybmluZyhhcmd1bWVudHMuY2FsbGVlLCAiVXNlIHRoZSBuYXRpdmUgZmVhdHVyZXMgaW5z
dGVhZCBmb3IgcGVyZm9ybWFuY2UgcmVhc29ucy4iKTsKKyAgICAgIH0gICAgICAKKyAgICAgIAog
ICAgICAgcmV0dXJuIGFyclthcnIubGVuZ3RoIC0gMV07CiAgICAgfSwKIApAQCAtMTQwLDEwICsx
NTIsMTYgQEANCiAgICAgLyoqCiAgICAgICogUmV0dXJuIHRoZSBmaXJzdCBlbGVtZW50IG9mIGFu
IGFycgogICAgICAqCisgICAgICogQGRlcHJlY2F0ZWQgRm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMg
aXQncyBiZXR0ZXIgdG8gb21pdCB0aGUgZnVuY3Rpb24gY2FsbAogICAgICAqIEBwYXJhbSBhcnIg
e0FycmF5fSB0aGUgYXJyCiAgICAgICogQHJldHVybiB7dmFyfSB0aGUgZmlyc3QgZWxlbWVudCBv
ZiB0aGUgYXJyCiAgICAgICovCi0gICAgZ2V0Rmlyc3QgOiBmdW5jdGlvbihhcnIpIHsKKyAgICBn
ZXRGaXJzdCA6IGZ1bmN0aW9uKGFycikgCisgICAgeworICAgICAgaWYgKHF4LmNvcmUuVmFyaWFu
dC5pc1NldCgicXguZGVidWciLCAib24iKSkgeworICAgICAgICBxeC5sb2cuTG9nZ2VyLmRlcHJl
Y2F0ZWRNZXRob2RXYXJuaW5nKGFyZ3VtZW50cy5jYWxsZWUsICJVc2UgdGhlIG5hdGl2ZSBmZWF0
dXJlcyBpbnN0ZWFkIGZvciBwZXJmb3JtYW5jZSByZWFzb25zLiIpOworICAgICAgfSAgICAgIAor
CiAgICAgICByZXR1cm4gYXJyWzBdOwogICAgIH0sCiAKQEAgLTM1NCw2ICszNzIsNyBAQA0KICAg
ICAgIHJldHVybiByZXN1bHQgPT09IHVuZGVmaW5lZCA/IG51bGwgOiByZXN1bHQ7CiAgICAgfSwK
IAorCiAgICAgLyoqCiAgICAgICogUmV0dXJucyB0aGUgbG93ZXN0IHZhbHVlIGluIHRoZSBnaXZl
biBhcnIuIFN1cHBvcnRzCiAgICAgICogbnVtZXJpYyB2YWx1ZXMgb25seS4K
</data>

          </attachment>
          <attachment isobsolete="0" ispatch="1" isprivate="0" isurl="0">
            <attachid>422</attachid>
            <date>2009-01-09 10:18:00 +0100</date>
            <delta_ts>2009-01-09 10:18:44 +0100</delta_ts>
            <desc>Patch for qx.lang.Object</desc>
            <filename>qx_lang_Object.js.patch</filename>
            <type>text/plain</type>
            <size>17120</size>
            <attacher>qooxdoo</attacher>
            
              <data encoding="base64">SW5kZXg6IGZyYW1ld29yay9zb3VyY2UvY2xhc3MvcXgvbGFuZy9PYmplY3QuanMNCj09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT0NCi0tLSBmcmFtZXdvcmsvc291cmNlL2NsYXNzL3F4L2xhbmcvT2JqZWN0LmpzCShyZXZpc2lv
biAxNzE3OSkNCisrKyBmcmFtZXdvcmsvc291cmNlL2NsYXNzL3F4L2xhbmcvT2JqZWN0LmpzCSh3
b3JraW5nIGNvcHkpDQpAQCAtMjYsNiArMjYsMjIgQEANCiAgIHN0YXRpY3MgOgogICB7CiAgICAg
LyoqCisgICAgICogQ2xlYXJzIHRoZSBtYXAgZnJvbSBhbGwgdmFsdWVzCisgICAgICoKKyAgICAg
KiBAcGFyYW0gbWFwIHtPYmplY3R9IHRoZSBtYXAgdG8gY2xlYXIKKyAgICAgKi8KKyAgICBlbXB0
eSA6IGZ1bmN0aW9uKG1hcCkKKyAgICB7CisgICAgICBmb3IgKHZhciBrZXkgaW4gbWFwKSAKKyAg
ICAgIHsKKyAgICAgICAgaWYgKG1hcC5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7CisgICAgICAgICAg
ZGVsZXRlIG1hcFtrZXldOworICAgICAgICB9ICAKKyAgICAgIH0KKyAgICB9LAorICAgIAorICAg
IAorICAgIC8qKgogICAgICAqIENoZWNrIGlmIHRoZSBoYXNoIGhhcyBhbnkga2V5cwogICAgICAq
CiAgICAgICogQHBhcmFtIG1hcCB7T2JqZWN0fSB0aGUgbWFwIHRvIGNoZWNrCkBAIC00Miw5OCAr
NTgsNDEgQEANCiAKIAogICAgIC8qKgotICAgICAqIENoZWNrIHdoZXRoZXIgdGhlIG51bWJlciBv
ZiBvYmplY3RzIGluIHRoZSBtYXBzIGlzIGF0IGxlYXN0ICJsZW5ndGgiCi0gICAgICoKLSAgICAg
KiBAcGFyYW0gbWFwIHtPYmplY3R9IHRoZSBtYXAgdG8gY2hlY2sKLSAgICAgKiBAcGFyYW0gbGVu
Z3RoIHtJbnRlZ2VyfSBtaW5pbXVtIG51bWJlciBvZiBvYmplY3RzIGluIHRoZSBtYXAKLSAgICAg
KiBAcmV0dXJuIHtCb29sZWFufSB3aGV0aGVyIHRoZSBtYXAgY29udGFpbnMgYXQgbGVhc3QgImxl
bmd0aCIgb2JqZWN0cy4KLSAgICAgKi8KLSAgICBoYXNNaW5MZW5ndGggOiBmdW5jdGlvbihtYXAs
IGxlbmd0aCkKLSAgICB7Ci0gICAgICB2YXIgaSA9IDA7Ci0KLSAgICAgIGZvciAodmFyIGtleSBp
biBtYXApCi0gICAgICB7Ci0gICAgICAgIGlmICgoKytpKSA+PSBsZW5ndGgpIHsKLSAgICAgICAg
ICByZXR1cm4gdHJ1ZTsKLSAgICAgICAgfQotICAgICAgfQotCi0gICAgICByZXR1cm4gZmFsc2U7
Ci0gICAgfSwKLQotCi0gICAgLyoqCiAgICAgICogR2V0IHRoZSBudW1iZXIgb2Ygb2JqZWN0cyBp
biB0aGUgbWFwCiAgICAgICoKICAgICAgKiBAcGFyYW0gbWFwIHtPYmplY3R9IHRoZSBtYXAKICAg
ICAgKiBAcmV0dXJuIHtJbnRlZ2VyfSBudW1iZXIgb2Ygb2JqZWN0cyBpbiB0aGUgbWFwCiAgICAg
ICovCi0gICAgZ2V0TGVuZ3RoIDogZnVuY3Rpb24obWFwKQorICAgIGxlbiA6IGZ1bmN0aW9uKG1h
cCkKICAgICB7Ci0gICAgICB2YXIgaSA9IDA7CisgICAgICB2YXIgbGVuZ3RoID0gMDsKIAogICAg
ICAgZm9yICh2YXIga2V5IGluIG1hcCkgewotICAgICAgICBpKys7CisgICAgICAgIGxlbmd0aCsr
OwogICAgICAgfQogCi0gICAgICByZXR1cm4gaTsKKyAgICAgIHJldHVybiBsZW5ndGg7CiAgICAg
fSwKIAogCi0gICAgX3NoYWRvd2VkS2V5cyA6Ci0gICAgWwotICAgICAgImlzUHJvdG90eXBlT2Yi
LAotICAgICAgImhhc093blByb3BlcnR5IiwKLSAgICAgICJ0b0xvY2FsZVN0cmluZyIsCi0gICAg
ICAidG9TdHJpbmciLAotICAgICAgInZhbHVlT2YiCi0gICAgXSwKLQotCiAgICAgLyoqCiAgICAg
ICogR2V0IHRoZSBrZXlzIG9mIGEgbWFwIGFzIGFycmF5IGFzIHJldHVybmVkIGJ5IGEgImZvciAu
Li4gaW4iIHN0YXRlbWVudC4KICAgICAgKgotICAgICAqIFRPRE86IFJlbmFtZSB0byBrZXlzKCkg
bGlrZSBpbiBwcm90b3R5cGUgYW5kIHB5dGhvbgotICAgICAqCiAgICAgICogQHBhcmFtIG1hcCB7
T2JqZWN0fSB0aGUgbWFwCiAgICAgICogQHJldHVybiB7QXJyYXl9IGFycmF5IG9mIHRoZSBrZXlz
IG9mIHRoZSBtYXAKICAgICAgKi8KLSAgICBnZXRLZXlzIDogcXguY29yZS5WYXJpYW50LnNlbGVj
dCgicXguY2xpZW50IiwKKyAgICBrZXlzIDogZnVuY3Rpb24obWFwKQogICAgIHsKLSAgICAgICJt
c2h0bWwiIDogZnVuY3Rpb24obWFwKQotICAgICAgewotICAgICAgICB2YXIgYXJyID0gW107Ci0g
ICAgICAgIGZvciAodmFyIGtleSBpbiBtYXApIHsKLSAgICAgICAgICBhcnIucHVzaChrZXkpOwot
ICAgICAgICB9CisgICAgICB2YXIgYXJyID0gW107CiAKLSAgICAgICAgLy8gSUUgZG9lcyBub3Qg
cmV0dXJuICJzaGFkb3dlZCIga2V5cyBldmVuIGlmIHRoZXkgYXJlIGRlZmluZWQgZGlyZWN0bHkK
LSAgICAgICAgLy8gaW4gdGhlIG9iamVjdC4gVGhpcyBpcyBpbmNvbXBhdGlibGUgdG8gdGhlIEVD
TUEgc3RhbmRhcmQhIQotICAgICAgICAvLyBUaGlzIGlzIHdoeSB0aGlzIGNoZWNrcyBhcmUgbmVl
ZGVkLgotICAgICAgICBmb3IgKHZhciBpPTAsIGE9dGhpcy5fc2hhZG93ZWRLZXlzLCBsPWEubGVu
Z3RoOyBpPGw7IGkrKykKLSAgICAgICAgewotICAgICAgICAgIGlmIChtYXAuaGFzT3duUHJvcGVy
dHkoYVtpXSkpIHsKLSAgICAgICAgICAgIGFyci5wdXNoKGFbaV0pOwotICAgICAgICAgIH0KLSAg
ICAgICAgfQorICAgICAgZm9yICh2YXIga2V5IGluIG1hcCkgeworICAgICAgICBhcnIucHVzaChr
ZXkpOworICAgICAgfQogCi0gICAgICAgIHJldHVybiBhcnI7Ci0gICAgICB9LAorICAgICAgcmV0
dXJuIGFycjsKKyAgICB9LAogCi0gICAgICAiZGVmYXVsdCIgOiBmdW5jdGlvbihtYXApCi0gICAg
ICB7Ci0gICAgICAgIHZhciBhcnIgPSBbXTsKIAotICAgICAgICBmb3IgKHZhciBrZXkgaW4gbWFw
KSB7Ci0gICAgICAgICAgYXJyLnB1c2goa2V5KTsKLSAgICAgICAgfQotCi0gICAgICAgIHJldHVy
biBhcnI7Ci0gICAgICB9Ci0gICAgfSksCi0KLQogICAgIC8qKgogICAgICAqIEdldCB0aGUga2V5
cyBvZiBhIG1hcCBhcyBzdHJpbmcKICAgICAgKgpAQCAtMTQxLDExICsxMDAsMTEgQEANCiAgICAg
ICogQHJldHVybiB7U3RyaW5nfSBTdHJpbmcgb2YgdGhlIGtleXMgb2YgdGhlIG1hcAogICAgICAq
ICAgICAgICAgVGhlIGtleXMgYXJlIHNlcGFyYXRlZCBieSAiLCAiCiAgICAgICovCi0gICAgZ2V0
S2V5c0FzU3RyaW5nIDogZnVuY3Rpb24obWFwKQorICAgIGtleXNGb3JtYXR0ZWQgOiBmdW5jdGlv
bihtYXApCiAgICAgewotICAgICAgdmFyIGtleXMgPSBxeC5sYW5nLk9iamVjdC5nZXRLZXlzKG1h
cCk7Ci0gICAgICBpZiAoa2V5cy5sZW5ndGggPT0gMCkgewotICAgICAgICByZXR1cm4gIiI7Cisg
ICAgICB2YXIga2V5cyA9IFtdOworICAgICAgZm9yICh2YXIga2V5IGluIG1hcCkgeworICAgICAg
ICBrZXlzLnB1c2goa2V5KTsKICAgICAgIH0KIAogICAgICAgcmV0dXJuICciJyArIGtleXMuam9p
bignXCIsICInKSArICciJzsKQEAgLTE1NSwxMiArMTE0LDEwIEBADQogICAgIC8qKgogICAgICAq
IEdldCB0aGUgdmFsdWVzIG9mIGEgbWFwIGFzIGFycmF5CiAgICAgICoKLSAgICAgKiBUT0RPOiBS
ZW5hbWUgdG8gdmFsdWVzKCkgbGlrZSBpbiBwcm90b3R5cGUgYW5kIHB5dGhvbgotICAgICAqCiAg
ICAgICogQHBhcmFtIG1hcCB7T2JqZWN0fSB0aGUgbWFwCiAgICAgICogQHJldHVybiB7QXJyYXl9
IGFycmF5IG9mIHRoZSB2YWx1ZXMgb2YgdGhlIG1hcAogICAgICAqLwotICAgIGdldFZhbHVlcyA6
IGZ1bmN0aW9uKG1hcCkKKyAgICB2YWx1ZXMgOiBmdW5jdGlvbihtYXApCiAgICAgewogICAgICAg
dmFyIGFyciA9IFtdOwogCkBAIC0xNzAsMTczICsxMjcsMzQ4IEBADQogCiAgICAgICByZXR1cm4g
YXJyOwogICAgIH0sCisgICAgCisgIAorICAgIC8qKgorICAgICAqIFJldHVybiBhIGNsb25lIG9m
IHRoZSBnaXZlbiBtYXAKKyAgICAgKgorICAgICAqIEBwYXJhbSBzb3VyY2Uge09iamVjdH0gbWFw
IHRvIGNsb25lCisgICAgICogQHJldHVybiB7T2JqZWN0fSB0aGUgY2xvbmUKKyAgICAgKi8KKyAg
ICBjbG9uZSA6IGZ1bmN0aW9uKHNvdXJjZSkKKyAgICB7CisgICAgICB2YXIgY2xvbmUgPSB7fTsK
IAorICAgICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeworICAgICAgICBjbG9uZVtrZXldID0g
c291cmNlW2tleV07CisgICAgICB9CiAKKyAgICAgIHJldHVybiBjbG9uZTsKKyAgICB9LAorCisK
ICAgICAvKioKLSAgICAgKiBJbnNlcnRzIGFsbCBrZXlzIG9mIHRoZSBzb3VyY2Ugb2JqZWN0IGlu
dG8gdGhlCi0gICAgICogdGFyZ2V0IG9iamVjdHMuIEF0dGVudGlvbjogVGhlIHRhcmdldCBtYXAg
Z2V0cyBtb2RpZmllZC4KKyAgICAgKiBJbnZlcnRzIGEgbWFwIGJ5IGV4Y2hhbmdpbmcgdGhlIGtl
eXMgd2l0aCB0aGUgdmFsdWVzLgogICAgICAqCi0gICAgICogVE9ETzogUmVuYW1lIHRvIHVwZGF0
ZSgpIGxpa2UgaW4gcHl0aG9uCisgICAgICogSWYgdGhlIG1hcCBoYXMgdGhlIHNhbWUgdmFsdWVz
IGZvciBkaWZmZXJlbnQga2V5cywgaW5mb3JtYXRpb24gd2lsbCBnZXQgbG9zdC4KKyAgICAgKiBU
aGUgdmFsdWVzIHdpbGwgYmUgY29udmVydGVkIHRvIHN0cmluZ3MgdXNpbmcgdGhlIHRvU3RyaW5n
IG1ldGhvcy4KICAgICAgKgotICAgICAqIEBwYXJhbSB0YXJnZXQge09iamVjdH0gdGFyZ2V0IG9i
amVjdAotICAgICAqIEBwYXJhbSBzb3VyY2Uge09iamVjdH0gb2JqZWN0IHRvIGJlIG1lcmdlZAot
ICAgICAqIEBwYXJhbSBvdmVyd3JpdGUge0Jvb2xlYW4gPyB0cnVlfSBJZiBlbmFibGVkIGV4aXN0
aW5nIGtleXMgd2lsbCBiZSBvdmVyd3JpdHRlbgotICAgICAqIEByZXR1cm4ge09iamVjdH0gVGFy
Z2V0IHdpdGggbWVyZ2VkIHZhbHVlcyBmcm9tIHRoZSBzb3VyY2Ugb2JqZWN0CisgICAgICogQHBh
cmFtIG1hcCB7T2JqZWN0fSBNYXAgdG8gaW52ZXJ0CisgICAgICogQHJldHVybiB7T2JqZWN0fSBp
bnZlcnRlZCBNYXAKICAgICAgKi8KLSAgICBtZXJnZVdpdGggOiBmdW5jdGlvbih0YXJnZXQsIHNv
dXJjZSwgb3ZlcndyaXRlKQorICAgIGludmVydCA6IGZ1bmN0aW9uKG1hcCkKICAgICB7Ci0gICAg
ICBpZiAob3ZlcndyaXRlID09PSB1bmRlZmluZWQpIHsKLSAgICAgICAgb3ZlcndyaXRlID0gdHJ1
ZTsKLSAgICAgIH0KKyAgICAgIHZhciByZXN1bHQgPSB7fTsKIAotICAgICAgZm9yICh2YXIga2V5
IGluIHNvdXJjZSkKLSAgICAgIHsKLSAgICAgICAgaWYgKG92ZXJ3cml0ZSB8fCB0YXJnZXRba2V5
XSA9PT0gdW5kZWZpbmVkKSB7Ci0gICAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsK
LSAgICAgICAgfQorICAgICAgZm9yICh2YXIga2V5IGluIG1hcCkgeworICAgICAgICByZXN1bHRb
bWFwW2tleV0udG9TdHJpbmcoKV0gPSBrZXk7CiAgICAgICB9CiAKLSAgICAgIHJldHVybiB0YXJn
ZXQ7CisgICAgICByZXR1cm4gcmVzdWx0OwogICAgIH0sCisgICAgCisgICAgCisgICAgLyoqCisg
ICAgICogR2V0IHRoZSBrZXkgb2YgdGhlIGdpdmVuIHZhbHVlIGZyb20gYSBtYXAuCisgICAgICog
SWYgdGhlIG1hcCBoYXMgbW9yZSB0aGFuIG9uZSBrZXkgbWF0Y2hpbmcgdGhlIHZhbHVlIHRoZSBm
aXN0IG1hdGNoIGlzIHJldHVybmVkLgorICAgICAqIElmIHRoZSBtYXAgZG9lcyBub3QgY29udGFp
biB0aGUgdmFsdWUgPGNvZGU+bnVsbDwvY29kZT4gaXMgcmV0dXJuZWQuCisgICAgICoKKyAgICAg
KiBAcGFyYW0gb2JqIHtPYmplY3R9IE1hcCB0byBzZWFyY2ggZm9yIHRoZSBrZXkKKyAgICAgKiBA
cGFyYW0gdmFsdWUge3Zhcn0gVmFsdWUgdG8gbG9vayBmb3IKKyAgICAgKiBAcmV0dXJuIHtTdHJp
bmd8bnVsbH0gTmFtZSBvZiB0aGUga2V5IChudWxsIGlmIG5vdCBmb3VuZCkuCisgICAgICovICAg
IAorICAgIGtleU9mIDogZnVuY3Rpb24ob2JqLCB2YWx1ZSkKKyAgICB7CisgIAkJZm9yICh2YXIg
a2V5IGluIG9iaikKKyAgCQl7CisgIAkJCWlmIChvYmouaGFzT3duUHJvcGVydHkoa2V5KSAmJiBv
Ympba2V5XSA9PT0gdmFsdWUpIHsKKyAgCQkJICByZXR1cm4ga2V5OworCQkJICB9IAorICAJCX0K
KyAgCQkKKyAgCQlyZXR1cm4gbnVsbDsgICAgCisgICAgfSwKKyAgICAKKyAgICAKKyAgICAvKioK
KyAgICAgKiBXaGV0aGVyIHRoZSBtYXAgY29udGFpbnMgdGhlIGdpdmVuIHZhbHVlLgorICAgICAq
CisgICAgICogQHBhcmFtIG9iaiB7T2JqZWN0fSBNYXAgdG8gc2VhcmNoIGZvciB0aGUgdmFsdWUK
KyAgICAgKiBAcGFyYW0gdmFsdWUge3Zhcn0gVmFsdWUgdG8gbG9vayBmb3IKKyAgICAgKiBAcmV0
dXJuIHtCb29sZWFufSBXaGV0aGVyIHRoZSB2YWx1ZSB3YXMgZm91bmQgaW4gdGhlIG1hcC4KKyAg
ICAgKi8KKyAgICBjb250YWlucyA6IGZ1bmN0aW9uKG9iaiwgdmFsdWUpIHsKKyAgICAgIHJldHVy
biB0aGlzLmtleU9mKG9iaiwgdmFsdWUpICE9PSBudWxsOworICAgIH0sCiAKIAogICAgIC8qKgot
ICAgICAqIEluc2VydHMgYWxsIGtleXMgb2YgdGhlIHNvdXJjZSBvYmplY3QgaW50byB0aGUKLSAg
ICAgKiB0YXJnZXQgb2JqZWN0cyBidXQgZG9uJ3Qgb3ZlcnJpZGUgZXhpc3Rpbmcga2V5cworICAg
ICAqIFNlbGVjdHMgdGhlIHZhbHVlIHdpdGggdGhlIGdpdmVuIGtleSBmcm9tIHRoZSBtYXAuCiAg
ICAgICoKLSAgICAgKiBAcGFyYW0gdGFyZ2V0IHtPYmplY3R9IHRhcmdldCBvYmplY3QKLSAgICAg
KiBAcGFyYW0gc291cmNlIHtPYmplY3R9IG9iamVjdCB0byBiZSBtZXJnZWQKLSAgICAgKiBAcmV0
dXJuIHtPYmplY3R9IHRhcmdldCB3aXRoIG1lcmdlZCB2YWx1ZXMgZnJvbSBzb3VyY2UKKyAgICAg
KiBAcGFyYW0ga2V5IHtTdHJpbmd9IG5hbWUgb2YgdGhlIGtleSB0byBnZXQgdGhlIHZhbHVlIGZy
b20KKyAgICAgKiBAcGFyYW0gbWFwIHtPYmplY3R9IG1hcCB0byBnZXQgdGhlIHZhbHVlIGZyb20K
KyAgICAgKiBAcmV0dXJuIHt2YXJ9IHZhbHVlIGZvciB0aGUgZ2l2ZW4ga2V5IGZyb20gdGhlIG1h
cAogICAgICAqLwotICAgIGNhcmVmdWxseU1lcmdlV2l0aCA6IGZ1bmN0aW9uKHRhcmdldCwgc291
cmNlKSB7Ci0gICAgICByZXR1cm4gcXgubGFuZy5PYmplY3QubWVyZ2VXaXRoKHRhcmdldCwgc291
cmNlLCBmYWxzZSk7CisgICAgc2VsZWN0OiBmdW5jdGlvbihrZXksIG1hcCkgeworICAgICAgcmV0
dXJuIG1hcFtrZXldOwogICAgIH0sCiAKKyAgCisgICAgCisgICAgCisgICAgCisgICAgCisgICAg
CisgICAgCisgICAgLyoKKyAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KKyAgICAgICBMRUdBQ1kgU0VD
VElPTgorICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQorICAgICovICAgICAgICAKIAogICAgIC8qKgot
ICAgICAqIE1lcmdlIGEgbnVtYmVyIG9mIG9iamVjdHMuCisgICAgICogQ29udmVydCBhbiBhcnJh
eSBpbnRvIGEgbWFwLgogICAgICAqCi0gICAgICogQHBhcmFtIHRhcmdldCB7T2JqZWN0fSB0YXJn
ZXQgb2JqZWN0Ci0gICAgICogQHBhcmFtIHZhcmFyZ3Mge09iamVjdH0gdmFyaWFibGUgbnVtYmVy
IG9mIG9iamVjdHMgdG8gbWVyZ2VkIHdpdGggdGFyZ2V0Ci0gICAgICogQHJldHVybiB7T2JqZWN0
fSB0YXJnZXQgd2l0aCBtZXJnZWQgdmFsdWVzIGZyb20gdGhlIG90aGVyIG9iamVjdHMKKyAgICAg
KiBBbGwgZWxlbWVudHMgb2YgdGhlIGFycmF5IGJlY29tZSBrZXlzIG9mIHRoZSByZXR1cm5lZCBt
YXAgYnkKKyAgICAgKiBjYWxsaW5nIDxjb2RlPnRvU3RyaW5nPC9jb2RlPiBvbiB0aGUgYXJyYXkg
ZWxlbWVudHMuIFRoZSB2YWx1ZXMgb2YgdGhlCisgICAgICogbWFwIGFyZSBzZXQgdG8gPGNvZGU+
dHJ1ZTwvY29kZT4KKyAgICAgKgorICAgICAqIEBkZXByZWNhdGVkIExlZ2FjeSBjb2RlIC0gdW51
c2VkIGluIHRoZSBmcmFtZXdvcmshCisgICAgICogQHBhcmFtIGFycmF5IHtBcnJheX0gYXJyYXkg
dG8gY29udmVydAorICAgICAqIEByZXR1cm4ge01hcH0gdGhlIGFycmF5IGNvbnZlcnRlZCB0byBh
IG1hcC4KICAgICAgKi8KLSAgICBtZXJnZSA6IGZ1bmN0aW9uKHRhcmdldCwgdmFyYXJncykKKyAg
ICBmcm9tQXJyYXk6IGZ1bmN0aW9uKGFycmF5KQogICAgIHsKLSAgICAgIHZhciBsZW4gPSBhcmd1
bWVudHMubGVuZ3RoOworICAgICAgaWYgKHF4LmNvcmUuVmFyaWFudC5pc1NldCgicXguZGVidWci
LCAib24iKSkgeworICAgICAgICBxeC5sb2cuTG9nZ2VyLmRlcHJlY2F0ZWRNZXRob2RXYXJuaW5n
KGFyZ3VtZW50cy5jYWxsZWUpOworICAgICAgfQorICAgICAgICAKKyAgICAgIHZhciBvYmogPSB7
fTsKIAotICAgICAgZm9yICh2YXIgaT0xOyBpPGxlbjsgaSsrKSB7Ci0gICAgICAgIHF4Lmxhbmcu
T2JqZWN0Lm1lcmdlV2l0aCh0YXJnZXQsIGFyZ3VtZW50c1tpXSk7CisgICAgICBmb3IgKHZhciBp
PTAsIGw9YXJyYXkubGVuZ3RoOyBpPGw7IGkrKykKKyAgICAgIHsKKyAgICAgICAgaWYgKHF4LmNv
cmUuVmFyaWFudC5pc1NldCgicXguZGVidWciLCAib24iKSkKKyAgICAgICAgeworICAgICAgICAg
IHN3aXRjaCh0eXBlb2YgYXJyYXlbaV0pCisgICAgICAgICAgeworICAgICAgICAgICAgY2FzZSAi
b2JqZWN0IjoKKyAgICAgICAgICAgIGNhc2UgImZ1bmN0aW9uIjoKKyAgICAgICAgICAgIGNhc2Ug
InVuZGVmaW5lZCI6CisgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiQ291bGQgbm90IGNv
bnZlcnQgY29tcGxleCBvYmplY3RzIGxpa2UgIiArIGFycmF5W2ldICsgIiBhdCBhcnJheSBpbmRl
eCAiICsgaSArICIgdG8gbWFwIHN5bnRheCIpOworICAgICAgICAgIH0KKyAgICAgICAgfQorCisg
ICAgICAgIG9ialthcnJheVtpXS50b1N0cmluZygpXSA9IHRydWU7CiAgICAgICB9CiAKLSAgICAg
IHJldHVybiB0YXJnZXQ7CisgICAgICByZXR1cm4gb2JqOwogICAgIH0sCisgICAgCisgICAgCisg
ICAgLyoqCisgICAgICogQ2hlY2sgd2hldGhlciB0aGUgbnVtYmVyIG9mIG9iamVjdHMgaW4gdGhl
IG1hcHMgaXMgYXQgbGVhc3QgImxlbmd0aCIKKyAgICAgKgorICAgICAqIEBkZXByZWNhdGVkIExl
Z2FjeSBjb2RlIC0gdW51c2VkIGluIHRoZSBmcmFtZXdvcmshCisgICAgICogQHBhcmFtIG1hcCB7
T2JqZWN0fSB0aGUgbWFwIHRvIGNoZWNrCisgICAgICogQHBhcmFtIGxlbmd0aCB7SW50ZWdlcn0g
bWluaW11bSBudW1iZXIgb2Ygb2JqZWN0cyBpbiB0aGUgbWFwCisgICAgICogQHJldHVybiB7Qm9v
bGVhbn0gd2hldGhlciB0aGUgbWFwIGNvbnRhaW5zIGF0IGxlYXN0ICJsZW5ndGgiIG9iamVjdHMu
CisgICAgICovCisgICAgaGFzTWluTGVuZ3RoIDogZnVuY3Rpb24obWFwLCBsZW5ndGgpCisgICAg
eworICAgICAgaWYgKHF4LmNvcmUuVmFyaWFudC5pc1NldCgicXguZGVidWciLCAib24iKSkgewor
ICAgICAgICBxeC5sb2cuTG9nZ2VyLmRlcHJlY2F0ZWRNZXRob2RXYXJuaW5nKGFyZ3VtZW50cy5j
YWxsZWUpOworICAgICAgfQorICAgICAgICAKKyAgICAgIHZhciBpID0gMDsKIAorICAgICAgZm9y
ICh2YXIga2V5IGluIG1hcCkKKyAgICAgIHsKKyAgICAgICAgaWYgKCgrK2kpID49IGxlbmd0aCkg
eworICAgICAgICAgIHJldHVybiB0cnVlOworICAgICAgICB9CisgICAgICB9CiAKKyAgICAgIHJl
dHVybiBmYWxzZTsKKyAgICB9LAorICAgIAorICAgIAogICAgIC8qKgotICAgICAqIFJldHVybiBh
IGNvcHkgb2YgYW4gT2JqZWN0CisgICAgICogR2V0IHRoZSBudW1iZXIgb2Ygb2JqZWN0cyBpbiB0
aGUgbWFwCiAgICAgICoKLSAgICAgKiBUT0RPOiBSZW5hbWUgdG8gY2xvbmUoKSBsaWtlIGluIHBy
b3RvdHlwZSBhbmQgcHl0aG9uCisgICAgICogQGRlcHJlY2F0ZWQgVXNlIHtAbGluayAjbGVufSBp
bnN0ZWFkCisgICAgICogQHBhcmFtIG1hcCB7T2JqZWN0fSB0aGUgbWFwCisgICAgICogQHJldHVy
biB7SW50ZWdlcn0gbnVtYmVyIG9mIG9iamVjdHMgaW4gdGhlIG1hcAorICAgICAqLworICAgIGdl
dExlbmd0aCA6IGZ1bmN0aW9uKG1hcCkgCisgICAgeworICAgICAgaWYgKHF4LmNvcmUuVmFyaWFu
dC5pc1NldCgicXguZGVidWciLCAib24iKSkgeworICAgICAgICBxeC5sb2cuTG9nZ2VyLmRlcHJl
Y2F0ZWRNZXRob2RXYXJuaW5nKGFyZ3VtZW50cy5jYWxsZWUsICJVc2UgbGVuKCkgaW5zdGVhZC4i
KTsKKyAgICAgIH0KKyAgICAgICAgICAgICAgCisgICAgICByZXR1cm4gdGhpcy5sZW4obWFwKTsK
KyAgICB9LCAgICAKKyAgICAKKyAgICAKKyAgICAvKioKKyAgICAgKiBHZXQgdGhlIGtleXMgb2Yg
YSBtYXAgYXMgYXJyYXkgYXMgcmV0dXJuZWQgYnkgYSAiZm9yIC4uLiBpbiIgc3RhdGVtZW50Lgog
ICAgICAqCi0gICAgICogQHBhcmFtIHNvdXJjZSB7T2JqZWN0fSBPYmplY3QgdG8gY29weQotICAg
ICAqIEByZXR1cm4ge09iamVjdH0gY29weSBvZiB2T2JqZWN0CisgICAgICogQGRlcHJlY2F0ZWQg
VXNlIHtAbGluayAja2V5c30gaW5zdGVhZAorICAgICAqIEBwYXJhbSBtYXAge09iamVjdH0gdGhl
IG1hcAorICAgICAqIEByZXR1cm4ge0FycmF5fSBhcnJheSBvZiB0aGUga2V5cyBvZiB0aGUgbWFw
CiAgICAgICovCi0gICAgY29weSA6IGZ1bmN0aW9uKHNvdXJjZSkKKyAgICBnZXRLZXlzIDogZnVu
Y3Rpb24obWFwKSAKICAgICB7Ci0gICAgICB2YXIgY2xvbmUgPSB7fTsKLQotICAgICAgZm9yICh2
YXIga2V5IGluIHNvdXJjZSkgewotICAgICAgICBjbG9uZVtrZXldID0gc291cmNlW2tleV07Cisg
ICAgICBpZiAocXguY29yZS5WYXJpYW50LmlzU2V0KCJxeC5kZWJ1ZyIsICJvbiIpKSB7CisgICAg
ICAgIHF4LmxvZy5Mb2dnZXIuZGVwcmVjYXRlZE1ldGhvZFdhcm5pbmcoYXJndW1lbnRzLmNhbGxl
ZSwgIlVzZSBrZXlzKCkgaW5zdGVhZC4iKTsKICAgICAgIH0KLQotICAgICAgcmV0dXJuIGNsb25l
OworICAgICAgCisgICAgICByZXR1cm4gdGhpcy5rZXlzKG1hcCk7CiAgICAgfSwKLQotCisgICAg
ICAgIAorICAgIAogICAgIC8qKgotICAgICAqIEludmVydHMgYSBNYXAgYnkgZXhjaGFuZ2luZyB0
aGUga2V5cyB3aXRoIHRoZSB2YWx1ZXMuCi0gICAgICogSWYgdGhlIG1hcCBoYXMgdGhlIHNhbWUg
dmFsdWVzIGZvciBkaWZmZXJlbnQga2V5cywgaW5mb3JtYXRpb24gd2lsbCBnZXQgbG9zdC4KLSAg
ICAgKiBUaGUgdmFsdWVzIHdpbGwgYmUgY29udmVydGVkIHRvIFN0cmluZ3MgdXNpbmcgdGhlIHRv
U3RyaW5nIG1ldGhvcy4KKyAgICAgKiBHZXQgdGhlIGtleXMgb2YgYSBtYXAgYXMgc3RyaW5nCiAg
ICAgICoKLSAgICAgKiBAcGFyYW0gbWFwIHtPYmplY3R9IE1hcCB0byBpbnZlcnQKLSAgICAgKiBA
cmV0dXJuIHtPYmplY3R9IGludmVydGVkIE1hcAorICAgICAqIEBkZXByZWNhdGVkIFVzZSB7QGxp
bmsgI2tleXNGb3JtYXR0ZWR9IGluc3RlYWQKKyAgICAgKiBAcGFyYW0gbWFwIHtPYmplY3R9IHRo
ZSBtYXAKKyAgICAgKiBAcmV0dXJuIHtTdHJpbmd9IFN0cmluZyBvZiB0aGUga2V5cyBvZiB0aGUg
bWFwCisgICAgICogICAgICAgICBUaGUga2V5cyBhcmUgc2VwYXJhdGVkIGJ5ICIsICIKICAgICAg
Ki8KLSAgICBpbnZlcnQgOiBmdW5jdGlvbihtYXApCisgICAgZ2V0S2V5c0FzU3RyaW5nIDogZnVu
Y3Rpb24obWFwKSAKICAgICB7Ci0gICAgICB2YXIgcmVzdWx0ID0ge307Ci0KLSAgICAgIGZvciAo
dmFyIGtleSBpbiBtYXApIHsKLSAgICAgICAgcmVzdWx0W21hcFtrZXldLnRvU3RyaW5nKCldID0g
a2V5OworICAgICAgaWYgKHF4LmNvcmUuVmFyaWFudC5pc1NldCgicXguZGVidWciLCAib24iKSkg
eworICAgICAgICBxeC5sb2cuTG9nZ2VyLmRlcHJlY2F0ZWRNZXRob2RXYXJuaW5nKGFyZ3VtZW50
cy5jYWxsZWUsICJVc2Uga2V5c0Zvcm1hdHRlZCgpIGluc3RlYWQuIik7CiAgICAgICB9Ci0KLSAg
ICAgIHJldHVybiByZXN1bHQ7CisgICAgICAgICAgICAKKyAgICAgIHJldHVybiB0aGlzLmtleXNG
b3JtYXR0ZWQobWFwKTsKICAgICB9LAorICAgICAgICAKKyAgICAKKyAgICAvKioKKyAgICAgKiBH
ZXQgdGhlIHZhbHVlcyBvZiBhIG1hcCBhcyBhcnJheQorICAgICAqCisgICAgICogQGRlcHJlY2F0
ZWQgVXNlIHtAbGluayAjdmFsdWVzfSBpbnN0ZWFkCisgICAgICogQHBhcmFtIG1hcCB7T2JqZWN0
fSB0aGUgbWFwCisgICAgICogQHJldHVybiB7QXJyYXl9IGFycmF5IG9mIHRoZSB2YWx1ZXMgb2Yg
dGhlIG1hcAorICAgICAqLyAgICAKKyAgICBnZXRWYWx1ZXMgOiBmdW5jdGlvbihtYXApIAorICAg
IHsKKyAgICAgIGlmIChxeC5jb3JlLlZhcmlhbnQuaXNTZXQoInF4LmRlYnVnIiwgIm9uIikpIHsK
KyAgICAgICAgcXgubG9nLkxvZ2dlci5kZXByZWNhdGVkTWV0aG9kV2FybmluZyhhcmd1bWVudHMu
Y2FsbGVlLCAiVXNlIHZhbHVlcygpIGluc3RlYWQuIik7CisgICAgICB9CisgICAgICAgICAgICAg
ICAKKyAgICAgIHJldHVybiB0aGlzLnZhbHVlcyhtYXApOworICAgIH0sICAgIAorICAgIAorICAg
IAorICAgIC8qKgorICAgICAqIFJldHVybiBhIGNsb25lIG9mIHRoZSBnaXZlbiBtYXAKKyAgICAg
KgorICAgICAqIEBkZXByZWNhdGVkIFVzZSB7QGxpbmsgI2Nsb25lfSBpbnN0ZWFkCisgICAgICog
QHBhcmFtIHNvdXJjZSB7T2JqZWN0fSBtYXAgdG8gY2xvbmUKKyAgICAgKiBAcmV0dXJuIHtPYmpl
Y3R9IHRoZSBjbG9uZQorICAgICAqLyAgICAKKyAgICBjb3B5IDogZnVuY3Rpb24oc291cmNlKSAK
KyAgICB7CisgICAgICBpZiAocXguY29yZS5WYXJpYW50LmlzU2V0KCJxeC5kZWJ1ZyIsICJvbiIp
KSB7CisgICAgICAgIHF4LmxvZy5Mb2dnZXIuZGVwcmVjYXRlZE1ldGhvZFdhcm5pbmcoYXJndW1l
bnRzLmNhbGxlZSwgIlVzZSBjbG9uZSgpIGluc3RlYWQuIik7CisgICAgICB9CisgICAgICAgICAg
ICAgICAKKyAgICAgIHJldHVybiB0aGlzLmNsb25lKHNvdXJjZSk7CisgICAgfSwKKyAgICAKIAot
CiAgICAgLyoqCiAgICAgICogR2V0IHRoZSBrZXkgb2YgdGhlIGdpdmVuIHZhbHVlIGZyb20gYSBt
YXAuCiAgICAgICogSWYgdGhlIG1hcCBoYXMgbW9yZSB0aGFuIG9uZSBrZXkgbWF0Y2hpbmcgdGhl
IHZhbHVlIHRoZSBmaXN0IG1hdGNoIGlzIHJldHVybmVkLgogICAgICAqIElmIHRoZSBtYXAgZG9l
cyBub3QgY29udGFpbiB0aGUgdmFsdWUgPGNvZGU+bnVsbDwvY29kZT4gaXMgcmV0dXJuZWQuCiAg
ICAgICoKKyAgICAgKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayAja2V5T2Z9IGluc3Rl
YWQKICAgICAgKiBAcGFyYW0gb2JqIHtPYmplY3R9IE1hcCB0byBzZWFyY2ggZm9yIHRoZSBrZXkK
ICAgICAgKiBAcGFyYW0gdmFsdWUge3Zhcn0gVmFsdWUgdG8gbG9vayBmb3IKICAgICAgKiBAcmV0
dXJuIHtTdHJpbmd8bnVsbH0gTmFtZSBvZiB0aGUga2V5IChudWxsIGlmIG5vdCBmb3VuZCkuCiAg
ICAgICovCi0gICAgZ2V0S2V5RnJvbVZhbHVlOiBmdW5jdGlvbihvYmosIHZhbHVlKQorICAgIGdl
dEtleUZyb21WYWx1ZTogZnVuY3Rpb24ob2JqLCB2YWx1ZSkgCiAgICAgewotICAgICAgZm9yICh2
YXIga2V5IGluIG9iaikKKyAgICAgIGlmIChxeC5jb3JlLlZhcmlhbnQuaXNTZXQoInF4LmRlYnVn
IiwgIm9uIikpIHsKKyAgICAgICAgcXgubG9nLkxvZ2dlci5kZXByZWNhdGVkTWV0aG9kV2Fybmlu
Zyhhcmd1bWVudHMuY2FsbGVlLCAiVXNlIGtleU9mKCkgaW5zdGVhZC4iKTsKKyAgICAgIH0KKyAg
ICAgICAgICAgICAgIAorICAgICAgcmV0dXJuIHRoaXMua2V5T2Yob2JqLCB2YWx1ZSk7CisgICAg
fSwKKyAgICAgICAgCisgICAgCisgICAgLyoqCisgICAgICogSW5zZXJ0cyBhbGwga2V5cyBvZiB0
aGUgc291cmNlIG9iamVjdCBpbnRvIHRoZQorICAgICAqIHRhcmdldCBvYmplY3RzLiBBdHRlbnRp
b246IFRoZSB0YXJnZXQgbWFwIGdldHMgbW9kaWZpZWQuCisgICAgICoKKyAgICAgKiBAZGVwcmVj
YXRlZCBMZWdhY3kgY29kZSAtIHVudXNlZCBpbiB0aGUgZnJhbWV3b3JrIQorICAgICAqIEBwYXJh
bSB0YXJnZXQge09iamVjdH0gdGFyZ2V0IG9iamVjdAorICAgICAqIEBwYXJhbSBzb3VyY2Uge09i
amVjdH0gb2JqZWN0IHRvIGJlIG1lcmdlZAorICAgICAqIEBwYXJhbSBvdmVyd3JpdGUge0Jvb2xl
YW4gPyB0cnVlfSBJZiBlbmFibGVkIGV4aXN0aW5nIGtleXMgd2lsbCBiZSBvdmVyd3JpdHRlbgor
ICAgICAqIEByZXR1cm4ge09iamVjdH0gVGFyZ2V0IHdpdGggbWVyZ2VkIHZhbHVlcyBmcm9tIHRo
ZSBzb3VyY2Ugb2JqZWN0CisgICAgICovCisgICAgbWVyZ2VXaXRoIDogZnVuY3Rpb24odGFyZ2V0
LCBzb3VyY2UsIG92ZXJ3cml0ZSkKKyAgICB7CisgICAgICBpZiAocXguY29yZS5WYXJpYW50Lmlz
U2V0KCJxeC5kZWJ1ZyIsICJvbiIpKSB7CisgICAgICAgIHF4LmxvZy5Mb2dnZXIuZGVwcmVjYXRl
ZE1ldGhvZFdhcm5pbmcoYXJndW1lbnRzLmNhbGxlZSk7CisgICAgICB9CisgICAgICAgICAgICAK
KyAgICAgIGlmIChvdmVyd3JpdGUgPT09IHVuZGVmaW5lZCkgeworICAgICAgICBvdmVyd3JpdGUg
PSB0cnVlOworICAgICAgfQorCisgICAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKQogICAgICAg
ewotICAgICAgICBpZiAob2JqW2tleV0gPT09IHZhbHVlKSB7Ci0gICAgICAgICAgcmV0dXJuIGtl
eTsKKyAgICAgICAgaWYgKG92ZXJ3cml0ZSB8fCB0YXJnZXRba2V5XSA9PT0gdW5kZWZpbmVkKSB7
CisgICAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsKICAgICAgICAgfQogICAgICAg
fQogCi0gICAgICByZXR1cm4gbnVsbDsKKyAgICAgIHJldHVybiB0YXJnZXQ7CiAgICAgfSwKIAog
CiAgICAgLyoqCi0gICAgKiBTZWxlY3RzIHRoZSB2YWx1ZSB3aXRoIHRoZSBnaXZlbiBrZXkgZnJv
bSB0aGUgbWFwLgotICAgICoKLSAgICAqIEBwYXJhbSBrZXkge1N0cmluZ30gbmFtZSBvZiB0aGUg
a2V5IHRvIGdldCB0aGUgdmFsdWUgZnJvbQotICAgICogQHBhcmFtIG1hcCB7T2JqZWN0fSBtYXAg
dG8gZ2V0IHRoZSB2YWx1ZSBmcm9tCi0gICAgKiBAcmV0dXJuIHt2YXJ9IHZhbHVlIGZvciB0aGUg
Z2l2ZW4ga2V5IGZyb20gdGhlIG1hcAotICAgICovCi0gICAgc2VsZWN0OiBmdW5jdGlvbihrZXks
IG1hcCkgewotICAgICAgcmV0dXJuIG1hcFtrZXldOworICAgICAqIEluc2VydHMgYWxsIGtleXMg
b2YgdGhlIHNvdXJjZSBvYmplY3QgaW50byB0aGUKKyAgICAgKiB0YXJnZXQgb2JqZWN0cyBidXQg
ZG9uJ3Qgb3ZlcnJpZGUgZXhpc3Rpbmcga2V5cworICAgICAqCisgICAgICogQGRlcHJlY2F0ZWQg
TGVnYWN5IGNvZGUgLSB1bnVzZWQgaW4gdGhlIGZyYW1ld29yayEKKyAgICAgKiBAcGFyYW0gdGFy
Z2V0IHtPYmplY3R9IHRhcmdldCBvYmplY3QKKyAgICAgKiBAcGFyYW0gc291cmNlIHtPYmplY3R9
IG9iamVjdCB0byBiZSBtZXJnZWQKKyAgICAgKiBAcmV0dXJuIHtPYmplY3R9IHRhcmdldCB3aXRo
IG1lcmdlZCB2YWx1ZXMgZnJvbSBzb3VyY2UKKyAgICAgKi8KKyAgICBjYXJlZnVsbHlNZXJnZVdp
dGggOiBmdW5jdGlvbih0YXJnZXQsIHNvdXJjZSkgCisgICAgeworICAgICAgaWYgKHF4LmNvcmUu
VmFyaWFudC5pc1NldCgicXguZGVidWciLCAib24iKSkgeworICAgICAgICBxeC5sb2cuTG9nZ2Vy
LmRlcHJlY2F0ZWRNZXRob2RXYXJuaW5nKGFyZ3VtZW50cy5jYWxsZWUpOworICAgICAgfQorICAg
ICAgCisgICAgICByZXR1cm4gcXgubGFuZy5PYmplY3QubWVyZ2VXaXRoKHRhcmdldCwgc291cmNl
LCBmYWxzZSk7CiAgICAgfSwKIAogCiAgICAgLyoqCi0gICAgKiBDb252ZXJ0IGFuIGFycmF5IGlu
dG8gYSBtYXAuCi0gICAgKgotICAgICogQWxsIGVsZW1lbnRzIG9mIHRoZSBhcnJheSBiZWNvbWUg
a2V5cyBvZiB0aGUgcmV0dXJuZWQgbWFwIGJ5Ci0gICAgKiBjYWxsaW5nICJ0b1N0cmluZyIgb24g
dGhlIGFycmF5IGVsZW1lbnRzLiBUaGUgdmFsdWVzIG9mIHRoZQotICAgICogbWFwIGFyZSBzZXQg
dG8gInRydWUiCi0gICAgKgotICAgICogQHBhcmFtIGFycmF5IHtBcnJheX0gYXJyYXkgdG8gY29u
dmVydAotICAgICogQHJldHVybiB7TWFwfSB0aGUgYXJyYXkgY29udmVydGVkIHRvIGEgbWFwLgot
ICAgICovCi0gICAgZnJvbUFycmF5OiBmdW5jdGlvbihhcnJheSkKKyAgICAgKiBNZXJnZSBhIG51
bWJlciBvZiBvYmplY3RzLgorICAgICAqCisgICAgICogQGRlcHJlY2F0ZWQgTGVnYWN5IGNvZGUg
LSB1bnVzZWQgaW4gdGhlIGZyYW1ld29yayEKKyAgICAgKiBAcGFyYW0gdGFyZ2V0IHtPYmplY3R9
IHRhcmdldCBvYmplY3QKKyAgICAgKiBAcGFyYW0gdmFyYXJncyB7T2JqZWN0fSB2YXJpYWJsZSBu
dW1iZXIgb2Ygb2JqZWN0cyB0byBtZXJnZWQgd2l0aCB0YXJnZXQKKyAgICAgKiBAcmV0dXJuIHtP
YmplY3R9IHRhcmdldCB3aXRoIG1lcmdlZCB2YWx1ZXMgZnJvbSB0aGUgb3RoZXIgb2JqZWN0cwor
ICAgICAqLworICAgIG1lcmdlIDogZnVuY3Rpb24odGFyZ2V0LCB2YXJhcmdzKQogICAgIHsKLSAg
ICAgIHZhciBvYmogPSB7fTsKKyAgICAgIGlmIChxeC5jb3JlLlZhcmlhbnQuaXNTZXQoInF4LmRl
YnVnIiwgIm9uIikpIHsKKyAgICAgICAgcXgubG9nLkxvZ2dlci5kZXByZWNhdGVkTWV0aG9kV2Fy
bmluZyhhcmd1bWVudHMuY2FsbGVlKTsKKyAgICAgIH0KKyAgICAgIAorICAgICAgdmFyIGxlbiA9
IGFyZ3VtZW50cy5sZW5ndGg7CiAKLSAgICAgIGZvciAodmFyIGk9MCwgbD1hcnJheS5sZW5ndGg7
IGk8bDsgaSsrKQotICAgICAgewotICAgICAgICBpZiAocXguY29yZS5WYXJpYW50LmlzU2V0KCJx
eC5kZWJ1ZyIsICJvbiIpKQotICAgICAgICB7Ci0gICAgICAgICAgc3dpdGNoKHR5cGVvZiBhcnJh
eVtpXSkKLSAgICAgICAgICB7Ci0gICAgICAgICAgICBjYXNlICJvYmplY3QiOgotICAgICAgICAg
ICAgY2FzZSAiZnVuY3Rpb24iOgotICAgICAgICAgICAgY2FzZSAidW5kZWZpbmVkIjoKLSAgICAg
ICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJDb3VsZCBub3QgY29udmVydCBjb21wbGV4IG9iamVj
dHMgbGlrZSAiICsgYXJyYXlbaV0gKyAiIGF0IGFycmF5IGluZGV4ICIrIGkgKyIgdG8gbWFwIHN5
bnRheCIpOwotICAgICAgICAgIH0KLSAgICAgICAgfQotCi0gICAgICAgIG9ialthcnJheVtpXS50
b1N0cmluZygpXSA9IHRydWU7CisgICAgICBmb3IgKHZhciBpPTE7IGk8bGVuOyBpKyspIHsKKyAg
ICAgICAgcXgubGFuZy5PYmplY3QubWVyZ2VXaXRoKHRhcmdldCwgYXJndW1lbnRzW2ldKTsKICAg
ICAgIH0KIAotICAgICAgcmV0dXJuIG9iajsKLSAgICB9CisgICAgICByZXR1cm4gdGFyZ2V0Owor
ICAgIH0gICAgCiAgIH0KIH0pOwo=
</data>

          </attachment>
          <attachment isobsolete="0" ispatch="1" isprivate="0" isurl="0">
            <attachid>423</attachid>
            <date>2009-01-09 10:20:00 +0100</date>
            <delta_ts>2009-01-09 10:20:49 +0100</delta_ts>
            <desc>Patch for qx.Class</desc>
            <filename>qx_lang_Class.js.patch</filename>
            <type>text/plain</type>
            <size>3531</size>
            <attacher>qooxdoo</attacher>
            
              <data encoding="base64">SW5kZXg6IGZyYW1ld29yay9zb3VyY2UvY2xhc3MvcXgvQ2xhc3MuanMNCj09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCi0t
LSBmcmFtZXdvcmsvc291cmNlL2NsYXNzL3F4L0NsYXNzLmpzCShyZXZpc2lvbiAxNzE3OSkNCisr
KyBmcmFtZXdvcmsvc291cmNlL2NsYXNzL3F4L0NsYXNzLmpzCSh3b3JraW5nIGNvcHkpDQpAQCAt
NDAxLDcgKzQwMSw3IEBADQogICAgICAgd2hpbGUgKGNsYXp6KQogICAgICAgewogICAgICAgICBp
ZiAoY2xhenouJCRwcm9wZXJ0aWVzKSB7Ci0gICAgICAgICAgbGlzdC5wdXNoLmFwcGx5KGxpc3Qs
IHF4LmxhbmcuT2JqZWN0LmdldEtleXMoY2xhenouJCRwcm9wZXJ0aWVzKSk7CisgICAgICAgICAg
bGlzdC5wdXNoLmFwcGx5KGxpc3QsIHF4LmxhbmcuT2JqZWN0LmtleXMoY2xhenouJCRwcm9wZXJ0
aWVzKSk7CiAgICAgICAgIH0KIAogICAgICAgICBjbGF6eiA9IGNsYXp6LnN1cGVyY2xhc3M7CkBA
IC05MjIsNiArOTIyLDE2IEBADQogICAgIH0pLAogCiAKKyAgICBfX3NoYWRvd2VkS2V5cyA6Cisg
ICAgWworICAgICAgImlzUHJvdG90eXBlT2YiLAorICAgICAgImhhc093blByb3BlcnR5IiwKKyAg
ICAgICJ0b0xvY2FsZVN0cmluZyIsCisgICAgICAidG9TdHJpbmciLAorICAgICAgInZhbHVlT2Yi
CisgICAgXSwKKyAgICAKKwogICAgIC8qKgogICAgICAqIENyZWF0ZXMgYSBjbGFzcyBieSB0eXBl
LiBTdXBwb3J0cyBtb2Rlcm4gaW5oZXJpdGFuY2UgZXRjLgogICAgICAqCkBAIC05NjAsMjYgKzk3
MCwzNiBAQA0KICAgICAgICAgLy8gQ29weSBzdGF0aWNzCiAgICAgICAgIGlmIChzdGF0aWNzKQog
ICAgICAgICB7Ci0gICAgICAgICAgdmFyIGtleTsKLQotICAgICAgICAgIGZvciAodmFyIGk9MCwg
YT1xeC5sYW5nLk9iamVjdC5nZXRLZXlzKHN0YXRpY3MpLCBsPWEubGVuZ3RoOyBpPGw7IGkrKykK
KyAgICAgICAgICB2YXIgdmFsdWUsIGtleTsKKyAgICAgICAgICB2YXIgYXNwZWN0cyA9IHF4LmNv
cmUuVmFyaWFudC5pc1NldCgicXguYXNwZWN0cyIsICJvbiIpOworICAgICAgICAgIAorICAgICAg
ICAgIGZvciAoa2V5IGluIHN0YXRpY3MpCiAgICAgICAgICAgewotICAgICAgICAgICAga2V5ID0g
YVtpXTsKLQotICAgICAgICAgICAgaWYgKHF4LmNvcmUuVmFyaWFudC5pc1NldCgicXguYXNwZWN0
cyIsICJvbiIpKQorICAgICAgICAgICAgdmFsdWUgPSBzdGF0aWNzW2tleV07CisgICAgICAgICAg
ICAKKyAgICAgICAgICAgIGlmIChhc3BlY3RzICYmIHZhbHVlIGluc3RhbmNlb2YgRnVuY3Rpb24p
IHsKKyAgICAgICAgICAgICAgdmFsdWUgPSBxeC5jb3JlLkFzcGVjdC53cmFwKG5hbWUgKyAiLiIg
KyBrZXksIHZhbHVlLCAic3RhdGljIik7CisgICAgICAgICAgICB9CisgICAgICAgICAgICAKKyAg
ICAgICAgICAgIGNsYXp6W2tleV0gPSB2YWx1ZTsKKyAgICAgICAgICB9CisgICAgICAgICAgCisg
ICAgICAgICAgaWYgKHF4LmNvcmUuVmFyaWFudC5pc1NldCgicXguY2xpZW50IiwgIm1zaHRtbCIp
KQorICAgICAgICAgIHsKKyAgICAgICAgICAgIHZhciBzaGFkb3cgPSB0aGlzLl9fc2hhZG93ZWRL
ZXlzOworICAgICAgICAgICAgZm9yIChrZXkgaW4gc2hhZG93KQogICAgICAgICAgICAgewotICAg
ICAgICAgICAgICB2YXIgc3RhdGljVmFsdWUgPSBzdGF0aWNzW2tleV07Ci0KLSAgICAgICAgICAg
ICAgaWYgKHN0YXRpY1ZhbHVlIGluc3RhbmNlb2YgRnVuY3Rpb24pIHsKLSAgICAgICAgICAgICAg
ICBzdGF0aWNWYWx1ZSA9IHF4LmNvcmUuQXNwZWN0LndyYXAobmFtZSArICIuIiArIGtleSwgc3Rh
dGljVmFsdWUsICJzdGF0aWMiKTsKKyAgICAgICAgICAgICAgaWYgKHN0YXRpY3MuaGFzT3duUHJv
cGVydHkoa2V5KSkgCisgICAgICAgICAgICAgIHsKKyAgICAgICAgICAgICAgICB2YWx1ZSA9IHN0
YXRpY3Nba2V5XTsKKyAgICAgICAgICAgICAgICAKKyAgICAgICAgICAgICAgICBpZiAoYXNwZWN0
cyAmJiB2YWx1ZSBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7CisgICAgICAgICAgICAgICAgICB2YWx1
ZSA9IHF4LmNvcmUuQXNwZWN0LndyYXAobmFtZSArICIuIiArIGtleSwgdmFsdWUsICJzdGF0aWMi
KTsKKyAgICAgICAgICAgICAgICB9CisgICAgICAgICAgICAgICAgCisgICAgICAgICAgICAgICAg
Y2xhenpba2V5XSA9IHZhbHVlOyAgICAgICAgICAgIAogICAgICAgICAgICAgICB9Ci0KLSAgICAg
ICAgICAgICAgY2xhenpba2V5XSA9IHN0YXRpY1ZhbHVlOwogICAgICAgICAgICAgfQotICAgICAg
ICAgICAgZWxzZQotICAgICAgICAgICAgewotICAgICAgICAgICAgICBjbGF6eltrZXldID0gc3Rh
dGljc1trZXldOwotICAgICAgICAgICAgfQogICAgICAgICAgIH0KICAgICAgICAgfQogICAgICAg
fQpAQCAtMTI2OSwxMSArMTI4OSwyNSBAQA0KICAgICBfX2FkZE1lbWJlcnMgOiBmdW5jdGlvbihj
bGF6eiwgbWVtYmVycywgcGF0Y2gsIGJhc2UsIHdyYXApCiAgICAgewogICAgICAgdmFyIHByb3Rv
ID0gY2xhenoucHJvdG90eXBlOworICAgICAgdmFyIGtleXMgPSBxeC5sYW5nLk9iamVjdC5rZXlz
KG1lbWJlcnMpOwogICAgICAgdmFyIGtleSwgbWVtYmVyOworICAgICAgCisgICAgICAvLyBJRSBk
b2VzIG5vdCByZXR1cm4gInNoYWRvd2VkIiBrZXlzIGV2ZW4gaWYgdGhleSBhcmUgZGVmaW5lZCBk
aXJlY3RseQorICAgICAgLy8gaW4gdGhlIG9iamVjdC4gVGhpcyBpcyBpbmNvbXBhdGlibGUgdG8g
dGhlIEVDTUEgc3RhbmRhcmQhCisgICAgICAvLyBUaGlzIGlzIHdoeSB0aGlzIGFkZGl0aW9uYWwg
bG9vcCBpcyBuZWVkZWQuCisgICAgICBpZiAocXguY29yZS5WYXJpYW50LmlzU2V0KCJxeC5jbGll
bnQiLCAibXNodG1sIikpCisgICAgICB7CisgICAgICAgIGZvciAodmFyIGk9MCwgc2hhZG93PXRo
aXMuX19zaGFkb3dlZEtleXMsIGw9c2hhZG93Lmxlbmd0aDsgaTxsOyBpKyspCisgICAgICAgIHsK
KyAgICAgICAgICBpZiAobWVtYmVycy5oYXNPd25Qcm9wZXJ0eShzaGFkb3dbaV0pKSB7CisgICAg
ICAgICAgICBrZXlzLnB1c2goc2hhZG93W2ldKTsKKyAgICAgICAgICB9CisgICAgICAgIH0gICAg
ICAKKyAgICAgIH0KIAotICAgICAgZm9yICh2YXIgaT0wLCBhPXF4LmxhbmcuT2JqZWN0LmdldEtl
eXMobWVtYmVycyksIGw9YS5sZW5ndGg7IGk8bDsgaSsrKQorICAgICAgZm9yICh2YXIgaT0wLCBs
PWtleXMubGVuZ3RoOyBpPGw7IGkrKykKICAgICAgIHsKLSAgICAgICAga2V5ID0gYVtpXTsKKyAg
ICAgICAga2V5ID0ga2V5c1tpXTsKICAgICAgICAgbWVtYmVyID0gbWVtYmVyc1trZXldOwogCiAg
ICAgICAgIGlmIChxeC5jb3JlLlZhcmlhbnQuaXNTZXQoInF4LmRlYnVnIiwgIm9uIikpCkBAIC0x
MzA1LDYgKzEzMzksNyBAQA0KICAgICAgICAgICAgIGlmIChwcm90b1trZXldKSB7CiAgICAgICAg
ICAgICAgIG1lbWJlci5iYXNlID0gcHJvdG9ba2V5XTsKICAgICAgICAgICAgIH0KKyAgICAgICAg
ICAgIAogICAgICAgICAgICAgbWVtYmVyLnNlbGYgPSBjbGF6ejsKICAgICAgICAgICB9CiAK
</data>

          </attachment>
      

    </bug>