<bug>
          <bug_id>178</bug_id>
          
          <creation_ts>2006-09-27 11:33:00 +0200</creation_ts>
          <short_desc>destroy and destroyContent for qx.ui.tree</short_desc>
          <delta_ts>2007-07-09 10:11:26 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>framework</product>
          <component>desktop</component>
          <version>master</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>FIXED</resolution>
          
          
          
          
          
          <priority>P3</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>0.6.2</target_milestone>
          
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Dietrich Streifert">dietrich.streifert</reporter>
          <assigned_to name="Unassigned">none</assigned_to>
          
          <qa_contact name="qooxdoo bugs mailing list">qooxdoo-bugs</qa_contact>
          <cf_browser>---</cf_browser>
          

      

      

      

          <long_desc isprivate="0">
            <commentid>483</commentid>
            <who name="Dietrich Streifert">dietrich.streifert</who>
            <bug_when>2006-09-27 11:33:04 +0200</bug_when>
            <thetext>This patch adds methods 

1) destroy to qx.ui.tree.AbstractTreeElement which deselects, disconnects, removes and disposes the  current tree element and its content.

2) destroyContent to qx.ui.tree.TreeFolder which deselects, disconnects, removes and disposes the content of the folder and its subfolders.


A testcase Table_7.html for frontend/demo/build/html/test is also attached which demonstrates the usage of the new methods.</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>484</commentid>
              <attachid>45</attachid>
            <who name="Dietrich Streifert">dietrich.streifert</who>
            <bug_when>2006-09-27 11:33:57 +0200</bug_when>
            <thetext>Created attachment 45
patch against rev 4353</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>485</commentid>
              <attachid>46</attachid>
            <who name="Dietrich Streifert">dietrich.streifert</who>
            <bug_when>2006-09-27 11:34:56 +0200</bug_when>
            <thetext>Created attachment 46
Testcase for new methods destroy and destroyContent</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>486</commentid>
            <who name="Derrell Lipman">derrell.lipman</who>
            <bug_when>2006-09-28 04:03:53 +0200</bug_when>
            <thetext>This looks like very useful additional functionality, and I&#39;d like to add it both to Tree and TreeFullControl.  Before I do, though, it&#39;s a bit unclear from the short documentation comment on the two functions, when one would use each, and in fact, one calls the other.  Would you please elaborate on the documentation comments to make it very clear when each is used and submit a new patch.  I&#39;ll then check it in.

Thanks!

Derrelll</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>487</commentid>
            <who name="Dietrich Streifert">dietrich.streifert</who>
            <bug_when>2006-09-28 07:52:13 +0200</bug_when>
            <thetext>OK I&#39;ll put additional comments to the methods.

destroyContent: destroy the current items subitems (and the subitems of each subitem)  going top down the TreeFolder hierarchy. The current item is left as is.

destroy: destroy the current item (TreeFile or TreeFolder) and all its subitems. The destruction of the subitems is done by calling destroyContent. This is done if the subitem has the method destroyContent which is true if the subitem is a TreeFolder. The method destroy Content is defined in the TreeFolder class.

</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>488</commentid>
              <attachid>47</attachid>
            <who name="Dietrich Streifert">dietrich.streifert</who>
            <bug_when>2006-09-28 09:00:56 +0200</bug_when>
            <thetext>Created attachment 47
Patch against rev 4355

Patch with lots of comments and documentation. Additionally eliminated a endless recursion bug because TreeFolder.getItems retrieves an array containing the calling TreeFolder itself.</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>489</commentid>
              <attachid>48</attachid>
            <who name="Dietrich Streifert">dietrich.streifert</who>
            <bug_when>2006-09-28 09:03:04 +0200</bug_when>
            <thetext>Created attachment 48
Testcase for destroy and destroyContent methods for qx.ui.tree

Modiefied the testcase so the action buttons to the right reflect the new method names instead of remove.</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>498</commentid>
            <who name="Derrell Lipman">derrell.lipman</who>
            <bug_when>2006-09-28 20:08:38 +0200</bug_when>
            <thetext>Comments are much more meaningful now.  Thanks!

I was playing with Tree_7, and noticed that if I select the Root and click Remove Selected Item, the whole tree goes away (background and all -- possibly the expected result) but not any of the references to it (e.g. clicking on Create Items causes errors in the console.  The question is, should the code disallow removing the selected item if it&#39;s the Root?  If not, I expect an event should be generated to notify any listeners that the tree was entirely destroyed.

Thoughts?

Derrell
</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>505</commentid>
            <who name="Dietrich Streifert">dietrich.streifert</who>
            <bug_when>2006-09-29 08:24:39 +0200</bug_when>
            <thetext>(In reply to comment #7)

&gt; The question is, should the code
&gt; disallow removing the selected item if it&#39;s the Root?  If not, I expect an
&gt; event should be generated to notify any listeners that the tree was entirely
&gt; destroyed.
&gt; 

I don&#39;t think it is necessary to do additional actions on qx.ui.tree.Tree destruction. It is  the same as if someone calls the dispose method of the tree.

In the example Tree_7.html the call to dispose can simply catch the case that the current selected item is the tree root by doing a test like if(!(item instanceof qx.ui.tree.Tree)).

Do not restrict the user by disallowing the destruction of the tree root. If the destruction is not wanted you simply don&#39;t do it. If the user destroys the root then he is also responsible for correcting the references hold by the other widgets.

If desired I can modify the testase so root destruction is not allowed.

But it is a testcase! Why not show the user what happens if the root is destructed?


</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>506</commentid>
            <who name="Dietrich Streifert">dietrich.streifert</who>
            <bug_when>2006-09-29 08:38:02 +0200</bug_when>
            <thetext>I think the first step would be to have this methods at all. Before this I&#39;ve seen some messages (including mine) on how a correct tree deletion can be done and how hard it is to keep track of the selection stuff. Simple things can now be done like refreshing the tree from a given TreeFolder by calling first TreeFolder.destroyContent and rebuilding the contents (doing a refresh on a file folder as in windows explorer).

After having this methods we can think about implementing events like beforeDestroy and destroy but for the most cases I think this events are not necessary.  

But lets wait for user response and requirements and implement events then if necessary.</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>512</commentid>
            <who name="Derrell Lipman">derrell.lipman</who>
            <bug_when>2006-09-29 20:01:14 +0200</bug_when>
            <thetext>Dietrich, I&#39;ve checked in your patch.  Thanks!

I think it might not be doing quite everything that needs to be done.  I notice that an error is displayed in the debug console when issuing the following sequence of commands in Tree_7.html:

- Create Items
- expand Desktop (+)
- Remove All Items
- Create Items
- expand Desktop (+)

</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>513</commentid>
            <who name="Dietrich Streifert">dietrich.streifert</who>
            <bug_when>2006-10-02 09:44:26 +0200</bug_when>
            <thetext>(In reply to comment #10)
&gt; Dietrich, I&#39;ve checked in your patch.  Thanks!
&gt; 
&gt; I think it might not be doing quite everything that needs to be done.  I notice
&gt; that an error is displayed in the debug console when issuing the following
&gt; sequence of commands in Tree_7.html:
&gt; 
&gt; - Create Items
&gt; - expand Desktop (+)
&gt; - Remove All Items
&gt; - Create Items

It was a copy and paste bug :-(

A patch is attached which also changes Tree_7.html to reflect the the method names in the button names and avoids deleting the tree root.

&gt; - expand Desktop (+)
&gt; 

</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>514</commentid>
              <attachid>51</attachid>
            <who name="Dietrich Streifert">dietrich.streifert</who>
            <bug_when>2006-10-02 09:50:50 +0200</bug_when>
            <thetext>Created attachment 51
patch against revision 4371

Removes a copy and paste bug which lead to a non deselected item so that the selection managers internal selected items did not reflect the modified tree structure.

Also modfies the Tree_7.html demo so the button names to the right have names which correspond to the names of the new methods.</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>518</commentid>
            <who name="Derrell Lipman">derrell.lipman</who>
            <bug_when>2006-10-02 15:54:33 +0200</bug_when>
            <thetext>Thanks.  Works great!  Checked-in.
</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>1896</commentid>
            <who name="Dietrich Streifert">dietrich.streifert</who>
            <bug_when>2007-07-09 10:11:26 +0200</bug_when>
            <thetext>Closed.</thetext>
          </long_desc>
      
          <attachment isobsolete="1" ispatch="1" isprivate="0" isurl="0">
            <attachid>45</attachid>
            <date>2006-09-27 11:33:00 +0200</date>
            <delta_ts>2006-09-28 09:00:56 +0200</delta_ts>
            <desc>patch against rev 4353</desc>
            <filename>TreeDestroy.diff</filename>
            <type>text/plain</type>
            <size>2826</size>
            <attacher>dietrich.streifert</attacher>
            
              <data encoding="base64">SW5kZXg6IHFvb3hkb28vZnJvbnRlbmQvZnJhbWV3b3JrL3NvdXJjZS9jbGFzcy9xeC91aS90cmVl
L1RyZWVGb2xkZXIuanMKPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PQotLS0gcW9veGRvby9mcm9udGVuZC9mcmFtZXdvcmsv
c291cmNlL2NsYXNzL3F4L3VpL3RyZWUvVHJlZUZvbGRlci5qcwkocmV2aXNpb24gNDM1MykKKysr
IHFvb3hkb28vZnJvbnRlbmQvZnJhbWV3b3JrL3NvdXJjZS9jbGFzcy9xeC91aS90cmVlL1RyZWVG
b2xkZXIuanMJKHdvcmtpbmcgY29weSkKQEAgLTMwNSwxMiArMzA1LDY0IEBACiAgIHJldHVybiBh
OwogfQogCisvKioKKyAqIDxwPmRlc2VsZWN0cywgZGlzY29ubmVjdHMsIHJlbW92ZXMgYW5kIGRp
c3Bvc2VzIHRoZSAKKyAqICAgIGNvbnRlbnQgb2YgdGhlIGZvbGRlciBhbmQgaXRzIHN1YmZvbGRl
cnMuICAgCisgKiA8L3A+CisgKiAKKyAqLworcXguUHJvdG8uZGVzdHJveUNvbnRlbnQgPSBmdW5j
dGlvbigpIHsKKyAgaWYodGhpcy5oYXNDb250ZW50KCkpIHsKKyAgCisgIAl2YXIgbWFuYWdlciA9
IHRoaXMuZ2V0VHJlZSgpLmdldE1hbmFnZXIoKTsKKyAgCQorCQl2YXIgbGVhZEl0ZW07CisJCXZh
ciBhbmNob3JJdGVtOworICAJaWYobWFuYWdlcikgeworICAJICBsZWFkSXRlbSA9IG1hbmFnZXIu
Z2V0TGVhZEl0ZW0oKTsKKyAgCSAgYW5jaG9ySXRlbSA9IG1hbmFnZXIuZ2V0QW5jaG9ySXRlbSgp
OworICAJfQorICAJCisgICAgdmFyIGl0ZW1zID0gdGhpcy5nZXRJdGVtcygpOworICAgIHZhciBp
dGVtOworICAgIAorICAgIGZvcih2YXIgaT1pdGVtcy5sZW5ndGgtMTtpPj0wOy0taSkgeworICAg
ICAgaXRlbSA9IGl0ZW1zW2ldOwogCisgICAgICBpZihtYW5hZ2VyKSB7CisgIAkJCWlmKGxlYWRJ
dGVtID09IGl0ZW0pIHsKKyAgCQkJCW1hbmFnZXIuc2V0TGVhZEl0ZW0obnVsbCk7CisgIAkJCX0K
KyAgCQkJaWYoYW5jaG9ySXRlbSA9PSBpdGVtKSB7CisgIAkJCQltYW5hZ2VyLnNldEFuY2hvckl0
ZW0obnVsbCk7CisgIAkJCX0KKyAgCisgIAkJCWlmKG1hbmFnZXIuZ2V0SXRlbVNlbGVjdGVkKHRo
aXMpKSB7CisgIAkJCQlpZihtYW5hZ2VyLmdldE11bHRpU2VsZWN0aW9uKCkpIHsKKyAgCQkJCQlt
YW5hZ2VyLnNldEl0ZW1TZWxlY3RlZCh0aGlzLGZhbHNlKTsKKyAgCQkJCX0KKyAgCQkJCWVsc2Ug
eworICAJCQkJCW1hbmFnZXIuZGVzZWxlY3RBbGwoKTsKKyAgCQkJCX0KKyAgCQkJfQorICAJCQkK
KyAgICAgICAgaWYgKGl0ZW0uZGVzdHJveUNvbnRlbnQpIHsKKyAgICAgICAgICBpdGVtLmRlc3Ry
b3lDb250ZW50KCk7CisgIAkJCX0KKyAgICAgIH0KKyAgICAgIAorICAgICAgaXRlbS5kaXNjb25u
ZWN0KCk7CisgICAgICB0aGlzLnJlbW92ZShpdGVtKTsKKyAgICAgIGl0ZW0uZGlzcG9zZSgpOwor
ICAgIH0KKyAgfQorfQogCiAKIAogCiAKKwogLyoKIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICBNT0RJ
RklFUgpJbmRleDogcW9veGRvby9mcm9udGVuZC9mcmFtZXdvcmsvc291cmNlL2NsYXNzL3F4L3Vp
L3RyZWUvQWJzdHJhY3RUcmVlRWxlbWVudC5qcwo9PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci0tLSBxb294ZG9vL2Zyb250
ZW5kL2ZyYW1ld29yay9zb3VyY2UvY2xhc3MvcXgvdWkvdHJlZS9BYnN0cmFjdFRyZWVFbGVtZW50
LmpzCShyZXZpc2lvbiA0MzUzKQorKysgcW9veGRvby9mcm9udGVuZC9mcmFtZXdvcmsvc291cmNl
L2NsYXNzL3F4L3VpL3RyZWUvQWJzdHJhY3RUcmVlRWxlbWVudC5qcwkod29ya2luZyBjb3B5KQpA
QCAtMjExLDExICsyMTEsNTAgQEAKICAgcmV0dXJuIHRoaXMuX2xhYmVsT2JqZWN0OwogfQogCisv
KioKKyAqIDxwPmRlc2VsZWN0cywgZGlzY29ubmVjdHMsIHJlbW92ZXMgYW5kIGRpc3Bvc2VzIHRo
ZSAKKyAqICAgIGN1cnJlbnQgdHJlZSBlbGVtZW50IGFuZCBpdHMgY29udGVudC4gICAKKyAqIDwv
cD4KKyAqIAorICovCitxeC5Qcm90by5kZXN0cm95ID0gZnVuY3Rpb24oKSB7CisJdmFyIG1hbmFn
ZXIgPSB0aGlzLmdldFRyZWUoKS5nZXRNYW5hZ2VyKCk7CisJaWYobWFuYWdlcikgeworCQlpZiht
YW5hZ2VyLmdldEl0ZW1TZWxlY3RlZCh0aGlzKSkgeworCQkJaWYobWFuYWdlci5nZXRNdWx0aVNl
bGVjdGlvbigpKSB7CisJCQkJbWFuYWdlci5zZXRJdGVtU2VsZWN0ZWQodGhpcyxmYWxzZSk7CisJ
CQl9CisJCQllbHNlIHsKKwkJCQltYW5hZ2VyLmRlc2VsZWN0QWxsKCk7CisJCQl9CisJCX0KKwkJ
CisJCWlmKG1hbmFnZXIuZ2V0TGVhZEl0ZW0oKSA9PSB0aGlzKSB7CisJCQltYW5hZ2VyLnNldExl
YWRJdGVtKG51bGwpOworCQl9CisJCWlmKG1hbmFnZXIuZ2V0QW5jaG9ySXRlbSgpID09IHRoaXMp
IHsKKwkJCW1hbmFnZXIuc2V0QW5jaG9ySXRlbShudWxsKTsKKwkJfQorCX0KKwkKKwlpZih0aGlz
LmRlc3Ryb3lDb250ZW50KSB7CisJCXRoaXMuZGVzdHJveUNvbnRlbnQoKTsKKwl9CisJCQkKKyAg
dGhpcy5kaXNjb25uZWN0KCk7CisgIAorCXZhciBwYXJlbnRGb2xkZXIgPSB0aGlzLmdldFBhcmVu
dEZvbGRlcigpOworICBpZihwYXJlbnRGb2xkZXIpIHsKKyAgCXBhcmVudEZvbGRlci5yZW1vdmUo
dGhpcyk7CisgIH0KIAorICB0aGlzLmRpc3Bvc2UoKTsKK30gIAogCiAKIAogCisKIC8qCiAtLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0KICAgUVVFVUUgSEFORExJTkcK
</data>

          </attachment>
          <attachment isobsolete="1" ispatch="0" isprivate="0" isurl="0">
            <attachid>46</attachid>
            <date>2006-09-27 11:34:00 +0200</date>
            <delta_ts>2006-09-28 09:03:04 +0200</delta_ts>
            <desc>Testcase for new methods destroy and destroyContent</desc>
            <filename>Tree_7.html</filename>
            <type>text/html</type>
            <size>5068</size>
            <attacher>dietrich.streifert</attacher>
            
              <data encoding="base64">PGh0bWw+CjxoZWFkPgogIDxtZXRhIGh0dHAtZXF1aXY9IkNvbnRlbnQtVHlwZSIgY29udGVudD0i
dGV4dC9odG1sOyBjaGFyc2V0PXV0Zi04IiAvPgogIDx0aXRsZT5xb294ZG9vICZyYXF1bzsgRGVt
bzwvdGl0bGU+CiAgPGxpbmsgdHlwZT0idGV4dC9jc3MiIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0i
Li4vLi4vcmVzb3VyY2UvY3NzL2xheW91dC5jc3MiLz4KICA8IS0tW2lmIElFXT4KICA8bGluayB0
eXBlPSJ0ZXh0L2NzcyIgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSIuLi8uLi9yZXNvdXJjZS9jc3Mv
bGF5b3V0X2llLmNzcyIvPgogIDwhW2VuZGlmXS0tPgogIDxzY3JpcHQgdHlwZT0idGV4dC9qYXZh
c2NyaXB0IiBzcmM9Ii4uLy4uL3NjcmlwdC9xeC5qcyI+PC9zY3JpcHQ+CjwvaGVhZD4KPGJvZHk+
CiAgPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIHNyYz0iLi4vLi4vc2NyaXB0L2xheW91
dC5qcyI+PC9zY3JpcHQ+CgogIDxkaXYgaWQ9ImRlbW9EZXNjcmlwdGlvbiI+CiAgICA8cD5Ucnlp
bmcgZHluYW1pYyBGb2xkZXIgYW5kIEZpbGUgY3JlYXRpb24gYW5kIGRlbGV0aW9uLjwvcD4KICA8
L2Rpdj4KCiAgPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPgoKCSAgZnVuY3Rpb24gY3Jl
YXRlSXRlbXMgKHQpIHsNCiAgICAgIHZhciB0ZTEgPSBuZXcgcXgudWkudHJlZS5UcmVlRm9sZGVy
KCJEZXNrdG9wIik7DQogICAgICB0LmFkZCh0ZTEpOw0KDQogICAgICBkZXNrdG9wID0gdGUxOw0K
DQogICAgICB2YXIgdGUxXzEgPSBuZXcgcXgudWkudHJlZS5UcmVlRm9sZGVyKCJGaWxlcyIpOw0K
ICAgICAgdmFyIHRlMV8yID0gbmV3IHF4LnVpLnRyZWUuVHJlZUZvbGRlcigiV29ya3NwYWNlIik7
DQogICAgICB2YXIgdGUxXzMgPSBuZXcgcXgudWkudHJlZS5UcmVlRm9sZGVyKCJOZXR3b3JrIik7
DQogICAgICB2YXIgdGUxXzQgPSBuZXcgcXgudWkudHJlZS5UcmVlRm9sZGVyKCJUcmFzaCIpOw0K
DQogICAgICB0ZTEuYWRkKHRlMV8xLCB0ZTFfMiwgdGUxXzMsIHRlMV80KTsNCg0KDQogICAgICB2
YXIgdGUxXzJfMSA9IG5ldyBxeC51aS50cmVlLlRyZWVGaWxlKCJXaW5kb3dzIChDOikiKTsNCiAg
ICAgIHZhciB0ZTFfMl8yID0gbmV3IHF4LnVpLnRyZWUuVHJlZUZpbGUoIkRvY3VtZW50cyAoRDop
Iik7DQoNCiAgICAgIHRlMV8yLmFkZCh0ZTFfMl8xLCB0ZTFfMl8yKTsNCg0KICAgICAgYXJiZWl0
c3BsYXR6ID0gdGUxXzI7DQoNCg0KICAgICAgdmFyIHRlMiA9IG5ldyBxeC51aS50cmVlLlRyZWVG
b2xkZXIoIkluYm94Iik7DQogICAgICBwb3N0ZWluZ2FuZyA9IHRlMjsNCg0KICAgICAgdmFyIHRl
Ml8xID0gbmV3IHF4LnVpLnRyZWUuVHJlZUZvbGRlcigiUHJlc2V0cyIpOw0KICAgICAgdmFyIHRl
Ml8yID0gbmV3IHF4LnVpLnRyZWUuVHJlZUZvbGRlcigiU2VudCIpOw0KICAgICAgdmFyIHRlMl8z
ID0gbmV3IHF4LnVpLnRyZWUuVHJlZUZvbGRlcigiVHJhc2giKTsNCiAgICAgIHZhciB0ZTJfNCA9
IG5ldyBxeC51aS50cmVlLlRyZWVGb2xkZXIoIkRhdGEiKTsNCiAgICAgIHZhciB0ZTJfNSA9IG5l
dyBxeC51aS50cmVlLlRyZWVGb2xkZXIoIkVkaXQiKTsNCg0KICAgICAgdC5hZGQodGUyKTsNCgkg
CX0NCg0KICAgIHF4LmNvcmUuSW5pdC5nZXRJbnN0YW5jZSgpLmRlZmluZU1haW4oZnVuY3Rpb24o
KQogICAgewogICAgICB2YXIgdCA9IG5ldyBxeC51aS50cmVlLlRyZWUoIlJvb3QiKTsKCiAgICAg
IHdpdGgodCkKICAgICAgewogICAgICAgIHNldEJhY2tncm91bmRDb2xvcigyNTUpOwogICAgICAg
IHNldEJvcmRlcihxeC5yZW5kZXJlci5ib3JkZXIuQm9yZGVyUHJlc2V0cy5nZXRJbnN0YW5jZSgp
Lmluc2V0KTsKICAgICAgICBzZXRPdmVyZmxvdygic2Nyb2xsWSIpOwoKICAgICAgICBzZXRIZWln
aHQobnVsbCk7CiAgICAgICAgc2V0VG9wKDQ4KTsKICAgICAgICBzZXRMZWZ0KDIwKTsKICAgICAg
ICBzZXRXaWR0aCgyMDApOwogICAgICAgIHNldEJvdHRvbSg0OCk7CiAgICAgIH07CgogICAgICBx
eC51aS5jb3JlLkNsaWVudERvY3VtZW50LmdldEluc3RhbmNlKCkuYWRkKHQpOwogICAgICAKCgog
ICAgICB2YXIgY29tbWFuZEZyYW1lID0gbmV3IHF4LnVpLmdyb3VwYm94Lkdyb3VwQm94KCJDb250
cm9sIik7CgogICAgICB3aXRoKGNvbW1hbmRGcmFtZSkKICAgICAgewogICAgICAgIHNldFRvcCg0
OCk7CiAgICAgICAgc2V0TGVmdCgyNTApOwoKICAgICAgICBzZXRXaWR0aCgiYXV0byIpOwogICAg
ICAgIHNldEhlaWdodCgiYXV0byIpOwogICAgICB9OwoKICAgICAgcXgudWkuY29yZS5DbGllbnRE
b2N1bWVudC5nZXRJbnN0YW5jZSgpLmFkZChjb21tYW5kRnJhbWUpOwoKCgoKICAgICAgdmFyIHRD
dXJyZW50TGFiZWwgPSBuZXcgcXgudWkuYmFzaWMuQXRvbSgiQ3VycmVudCBGb2xkZXI6ICIpOwoK
ICAgICAgd2l0aCh0Q3VycmVudExhYmVsKQogICAgICB7CiAgICAgICAgc2V0TGVmdCgwKTsKICAg
ICAgICBzZXRUb3AoMCk7CiAgICAgIH07CgogICAgICBjb21tYW5kRnJhbWUuYWRkKHRDdXJyZW50
TGFiZWwpOwoKCgogICAgICB2YXIgdEN1cnJlbnRJbnB1dCA9IG5ldyBxeC51aS5mb3JtLlRleHRG
aWVsZDsKCiAgICAgIHdpdGgodEN1cnJlbnRJbnB1dCkKICAgICAgewogICAgICAgIHNldExlZnQo
MCk7CiAgICAgICAgc2V0UmlnaHQoMCk7CiAgICAgICAgc2V0VG9wKDIwKTsKCiAgICAgICAgc2V0
UmVhZE9ubHkodHJ1ZSk7CiAgICAgIH07CgogICAgICBjb21tYW5kRnJhbWUuYWRkKHRDdXJyZW50
SW5wdXQpOwoKICAgICAgdC5nZXRNYW5hZ2VyKCkuYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlU2Vs
ZWN0aW9uIiwgZnVuY3Rpb24oZSkgew0KICAgICAgCWlmKGUuZ2V0RGF0YSgpWzBdKSB7CiAgICAg
ICAgCXRDdXJyZW50SW5wdXQuc2V0VmFsdWUoZS5nZXREYXRhKClbMF0uX2xhYmVsT2JqZWN0Lmdl
dEh0bWwoKSk7CiAgICAgICAgCXRoaXMuZGVidWcoJ2NsYXNzbmFtZTogJyArIGUuZ2V0RGF0YSgp
WzBdLmNsYXNzbmFtZSk7CiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgCXRDdXJy
ZW50SW5wdXQuc2V0VmFsdWUoJycpOw0KICAgICAgICB9CiAgICAgIH0pOwoKCgogICAgICB2YXIg
dERvdWJsZUNsaWNrID0gbmV3IHF4LnVpLmZvcm0uQ2hlY2tCb3goIlVzZSBkb3VibGUgY2xpY2s/
Iik7CgogICAgICB3aXRoKHREb3VibGVDbGljaykgewogICAgICAgIHNldFRvcCg2MCk7CiAgICAg
ICAgc2V0TGVmdCgwKTsKICAgICAgfTsKCiAgICAgIGNvbW1hbmRGcmFtZS5hZGQodERvdWJsZUNs
aWNrKTsKCiAgICAgIHREb3VibGVDbGljay5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2VDaGVja2Vk
IiwgZnVuY3Rpb24oZSkgeyB0LnNldFVzZURvdWJsZUNsaWNrKGUuZ2V0RGF0YSgpKTsgfSk7CgoK
CiAgICAgIHZhciB0VHJlZUxpbmVzID0gbmV3IHF4LnVpLmZvcm0uQ2hlY2tCb3goIlVzZSB0cmVl
IGxpbmVzPyIpOwoKICAgICAgd2l0aCh0VHJlZUxpbmVzKSB7CiAgICAgICAgc2V0VG9wKDgwKTsK
ICAgICAgICBzZXRMZWZ0KDApOwogICAgICAgIHNldENoZWNrZWQodHJ1ZSk7CiAgICAgIH07Cgog
ICAgICBjb21tYW5kRnJhbWUuYWRkKHRUcmVlTGluZXMpOwoKICAgICAgdFRyZWVMaW5lcy5hZGRF
dmVudExpc3RlbmVyKCJjaGFuZ2VDaGVja2VkIiwgZnVuY3Rpb24oZSkgeyB0LnNldFVzZVRyZWVM
aW5lcyhlLmdldERhdGEoKSk7IH0pOwogICAgICAKICAgICAgCiAgICAgIAogICAgICAKICAgICAg
dmFyIHZTaG93SXRlbXMgPSBuZXcgcXgudWkuZm9ybS5CdXR0b24oIlNob3cgSXRlbXMiKTsKICAg
ICAgCiAgICAgIHdpdGgodlNob3dJdGVtcykgewogICAgICAgIHNldFRvcCgxMDApOwogICAgICAg
IHNldExlZnQoMCk7CiAgICAgIH07CiAgICAgIAogICAgICBjb21tYW5kRnJhbWUuYWRkKHZTaG93
SXRlbXMpOwogICAgICAKICAgICAgdlNob3dJdGVtcy5hZGRFdmVudExpc3RlbmVyKCJleGVjdXRl
IiwgZnVuY3Rpb24oZSkgewogICAgICAgIGFsZXJ0KHQuZ2V0SXRlbXMoKSk7CiAgICAgIH0pOwoN
CgogICAgICB2YXIgdlJlbW92ZUFsbEl0ZW1zID0gbmV3IHF4LnVpLmZvcm0uQnV0dG9uKCJSZW1v
dmUgQWxsIEl0ZW1zIik7DQogICAgICANCiAgICAgIHdpdGgodlJlbW92ZUFsbEl0ZW1zKSB7DQog
ICAgICAgIHNldFRvcCgxODApOw0KICAgICAgICBzZXRMZWZ0KDApOw0KICAgICAgfTsNCiAgICAg
IA0KICAgICAgY29tbWFuZEZyYW1lLmFkZCh2UmVtb3ZlQWxsSXRlbXMpOw0KICAgICAgDQogICAg
ICB2UmVtb3ZlQWxsSXRlbXMuYWRkRXZlbnRMaXN0ZW5lcigiZXhlY3V0ZSIsIGZ1bmN0aW9uKGUp
IHsNCiAJCQkJdC5kZXN0cm95Q29udGVudCgpOwogICAgICB9KTsNCg0KDQogICAgICB2YXIgdkNy
ZWF0ZUl0ZW1zID0gbmV3IHF4LnVpLmZvcm0uQnV0dG9uKCJDcmVhdGUgSXRlbXMiKTsNCiAgICAg
IA0KICAgICAgd2l0aCh2Q3JlYXRlSXRlbXMpIHsNCiAgICAgICAgc2V0VG9wKDE0MCk7DQogICAg
ICAgIHNldExlZnQoMCk7DQogICAgICB9Ow0KICAgICAgDQogICAgICBjb21tYW5kRnJhbWUuYWRk
KHZDcmVhdGVJdGVtcyk7DQoNCgkJCXZDcmVhdGVJdGVtcy5hZGRFdmVudExpc3RlbmVyKCJleGVj
dXRlIiwgZnVuY3Rpb24oZSkgew0KCQkJCWNyZWF0ZUl0ZW1zKHQpOw0KCQkJfSk7DQoNCiAgICAg
IHZhciB2UmVtb3ZlU2VsZWN0ZWRJdGVtID0gbmV3IHF4LnVpLmZvcm0uQnV0dG9uKCJSZW1vdmUg
c2VsZWN0ZWQgSXRlbSIpOwogICAgICAKICAgICAgd2l0aCh2UmVtb3ZlU2VsZWN0ZWRJdGVtKSB7
CiAgICAgICAgc2V0VG9wKDIyMCk7CiAgICAgICAgc2V0TGVmdCgwKTsKICAgICAgfTsKICAgICAg
CiAgICAgIGNvbW1hbmRGcmFtZS5hZGQodlJlbW92ZVNlbGVjdGVkSXRlbSk7CiAgICAgIAogICAg
ICB2UmVtb3ZlU2VsZWN0ZWRJdGVtLmFkZEV2ZW50TGlzdGVuZXIoImV4ZWN1dGUiLCBmdW5jdGlv
bihlKSB7CiAgICAgIAl2YXIgdkl0ZW0gPSB0LmdldE1hbmFnZXIoKS5nZXRTZWxlY3RlZEl0ZW0o
KTsKICAgICAgCWlmKHZJdGVtKSB7CgkgICAgICAJdkl0ZW0uZGVzdHJveSgpOwoJICAgICAgfQog
ICAgICB9KTsKICAgICAgCiAgICB9KTsKICA8L3NjcmlwdD4KPC9ib2R5Pgo8L2h0bWw+Cg==
</data>

          </attachment>
          <attachment isobsolete="0" ispatch="1" isprivate="0" isurl="0">
            <attachid>47</attachid>
            <date>2006-09-28 09:00:00 +0200</date>
            <delta_ts>2006-09-28 09:00:56 +0200</delta_ts>
            <desc>Patch against rev 4355</desc>
            <filename>TreeDestroy2.diff</filename>
            <type>text/plain</type>
            <size>5203</size>
            <attacher>dietrich.streifert</attacher>
            
              <data encoding="base64">SW5kZXg6IHFvb3hkb28vZnJvbnRlbmQvZnJhbWV3b3JrL3NvdXJjZS9jbGFzcy9xeC91aS90cmVl
L1RyZWVGb2xkZXIuanMKPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PQotLS0gcW9veGRvby9mcm9udGVuZC9mcmFtZXdvcmsv
c291cmNlL2NsYXNzL3F4L3VpL3RyZWUvVHJlZUZvbGRlci5qcwkocmV2aXNpb24gNDM1NSkKKysr
IHFvb3hkb28vZnJvbnRlbmQvZnJhbWV3b3JrL3NvdXJjZS9jbGFzcy9xeC91aS90cmVlL1RyZWVG
b2xkZXIuanMJKHdvcmtpbmcgY29weSkKQEAgLTMwNSwxMiArMzA1LDg5IEBACiAgIHJldHVybiBh
OwogfQogCisvKioKKyAqIDxwPmRlc2VsZWN0cywgZGlzY29ubmVjdHMsIHJlbW92ZXMgYW5kIGRp
c3Bvc2VzIHRoZSAKKyAqICAgIGNvbnRlbnQgb2YgdGhlIGZvbGRlciBhbmQgaXRzIHN1YmZvbGRl
cnMuICAgCisgKiA8L3A+CisgKiAKKyAqIDxwPnRoZSBjdXJyZW50IGl0ZW1zIHN1Yml0ZW1zIChh
bmQgdGhlIHN1Yml0ZW1zIG9mIGVhY2gKKyAqIHN1Yml0ZW0pIGFyZSBkZXN0b3llZCBnb2luZyB0
b3AgZG93biB0aGUgVHJlZUZvbGRlciAKKyAqIGhpZXJhcmNoeS4gVGhlIGN1cnJlbnQgaXRlbSBp
cyBsZWZ0IGFzIGlzLgorICogPC9wPgorICovCitxeC5Qcm90by5kZXN0cm95Q29udGVudCA9IGZ1
bmN0aW9uKCkgeworICBpZih0aGlzLmhhc0NvbnRlbnQoKSkgeworICAKKyAgCXZhciBtYW5hZ2Vy
ID0gdGhpcy5nZXRUcmVlKCkgPyB0aGlzLmdldFRyZWUoKS5nZXRNYW5hZ2VyKCkgOiBudWxsOwor
ICAJCisJCXZhciBsZWFkSXRlbTsKKwkJdmFyIGFuY2hvckl0ZW07CisgIAlpZihtYW5hZ2VyKSB7
CisgIAkgIGxlYWRJdGVtID0gbWFuYWdlci5nZXRMZWFkSXRlbSgpOworICAJICBhbmNob3JJdGVt
ID0gbWFuYWdlci5nZXRBbmNob3JJdGVtKCk7CisgIAl9CisgIAkKKyAgICB2YXIgaXRlbXMgPSB0
aGlzLmdldEl0ZW1zKCk7CisgICAgdmFyIGl0ZW07CisgICAgCisgICAgZm9yKHZhciBpPWl0ZW1z
Lmxlbmd0aC0xO2k+PTA7LS1pKSB7CisgICAgICBpdGVtID0gaXRlbXNbaV07CiAKKyAgICAgIC8v
IHRoaXMuZ2V0SXRlbXMgc2VlbXMgdG8gYWxzbyBjb250YWluIHRoaXMuCisgICAgICAvLyBJbiBv
cmRlciB0byBhdm9pZCBlbmRsZXNzIGxvb3BzIGJ5IGNhbGxpbmcKKyAgICAgIC8vIHJlY3Vyc2l2
ZWx5IGRlc3Ryb3lDb250ZW50IHdlIGhhdmUgdG8gYXZvaWQKKyAgICAgIC8vIGRlc3Ryb3lpbmcg
b3Vyc2VsdmVzCisgICAgICBpZihpdGVtICE9IHRoaXMpIHsKKyAgICAgICAgaWYobWFuYWdlcikg
eworICAgICAgICAgIC8vIHNldCB0aGUgbGVhZEl0ZW0gdG8gbnVsbCBpZiB0aGUgY3VycmVudCAK
KyAgICAgICAgICAvLyBkZXN0cm95ZWQgaXRlbSBpcyB0aGUgbGVhZEl0ZW0KKyAgICAJCQlpZihs
ZWFkSXRlbSA9PSBpdGVtKSB7CisgICAgCQkJCW1hbmFnZXIuc2V0TGVhZEl0ZW0obnVsbCk7Cisg
ICAgCQkJfQorICAgICAgICAgIC8vIHNldCB0aGUgYW5jaG9ySXRlbSB0byBudWxsIGlmIHRoZSBj
dXJyZW50IAorICAgICAgICAgIC8vIGRlc3Ryb3llZCBpdGVtIGlzIHRoZSBhbmNob3JJdGVtCisg
ICAgCQkJaWYoYW5jaG9ySXRlbSA9PSBpdGVtKSB7CisgICAgCQkJCW1hbmFnZXIuc2V0QW5jaG9y
SXRlbShudWxsKTsKKyAgICAJCQl9CisgIAorICAgICAgICAgIC8vIGlmIHRoZSBjdXJyZW50IGRl
c3Ryb3llZCBpdGVtIGlzCisgICAgICAgICAgLy8gc2VsZWN0ZCBkZXNlbGVjdCB0aGUgaXRlbS4g
SWYgd2UgYXJlCisgICAgICAgICAgLy8gaW4gc2luZ2xlIHNlbGVjdGlvbiBtb2RlIHdlIGhhdmUg
dG8KKyAgICAgICAgICAvLyBjYWxsIGRlc2VsZWN0QWxsIGJlY2F1c2Ugc2V0SXRlbVNlbGVjdGVk
CisgICAgICAgICAgLy8gcmVmdXNlcyB0byBkZXNlbGVjdCBpbiB0aGlzIGNhc2UgIAorICAgIAkJ
CWlmKG1hbmFnZXIuZ2V0SXRlbVNlbGVjdGVkKHRoaXMpKSB7CisgICAgCQkJCWlmKG1hbmFnZXIu
Z2V0TXVsdGlTZWxlY3Rpb24oKSkgeworICAgIAkJCQkJbWFuYWdlci5zZXRJdGVtU2VsZWN0ZWQo
dGhpcyxmYWxzZSk7CisgICAgCQkJCX0KKyAgICAJCQkJZWxzZSB7CisgICAgCQkJCQltYW5hZ2Vy
LmRlc2VsZWN0QWxsKCk7CisgICAgCQkJCX0KKyAgICAJCQl9CisgIAorICAgIAkJCS8vIGlmIHRo
ZSBpdGVtIGhhcyB0aGUgbWV0aG9kIGRlc3Ryb3lDb250ZW50IGRlZmluZWQKKyAgICAJCQkvLyB0
aGVuIGl0IGlzIGEgVHJlZUZvbGRlciAoYW5kIGl0J3Mgc3ViY2xhc3NlcykKKyAgICAJCQkvLyB3
aGljaCBwb3RlbnRpYWxseSBoYXZlIGNvbnRlbnQgd2hpY2ggYWxzbyAKKyAgICAJCQkvLyBoYXMg
dG8gYmUgZGVzdHJveWVkCisgICAgICAgICAgaWYgKGl0ZW0uZGVzdHJveUNvbnRlbnQpIHsKKyAg
ICAgICAgICAgIGl0ZW0uZGVzdHJveUNvbnRlbnQoKTsKKyAgICAJCQl9CisgICAgICAgIH0KKyAg
ICAgIAorICAgICAgICAvLyBmaXJzdCBkaXNjb25uZWN0IHRoZSBpdGVtIHNvIHJlbmRlcmluZwor
ICAgICAgICAvLyBvZiB0aGUgdHJlZSBsaW5lcyBjYW4gYmUgZG9uZSBjb3JyZWN0bHkKKyAgICAg
ICAgaXRlbS5kaXNjb25uZWN0KCk7CisgICAgICAgIHRoaXMucmVtb3ZlKGl0ZW0pOworICAgICAg
ICBpdGVtLmRpc3Bvc2UoKTsKKyAgICAgIH0KKyAgICB9CisgIH0KK30KIAogCiAKIAogCisKIC8q
CiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgTU9ESUZJRVIKSW5kZXg6IHFvb3hkb28vZnJvbnRlbmQv
ZnJhbWV3b3JrL3NvdXJjZS9jbGFzcy9xeC91aS90cmVlL0Fic3RyYWN0VHJlZUVsZW1lbnQuanMK
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PQotLS0gcW9veGRvby9mcm9udGVuZC9mcmFtZXdvcmsvc291cmNlL2NsYXNzL3F4
L3VpL3RyZWUvQWJzdHJhY3RUcmVlRWxlbWVudC5qcwkocmV2aXNpb24gNDM1NSkKKysrIHFvb3hk
b28vZnJvbnRlbmQvZnJhbWV3b3JrL3NvdXJjZS9jbGFzcy9xeC91aS90cmVlL0Fic3RyYWN0VHJl
ZUVsZW1lbnQuanMJKHdvcmtpbmcgY29weSkKQEAgLTIxMSwxMSArMjExLDc3IEBACiAgIHJldHVy
biB0aGlzLl9sYWJlbE9iamVjdDsKIH0KIAorLyoqCisgKiA8cD5kZXNlbGVjdHMsIGRpc2Nvbm5l
Y3RzLCByZW1vdmVzIGFuZCBkaXNwb3NlcyB0aGUgCisgKiAgICBjdXJyZW50IHRyZWUgZWxlbWVu
dCBhbmQgaXRzIGNvbnRlbnQuICAgCisgKiA8L3A+CisgKiAKKyAqIDxwPmRlc3Ryb3lzIHRoZSBj
dXJyZW50IGl0ZW0gKFRyZWVGaWxlIG9yIFRyZWVGb2xkZXIpIAorICogYW5kIGFsbCBpdHMgc3Vi
aXRlbXMuIFRoZSBkZXN0cnVjdGlvbiBvZiB0aGUgc3ViaXRlbXMgCisgKiBpcyBkb25lIGJ5IGNh
bGxpbmcgZGVzdHJveUNvbnRlbnQuIFRoaXMgaXMgZG9uZSBpZiB0aGUgCisgKiBzdWJpdGVtIGhh
cyB0aGUgbWV0aG9kIGRlc3Ryb3lDb250ZW50IHdoaWNoIGlzIHRydWUgaWYgdGhlCisgKiBzdWJp
dGVtIGlzIGEgVHJlZUZvbGRlciAob3Igb25lIG9mIGl0cyBzdWJjbGFzc2VzKS4gCisgKiA8L3A+
CisgKiAKKyAqIDxwPlRoZSBtZXRob2QgZGVzdHJveUNvbnRlbnQgaXMgZGVmaW5lZCBpbiB0aGUg
VHJlZUZvbGRlciBjbGFzcy4KKyAqIDwvcD4KKyAqLworcXguUHJvdG8uZGVzdHJveSA9IGZ1bmN0
aW9uKCkgeworIAl2YXIgbWFuYWdlciA9IHRoaXMuZ2V0VHJlZSgpID8gdGhpcy5nZXRUcmVlKCku
Z2V0TWFuYWdlcigpIDogbnVsbDsKKwlpZihtYW5hZ2VyKSB7CisgICAgCisgICAgLy8gaWYgdGhl
IGN1cnJlbnQgZGVzdHJveWVkIGl0ZW0gaXMKKyAgICAvLyBzZWxlY3RkIGRlc2VsZWN0IHRoZSBp
dGVtLiBJZiB3ZSBhcmUKKyAgICAvLyBpbiBzaW5nbGUgc2VsZWN0aW9uIG1vZGUgd2UgaGF2ZSB0
bworICAgIC8vIGNhbGwgZGVzZWxlY3RBbGwgYmVjYXVzZSBzZXRJdGVtU2VsZWN0ZWQKKyAgICAv
LyByZWZ1c2VzIHRvIGRlc2VsZWN0IGluIHRoaXMgY2FzZSAgCisJCWlmKG1hbmFnZXIuZ2V0SXRl
bVNlbGVjdGVkKHRoaXMpKSB7CisJCQlpZihtYW5hZ2VyLmdldE11bHRpU2VsZWN0aW9uKCkpIHsK
KwkJCQltYW5hZ2VyLnNldEl0ZW1TZWxlY3RlZCh0aGlzLGZhbHNlKTsKKwkJCX0KKwkJCWVsc2Ug
eworCQkJCW1hbmFnZXIuZGVzZWxlY3RBbGwoKTsKKwkJCX0KKwkJfQorCQkKKyAgICAvLyBzZXQg
dGhlIGxlYWRJdGVtIHRvIG51bGwgaWYgdGhlIGN1cnJlbnQgCisgICAgLy8gZGVzdHJveWVkIGl0
ZW0gaXMgdGhlIGxlYWRJdGVtCisJCWlmKG1hbmFnZXIuZ2V0TGVhZEl0ZW0oKSA9PSB0aGlzKSB7
CisJCQltYW5hZ2VyLnNldExlYWRJdGVtKG51bGwpOworCQl9CisgICAgLy8gc2V0IHRoZSBhbmNo
b3JJdGVtIHRvIG51bGwgaWYgdGhlIGN1cnJlbnQgCisgICAgLy8gZGVzdHJveWVkIGl0ZW0gaXMg
dGhlIGFuY2hvckl0ZW0KKwkJaWYobWFuYWdlci5nZXRBbmNob3JJdGVtKCkgPT0gdGhpcykgewor
CQkJbWFuYWdlci5zZXRBbmNob3JJdGVtKG51bGwpOworCQl9CisJfQorCQorCS8vIGlmIHRoZSBp
dGVtIGhhcyB0aGUgbWV0aG9kIGRlc3Ryb3lDb250ZW50IGRlZmluZWQKKwkvLyB0aGVuIGl0IGlz
IGEgVHJlZUZvbGRlciAoYW5kIGl0J3Mgc3ViY2xhc3NlcykKKwkvLyB3aGljaCBwb3RlbnRpYWxs
eSBoYXZlIGNvbnRlbnQgd2hpY2ggYWxzbyAKKwkvLyBoYXMgdG8gYmUgZGVzdHJveWVkCisJaWYo
dGhpcy5kZXN0cm95Q29udGVudCkgeworCQl0aGlzLmRlc3Ryb3lDb250ZW50KCk7CisJfQorCQkJ
CisgIC8vIGZpcnN0IGRpc2Nvbm5lY3QgdGhlIGl0ZW0gc28gcmVuZGVyaW5nCisgIC8vIG9mIHRo
ZSB0cmVlIGxpbmVzIGNhbiBiZSBkb25lIGNvcnJlY3RseQorICB0aGlzLmRpc2Nvbm5lY3QoKTsK
KyAgCisgIC8vIHJlbW92ZSB0aGUgY3VycmVudCBpdGVtIGZyb20KKyAgLy8gdGhlIHBhcmVudCBm
b2xkZXIKKwl2YXIgcGFyZW50Rm9sZGVyID0gdGhpcy5nZXRQYXJlbnRGb2xkZXIoKTsKKyAgaWYo
cGFyZW50Rm9sZGVyKSB7CisgIAlwYXJlbnRGb2xkZXIucmVtb3ZlKHRoaXMpOworICB9CiAKKyAg
dGhpcy5kaXNwb3NlKCk7Cit9ICAKIAogCiAKIAorCiAvKgogLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAg
IFFVRVVFIEhBTkRMSU5HCg==
</data>

          </attachment>
          <attachment isobsolete="0" ispatch="0" isprivate="0" isurl="0">
            <attachid>48</attachid>
            <date>2006-09-28 09:03:00 +0200</date>
            <delta_ts>2006-09-28 09:03:04 +0200</delta_ts>
            <desc>Testcase for destroy and destroyContent methods for qx.ui.tree</desc>
            <filename>Tree_7.html</filename>
            <type>text/html</type>
            <size>5597</size>
            <attacher>dietrich.streifert</attacher>
            
              <data encoding="base64">PGh0bWw+CjxoZWFkPgogIDxtZXRhIGh0dHAtZXF1aXY9IkNvbnRlbnQtVHlwZSIgY29udGVudD0i
dGV4dC9odG1sOyBjaGFyc2V0PXV0Zi04IiAvPgogIDx0aXRsZT5xb294ZG9vICZyYXF1bzsgRGVt
bzwvdGl0bGU+CiAgPGxpbmsgdHlwZT0idGV4dC9jc3MiIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0i
Li4vLi4vcmVzb3VyY2UvY3NzL2xheW91dC5jc3MiLz4KICA8IS0tW2lmIElFXT4KICA8bGluayB0
eXBlPSJ0ZXh0L2NzcyIgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSIuLi8uLi9yZXNvdXJjZS9jc3Mv
bGF5b3V0X2llLmNzcyIvPgogIDwhW2VuZGlmXS0tPgogIDxzY3JpcHQgdHlwZT0idGV4dC9qYXZh
c2NyaXB0IiBzcmM9Ii4uLy4uL3NjcmlwdC9xeC5qcyI+PC9zY3JpcHQ+CjwvaGVhZD4KPGJvZHk+
CiAgPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIHNyYz0iLi4vLi4vc2NyaXB0L2xheW91
dC5qcyI+PC9zY3JpcHQ+CgogIDxkaXYgaWQ9ImRlbW9EZXNjcmlwdGlvbiI+CiAgICA8cD5Ucnlp
bmcgZHluYW1pYyBGb2xkZXIgYW5kIEZpbGUgY3JlYXRpb24gYW5kIGRlbGV0aW9uLjwvcD4KICA8
L2Rpdj4KCiAgPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPgoKCSAgZnVuY3Rpb24gY3Jl
YXRlSXRlbXMgKHQpIHsNCiAgICAgIHZhciB0ZTEgPSBuZXcgcXgudWkudHJlZS5UcmVlRm9sZGVy
KCJEZXNrdG9wIik7DQogICAgICB0LmFkZCh0ZTEpOw0KDQogICAgICBkZXNrdG9wID0gdGUxOw0K
DQogICAgICB2YXIgdGUxXzEgPSBuZXcgcXgudWkudHJlZS5UcmVlRm9sZGVyKCJGaWxlcyIpOw0K
ICAgICAgdmFyIHRlMV8yID0gbmV3IHF4LnVpLnRyZWUuVHJlZUZvbGRlcigiV29ya3NwYWNlIik7
DQogICAgICB2YXIgdGUxXzMgPSBuZXcgcXgudWkudHJlZS5UcmVlRm9sZGVyKCJOZXR3b3JrIik7
DQogICAgICB2YXIgdGUxXzQgPSBuZXcgcXgudWkudHJlZS5UcmVlRm9sZGVyKCJUcmFzaCIpOw0K
DQogICAgICB0ZTEuYWRkKHRlMV8xLCB0ZTFfMiwgdGUxXzMsIHRlMV80KTsNCg0KDQogICAgICB2
YXIgdGUxXzJfMSA9IG5ldyBxeC51aS50cmVlLlRyZWVGaWxlKCJXaW5kb3dzIChDOikiKTsNCiAg
ICAgIHZhciB0ZTFfMl8yID0gbmV3IHF4LnVpLnRyZWUuVHJlZUZpbGUoIkRvY3VtZW50cyAoRDop
Iik7DQoNCiAgICAgIHRlMV8yLmFkZCh0ZTFfMl8xLCB0ZTFfMl8yKTsNCg0KICAgICAgYXJiZWl0
c3BsYXR6ID0gdGUxXzI7DQoNCg0KICAgICAgdmFyIHRlMiA9IG5ldyBxeC51aS50cmVlLlRyZWVG
b2xkZXIoIkluYm94Iik7DQogICAgICBwb3N0ZWluZ2FuZyA9IHRlMjsNCg0KICAgICAgdmFyIHRl
Ml8xID0gbmV3IHF4LnVpLnRyZWUuVHJlZUZvbGRlcigiUHJlc2V0cyIpOw0KICAgICAgdmFyIHRl
Ml8yID0gbmV3IHF4LnVpLnRyZWUuVHJlZUZvbGRlcigiU2VudCIpOw0KICAgICAgdmFyIHRlMl8z
ID0gbmV3IHF4LnVpLnRyZWUuVHJlZUZvbGRlcigiVHJhc2giKTsNCiAgICAgIHZhciB0ZTJfNCA9
IG5ldyBxeC51aS50cmVlLlRyZWVGb2xkZXIoIkRhdGEiKTsNCiAgICAgIHZhciB0ZTJfNSA9IG5l
dyBxeC51aS50cmVlLlRyZWVGb2xkZXIoIkVkaXQiKTsNCg0KICAgICAgdC5hZGQodGUyKTsNCgkg
CX0NCg0KICAgIHF4LmNvcmUuSW5pdC5nZXRJbnN0YW5jZSgpLmRlZmluZU1haW4oZnVuY3Rpb24o
KQogICAgewogICAgICB2YXIgdCA9IG5ldyBxeC51aS50cmVlLlRyZWUoIlJvb3QiKTsKCiAgICAg
IHdpdGgodCkKICAgICAgewogICAgICAgIHNldEJhY2tncm91bmRDb2xvcigyNTUpOwogICAgICAg
IHNldEJvcmRlcihxeC5yZW5kZXJlci5ib3JkZXIuQm9yZGVyUHJlc2V0cy5nZXRJbnN0YW5jZSgp
Lmluc2V0KTsKICAgICAgICBzZXRPdmVyZmxvdygic2Nyb2xsWSIpOwoKICAgICAgICBzZXRIZWln
aHQobnVsbCk7CiAgICAgICAgc2V0VG9wKDQ4KTsKICAgICAgICBzZXRMZWZ0KDIwKTsKICAgICAg
ICBzZXRXaWR0aCgyMDApOwogICAgICAgIHNldEJvdHRvbSg0OCk7CiAgICAgIH07CgogICAgICBx
eC51aS5jb3JlLkNsaWVudERvY3VtZW50LmdldEluc3RhbmNlKCkuYWRkKHQpOwogICAgICAKCgog
ICAgICB2YXIgY29tbWFuZEZyYW1lID0gbmV3IHF4LnVpLmdyb3VwYm94Lkdyb3VwQm94KCJDb250
cm9sIik7CgogICAgICB3aXRoKGNvbW1hbmRGcmFtZSkKICAgICAgewogICAgICAgIHNldFRvcCg0
OCk7CiAgICAgICAgc2V0TGVmdCgyNTApOwoKICAgICAgICBzZXRXaWR0aCgiYXV0byIpOwogICAg
ICAgIHNldEhlaWdodCgiYXV0byIpOwogICAgICB9OwoKICAgICAgcXgudWkuY29yZS5DbGllbnRE
b2N1bWVudC5nZXRJbnN0YW5jZSgpLmFkZChjb21tYW5kRnJhbWUpOwoKCgoKICAgICAgdmFyIHRD
dXJyZW50TGFiZWwgPSBuZXcgcXgudWkuYmFzaWMuQXRvbSgiQ3VycmVudCBGb2xkZXI6ICIpOwoK
ICAgICAgd2l0aCh0Q3VycmVudExhYmVsKQogICAgICB7CiAgICAgICAgc2V0TGVmdCgwKTsKICAg
ICAgICBzZXRUb3AoMCk7CiAgICAgIH07CgogICAgICBjb21tYW5kRnJhbWUuYWRkKHRDdXJyZW50
TGFiZWwpOwoKCgogICAgICB2YXIgdEN1cnJlbnRJbnB1dCA9IG5ldyBxeC51aS5mb3JtLlRleHRG
aWVsZDsKCiAgICAgIHdpdGgodEN1cnJlbnRJbnB1dCkKICAgICAgewogICAgICAgIHNldExlZnQo
MCk7CiAgICAgICAgc2V0UmlnaHQoMCk7CiAgICAgICAgc2V0VG9wKDIwKTsKCiAgICAgICAgc2V0
UmVhZE9ubHkodHJ1ZSk7CiAgICAgIH07CgogICAgICBjb21tYW5kRnJhbWUuYWRkKHRDdXJyZW50
SW5wdXQpOwoKICAgICAgdC5nZXRNYW5hZ2VyKCkuYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlU2Vs
ZWN0aW9uIiwgZnVuY3Rpb24oZSkgew0KICAgICAgCWlmKGUuZ2V0RGF0YSgpWzBdKSB7CiAgICAg
ICAgCXRDdXJyZW50SW5wdXQuc2V0VmFsdWUoZS5nZXREYXRhKClbMF0uX2xhYmVsT2JqZWN0Lmdl
dEh0bWwoKSk7CiAgICAgICAgCXRoaXMuZGVidWcoJ2NsYXNzbmFtZTogJyArIGUuZ2V0RGF0YSgp
WzBdLmNsYXNzbmFtZSk7CiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgCXRDdXJy
ZW50SW5wdXQuc2V0VmFsdWUoJycpOw0KICAgICAgICB9CiAgICAgIH0pOwoKCgogICAgICB2YXIg
dERvdWJsZUNsaWNrID0gbmV3IHF4LnVpLmZvcm0uQ2hlY2tCb3goIlVzZSBkb3VibGUgY2xpY2s/
Iik7CgogICAgICB3aXRoKHREb3VibGVDbGljaykgewogICAgICAgIHNldFRvcCg2MCk7CiAgICAg
ICAgc2V0TGVmdCgwKTsKICAgICAgfTsKCiAgICAgIGNvbW1hbmRGcmFtZS5hZGQodERvdWJsZUNs
aWNrKTsKCiAgICAgIHREb3VibGVDbGljay5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2VDaGVja2Vk
IiwgZnVuY3Rpb24oZSkgeyB0LnNldFVzZURvdWJsZUNsaWNrKGUuZ2V0RGF0YSgpKTsgfSk7CgoK
CiAgICAgIHZhciB0VHJlZUxpbmVzID0gbmV3IHF4LnVpLmZvcm0uQ2hlY2tCb3goIlVzZSB0cmVl
IGxpbmVzPyIpOwoKICAgICAgd2l0aCh0VHJlZUxpbmVzKSB7CiAgICAgICAgc2V0VG9wKDgwKTsK
ICAgICAgICBzZXRMZWZ0KDApOwogICAgICAgIHNldENoZWNrZWQodHJ1ZSk7CiAgICAgIH07Cgog
ICAgICBjb21tYW5kRnJhbWUuYWRkKHRUcmVlTGluZXMpOwoKICAgICAgdFRyZWVMaW5lcy5hZGRF
dmVudExpc3RlbmVyKCJjaGFuZ2VDaGVja2VkIiwgZnVuY3Rpb24oZSkgeyB0LnNldFVzZVRyZWVM
aW5lcyhlLmdldERhdGEoKSk7IH0pOwogICAgICAKICAgICAgCiAgICAgIAogICAgICAKICAgICAg
dmFyIHZTaG93SXRlbXMgPSBuZXcgcXgudWkuZm9ybS5CdXR0b24oIlNob3cgSXRlbXMiKTsKICAg
ICAgCiAgICAgIHdpdGgodlNob3dJdGVtcykgewogICAgICAgIHNldFRvcCgxMDApOwogICAgICAg
IHNldExlZnQoMCk7CiAgICAgIH07CiAgICAgIAogICAgICBjb21tYW5kRnJhbWUuYWRkKHZTaG93
SXRlbXMpOwogICAgICAKICAgICAgdlNob3dJdGVtcy5hZGRFdmVudExpc3RlbmVyKCJleGVjdXRl
IiwgZnVuY3Rpb24oZSkgewogICAgICAgIGFsZXJ0KHQuZ2V0SXRlbXMoKSk7CiAgICAgIH0pOwoN
CgogICAgICB2YXIgdkRlc3Ryb3lUcmVlQ29udGVudCA9IG5ldyBxeC51aS5mb3JtLkJ1dHRvbigi
RGVzdHJveSB0cmVlIGNvbnRlbnQiKTsNCiAgICAgIA0KICAgICAgd2l0aCh2RGVzdHJveVRyZWVD
b250ZW50KSB7DQogICAgICAgIHNldFRvcCgxODApOw0KICAgICAgICBzZXRMZWZ0KDApOw0KICAg
ICAgfTsNCiAgICAgIA0KICAgICAgY29tbWFuZEZyYW1lLmFkZCh2RGVzdHJveVRyZWVDb250ZW50
KTsNCiAgICAgIA0KICAgICAgdkRlc3Ryb3lUcmVlQ29udGVudC5hZGRFdmVudExpc3RlbmVyKCJl
eGVjdXRlIiwgZnVuY3Rpb24oZSkgew0KIAkJCQl0LmRlc3Ryb3lDb250ZW50KCk7CiAgICAgIH0p
Ow0KDQoNCiAgICAgIHZhciB2Q3JlYXRlSXRlbXMgPSBuZXcgcXgudWkuZm9ybS5CdXR0b24oIkNy
ZWF0ZSBpdGVtcyIpOw0KICAgICAgDQogICAgICB3aXRoKHZDcmVhdGVJdGVtcykgew0KICAgICAg
ICBzZXRUb3AoMTQwKTsNCiAgICAgICAgc2V0TGVmdCgwKTsNCiAgICAgIH07DQogICAgICANCiAg
ICAgIGNvbW1hbmRGcmFtZS5hZGQodkNyZWF0ZUl0ZW1zKTsNCg0KCQkJdkNyZWF0ZUl0ZW1zLmFk
ZEV2ZW50TGlzdGVuZXIoImV4ZWN1dGUiLCBmdW5jdGlvbihlKSB7DQoJCQkJY3JlYXRlSXRlbXMo
dCk7DQoJCQl9KTsNCg0KICAgICAgdmFyIHZEZXN0cm95U2VsZWN0ZWRJdGVtID0gbmV3IHF4LnVp
LmZvcm0uQnV0dG9uKCJEZXN0cm95IHNlbGVjdGVkIGl0ZW0iKTsKICAgICAgCiAgICAgIHdpdGgo
dkRlc3Ryb3lTZWxlY3RlZEl0ZW0pIHsKICAgICAgICBzZXRUb3AoMjIwKTsKICAgICAgICBzZXRM
ZWZ0KDApOwogICAgICB9OwogICAgICAKICAgICAgY29tbWFuZEZyYW1lLmFkZCh2RGVzdHJveVNl
bGVjdGVkSXRlbSk7CiAgICAgIAogICAgICB2RGVzdHJveVNlbGVjdGVkSXRlbS5hZGRFdmVudExp
c3RlbmVyKCJleGVjdXRlIiwgZnVuY3Rpb24oZSkgewogICAgICAJdmFyIHZJdGVtID0gdC5nZXRN
YW5hZ2VyKCkuZ2V0U2VsZWN0ZWRJdGVtKCk7CiAgICAgIAlpZih2SXRlbSkgewoJICAgICAgCXZJ
dGVtLmRlc3Ryb3koKTsKCSAgICAgIH0KICAgICAgfSk7CgoKICAgICAgdmFyIHZEZXN0cm95Q29u
dGVuU2VsZWN0ZWRJdGVtID0gbmV3IHF4LnVpLmZvcm0uQnV0dG9uKCJEZXN0cm95IGNvbnRlbnQg
b2Ygc2VsZWN0ZWQgaXRlbSIpOwogICAgICAKICAgICAgd2l0aCh2RGVzdHJveUNvbnRlblNlbGVj
dGVkSXRlbSkgewogICAgICAgIHNldFRvcCgyNjApOwogICAgICAgIHNldExlZnQoMCk7CiAgICAg
IH07CiAgICAgIAogICAgICBjb21tYW5kRnJhbWUuYWRkKHZEZXN0cm95Q29udGVuU2VsZWN0ZWRJ
dGVtKTsKICAgICAgCiAgICAgIHZEZXN0cm95Q29udGVuU2VsZWN0ZWRJdGVtLmFkZEV2ZW50TGlz
dGVuZXIoImV4ZWN1dGUiLCBmdW5jdGlvbihlKSB7CiAgICAgIAl2YXIgdkl0ZW0gPSB0LmdldE1h
bmFnZXIoKS5nZXRTZWxlY3RlZEl0ZW0oKTsKICAgICAgCWlmKHZJdGVtICYmIHZJdGVtIGluc3Rh
bmNlb2YgcXgudWkudHJlZS5UcmVlRm9sZGVyKSB7CgkgICAgICAJdkl0ZW0uZGVzdHJveUNvbnRl
bnQoKTsKCSAgICAgIH0KICAgICAgfSk7CiAgICAgIAogICAgfSk7CiAgPC9zY3JpcHQ+CjwvYm9k
eT4KPC9odG1sPgo=
</data>

          </attachment>
          <attachment isobsolete="0" ispatch="1" isprivate="0" isurl="0">
            <attachid>51</attachid>
            <date>2006-10-02 09:50:00 +0200</date>
            <delta_ts>2006-10-02 09:50:50 +0200</delta_ts>
            <desc>patch against revision 4371</desc>
            <filename>TreeDestroy3.diff</filename>
            <type>text/plain</type>
            <size>4077</size>
            <attacher>dietrich.streifert</attacher>
            
              <data encoding="base64">SW5kZXg6IHFvb3hkb28vZnJvbnRlbmQvZGVtby9zb3VyY2UvaHRtbC90ZXN0L1RyZWVfNy5odG1s
Cj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT0KLS0tIHFvb3hkb28vZnJvbnRlbmQvZGVtby9zb3VyY2UvaHRtbC90ZXN0L1Ry
ZWVfNy5odG1sCShyZXZpc2lvbiA0MzcxKQorKysgcW9veGRvby9mcm9udGVuZC9kZW1vL3NvdXJj
ZS9odG1sL3Rlc3QvVHJlZV83Lmh0bWwJKHdvcmtpbmcgY29weSkKQEAgLTE3LDcgKzE3LDcgQEAK
IAogICA8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+CiAKLSAgZnVuY3Rpb24gY3JlYXRl
SXRlbXMgKHQpIHsKKyAgICBmdW5jdGlvbiBjcmVhdGVJdGVtcyAodCkgewogICAgICAgdmFyIHRl
MSA9IG5ldyBxeC51aS50cmVlLlRyZWVGb2xkZXIoIkRlc2t0b3AiKTsKICAgICAgIHQuYWRkKHRl
MSk7CiAKQEAgLTY5LDkgKzY5LDkgQEAKICAgICAgIH07CiAKICAgICAgIHF4LnVpLmNvcmUuQ2xp
ZW50RG9jdW1lbnQuZ2V0SW5zdGFuY2UoKS5hZGQodCk7Ci0gICAgICAKIAogCisKICAgICAgIHZh
ciBjb21tYW5kRnJhbWUgPSBuZXcgcXgudWkuZ3JvdXBib3guR3JvdXBCb3goIkNvbnRyb2wiKTsK
IAogICAgICAgd2l0aChjb21tYW5kRnJhbWUpCkBAIC0xNDksNjcgKzE0OSw4NCBAQAogICAgICAg
Y29tbWFuZEZyYW1lLmFkZCh0VHJlZUxpbmVzKTsKIAogICAgICAgdFRyZWVMaW5lcy5hZGRFdmVu
dExpc3RlbmVyKCJjaGFuZ2VDaGVja2VkIiwgZnVuY3Rpb24oZSkgeyB0LnNldFVzZVRyZWVMaW5l
cyhlLmdldERhdGEoKSk7IH0pOwotICAgICAgCi0gICAgICAKLSAgICAgIAotICAgICAgCisKKwor
CisKICAgICAgIHZhciB2U2hvd0l0ZW1zID0gbmV3IHF4LnVpLmZvcm0uQnV0dG9uKCJTaG93IEl0
ZW1zIik7Ci0gICAgICAKKwogICAgICAgd2l0aCh2U2hvd0l0ZW1zKSB7CiAgICAgICAgIHNldFRv
cCgxMDApOwogICAgICAgICBzZXRMZWZ0KDApOwogICAgICAgfTsKLSAgICAgIAorCiAgICAgICBj
b21tYW5kRnJhbWUuYWRkKHZTaG93SXRlbXMpOwotICAgICAgCisKICAgICAgIHZTaG93SXRlbXMu
YWRkRXZlbnRMaXN0ZW5lcigiZXhlY3V0ZSIsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgYWxlcnQo
dC5nZXRJdGVtcygpKTsKICAgICAgIH0pOwogCiAKLSAgICAgIHZhciB2UmVtb3ZlQWxsSXRlbXMg
PSBuZXcgcXgudWkuZm9ybS5CdXR0b24oIlJlbW92ZSBBbGwgSXRlbXMiKTsKLSAgICAgIAotICAg
ICAgd2l0aCh2UmVtb3ZlQWxsSXRlbXMpIHsKKyAgICAgIHZhciB2RGVzdHJveVRyZWVDb250ZW50
ID0gbmV3IHF4LnVpLmZvcm0uQnV0dG9uKCJEZXN0cm95IHRyZWUgY29udGVudCIpOworCisgICAg
ICB3aXRoKHZEZXN0cm95VHJlZUNvbnRlbnQpIHsKICAgICAgICAgc2V0VG9wKDE4MCk7CiAgICAg
ICAgIHNldExlZnQoMCk7CiAgICAgICB9OwotICAgICAgCi0gICAgICBjb21tYW5kRnJhbWUuYWRk
KHZSZW1vdmVBbGxJdGVtcyk7Ci0gICAgICAKLSAgICAgIHZSZW1vdmVBbGxJdGVtcy5hZGRFdmVu
dExpc3RlbmVyKCJleGVjdXRlIiwgZnVuY3Rpb24oZSkgeworCisgICAgICBjb21tYW5kRnJhbWUu
YWRkKHZEZXN0cm95VHJlZUNvbnRlbnQpOworCisgICAgICB2RGVzdHJveVRyZWVDb250ZW50LmFk
ZEV2ZW50TGlzdGVuZXIoImV4ZWN1dGUiLCBmdW5jdGlvbihlKSB7CiAgCQkJCXQuZGVzdHJveUNv
bnRlbnQoKTsKICAgICAgIH0pOwogCiAKLSAgICAgIHZhciB2Q3JlYXRlSXRlbXMgPSBuZXcgcXgu
dWkuZm9ybS5CdXR0b24oIkNyZWF0ZSBJdGVtcyIpOwotICAgICAgCisgICAgICB2YXIgdkNyZWF0
ZUl0ZW1zID0gbmV3IHF4LnVpLmZvcm0uQnV0dG9uKCJDcmVhdGUgaXRlbXMiKTsKKwogICAgICAg
d2l0aCh2Q3JlYXRlSXRlbXMpIHsKICAgICAgICAgc2V0VG9wKDE0MCk7CiAgICAgICAgIHNldExl
ZnQoMCk7CiAgICAgICB9OwotICAgICAgCisKICAgICAgIGNvbW1hbmRGcmFtZS5hZGQodkNyZWF0
ZUl0ZW1zKTsKIAogCQkJdkNyZWF0ZUl0ZW1zLmFkZEV2ZW50TGlzdGVuZXIoImV4ZWN1dGUiLCBm
dW5jdGlvbihlKSB7CiAJCQkJY3JlYXRlSXRlbXModCk7CiAJCQl9KTsKIAotICAgICAgdmFyIHZS
ZW1vdmVTZWxlY3RlZEl0ZW0gPSBuZXcgcXgudWkuZm9ybS5CdXR0b24oIlJlbW92ZSBzZWxlY3Rl
ZCBJdGVtIik7Ci0gICAgICAKLSAgICAgIHdpdGgodlJlbW92ZVNlbGVjdGVkSXRlbSkgeworICAg
ICAgdmFyIHZEZXN0cm95U2VsZWN0ZWRJdGVtID0gbmV3IHF4LnVpLmZvcm0uQnV0dG9uKCJEZXN0
cm95IHNlbGVjdGVkIGl0ZW0iKTsKKworICAgICAgd2l0aCh2RGVzdHJveVNlbGVjdGVkSXRlbSkg
ewogICAgICAgICBzZXRUb3AoMjIwKTsKICAgICAgICAgc2V0TGVmdCgwKTsKICAgICAgIH07Ci0g
ICAgICAKLSAgICAgIGNvbW1hbmRGcmFtZS5hZGQodlJlbW92ZVNlbGVjdGVkSXRlbSk7Ci0gICAg
ICAKLSAgICAgIHZSZW1vdmVTZWxlY3RlZEl0ZW0uYWRkRXZlbnRMaXN0ZW5lcigiZXhlY3V0ZSIs
IGZ1bmN0aW9uKGUpIHsKKworICAgICAgY29tbWFuZEZyYW1lLmFkZCh2RGVzdHJveVNlbGVjdGVk
SXRlbSk7CisKKyAgICAgIHZEZXN0cm95U2VsZWN0ZWRJdGVtLmFkZEV2ZW50TGlzdGVuZXIoImV4
ZWN1dGUiLCBmdW5jdGlvbihlKSB7CiAgICAgICAJdmFyIHZJdGVtID0gdC5nZXRNYW5hZ2VyKCku
Z2V0U2VsZWN0ZWRJdGVtKCk7CiAgICAgICAJaWYodkl0ZW0pIHsKIAkgICAgICAJdkl0ZW0uZGVz
dHJveSgpOwogCSAgICAgIH0KICAgICAgIH0pOwotICAgICAgCisKKworICAgICAgdmFyIHZEZXN0
cm95Q29udGVuU2VsZWN0ZWRJdGVtID0gbmV3IHF4LnVpLmZvcm0uQnV0dG9uKCJEZXN0cm95IGNv
bnRlbnQgb2Ygc2VsZWN0ZWQgaXRlbSIpOworCisgICAgICB3aXRoKHZEZXN0cm95Q29udGVuU2Vs
ZWN0ZWRJdGVtKSB7CisgICAgICAgIHNldFRvcCgyNjApOworICAgICAgICBzZXRMZWZ0KDApOwor
ICAgICAgfTsKKworICAgICAgY29tbWFuZEZyYW1lLmFkZCh2RGVzdHJveUNvbnRlblNlbGVjdGVk
SXRlbSk7CisKKyAgICAgIHZEZXN0cm95Q29udGVuU2VsZWN0ZWRJdGVtLmFkZEV2ZW50TGlzdGVu
ZXIoImV4ZWN1dGUiLCBmdW5jdGlvbihlKSB7CisgICAgICAJdmFyIHZJdGVtID0gdC5nZXRNYW5h
Z2VyKCkuZ2V0U2VsZWN0ZWRJdGVtKCk7CisgICAgICAJaWYodkl0ZW0gJiYgdkl0ZW0gaW5zdGFu
Y2VvZiBxeC51aS50cmVlLlRyZWVGb2xkZXIpIHsKKwkgICAgICAJdkl0ZW0uZGVzdHJveUNvbnRl
bnQoKTsKKwkgICAgICB9CisgICAgICB9KTsKKwogICAgIH0pOwogICA8L3NjcmlwdD4KIDwvYm9k
eT4KSW5kZXg6IHFvb3hkb28vZnJvbnRlbmQvZnJhbWV3b3JrL3NvdXJjZS9jbGFzcy9xeC91aS90
cmVlL1RyZWVGb2xkZXIuanMKPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PQotLS0gcW9veGRvby9mcm9udGVuZC9mcmFtZXdv
cmsvc291cmNlL2NsYXNzL3F4L3VpL3RyZWUvVHJlZUZvbGRlci5qcwkocmV2aXNpb24gNDM3MSkK
KysrIHFvb3hkb28vZnJvbnRlbmQvZnJhbWV3b3JrL3NvdXJjZS9jbGFzcy9xeC91aS90cmVlL1Ry
ZWVGb2xkZXIuanMJKHdvcmtpbmcgY29weSkKQEAgLTM1NSw5ICszNTUsOSBAQAogICAgICAgICAg
IC8vIGluIHNpbmdsZSBzZWxlY3Rpb24gbW9kZSB3ZSBoYXZlIHRvCiAgICAgICAgICAgLy8gY2Fs
bCBkZXNlbGVjdEFsbCBiZWNhdXNlIHNldEl0ZW1TZWxlY3RlZAogICAgICAgICAgIC8vIHJlZnVz
ZXMgdG8gZGVzZWxlY3QgaW4gdGhpcyBjYXNlICAKLSAgICAJCQlpZihtYW5hZ2VyLmdldEl0ZW1T
ZWxlY3RlZCh0aGlzKSkgeworICAgIAkJCWlmKG1hbmFnZXIuZ2V0SXRlbVNlbGVjdGVkKGl0ZW0p
KSB7CiAgICAgCQkJCWlmKG1hbmFnZXIuZ2V0TXVsdGlTZWxlY3Rpb24oKSkgewotICAgIAkJCQkJ
bWFuYWdlci5zZXRJdGVtU2VsZWN0ZWQodGhpcyxmYWxzZSk7CisgICAgCQkJCQltYW5hZ2VyLnNl
dEl0ZW1TZWxlY3RlZChpdGVtLGZhbHNlKTsKICAgICAJCQkJfQogICAgIAkJCQllbHNlIHsKICAg
ICAJCQkJCW1hbmFnZXIuZGVzZWxlY3RBbGwoKTsK
</data>

          </attachment>
      

    </bug>