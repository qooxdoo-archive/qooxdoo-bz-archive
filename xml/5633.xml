<bug>
          <bug_id>5633</bug_id>
          
          <creation_ts>2011-09-23 13:45:00 +0200</creation_ts>
          <short_desc>Adding integer/checkInteger and empty check of value in qx.util.Validate</short_desc>
          <delta_ts>2014-03-03 08:46:48 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>framework</product>
          <component>core</component>
          <version>master</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>LATER</resolution>
          
          
          
          
          
          <priority>P4</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>unspecified</target_milestone>
          
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Stefan Andersson">dev</reporter>
          <assigned_to name="Martin Wittemann">martin.wittemann</assigned_to>
          
          <qa_contact name="Martin Wittemann">martin.wittemann</qa_contact>
          <cf_browser>---</cf_browser>
          

      

      

      

          <long_desc isprivate="0">
            <commentid>26893</commentid>
              <attachid>1060</attachid>
            <who name="Stefan Andersson">dev</who>
            <bug_when>2011-09-23 13:45:45 +0200</bug_when>
            <thetext>Created attachment 1060
Enhancement

1. integer check as an enhancement
2. check of empty value in all checks as an enhancement</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>26895</commentid>
              <attachid>1061</attachid>
            <who name="Stefan Andersson">dev</who>
            <bug_when>2011-09-23 13:52:36 +0200</bug_when>
            <thetext>Created attachment 1061
New version...

Comments.</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>26914</commentid>
              <attachid>1062</attachid>
            <who name="Stefan Andersson">dev</who>
            <bug_when>2011-09-24 12:29:59 +0200</bug_when>
            <thetext>Created attachment 1062
Leading zero correction</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>35668</commentid>
            <who name="Martin Wittemann">martin.wittemann</who>
            <bug_when>2014-03-03 08:46:48 +0100</bug_when>
            <thetext>Move open issues to RESOLVED â€“ LATER, whose last comment is older than a year.</thetext>
          </long_desc>
      
          <attachment isobsolete="0" ispatch="0" isprivate="0" isurl="0">
            <attachid>1060</attachid>
            <date>2011-09-23 13:45:00 +0200</date>
            <delta_ts>2011-09-23 13:45:45 +0200</delta_ts>
            <desc>Enhancement</desc>
            <filename>Validate.js.diff</filename>
            <type>text/plain</type>
            <size>12609</size>
            <attacher>dev</attacher>
            
              <data encoding="base64">SW5kZXg6IGZyYW1ld29yay9zb3VyY2UvY2xhc3MvcXgvdXRpbC9WYWxpZGF0ZS5qcwo9PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09Ci0tLSBmcmFtZXdvcmsvc291cmNlL2NsYXNzL3F4L3V0aWwvVmFsaWRhdGUuanMJKHJldmlz
aW9uIDI4NzQ3KQorKysgZnJhbWV3b3JrL3NvdXJjZS9jbGFzcy9xeC91dGlsL1ZhbGlkYXRlLmpz
CSh3b3JraW5nIGNvcHkpCkBAIC02MCwxNCArNjAsNTYgQEAKICAgc3RhdGljcyA6CiAgIHsKICAg
ICAvKioKKyAgICAgKiBSZXR1cm5zIHRoZSBmdW5jdGlvbiB0aGF0IGNoZWNrcyBmb3IgYW4gaW50
ZWdlci4KKyAgICAgKgorICAgICAqIEBwYXJhbSBlcnJvck1lc3NhZ2Uge1N0cmluZz9udWxsfSBD
dXN0b20gZXJyb3IgbWVzc2FnZS4KKyAgICAgKiBAcGFyYW0gY2hlY2tFbXB0eSB7Qm9vbGVhbj9m
YWxzZX0gQ2hlY2sgZm9yIGVtcHR5IGZpZWxkLgorICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBU
aGUge0BsaW5rICNjaGVja0ludGVnZXJ9IEZ1bmN0aW9uLgorICAgICAqLworICAgIGludGVnZXIg
OiBmdW5jdGlvbihlcnJvck1lc3NhZ2UsIGNoZWNrRW1wdHkpIHsKKyAgICAgIHJldHVybiBmdW5j
dGlvbih2YWx1ZSkgeworICAgICAgICBxeC51dGlsLlZhbGlkYXRlLmNoZWNrSW50ZWdlcih2YWx1
ZSwgbnVsbCwgZXJyb3JNZXNzYWdlLCBjaGVja0VtcHR5KTsKKyAgICAgIH0KKyAgICB9LAorCisg
ICAgLyoqCisgICAgICogVGhlIGZ1bmN0aW9uIGNoZWNrcyB0aGUgaW5jb21pbmcgdmFsdWUgdG8g
c2VlIGlmIGl0IGlzIGFuIGludGVnZXIKKyAgICAgKiBieSB1c2luZyB3ZWFrIHZhcmlhYmxlIHR5
cGluZy4gUmFkaXggaXMgZGVmYXVsdCAxMCBub3csIGJ1dCBjYW4gYmUKKyAgICAgKiBjaGFuZ2Vk
IHRvIGV4cGFuZCB0aGUgZnVuY3Rpb25hbGl0eS4KKyAgICAgKiBJZiBub3QsIGFuIFZhbGlkYXRp
b25FcnJvciB3aWxsIGJlIHRocm93bi4KKyAgICAgKiBJZiB5b3Ugd2FudCB0byB1c2UgdGhlIGlu
dGVnZXIgY2hlY2sgaW4gYSBwcm9wZXJ0eSBkZWZpbml0aW9uLAorICAgICAqIHVzZSB0aGUge0Bs
aW5rICNpbnRlZ2VyfSBtZXRob2QuCisgICAgICoKKyAgICAgKiBAcGFyYW0gdmFsdWUge3Zhcn0g
VGhlIHZhbHVlIHRvIGNoZWNrLgorICAgICAqIEBwYXJhbSBmb3JtSXRlbSB7cXgudWkuZm9ybS5J
Rm9ybX0gVGhlIGZvcm0gaXRlbSB0byBjaGVjayBpZiB1c2VkIGluIGEKKyAgICAgKiAgIHtAbGlu
ayBxeC51aS5mb3JtLkZvcm19LgorICAgICAqIEBwYXJhbSBlcnJvck1lc3NhZ2Uge1N0cmluZz91
bmRlZmluZWR9IEN1c3RvbSBlcnJvciBtZXNzYWdlLgorICAgICAqIEBwYXJhbSBjaGVja0VtcHR5
IHtCb29sZWFuP2ZhbHNlfSBDaGVjayBmb3IgZW1wdHkgZmllbGQuCisgICAgICogQHRocm93cyB7
cXguY29yZS5WYWxpZGF0aW9uRXJyb3J9IElmIHRoZSB2YWx1ZSBwYXJhbWV0ZXIgaXMgbm90IGEK
KyAgICAgKiAgICBpbnRlZ2VyCisgICAgICovCisgICAgY2hlY2tJbnRlZ2VyIDogZnVuY3Rpb24o
dmFsdWUsIGZvcm1JdGVtLCBlcnJvck1lc3NhZ2UsIGNoZWNrRW1wdHkpCisgICAgeworICAgICAg
dmFyIGVtcHR5ID0gY2hlY2tFbXB0eSA/ICF2YWx1ZSA6IGZhbHNlOworCisgICAgICBpZiAoZW1w
dHkgfHwgKHBhcnNlRmxvYXQodmFsdWUpICE9IHBhcnNlSW50KHZhbHVlKSkgfHwgKCEoaXNGaW5p
dGUodmFsdWUpKSkpCisgICAgICB7CisgICAgICAgIGVycm9yTWVzc2FnZSA9IGVycm9yTWVzc2Fn
ZSB8fCBxeC5sb2NhbGUuTWFuYWdlci50cigiJTEgaXMgbm90IGFuIGludGVnZXIuIiwgdmFsdWUp
OworICAgICAgICB0aHJvdyBuZXcgcXguY29yZS5WYWxpZGF0aW9uRXJyb3IoIlZhbGlkYXRpb24g
RXJyb3IiLCBlcnJvck1lc3NhZ2UpOworICAgICAgfQorICAgIH0sCisKKworICAgIC8qKgogICAg
ICAqIFJldHVybnMgdGhlIGZ1bmN0aW9uIHRoYXQgY2hlY2tzIGZvciBhIG51bWJlci4KICAgICAg
KgogICAgICAqIEBwYXJhbSBlcnJvck1lc3NhZ2Uge1N0cmluZz9udWxsfSBDdXN0b20gZXJyb3Ig
bWVzc2FnZS4KKyAgICAgKiBAcGFyYW0gY2hlY2tFbXB0eSB7Qm9vbGVhbj9mYWxzZX0gQ2hlY2sg
Zm9yIGVtcHR5IGZpZWxkLgogICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBUaGUge0BsaW5rICNj
aGVja051bWJlcn0gRnVuY3Rpb24uCiAgICAgICovCi0gICAgbnVtYmVyIDogZnVuY3Rpb24oZXJy
b3JNZXNzYWdlKSB7CisgICAgbnVtYmVyIDogZnVuY3Rpb24oZXJyb3JNZXNzYWdlLCBjaGVja0Vt
cHR5KSB7CiAgICAgICByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHsKLSAgICAgICAgcXgudXRpbC5W
YWxpZGF0ZS5jaGVja051bWJlcih2YWx1ZSwgbnVsbCwgZXJyb3JNZXNzYWdlKTsKKyAgICAgICAg
cXgudXRpbC5WYWxpZGF0ZS5jaGVja051bWJlcih2YWx1ZSwgbnVsbCwgZXJyb3JNZXNzYWdlLCBj
aGVja0VtcHR5KTsKICAgICAgIH0KICAgICB9LAogCkBAIC04MiwxNyArMTI0LDE4IEBACiAgICAg
ICogQHBhcmFtIGZvcm1JdGVtIHtxeC51aS5mb3JtLklGb3JtfSBUaGUgZm9ybSBpdGVtIHRvIGNo
ZWNrIGlmIHVzZWQgaW4gYQogICAgICAqICAge0BsaW5rIHF4LnVpLmZvcm0uRm9ybX0uCiAgICAg
ICogQHBhcmFtIGVycm9yTWVzc2FnZSB7U3RyaW5nP3VuZGVmaW5lZH0gQ3VzdG9tIGVycm9yIG1l
c3NhZ2UuCisgICAgICogQHBhcmFtIGNoZWNrRW1wdHkge0Jvb2xlYW4/ZmFsc2V9IENoZWNrIGZv
ciBlbXB0eSBmaWVsZC4KICAgICAgKiBAdGhyb3dzIHtxeC5jb3JlLlZhbGlkYXRpb25FcnJvcn0g
SWYgdGhlIHZhbHVlIHBhcmFtZXRlciBpcyBub3QgYQogICAgICAqICAgIGZpbml0ZSBudW1iZXIK
ICAgICAgKi8KLSAgICBjaGVja051bWJlciA6IGZ1bmN0aW9uKHZhbHVlLCBmb3JtSXRlbSwgZXJy
b3JNZXNzYWdlKQorICAgIGNoZWNrTnVtYmVyIDogZnVuY3Rpb24odmFsdWUsIGZvcm1JdGVtLCBl
cnJvck1lc3NhZ2UsIGNoZWNrRW1wdHkpCiAgICAgewotICAgICAgZXJyb3JNZXNzYWdlID0gZXJy
b3JNZXNzYWdlIHx8Ci0gICAgICAgIHF4LmxvY2FsZS5NYW5hZ2VyLnRyKCIlMSBpcyBub3QgYSBu
dW1iZXIuIiwgdmFsdWUpOworICAgICAgdmFyIGVtcHR5ID0gY2hlY2tFbXB0eSA/ICF2YWx1ZSA6
IGZhbHNlOwogCi0gICAgICBpZiAoKHR5cGVvZiB2YWx1ZSAhPT0gIm51bWJlciIgJiYgKCEodmFs
dWUgaW5zdGFuY2VvZiBOdW1iZXIpKSkKKyAgICAgIGlmIChlbXB0eSB8fCAodHlwZW9mIHZhbHVl
ICE9PSAibnVtYmVyIiAmJiAoISh2YWx1ZSBpbnN0YW5jZW9mIE51bWJlcikpKQogICAgICAgICB8
fCAoIShpc0Zpbml0ZSh2YWx1ZSkpKSkKICAgICAgIHsKKyAgICAgICAgZXJyb3JNZXNzYWdlID0g
ZXJyb3JNZXNzYWdlIHx8IHF4LmxvY2FsZS5NYW5hZ2VyLnRyKCIlMSBpcyBub3QgYSBudW1iZXIu
IiwgdmFsdWUpOwogICAgICAgICB0aHJvdyBuZXcgcXguY29yZS5WYWxpZGF0aW9uRXJyb3IoIlZh
bGlkYXRpb24gRXJyb3IiLCBlcnJvck1lc3NhZ2UpOwogICAgICAgfQogICAgIH0sCkBAIC0xMDIs
MTEgKzE0NSwxMiBAQAogICAgICAqIFJldHVybnMgdGhlIGZ1bmN0aW9uIHRoYXQgY2hlY2tzIGZv
ciBhbiBlbWFpbCBhZGRyZXNzLgogICAgICAqCiAgICAgICogQHBhcmFtIGVycm9yTWVzc2FnZSB7
U3RyaW5nP251bGx9IEN1c3RvbSBlcnJvciBtZXNzYWdlLgorICAgICAqIEBwYXJhbSBjaGVja0Vt
cHR5IHtCb29sZWFuP2ZhbHNlfSBDaGVjayBmb3IgZW1wdHkgZmllbGQuCiAgICAgICogQHJldHVy
biB7RnVuY3Rpb259IFRoZSB7QGxpbmsgI2NoZWNrRW1haWx9IEZ1bmN0aW9uLgogICAgICAqLwot
ICAgIGVtYWlsIDogZnVuY3Rpb24oZXJyb3JNZXNzYWdlKSB7CisgICAgZW1haWwgOiBmdW5jdGlv
bihlcnJvck1lc3NhZ2UsIGNoZWNrRW1wdHkpIHsKICAgICAgIHJldHVybiBmdW5jdGlvbih2YWx1
ZSkgewotICAgICAgICBxeC51dGlsLlZhbGlkYXRlLmNoZWNrRW1haWwodmFsdWUsIG51bGwsIGVy
cm9yTWVzc2FnZSk7CisgICAgICAgIHF4LnV0aWwuVmFsaWRhdGUuY2hlY2tFbWFpbCh2YWx1ZSwg
bnVsbCwgZXJyb3JNZXNzYWdlLCBjaGVja0VtcHR5KTsKICAgICAgIH0KICAgICB9LAogCkBAIC0x
MjEsMTYgKzE2NSwxNyBAQAogICAgICAqIEBwYXJhbSBmb3JtSXRlbSB7cXgudWkuZm9ybS5JRm9y
bX0gVGhlIGZvcm0gaXRlbSB0byBjaGVjayBpZiB1c2VkIGluIGEKICAgICAgKiAgIHtAbGluayBx
eC51aS5mb3JtLkZvcm19LgogICAgICAqIEBwYXJhbSBlcnJvck1lc3NhZ2Uge1N0cmluZz9udWxs
fSBDdXN0b20gZXJyb3IgbWVzc2FnZS4KKyAgICAgKiBAcGFyYW0gY2hlY2tFbXB0eSB7Qm9vbGVh
bj9mYWxzZX0gQ2hlY2sgZm9yIGVtcHR5IGZpZWxkLgogICAgICAqIEB0aHJvd3Mge3F4LmNvcmUu
VmFsaWRhdGlvbkVycm9yfSBJZiB0aGUgdmFsdWUgcGFyYW1ldGVyIGlzIG5vdAogICAgICAqICAg
IGEgdmFsaWQgZW1haWwgYWRkcmVzcy4KICAgICAgKi8KLSAgICBjaGVja0VtYWlsIDogZnVuY3Rp
b24odmFsdWUsIGZvcm1JdGVtLCBlcnJvck1lc3NhZ2UpCisgICAgY2hlY2tFbWFpbCA6IGZ1bmN0
aW9uKHZhbHVlLCBmb3JtSXRlbSwgZXJyb3JNZXNzYWdlLCBjaGVja0VtcHR5KQogICAgIHsKLSAg
ICAgIGVycm9yTWVzc2FnZSA9IGVycm9yTWVzc2FnZSB8fAotICAgICAgICBxeC5sb2NhbGUuTWFu
YWdlci50cigiJyUxJyBpcyBub3QgYW4gZW1haWwgYWRkcmVzcy4iLCAodmFsdWUgfHwgIiIpKTsK
KyAgICAgIHZhciByZWcgPSAvXihbQS1aYS16MC05X1wtXC5dKStcQChbQS1aYS16MC05X1wtXC5d
KStcLihbQS1aYS16XXsyLDR9KSQvOworICAgICAgdmFyIGVtcHR5ID0gY2hlY2tFbXB0eSA/ICF2
YWx1ZSA6ZmFsc2U7CiAKLSAgICAgIHZhciByZWcgPSAvXihbQS1aYS16MC05X1wtXC5dKStcQChb
QS1aYS16MC05X1wtXC5dKStcLihbQS1aYS16XXsyLDR9KSQvOwotICAgICAgaWYgKHJlZy50ZXN0
KHZhbHVlKSA9PT0gZmFsc2UpIHsKKyAgICAgIGlmIChlbXB0eSB8fCByZWcudGVzdCh2YWx1ZSkg
PT09IGZhbHNlKSB7CisgICAgICAgIGVycm9yTWVzc2FnZSA9IGVycm9yTWVzc2FnZSB8fCBxeC5s
b2NhbGUuTWFuYWdlci50cigiJyUxJyBpcyBub3QgYW4gZW1haWwgYWRkcmVzcy4iLCAodmFsdWUg
fHwgIiIpKTsKICAgICAgICAgdGhyb3cgbmV3IHF4LmNvcmUuVmFsaWRhdGlvbkVycm9yKCJWYWxp
ZGF0aW9uIEVycm9yIixlcnJvck1lc3NhZ2UpOwogICAgICAgfQogICAgIH0sCkBAIC0xNDAsMTEg
KzE4NSwxMiBAQAogICAgICAqIFJldHVybnMgdGhlIGZ1bmN0aW9uIHRoYXQgY2hlY2tzIGZvciBh
IHN0cmluZy4KICAgICAgKgogICAgICAqIEBwYXJhbSBlcnJvck1lc3NhZ2Uge1N0cmluZz9udWxs
fSBDdXN0b20gZXJyb3IgbWVzc2FnZS4KKyAgICAgKiBAcGFyYW0gY2hlY2tFbXB0eSB7Qm9vbGVh
bj9mYWxzZX0gQ2hlY2sgZm9yIGVtcHR5IGZpZWxkLgogICAgICAqIEByZXR1cm4ge0Z1bmN0aW9u
fSBUaGUge0BsaW5rICNjaGVja1N0cmluZ30gRnVuY3Rpb24uCiAgICAgICovCi0gICAgc3RyaW5n
IDogZnVuY3Rpb24oZXJyb3JNZXNzYWdlKSB7CisgICAgc3RyaW5nIDogZnVuY3Rpb24oZXJyb3JN
ZXNzYWdlLCBjaGVja0VtcHR5KSB7CiAgICAgICByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHsKLSAg
ICAgICAgcXgudXRpbC5WYWxpZGF0ZS5jaGVja1N0cmluZyh2YWx1ZSwgbnVsbCwgZXJyb3JNZXNz
YWdlKTsKKyAgICAgICAgcXgudXRpbC5WYWxpZGF0ZS5jaGVja1N0cmluZyh2YWx1ZSwgbnVsbCwg
ZXJyb3JNZXNzYWdlLCBjaGVja0VtcHR5KTsKICAgICAgIH0KICAgICB9LAogCkBAIC0xNTksMTQg
KzIwNSwxNSBAQAogICAgICAqIEBwYXJhbSBmb3JtSXRlbSB7cXgudWkuZm9ybS5JRm9ybX0gVGhl
IGZvcm0gaXRlbSB0byBjaGVjayBpZiB1c2VkIGluIGEKICAgICAgKiAgIHtAbGluayBxeC51aS5m
b3JtLkZvcm19LgogICAgICAqIEBwYXJhbSBlcnJvck1lc3NhZ2Uge1N0cmluZz9udWxsfSBDdXN0
b20gZXJyb3IgbWVzc2FnZS4KKyAgICAgKiBAcGFyYW0gY2hlY2tFbXB0eSB7Qm9vbGVhbj9mYWxz
ZX0gQ2hlY2sgZm9yIGVtcHR5IGZpZWxkLgogICAgICAqIEB0aHJvd3Mge3F4LmNvcmUuVmFsaWRh
dGlvbkVycm9yfSBJZiB0aGUgdmFsdWUgcGFyYW1ldGVyIGlzIG5vdCBhIHN0cmluZy4KICAgICAg
Ki8KLSAgICBjaGVja1N0cmluZyA6IGZ1bmN0aW9uKHZhbHVlLCBmb3JtSXRlbSwgZXJyb3JNZXNz
YWdlKQorICAgIGNoZWNrU3RyaW5nIDogZnVuY3Rpb24odmFsdWUsIGZvcm1JdGVtLCBlcnJvck1l
c3NhZ2UsIGNoZWNrRW1wdHkpCiAgICAgewotICAgICAgZXJyb3JNZXNzYWdlID0gZXJyb3JNZXNz
YWdlIHx8Ci0gICAgICAgIHF4LmxvY2FsZS5NYW5hZ2VyLnRyKCIlMSBpcyBub3QgYSBzdHJpbmcu
IiwgdmFsdWUpOworICAgICAgdmFyIGVtcHR5ID0gY2hlY2tFbXB0eSA/ICF2YWx1ZSA6IGZhbHNl
OwogCi0gICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAic3RyaW5nIiAmJiAoISh2YWx1ZSBpbnN0
YW5jZW9mIFN0cmluZykpKSB7CisgICAgICBpZiAoZW1wdHkgfHwgdHlwZW9mIHZhbHVlICE9PSAi
c3RyaW5nIiAmJiAoISh2YWx1ZSBpbnN0YW5jZW9mIFN0cmluZykpKSB7CisgICAgICAgIGVycm9y
TWVzc2FnZSA9IGVycm9yTWVzc2FnZSB8fCBxeC5sb2NhbGUuTWFuYWdlci50cigiJTEgaXMgbm90
IGEgc3RyaW5nLiIsIHZhbHVlKTsKICAgICAgICAgdGhyb3cgbmV3IHF4LmNvcmUuVmFsaWRhdGlv
bkVycm9yKCJWYWxpZGF0aW9uIEVycm9yIiwgZXJyb3JNZXNzYWdlKTsKICAgICAgIH0KICAgICB9
LApAQCAtMTc2LDExICsyMjMsMTIgQEAKICAgICAgKiBSZXR1cm5zIHRoZSBmdW5jdGlvbiB0aGF0
IGNoZWNrcyBmb3IgYW4gdXJsLgogICAgICAqCiAgICAgICogQHBhcmFtIGVycm9yTWVzc2FnZSB7
U3RyaW5nP251bGx9IEN1c3RvbSBlcnJvciBtZXNzYWdlLgorICAgICAqIEBwYXJhbSBjaGVja0Vt
cHR5IHtCb29sZWFuP2ZhbHNlfSBDaGVjayBmb3IgZW1wdHkgZmllbGQuCiAgICAgICogQHJldHVy
biB7RnVuY3Rpb259IFRoZSB7QGxpbmsgI2NoZWNrVXJsfSBGdW5jdGlvbi4KICAgICAgKi8KLSAg
ICB1cmwgOiBmdW5jdGlvbihlcnJvck1lc3NhZ2UpIHsKKyAgICB1cmwgOiBmdW5jdGlvbihlcnJv
ck1lc3NhZ2UsIGNoZWNrRW1wdHkpIHsKICAgICAgIHJldHVybiBmdW5jdGlvbih2YWx1ZSkgewot
ICAgICAgICBxeC51dGlsLlZhbGlkYXRlLmNoZWNrVXJsKHZhbHVlLCBudWxsLCBlcnJvck1lc3Nh
Z2UpOworICAgICAgICBxeC51dGlsLlZhbGlkYXRlLmNoZWNrVXJsKHZhbHVlLCBudWxsLCBlcnJv
ck1lc3NhZ2UsIGNoZWNrRW1wdHkpOwogICAgICAgfQogICAgIH0sCiAKQEAgLTE5NywxMyArMjQ1
LDEzIEBACiAgICAgICogQHBhcmFtIGVycm9yTWVzc2FnZSB7U3RyaW5nP251bGx9IEN1c3RvbSBl
cnJvciBtZXNzYWdlLgogICAgICAqIEB0aHJvd3Mge3F4LmNvcmUuVmFsaWRhdGlvbkVycm9yfSBJ
ZiB0aGUgdmFsdWUgcGFyYW1ldGVyIGlzIG5vdCBhbiB1cmwuCiAgICAgICovCi0gICAgY2hlY2tV
cmwgOiBmdW5jdGlvbih2YWx1ZSwgZm9ybUl0ZW0sIGVycm9yTWVzc2FnZSkKKyAgICBjaGVja1Vy
bCA6IGZ1bmN0aW9uKHZhbHVlLCBmb3JtSXRlbSwgZXJyb3JNZXNzYWdlLCBjaGVja0VtcHR5KQog
ICAgIHsKLSAgICAgIGVycm9yTWVzc2FnZSA9IGVycm9yTWVzc2FnZSB8fAotICAgICAgICBxeC5s
b2NhbGUuTWFuYWdlci50cigiJTEgaXMgbm90IGFuIHVybC4iLCB2YWx1ZSk7CisgICAgICB2YXIg
cmVnID0gIC8oW0EtWmEtejAtOV0pKzpcL1wvKFx3Kzp7MCwxfVx3KkApPyhcUyspKDpbMC05XSsp
PyhcL3xcLyhbXHcjITouPys9JiVAIVwtXC9dKSk/LzsKKyAgICAgIHZhciBlbXB0eSA9IGNoZWNr
RW1wdHkgPyAhdmFsdWUgOmZhbHNlOwogCi0gICAgICB2YXIgcmVnID0gIC8oW0EtWmEtejAtOV0p
KzpcL1wvKFx3Kzp7MCwxfVx3KkApPyhcUyspKDpbMC05XSspPyhcL3xcLyhbXHcjITouPys9JiVA
IVwtXC9dKSk/LzsKLSAgICAgIGlmICghcmVnLnRlc3QodmFsdWUpKSB7CisgICAgICBpZiAoZW1w
dHkgfHwgIXJlZy50ZXN0KHZhbHVlKSkgeworICAgICAgICBlcnJvck1lc3NhZ2UgPSBlcnJvck1l
c3NhZ2UgfHwgcXgubG9jYWxlLk1hbmFnZXIudHIoIiUxIGlzIG5vdCBhbiB1cmwuIiwgdmFsdWUp
OwogICAgICAgICB0aHJvdyBuZXcgcXguY29yZS5WYWxpZGF0aW9uRXJyb3IoIlZhbGlkYXRpb24g
RXJyb3IiLCBlcnJvck1lc3NhZ2UpOwogICAgICAgfQogICAgIH0sCkBAIC0yMTMsMTEgKzI2MSwx
MiBAQAogICAgICAqIFJldHVybnMgdGhlIGZ1bmN0aW9uIHRoYXQgY2hlY2tzIGZvciBhIGNvbG9y
LgogICAgICAqCiAgICAgICogQHBhcmFtIGVycm9yTWVzc2FnZSB7U3RyaW5nP251bGx9IEN1c3Rv
bSBlcnJvciBtZXNzYWdlLgorICAgICAqIEBwYXJhbSBjaGVja0VtcHR5IHtCb29sZWFuP2ZhbHNl
fSBDaGVjayBmb3IgZW1wdHkgZmllbGQuCiAgICAgICogQHJldHVybiB7RnVuY3Rpb259IFRoZSB7
QGxpbmsgI2NoZWNrQ29sb3J9IEZ1bmN0aW9uLgogICAgICAqLwotICAgIGNvbG9yIDogZnVuY3Rp
b24oZXJyb3JNZXNzYWdlKSB7CisgICAgY29sb3IgOiBmdW5jdGlvbihlcnJvck1lc3NhZ2UsIGNo
ZWNrRW1wdHkpIHsKICAgICAgIHJldHVybiBmdW5jdGlvbih2YWx1ZSkgewotICAgICAgICBxeC51
dGlsLlZhbGlkYXRlLmNoZWNrQ29sb3IodmFsdWUsIG51bGwsIGVycm9yTWVzc2FnZSk7CisgICAg
ICAgIHF4LnV0aWwuVmFsaWRhdGUuY2hlY2tDb2xvcih2YWx1ZSwgbnVsbCwgZXJyb3JNZXNzYWdl
LCBjaGVja0VtcHR5KTsKICAgICAgIH0KICAgICB9LAogCkBAIC0yMzMsMTUgKzI4MiwyMyBAQAog
ICAgICAqIEBwYXJhbSBmb3JtSXRlbSB7cXgudWkuZm9ybS5JRm9ybX0gVGhlIGZvcm0gaXRlbSB0
byBjaGVjayBpZiB1c2VkIGluIGEKICAgICAgKiAgIHtAbGluayBxeC51aS5mb3JtLkZvcm19Lgog
ICAgICAqIEBwYXJhbSBlcnJvck1lc3NhZ2Uge1N0cmluZz9udWxsfSBDdXN0b20gZXJyb3IgbWVz
c2FnZS4KKyAgICAgKiBAcGFyYW0gY2hlY2tFbXB0eSB7Qm9vbGVhbj9mYWxzZX0gQ2hlY2sgZm9y
IGVtcHR5IGZpZWxkLgogICAgICAqIEB0aHJvd3Mge3F4LmNvcmUuVmFsaWRhdGlvbkVycm9yfSBJ
ZiB0aGUgdmFsdWUgcGFyYW1ldGVyIGlzIG5vdCBhIGNvbG9yLgogICAgICAqLwotICAgIGNoZWNr
Q29sb3IgOiBmdW5jdGlvbih2YWx1ZSwgZm9ybUl0ZW0sIGVycm9yTWVzc2FnZSkKKyAgICBjaGVj
a0NvbG9yIDogZnVuY3Rpb24odmFsdWUsIGZvcm1JdGVtLCBlcnJvck1lc3NhZ2UsIGNoZWNrRW1w
dHkpCiAgICAgeworICAgICAgdmFyIGVtcHR5ID0gY2hlY2tFbXB0eSA/ICF2YWx1ZSA6ZmFsc2U7
CisKICAgICAgIHRyeSB7CiAgICAgICAgIHF4LnV0aWwuQ29sb3JVdGlsLnN0cmluZ1RvUmdiKHZh
bHVlKTsKKworICAgICAgICBpZihlbXB0eSkKKyAgICAgICAgeworICAgICAgICAgIHRocm93ICJF
bXB0eSI7CisgICAgICAgIH0KKwogICAgICAgfSBjYXRjaCAoZSkgewotICAgICAgICBlcnJvck1l
c3NhZ2UgPSBlcnJvck1lc3NhZ2UgfHwKLSAgICAgICAgICBxeC5sb2NhbGUuTWFuYWdlci50cigi
JTEgaXMgbm90IGEgY29sb3IhICUyIiwgdmFsdWUsIGUpOworICAgICAgICBlcnJvck1lc3NhZ2Ug
PSBlcnJvck1lc3NhZ2UgfHwgcXgubG9jYWxlLk1hbmFnZXIudHIoIiUxIGlzIG5vdCBhIGNvbG9y
ISAlMiIsIHZhbHVlLCBlKTsKICAgICAgICAgdGhyb3cgbmV3IHF4LmNvcmUuVmFsaWRhdGlvbkVy
cm9yKCJWYWxpZGF0aW9uIEVycm9yIiwgZXJyb3JNZXNzYWdlKTsKICAgICAgIH0KICAgICB9LApA
QCAtMjU4LDE2ICszMTUsMTcgQEAKICAgICAgKiBAcGFyYW0gZnJvbSB7TnVtYmVyfSBUaGUgbG93
ZXIgYm9yZGVyIG9mIHRoZSByYW5nZS4KICAgICAgKiBAcGFyYW0gdG8ge051bWJlcn0gVGhlIHVw
cGVyIGJvcmRlciBvZiB0aGUgcmFuZ2UuCiAgICAgICogQHBhcmFtIGVycm9yTWVzc2FnZSB7U3Ry
aW5nP251bGx9IEN1c3RvbSBlcnJvciBtZXNzYWdlLgorICAgICAqIEBwYXJhbSBjaGVja0VtcHR5
IHtCb29sZWFuP2ZhbHNlfSBDaGVjayBmb3IgZW1wdHkgZmllbGQuCiAgICAgICogQHJldHVybiB7
RnVuY3Rpb259IEEgZnVuY3Rpb24gdGFraW5nIG9uZSBwYXJhbWV0ZXIgKHZhbHVlKS4KICAgICAg
Ki8KLSAgICByYW5nZSA6IGZ1bmN0aW9uKGZyb20sIHRvLCBlcnJvck1lc3NhZ2UpCisgICAgcmFu
Z2UgOiBmdW5jdGlvbihmcm9tLCB0bywgZXJyb3JNZXNzYWdlLCBjaGVja0VtcHR5KQogICAgIHsK
ICAgICAgIHJldHVybiBmdW5jdGlvbih2YWx1ZSkKICAgICAgIHsKLSAgICAgICAgZXJyb3JNZXNz
YWdlID0gZXJyb3JNZXNzYWdlIHx8Ci0gICAgICAgICAgcXgubG9jYWxlLk1hbmFnZXIudHIoIiUx
IGlzIG5vdCBpbiB0aGUgcmFuZ2UgZnJvbSBbJTIsICUzXS4iLCB2YWx1ZSwgZnJvbSwgdG8pOwor
ICAgICAgICB2YXIgZW1wdHkgPSBjaGVja0VtcHR5ID8gIXZhbHVlIDpmYWxzZTsKIAotICAgICAg
ICBpZiAodmFsdWUgPCBmcm9tIHx8IHZhbHVlID4gdG8pIHsKKyAgICAgICAgaWYgKGVtcHR5IHx8
IHZhbHVlIDwgZnJvbSB8fCB2YWx1ZSA+IHRvKSB7CisgICAgICAgICAgZXJyb3JNZXNzYWdlID0g
ZXJyb3JNZXNzYWdlIHx8IHF4LmxvY2FsZS5NYW5hZ2VyLnRyKCIlMSBpcyBub3QgaW4gdGhlIHJh
bmdlIGZyb20gWyUyLCAlM10uIiwgdmFsdWUsIGZyb20sIHRvKTsKICAgICAgICAgICB0aHJvdyBu
ZXcgcXguY29yZS5WYWxpZGF0aW9uRXJyb3IoIlZhbGlkYXRpb24gRXJyb3IiLCBlcnJvck1lc3Nh
Z2UpOwogICAgICAgICB9CiAgICAgICB9CkBAIC0yODEsMTYgKzMzOSwxNyBAQAogICAgICAqCiAg
ICAgICogQHBhcmFtIGFycmF5IHtBcnJheX0gVGhlIGFycmF5IGhvbGRpbmcgdGhlIHBvc3NpYmls
aXRpZXMuCiAgICAgICogQHBhcmFtIGVycm9yTWVzc2FnZSB7U3RyaW5nP251bGx9IEN1c3RvbSBl
cnJvciBtZXNzYWdlLgorICAgICAqIEBwYXJhbSBjaGVja0VtcHR5IHtCb29sZWFuP2ZhbHNlfSBD
aGVjayBmb3IgZW1wdHkgZmllbGQuCiAgICAgICogQHJldHVybiB7RnVuY3Rpb259IEEgZnVuY3Rp
b24gdGFraW5nIG9uZSBwYXJhbWV0ZXIgKHZhbHVlKS4KICAgICAgKi8KLSAgICBpbkFycmF5IDog
ZnVuY3Rpb24oYXJyYXksIGVycm9yTWVzc2FnZSkKKyAgICBpbkFycmF5IDogZnVuY3Rpb24oYXJy
YXksIGVycm9yTWVzc2FnZSwgY2hlY2tFbXB0eSkKICAgICB7CiAgICAgICByZXR1cm4gZnVuY3Rp
b24odmFsdWUpCiAgICAgICB7Ci0gICAgICAgIGVycm9yTWVzc2FnZSA9IGVycm9yTWVzc2FnZSB8
fAotICAgICAgICAgIHF4LmxvY2FsZS5NYW5hZ2VyLnRyKCIlMSBpcyBub3QgaW4gJTIiLCB2YWx1
ZSwgYXJyYXkpOworICAgICAgICB2YXIgZW1wdHkgPSBjaGVja0VtcHR5ID8gIXZhbHVlIDpmYWxz
ZTsKIAotICAgICAgICBpZiAoYXJyYXkuaW5kZXhPZih2YWx1ZSkgPT09IC0xKSB7CisgICAgICAg
IGlmIChlbXB0eSB8fCBhcnJheS5pbmRleE9mKHZhbHVlKSA9PT0gLTEpIHsKKyAgICAgICAgICBl
cnJvck1lc3NhZ2UgPSBlcnJvck1lc3NhZ2UgfHwgcXgubG9jYWxlLk1hbmFnZXIudHIoIiUxIGlz
IG5vdCBpbiAlMiIsIHZhbHVlLCBhcnJheSk7CiAgICAgICAgICAgdGhyb3cgbmV3IHF4LmNvcmUu
VmFsaWRhdGlvbkVycm9yKCJWYWxpZGF0aW9uIEVycm9yIiwgZXJyb3JNZXNzYWdlKTsKICAgICAg
ICAgfQogICAgICAgfQpAQCAtMzA1LDE2ICszNjQsMTcgQEAKICAgICAgKiBpbmNvbWluZwogICAg
ICAqIEBwYXJhbSByZWcge1JlZ0V4cH0gVGhlIFJlZ0V4cCBmb3IgdGhlIGNoZWNrLgogICAgICAq
IEBwYXJhbSBlcnJvck1lc3NhZ2Uge1N0cmluZz9udWxsfSBDdXN0b20gZXJyb3IgbWVzc2FnZS4K
KyAgICAgKiBAcGFyYW0gY2hlY2tFbXB0eSB7Qm9vbGVhbj9mYWxzZX0gQ2hlY2sgZm9yIGVtcHR5
IGZpZWxkLgogICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBBIGZ1bmN0aW9uIHRha2luZyBvbmUg
cGFyYW1ldGVyICh2YWx1ZSkuCiAgICAgICovCi0gICAgcmVnRXhwIDogZnVuY3Rpb24ocmVnLCBl
cnJvck1lc3NhZ2UpCisgICAgcmVnRXhwIDogZnVuY3Rpb24ocmVnLCBlcnJvck1lc3NhZ2UsIGNo
ZWNrRW1wdHkpCiAgICAgewogICAgICAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKQogICAgICAgewot
ICAgICAgICBlcnJvck1lc3NhZ2UgPSBlcnJvck1lc3NhZ2UgfHwKLSAgICAgICAgICBxeC5sb2Nh
bGUuTWFuYWdlci50cigiJTEgZG9lcyBub3QgZml0ICUyLiIsIHZhbHVlLCByZWcpOworICAgICAg
ICB2YXIgZW1wdHkgPSBjaGVja0VtcHR5ID8gIXZhbHVlIDpmYWxzZTsKIAotICAgICAgICBpZiAo
IXJlZy50ZXN0KHZhbHVlKSkgeworICAgICAgICBpZiAoZW1wdHkgfHwgIXJlZy50ZXN0KHZhbHVl
KSkgeworICAgICAgICAgIGVycm9yTWVzc2FnZSA9IGVycm9yTWVzc2FnZSB8fCBxeC5sb2NhbGUu
TWFuYWdlci50cigiJTEgZG9lcyBub3QgZml0ICUyLiIsIHZhbHVlLCByZWcpOwogICAgICAgICAg
IHRocm93IG5ldyBxeC5jb3JlLlZhbGlkYXRpb25FcnJvcigiVmFsaWRhdGlvbiBFcnJvciIsIGVy
cm9yTWVzc2FnZSk7CiAgICAgICAgIH0KICAgICAgIH0KQEAgLTMyMiw1ICszODIsMyBAQAogICB9
CiB9KTsKIAotCi0K
</data>

          </attachment>
          <attachment isobsolete="0" ispatch="0" isprivate="0" isurl="0">
            <attachid>1061</attachid>
            <date>2011-09-23 13:52:00 +0200</date>
            <delta_ts>2011-09-23 13:52:36 +0200</delta_ts>
            <desc>New version...</desc>
            <filename>Validate.js.diff</filename>
            <type>text/plain</type>
            <size>12857</size>
            <attacher>dev</attacher>
            
              <data encoding="base64">SW5kZXg6IGZyYW1ld29yay9zb3VyY2UvY2xhc3MvcXgvdXRpbC9WYWxpZGF0ZS5qcwo9PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09Ci0tLSBmcmFtZXdvcmsvc291cmNlL2NsYXNzL3F4L3V0aWwvVmFsaWRhdGUuanMJKHJldmlz
aW9uIDI4NzQ3KQorKysgZnJhbWV3b3JrL3NvdXJjZS9jbGFzcy9xeC91dGlsL1ZhbGlkYXRlLmpz
CSh3b3JraW5nIGNvcHkpCkBAIC02MCwxNCArNjAsNjEgQEAKICAgc3RhdGljcyA6CiAgIHsKICAg
ICAvKioKKyAgICAgKiBSZXR1cm5zIHRoZSBmdW5jdGlvbiB0aGF0IGNoZWNrcyBmb3IgYW4gaW50
ZWdlci4KKyAgICAgKgorICAgICAqIEBwYXJhbSBlcnJvck1lc3NhZ2Uge1N0cmluZz9udWxsfSBD
dXN0b20gZXJyb3IgbWVzc2FnZS4KKyAgICAgKiBAcGFyYW0gY2hlY2tFbXB0eSB7Qm9vbGVhbj9m
YWxzZX0gQ2hlY2sgZm9yIGVtcHR5IGZpZWxkLgorICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBU
aGUge0BsaW5rICNjaGVja0ludGVnZXJ9IEZ1bmN0aW9uLgorICAgICAqLworICAgIGludGVnZXIg
OiBmdW5jdGlvbihlcnJvck1lc3NhZ2UsIGNoZWNrRW1wdHkpIHsKKyAgICAgIHJldHVybiBmdW5j
dGlvbih2YWx1ZSkgeworICAgICAgICBxeC51dGlsLlZhbGlkYXRlLmNoZWNrSW50ZWdlcih2YWx1
ZSwgbnVsbCwgZXJyb3JNZXNzYWdlLCBjaGVja0VtcHR5KTsKKyAgICAgIH0KKyAgICB9LAorCisg
ICAgLyoqCisgICAgICogVGhlIGZ1bmN0aW9uIGNoZWNrcyB0aGUgaW5jb21pbmcgdmFsdWUgdG8g
c2VlIGlmIGl0IGlzIGFuIGludGVnZXIKKyAgICAgKiBieSB1c2luZyAnd2VhayB2YXJpYWJsZSB0
eXBpbmcnLiBSYWRpeCBpcyBkZWZhdWx0IDEwIG5vdywgYnV0IGNhbiBiZQorICAgICAqIGNoYW5n
ZWQgdG8gZXhwYW5kIHRoZSBmdW5jdGlvbmFsaXR5LgorICAgICAqCisgICAgICogJ1N0cm9uZyB2
YXJpYWJsZSB0eXBpbmcnIGNhbiBiZSBhY2hpZXZlZCBieQorICAgICAqICAgaWYgKGVtcHR5IHx8
IChwYXJzZUZsb2F0KHZhbHVlKSAhPSBwYXJzZUludCh2YWx1ZSAqIDEpKSB8fCAoIShpc0Zpbml0
ZSh2YWx1ZSkpKSkKKyAgICAgKiBidXQgZG9lcyBub3Qgd29yayB3aXRoIHN0cmluZyB2YWx1ZXMg
KG9ubHkgd2l0aCBzdGFuZGFyZCBmbG9hdHMgYW5kIGludGVnZXJzKS4KKyAgICAgKgorICAgICAq
IElmIG5vdCwgYW4gVmFsaWRhdGlvbkVycm9yIHdpbGwgYmUgdGhyb3duLgorICAgICAqIElmIHlv
dSB3YW50IHRvIHVzZSB0aGUgaW50ZWdlciBjaGVjayBpbiBhIHByb3BlcnR5IGRlZmluaXRpb24s
CisgICAgICogdXNlIHRoZSB7QGxpbmsgI2ludGVnZXJ9IG1ldGhvZC4KKyAgICAgKgorICAgICAq
IEBwYXJhbSB2YWx1ZSB7dmFyfSBUaGUgdmFsdWUgdG8gY2hlY2suCisgICAgICogQHBhcmFtIGZv
cm1JdGVtIHtxeC51aS5mb3JtLklGb3JtfSBUaGUgZm9ybSBpdGVtIHRvIGNoZWNrIGlmIHVzZWQg
aW4gYQorICAgICAqICAge0BsaW5rIHF4LnVpLmZvcm0uRm9ybX0uCisgICAgICogQHBhcmFtIGVy
cm9yTWVzc2FnZSB7U3RyaW5nP3VuZGVmaW5lZH0gQ3VzdG9tIGVycm9yIG1lc3NhZ2UuCisgICAg
ICogQHBhcmFtIGNoZWNrRW1wdHkge0Jvb2xlYW4/ZmFsc2V9IENoZWNrIGZvciBlbXB0eSBmaWVs
ZC4KKyAgICAgKiBAdGhyb3dzIHtxeC5jb3JlLlZhbGlkYXRpb25FcnJvcn0gSWYgdGhlIHZhbHVl
IHBhcmFtZXRlciBpcyBub3QgYQorICAgICAqICAgIGludGVnZXIKKyAgICAgKi8KKyAgICBjaGVj
a0ludGVnZXIgOiBmdW5jdGlvbih2YWx1ZSwgZm9ybUl0ZW0sIGVycm9yTWVzc2FnZSwgY2hlY2tF
bXB0eSkKKyAgICB7CisgICAgICB2YXIgZW1wdHkgPSBjaGVja0VtcHR5ID8gIXZhbHVlIDogZmFs
c2U7CisKKyAgICAgIGlmIChlbXB0eSB8fCAocGFyc2VGbG9hdCh2YWx1ZSkgIT0gcGFyc2VJbnQo
dmFsdWUpKSB8fCAoIShpc0Zpbml0ZSh2YWx1ZSkpKSkKKyAgICAgIHsKKyAgICAgICAgZXJyb3JN
ZXNzYWdlID0gZXJyb3JNZXNzYWdlIHx8IHF4LmxvY2FsZS5NYW5hZ2VyLnRyKCIlMSBpcyBub3Qg
YW4gaW50ZWdlci4iLCB2YWx1ZSk7CisgICAgICAgIHRocm93IG5ldyBxeC5jb3JlLlZhbGlkYXRp
b25FcnJvcigiVmFsaWRhdGlvbiBFcnJvciIsIGVycm9yTWVzc2FnZSk7CisgICAgICB9CisgICAg
fSwKKworCisgICAgLyoqCiAgICAgICogUmV0dXJucyB0aGUgZnVuY3Rpb24gdGhhdCBjaGVja3Mg
Zm9yIGEgbnVtYmVyLgogICAgICAqCiAgICAgICogQHBhcmFtIGVycm9yTWVzc2FnZSB7U3RyaW5n
P251bGx9IEN1c3RvbSBlcnJvciBtZXNzYWdlLgorICAgICAqIEBwYXJhbSBjaGVja0VtcHR5IHtC
b29sZWFuP2ZhbHNlfSBDaGVjayBmb3IgZW1wdHkgZmllbGQuCiAgICAgICogQHJldHVybiB7RnVu
Y3Rpb259IFRoZSB7QGxpbmsgI2NoZWNrTnVtYmVyfSBGdW5jdGlvbi4KICAgICAgKi8KLSAgICBu
dW1iZXIgOiBmdW5jdGlvbihlcnJvck1lc3NhZ2UpIHsKKyAgICBudW1iZXIgOiBmdW5jdGlvbihl
cnJvck1lc3NhZ2UsIGNoZWNrRW1wdHkpIHsKICAgICAgIHJldHVybiBmdW5jdGlvbih2YWx1ZSkg
ewotICAgICAgICBxeC51dGlsLlZhbGlkYXRlLmNoZWNrTnVtYmVyKHZhbHVlLCBudWxsLCBlcnJv
ck1lc3NhZ2UpOworICAgICAgICBxeC51dGlsLlZhbGlkYXRlLmNoZWNrTnVtYmVyKHZhbHVlLCBu
dWxsLCBlcnJvck1lc3NhZ2UsIGNoZWNrRW1wdHkpOwogICAgICAgfQogICAgIH0sCiAKQEAgLTgy
LDE3ICsxMjksMTggQEAKICAgICAgKiBAcGFyYW0gZm9ybUl0ZW0ge3F4LnVpLmZvcm0uSUZvcm19
IFRoZSBmb3JtIGl0ZW0gdG8gY2hlY2sgaWYgdXNlZCBpbiBhCiAgICAgICogICB7QGxpbmsgcXgu
dWkuZm9ybS5Gb3JtfS4KICAgICAgKiBAcGFyYW0gZXJyb3JNZXNzYWdlIHtTdHJpbmc/dW5kZWZp
bmVkfSBDdXN0b20gZXJyb3IgbWVzc2FnZS4KKyAgICAgKiBAcGFyYW0gY2hlY2tFbXB0eSB7Qm9v
bGVhbj9mYWxzZX0gQ2hlY2sgZm9yIGVtcHR5IGZpZWxkLgogICAgICAqIEB0aHJvd3Mge3F4LmNv
cmUuVmFsaWRhdGlvbkVycm9yfSBJZiB0aGUgdmFsdWUgcGFyYW1ldGVyIGlzIG5vdCBhCiAgICAg
ICogICAgZmluaXRlIG51bWJlcgogICAgICAqLwotICAgIGNoZWNrTnVtYmVyIDogZnVuY3Rpb24o
dmFsdWUsIGZvcm1JdGVtLCBlcnJvck1lc3NhZ2UpCisgICAgY2hlY2tOdW1iZXIgOiBmdW5jdGlv
bih2YWx1ZSwgZm9ybUl0ZW0sIGVycm9yTWVzc2FnZSwgY2hlY2tFbXB0eSkKICAgICB7Ci0gICAg
ICBlcnJvck1lc3NhZ2UgPSBlcnJvck1lc3NhZ2UgfHwKLSAgICAgICAgcXgubG9jYWxlLk1hbmFn
ZXIudHIoIiUxIGlzIG5vdCBhIG51bWJlci4iLCB2YWx1ZSk7CisgICAgICB2YXIgZW1wdHkgPSBj
aGVja0VtcHR5ID8gIXZhbHVlIDogZmFsc2U7CiAKLSAgICAgIGlmICgodHlwZW9mIHZhbHVlICE9
PSAibnVtYmVyIiAmJiAoISh2YWx1ZSBpbnN0YW5jZW9mIE51bWJlcikpKQorICAgICAgaWYgKGVt
cHR5IHx8ICh0eXBlb2YgdmFsdWUgIT09ICJudW1iZXIiICYmICghKHZhbHVlIGluc3RhbmNlb2Yg
TnVtYmVyKSkpCiAgICAgICAgIHx8ICghKGlzRmluaXRlKHZhbHVlKSkpKQogICAgICAgeworICAg
ICAgICBlcnJvck1lc3NhZ2UgPSBlcnJvck1lc3NhZ2UgfHwgcXgubG9jYWxlLk1hbmFnZXIudHIo
IiUxIGlzIG5vdCBhIG51bWJlci4iLCB2YWx1ZSk7CiAgICAgICAgIHRocm93IG5ldyBxeC5jb3Jl
LlZhbGlkYXRpb25FcnJvcigiVmFsaWRhdGlvbiBFcnJvciIsIGVycm9yTWVzc2FnZSk7CiAgICAg
ICB9CiAgICAgfSwKQEAgLTEwMiwxMSArMTUwLDEyIEBACiAgICAgICogUmV0dXJucyB0aGUgZnVu
Y3Rpb24gdGhhdCBjaGVja3MgZm9yIGFuIGVtYWlsIGFkZHJlc3MuCiAgICAgICoKICAgICAgKiBA
cGFyYW0gZXJyb3JNZXNzYWdlIHtTdHJpbmc/bnVsbH0gQ3VzdG9tIGVycm9yIG1lc3NhZ2UuCisg
ICAgICogQHBhcmFtIGNoZWNrRW1wdHkge0Jvb2xlYW4/ZmFsc2V9IENoZWNrIGZvciBlbXB0eSBm
aWVsZC4KICAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gVGhlIHtAbGluayAjY2hlY2tFbWFpbH0g
RnVuY3Rpb24uCiAgICAgICovCi0gICAgZW1haWwgOiBmdW5jdGlvbihlcnJvck1lc3NhZ2UpIHsK
KyAgICBlbWFpbCA6IGZ1bmN0aW9uKGVycm9yTWVzc2FnZSwgY2hlY2tFbXB0eSkgewogICAgICAg
cmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7Ci0gICAgICAgIHF4LnV0aWwuVmFsaWRhdGUuY2hlY2tF
bWFpbCh2YWx1ZSwgbnVsbCwgZXJyb3JNZXNzYWdlKTsKKyAgICAgICAgcXgudXRpbC5WYWxpZGF0
ZS5jaGVja0VtYWlsKHZhbHVlLCBudWxsLCBlcnJvck1lc3NhZ2UsIGNoZWNrRW1wdHkpOwogICAg
ICAgfQogICAgIH0sCiAKQEAgLTEyMSwxNiArMTcwLDE3IEBACiAgICAgICogQHBhcmFtIGZvcm1J
dGVtIHtxeC51aS5mb3JtLklGb3JtfSBUaGUgZm9ybSBpdGVtIHRvIGNoZWNrIGlmIHVzZWQgaW4g
YQogICAgICAqICAge0BsaW5rIHF4LnVpLmZvcm0uRm9ybX0uCiAgICAgICogQHBhcmFtIGVycm9y
TWVzc2FnZSB7U3RyaW5nP251bGx9IEN1c3RvbSBlcnJvciBtZXNzYWdlLgorICAgICAqIEBwYXJh
bSBjaGVja0VtcHR5IHtCb29sZWFuP2ZhbHNlfSBDaGVjayBmb3IgZW1wdHkgZmllbGQuCiAgICAg
ICogQHRocm93cyB7cXguY29yZS5WYWxpZGF0aW9uRXJyb3J9IElmIHRoZSB2YWx1ZSBwYXJhbWV0
ZXIgaXMgbm90CiAgICAgICogICAgYSB2YWxpZCBlbWFpbCBhZGRyZXNzLgogICAgICAqLwotICAg
IGNoZWNrRW1haWwgOiBmdW5jdGlvbih2YWx1ZSwgZm9ybUl0ZW0sIGVycm9yTWVzc2FnZSkKKyAg
ICBjaGVja0VtYWlsIDogZnVuY3Rpb24odmFsdWUsIGZvcm1JdGVtLCBlcnJvck1lc3NhZ2UsIGNo
ZWNrRW1wdHkpCiAgICAgewotICAgICAgZXJyb3JNZXNzYWdlID0gZXJyb3JNZXNzYWdlIHx8Ci0g
ICAgICAgIHF4LmxvY2FsZS5NYW5hZ2VyLnRyKCInJTEnIGlzIG5vdCBhbiBlbWFpbCBhZGRyZXNz
LiIsICh2YWx1ZSB8fCAiIikpOworICAgICAgdmFyIHJlZyA9IC9eKFtBLVphLXowLTlfXC1cLl0p
K1xAKFtBLVphLXowLTlfXC1cLl0pK1wuKFtBLVphLXpdezIsNH0pJC87CisgICAgICB2YXIgZW1w
dHkgPSBjaGVja0VtcHR5ID8gIXZhbHVlIDpmYWxzZTsKIAotICAgICAgdmFyIHJlZyA9IC9eKFtB
LVphLXowLTlfXC1cLl0pK1xAKFtBLVphLXowLTlfXC1cLl0pK1wuKFtBLVphLXpdezIsNH0pJC87
Ci0gICAgICBpZiAocmVnLnRlc3QodmFsdWUpID09PSBmYWxzZSkgeworICAgICAgaWYgKGVtcHR5
IHx8IHJlZy50ZXN0KHZhbHVlKSA9PT0gZmFsc2UpIHsKKyAgICAgICAgZXJyb3JNZXNzYWdlID0g
ZXJyb3JNZXNzYWdlIHx8IHF4LmxvY2FsZS5NYW5hZ2VyLnRyKCInJTEnIGlzIG5vdCBhbiBlbWFp
bCBhZGRyZXNzLiIsICh2YWx1ZSB8fCAiIikpOwogICAgICAgICB0aHJvdyBuZXcgcXguY29yZS5W
YWxpZGF0aW9uRXJyb3IoIlZhbGlkYXRpb24gRXJyb3IiLGVycm9yTWVzc2FnZSk7CiAgICAgICB9
CiAgICAgfSwKQEAgLTE0MCwxMSArMTkwLDEyIEBACiAgICAgICogUmV0dXJucyB0aGUgZnVuY3Rp
b24gdGhhdCBjaGVja3MgZm9yIGEgc3RyaW5nLgogICAgICAqCiAgICAgICogQHBhcmFtIGVycm9y
TWVzc2FnZSB7U3RyaW5nP251bGx9IEN1c3RvbSBlcnJvciBtZXNzYWdlLgorICAgICAqIEBwYXJh
bSBjaGVja0VtcHR5IHtCb29sZWFuP2ZhbHNlfSBDaGVjayBmb3IgZW1wdHkgZmllbGQuCiAgICAg
ICogQHJldHVybiB7RnVuY3Rpb259IFRoZSB7QGxpbmsgI2NoZWNrU3RyaW5nfSBGdW5jdGlvbi4K
ICAgICAgKi8KLSAgICBzdHJpbmcgOiBmdW5jdGlvbihlcnJvck1lc3NhZ2UpIHsKKyAgICBzdHJp
bmcgOiBmdW5jdGlvbihlcnJvck1lc3NhZ2UsIGNoZWNrRW1wdHkpIHsKICAgICAgIHJldHVybiBm
dW5jdGlvbih2YWx1ZSkgewotICAgICAgICBxeC51dGlsLlZhbGlkYXRlLmNoZWNrU3RyaW5nKHZh
bHVlLCBudWxsLCBlcnJvck1lc3NhZ2UpOworICAgICAgICBxeC51dGlsLlZhbGlkYXRlLmNoZWNr
U3RyaW5nKHZhbHVlLCBudWxsLCBlcnJvck1lc3NhZ2UsIGNoZWNrRW1wdHkpOwogICAgICAgfQog
ICAgIH0sCiAKQEAgLTE1OSwxNCArMjEwLDE1IEBACiAgICAgICogQHBhcmFtIGZvcm1JdGVtIHtx
eC51aS5mb3JtLklGb3JtfSBUaGUgZm9ybSBpdGVtIHRvIGNoZWNrIGlmIHVzZWQgaW4gYQogICAg
ICAqICAge0BsaW5rIHF4LnVpLmZvcm0uRm9ybX0uCiAgICAgICogQHBhcmFtIGVycm9yTWVzc2Fn
ZSB7U3RyaW5nP251bGx9IEN1c3RvbSBlcnJvciBtZXNzYWdlLgorICAgICAqIEBwYXJhbSBjaGVj
a0VtcHR5IHtCb29sZWFuP2ZhbHNlfSBDaGVjayBmb3IgZW1wdHkgZmllbGQuCiAgICAgICogQHRo
cm93cyB7cXguY29yZS5WYWxpZGF0aW9uRXJyb3J9IElmIHRoZSB2YWx1ZSBwYXJhbWV0ZXIgaXMg
bm90IGEgc3RyaW5nLgogICAgICAqLwotICAgIGNoZWNrU3RyaW5nIDogZnVuY3Rpb24odmFsdWUs
IGZvcm1JdGVtLCBlcnJvck1lc3NhZ2UpCisgICAgY2hlY2tTdHJpbmcgOiBmdW5jdGlvbih2YWx1
ZSwgZm9ybUl0ZW0sIGVycm9yTWVzc2FnZSwgY2hlY2tFbXB0eSkKICAgICB7Ci0gICAgICBlcnJv
ck1lc3NhZ2UgPSBlcnJvck1lc3NhZ2UgfHwKLSAgICAgICAgcXgubG9jYWxlLk1hbmFnZXIudHIo
IiUxIGlzIG5vdCBhIHN0cmluZy4iLCB2YWx1ZSk7CisgICAgICB2YXIgZW1wdHkgPSBjaGVja0Vt
cHR5ID8gIXZhbHVlIDogZmFsc2U7CiAKLSAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICJzdHJp
bmciICYmICghKHZhbHVlIGluc3RhbmNlb2YgU3RyaW5nKSkpIHsKKyAgICAgIGlmIChlbXB0eSB8
fCB0eXBlb2YgdmFsdWUgIT09ICJzdHJpbmciICYmICghKHZhbHVlIGluc3RhbmNlb2YgU3RyaW5n
KSkpIHsKKyAgICAgICAgZXJyb3JNZXNzYWdlID0gZXJyb3JNZXNzYWdlIHx8IHF4LmxvY2FsZS5N
YW5hZ2VyLnRyKCIlMSBpcyBub3QgYSBzdHJpbmcuIiwgdmFsdWUpOwogICAgICAgICB0aHJvdyBu
ZXcgcXguY29yZS5WYWxpZGF0aW9uRXJyb3IoIlZhbGlkYXRpb24gRXJyb3IiLCBlcnJvck1lc3Nh
Z2UpOwogICAgICAgfQogICAgIH0sCkBAIC0xNzYsMTEgKzIyOCwxMiBAQAogICAgICAqIFJldHVy
bnMgdGhlIGZ1bmN0aW9uIHRoYXQgY2hlY2tzIGZvciBhbiB1cmwuCiAgICAgICoKICAgICAgKiBA
cGFyYW0gZXJyb3JNZXNzYWdlIHtTdHJpbmc/bnVsbH0gQ3VzdG9tIGVycm9yIG1lc3NhZ2UuCisg
ICAgICogQHBhcmFtIGNoZWNrRW1wdHkge0Jvb2xlYW4/ZmFsc2V9IENoZWNrIGZvciBlbXB0eSBm
aWVsZC4KICAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gVGhlIHtAbGluayAjY2hlY2tVcmx9IEZ1
bmN0aW9uLgogICAgICAqLwotICAgIHVybCA6IGZ1bmN0aW9uKGVycm9yTWVzc2FnZSkgeworICAg
IHVybCA6IGZ1bmN0aW9uKGVycm9yTWVzc2FnZSwgY2hlY2tFbXB0eSkgewogICAgICAgcmV0dXJu
IGZ1bmN0aW9uKHZhbHVlKSB7Ci0gICAgICAgIHF4LnV0aWwuVmFsaWRhdGUuY2hlY2tVcmwodmFs
dWUsIG51bGwsIGVycm9yTWVzc2FnZSk7CisgICAgICAgIHF4LnV0aWwuVmFsaWRhdGUuY2hlY2tV
cmwodmFsdWUsIG51bGwsIGVycm9yTWVzc2FnZSwgY2hlY2tFbXB0eSk7CiAgICAgICB9CiAgICAg
fSwKIApAQCAtMTk3LDEzICsyNTAsMTMgQEAKICAgICAgKiBAcGFyYW0gZXJyb3JNZXNzYWdlIHtT
dHJpbmc/bnVsbH0gQ3VzdG9tIGVycm9yIG1lc3NhZ2UuCiAgICAgICogQHRocm93cyB7cXguY29y
ZS5WYWxpZGF0aW9uRXJyb3J9IElmIHRoZSB2YWx1ZSBwYXJhbWV0ZXIgaXMgbm90IGFuIHVybC4K
ICAgICAgKi8KLSAgICBjaGVja1VybCA6IGZ1bmN0aW9uKHZhbHVlLCBmb3JtSXRlbSwgZXJyb3JN
ZXNzYWdlKQorICAgIGNoZWNrVXJsIDogZnVuY3Rpb24odmFsdWUsIGZvcm1JdGVtLCBlcnJvck1l
c3NhZ2UsIGNoZWNrRW1wdHkpCiAgICAgewotICAgICAgZXJyb3JNZXNzYWdlID0gZXJyb3JNZXNz
YWdlIHx8Ci0gICAgICAgIHF4LmxvY2FsZS5NYW5hZ2VyLnRyKCIlMSBpcyBub3QgYW4gdXJsLiIs
IHZhbHVlKTsKKyAgICAgIHZhciByZWcgPSAgLyhbQS1aYS16MC05XSkrOlwvXC8oXHcrOnswLDF9
XHcqQCk/KFxTKykoOlswLTldKyk/KFwvfFwvKFtcdyMhOi4/Kz0mJUAhXC1cL10pKT8vOworICAg
ICAgdmFyIGVtcHR5ID0gY2hlY2tFbXB0eSA/ICF2YWx1ZSA6ZmFsc2U7CiAKLSAgICAgIHZhciBy
ZWcgPSAgLyhbQS1aYS16MC05XSkrOlwvXC8oXHcrOnswLDF9XHcqQCk/KFxTKykoOlswLTldKyk/
KFwvfFwvKFtcdyMhOi4/Kz0mJUAhXC1cL10pKT8vOwotICAgICAgaWYgKCFyZWcudGVzdCh2YWx1
ZSkpIHsKKyAgICAgIGlmIChlbXB0eSB8fCAhcmVnLnRlc3QodmFsdWUpKSB7CisgICAgICAgIGVy
cm9yTWVzc2FnZSA9IGVycm9yTWVzc2FnZSB8fCBxeC5sb2NhbGUuTWFuYWdlci50cigiJTEgaXMg
bm90IGFuIHVybC4iLCB2YWx1ZSk7CiAgICAgICAgIHRocm93IG5ldyBxeC5jb3JlLlZhbGlkYXRp
b25FcnJvcigiVmFsaWRhdGlvbiBFcnJvciIsIGVycm9yTWVzc2FnZSk7CiAgICAgICB9CiAgICAg
fSwKQEAgLTIxMywxMSArMjY2LDEyIEBACiAgICAgICogUmV0dXJucyB0aGUgZnVuY3Rpb24gdGhh
dCBjaGVja3MgZm9yIGEgY29sb3IuCiAgICAgICoKICAgICAgKiBAcGFyYW0gZXJyb3JNZXNzYWdl
IHtTdHJpbmc/bnVsbH0gQ3VzdG9tIGVycm9yIG1lc3NhZ2UuCisgICAgICogQHBhcmFtIGNoZWNr
RW1wdHkge0Jvb2xlYW4/ZmFsc2V9IENoZWNrIGZvciBlbXB0eSBmaWVsZC4KICAgICAgKiBAcmV0
dXJuIHtGdW5jdGlvbn0gVGhlIHtAbGluayAjY2hlY2tDb2xvcn0gRnVuY3Rpb24uCiAgICAgICov
Ci0gICAgY29sb3IgOiBmdW5jdGlvbihlcnJvck1lc3NhZ2UpIHsKKyAgICBjb2xvciA6IGZ1bmN0
aW9uKGVycm9yTWVzc2FnZSwgY2hlY2tFbXB0eSkgewogICAgICAgcmV0dXJuIGZ1bmN0aW9uKHZh
bHVlKSB7Ci0gICAgICAgIHF4LnV0aWwuVmFsaWRhdGUuY2hlY2tDb2xvcih2YWx1ZSwgbnVsbCwg
ZXJyb3JNZXNzYWdlKTsKKyAgICAgICAgcXgudXRpbC5WYWxpZGF0ZS5jaGVja0NvbG9yKHZhbHVl
LCBudWxsLCBlcnJvck1lc3NhZ2UsIGNoZWNrRW1wdHkpOwogICAgICAgfQogICAgIH0sCiAKQEAg
LTIzMywxNSArMjg3LDIzIEBACiAgICAgICogQHBhcmFtIGZvcm1JdGVtIHtxeC51aS5mb3JtLklG
b3JtfSBUaGUgZm9ybSBpdGVtIHRvIGNoZWNrIGlmIHVzZWQgaW4gYQogICAgICAqICAge0BsaW5r
IHF4LnVpLmZvcm0uRm9ybX0uCiAgICAgICogQHBhcmFtIGVycm9yTWVzc2FnZSB7U3RyaW5nP251
bGx9IEN1c3RvbSBlcnJvciBtZXNzYWdlLgorICAgICAqIEBwYXJhbSBjaGVja0VtcHR5IHtCb29s
ZWFuP2ZhbHNlfSBDaGVjayBmb3IgZW1wdHkgZmllbGQuCiAgICAgICogQHRocm93cyB7cXguY29y
ZS5WYWxpZGF0aW9uRXJyb3J9IElmIHRoZSB2YWx1ZSBwYXJhbWV0ZXIgaXMgbm90IGEgY29sb3Iu
CiAgICAgICovCi0gICAgY2hlY2tDb2xvciA6IGZ1bmN0aW9uKHZhbHVlLCBmb3JtSXRlbSwgZXJy
b3JNZXNzYWdlKQorICAgIGNoZWNrQ29sb3IgOiBmdW5jdGlvbih2YWx1ZSwgZm9ybUl0ZW0sIGVy
cm9yTWVzc2FnZSwgY2hlY2tFbXB0eSkKICAgICB7CisgICAgICB2YXIgZW1wdHkgPSBjaGVja0Vt
cHR5ID8gIXZhbHVlIDpmYWxzZTsKKwogICAgICAgdHJ5IHsKICAgICAgICAgcXgudXRpbC5Db2xv
clV0aWwuc3RyaW5nVG9SZ2IodmFsdWUpOworCisgICAgICAgIGlmKGVtcHR5KQorICAgICAgICB7
CisgICAgICAgICAgdGhyb3cgIkVtcHR5IjsKKyAgICAgICAgfQorCiAgICAgICB9IGNhdGNoIChl
KSB7Ci0gICAgICAgIGVycm9yTWVzc2FnZSA9IGVycm9yTWVzc2FnZSB8fAotICAgICAgICAgIHF4
LmxvY2FsZS5NYW5hZ2VyLnRyKCIlMSBpcyBub3QgYSBjb2xvciEgJTIiLCB2YWx1ZSwgZSk7Cisg
ICAgICAgIGVycm9yTWVzc2FnZSA9IGVycm9yTWVzc2FnZSB8fCBxeC5sb2NhbGUuTWFuYWdlci50
cigiJTEgaXMgbm90IGEgY29sb3IhICUyIiwgdmFsdWUsIGUpOwogICAgICAgICB0aHJvdyBuZXcg
cXguY29yZS5WYWxpZGF0aW9uRXJyb3IoIlZhbGlkYXRpb24gRXJyb3IiLCBlcnJvck1lc3NhZ2Up
OwogICAgICAgfQogICAgIH0sCkBAIC0yNTgsMTYgKzMyMCwxNyBAQAogICAgICAqIEBwYXJhbSBm
cm9tIHtOdW1iZXJ9IFRoZSBsb3dlciBib3JkZXIgb2YgdGhlIHJhbmdlLgogICAgICAqIEBwYXJh
bSB0byB7TnVtYmVyfSBUaGUgdXBwZXIgYm9yZGVyIG9mIHRoZSByYW5nZS4KICAgICAgKiBAcGFy
YW0gZXJyb3JNZXNzYWdlIHtTdHJpbmc/bnVsbH0gQ3VzdG9tIGVycm9yIG1lc3NhZ2UuCisgICAg
ICogQHBhcmFtIGNoZWNrRW1wdHkge0Jvb2xlYW4/ZmFsc2V9IENoZWNrIGZvciBlbXB0eSBmaWVs
ZC4KICAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gQSBmdW5jdGlvbiB0YWtpbmcgb25lIHBhcmFt
ZXRlciAodmFsdWUpLgogICAgICAqLwotICAgIHJhbmdlIDogZnVuY3Rpb24oZnJvbSwgdG8sIGVy
cm9yTWVzc2FnZSkKKyAgICByYW5nZSA6IGZ1bmN0aW9uKGZyb20sIHRvLCBlcnJvck1lc3NhZ2Us
IGNoZWNrRW1wdHkpCiAgICAgewogICAgICAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKQogICAgICAg
ewotICAgICAgICBlcnJvck1lc3NhZ2UgPSBlcnJvck1lc3NhZ2UgfHwKLSAgICAgICAgICBxeC5s
b2NhbGUuTWFuYWdlci50cigiJTEgaXMgbm90IGluIHRoZSByYW5nZSBmcm9tIFslMiwgJTNdLiIs
IHZhbHVlLCBmcm9tLCB0byk7CisgICAgICAgIHZhciBlbXB0eSA9IGNoZWNrRW1wdHkgPyAhdmFs
dWUgOmZhbHNlOwogCi0gICAgICAgIGlmICh2YWx1ZSA8IGZyb20gfHwgdmFsdWUgPiB0bykgewor
ICAgICAgICBpZiAoZW1wdHkgfHwgdmFsdWUgPCBmcm9tIHx8IHZhbHVlID4gdG8pIHsKKyAgICAg
ICAgICBlcnJvck1lc3NhZ2UgPSBlcnJvck1lc3NhZ2UgfHwgcXgubG9jYWxlLk1hbmFnZXIudHIo
IiUxIGlzIG5vdCBpbiB0aGUgcmFuZ2UgZnJvbSBbJTIsICUzXS4iLCB2YWx1ZSwgZnJvbSwgdG8p
OwogICAgICAgICAgIHRocm93IG5ldyBxeC5jb3JlLlZhbGlkYXRpb25FcnJvcigiVmFsaWRhdGlv
biBFcnJvciIsIGVycm9yTWVzc2FnZSk7CiAgICAgICAgIH0KICAgICAgIH0KQEAgLTI4MSwxNiAr
MzQ0LDE3IEBACiAgICAgICoKICAgICAgKiBAcGFyYW0gYXJyYXkge0FycmF5fSBUaGUgYXJyYXkg
aG9sZGluZyB0aGUgcG9zc2liaWxpdGllcy4KICAgICAgKiBAcGFyYW0gZXJyb3JNZXNzYWdlIHtT
dHJpbmc/bnVsbH0gQ3VzdG9tIGVycm9yIG1lc3NhZ2UuCisgICAgICogQHBhcmFtIGNoZWNrRW1w
dHkge0Jvb2xlYW4/ZmFsc2V9IENoZWNrIGZvciBlbXB0eSBmaWVsZC4KICAgICAgKiBAcmV0dXJu
IHtGdW5jdGlvbn0gQSBmdW5jdGlvbiB0YWtpbmcgb25lIHBhcmFtZXRlciAodmFsdWUpLgogICAg
ICAqLwotICAgIGluQXJyYXkgOiBmdW5jdGlvbihhcnJheSwgZXJyb3JNZXNzYWdlKQorICAgIGlu
QXJyYXkgOiBmdW5jdGlvbihhcnJheSwgZXJyb3JNZXNzYWdlLCBjaGVja0VtcHR5KQogICAgIHsK
ICAgICAgIHJldHVybiBmdW5jdGlvbih2YWx1ZSkKICAgICAgIHsKLSAgICAgICAgZXJyb3JNZXNz
YWdlID0gZXJyb3JNZXNzYWdlIHx8Ci0gICAgICAgICAgcXgubG9jYWxlLk1hbmFnZXIudHIoIiUx
IGlzIG5vdCBpbiAlMiIsIHZhbHVlLCBhcnJheSk7CisgICAgICAgIHZhciBlbXB0eSA9IGNoZWNr
RW1wdHkgPyAhdmFsdWUgOmZhbHNlOwogCi0gICAgICAgIGlmIChhcnJheS5pbmRleE9mKHZhbHVl
KSA9PT0gLTEpIHsKKyAgICAgICAgaWYgKGVtcHR5IHx8IGFycmF5LmluZGV4T2YodmFsdWUpID09
PSAtMSkgeworICAgICAgICAgIGVycm9yTWVzc2FnZSA9IGVycm9yTWVzc2FnZSB8fCBxeC5sb2Nh
bGUuTWFuYWdlci50cigiJTEgaXMgbm90IGluICUyIiwgdmFsdWUsIGFycmF5KTsKICAgICAgICAg
ICB0aHJvdyBuZXcgcXguY29yZS5WYWxpZGF0aW9uRXJyb3IoIlZhbGlkYXRpb24gRXJyb3IiLCBl
cnJvck1lc3NhZ2UpOwogICAgICAgICB9CiAgICAgICB9CkBAIC0zMDUsMTYgKzM2OSwxNyBAQAog
ICAgICAqIGluY29taW5nCiAgICAgICogQHBhcmFtIHJlZyB7UmVnRXhwfSBUaGUgUmVnRXhwIGZv
ciB0aGUgY2hlY2suCiAgICAgICogQHBhcmFtIGVycm9yTWVzc2FnZSB7U3RyaW5nP251bGx9IEN1
c3RvbSBlcnJvciBtZXNzYWdlLgorICAgICAqIEBwYXJhbSBjaGVja0VtcHR5IHtCb29sZWFuP2Zh
bHNlfSBDaGVjayBmb3IgZW1wdHkgZmllbGQuCiAgICAgICogQHJldHVybiB7RnVuY3Rpb259IEEg
ZnVuY3Rpb24gdGFraW5nIG9uZSBwYXJhbWV0ZXIgKHZhbHVlKS4KICAgICAgKi8KLSAgICByZWdF
eHAgOiBmdW5jdGlvbihyZWcsIGVycm9yTWVzc2FnZSkKKyAgICByZWdFeHAgOiBmdW5jdGlvbihy
ZWcsIGVycm9yTWVzc2FnZSwgY2hlY2tFbXB0eSkKICAgICB7CiAgICAgICByZXR1cm4gZnVuY3Rp
b24odmFsdWUpCiAgICAgICB7Ci0gICAgICAgIGVycm9yTWVzc2FnZSA9IGVycm9yTWVzc2FnZSB8
fAotICAgICAgICAgIHF4LmxvY2FsZS5NYW5hZ2VyLnRyKCIlMSBkb2VzIG5vdCBmaXQgJTIuIiwg
dmFsdWUsIHJlZyk7CisgICAgICAgIHZhciBlbXB0eSA9IGNoZWNrRW1wdHkgPyAhdmFsdWUgOmZh
bHNlOwogCi0gICAgICAgIGlmICghcmVnLnRlc3QodmFsdWUpKSB7CisgICAgICAgIGlmIChlbXB0
eSB8fCAhcmVnLnRlc3QodmFsdWUpKSB7CisgICAgICAgICAgZXJyb3JNZXNzYWdlID0gZXJyb3JN
ZXNzYWdlIHx8IHF4LmxvY2FsZS5NYW5hZ2VyLnRyKCIlMSBkb2VzIG5vdCBmaXQgJTIuIiwgdmFs
dWUsIHJlZyk7CiAgICAgICAgICAgdGhyb3cgbmV3IHF4LmNvcmUuVmFsaWRhdGlvbkVycm9yKCJW
YWxpZGF0aW9uIEVycm9yIiwgZXJyb3JNZXNzYWdlKTsKICAgICAgICAgfQogICAgICAgfQpAQCAt
MzIyLDUgKzM4NywzIEBACiAgIH0KIH0pOwogCi0KLQo=
</data>

          </attachment>
          <attachment isobsolete="0" ispatch="0" isprivate="0" isurl="0">
            <attachid>1062</attachid>
            <date>2011-09-24 12:29:00 +0200</date>
            <delta_ts>2011-09-24 12:29:59 +0200</delta_ts>
            <desc>Leading zero correction</desc>
            <filename>Validate.js.diff</filename>
            <type>text/plain</type>
            <size>13355</size>
            <attacher>dev</attacher>
            
              <data encoding="base64">SW5kZXg6IC4uLy4uL2Zyb250ZW5kL2ZyYW1ld29yay9zb3VyY2UvY2xhc3MvcXgvdXRpbC9WYWxp
ZGF0ZS5qcwo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09Ci0tLSAuLi8uLi9mcm9udGVuZC9mcmFtZXdvcmsvc291cmNlL2Ns
YXNzL3F4L3V0aWwvVmFsaWRhdGUuanMJKHJldmlzaW9uIDI4NzYzKQorKysgLi4vLi4vZnJvbnRl
bmQvZnJhbWV3b3JrL3NvdXJjZS9jbGFzcy9xeC91dGlsL1ZhbGlkYXRlLmpzCSh3b3JraW5nIGNv
cHkpCkBAIC02MCwxNCArNjAsNzcgQEAKICAgc3RhdGljcyA6CiAgIHsKICAgICAvKioKKyAgICAg
KiBSZXR1cm5zIHRoZSBmdW5jdGlvbiB0aGF0IGNoZWNrcyBmb3IgYW4gaW50ZWdlci4KKyAgICAg
KgorICAgICAqIEBwYXJhbSBlcnJvck1lc3NhZ2Uge1N0cmluZz9udWxsfSBDdXN0b20gZXJyb3Ig
bWVzc2FnZS4KKyAgICAgKiBAcGFyYW0gY2hlY2tFbXB0eSB7Qm9vbGVhbj9mYWxzZX0gQ2hlY2sg
Zm9yIGVtcHR5IGZpZWxkLgorICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBUaGUge0BsaW5rICNj
aGVja0ludGVnZXJ9IEZ1bmN0aW9uLgorICAgICAqLworICAgIGludGVnZXIgOiBmdW5jdGlvbihl
cnJvck1lc3NhZ2UsIGNoZWNrRW1wdHkpIHsKKyAgICAgIHJldHVybiBmdW5jdGlvbih2YWx1ZSkg
eworICAgICAgICBxeC51dGlsLlZhbGlkYXRlLmNoZWNrSW50ZWdlcih2YWx1ZSwgbnVsbCwgZXJy
b3JNZXNzYWdlLCBjaGVja0VtcHR5KTsKKyAgICAgIH0KKyAgICB9LAorCisgICAgLyoqCisgICAg
ICogVGhlIGZ1bmN0aW9uIGNoZWNrcyB0aGUgaW5jb21pbmcgdmFsdWUgdG8gc2VlIGlmIGl0IGlz
IGFuIGludGVnZXIKKyAgICAgKiBieSB1c2luZyAnc3Ryb25nIHZhcmlhYmxlIHR5cGluZycuCisg
ICAgICoKKyAgICAgKiBUZXN0aW5nIGluIEZGIDMuNi4yMiBhbmQgSUUgOS4wLjgxMTIuMTY0MjE6
CisgICAgICoKKyAgICAgKiAnd2VhayB2YXJpYWJsZSB0eXBpbmcnOgorICAgICAqICAgcGFyc2VJ
bnQoIjA4IikgPT4gMCAgICAgICAgd3JvbmchISEKKyAgICAgKgorICAgICAqICdTdHJvbmcgdmFy
aWFibGUgdHlwaW5nJzoKKyAgICAgKiAgIHBhcnNlSW50KCIwOCIgKiAxKSA9PiA4ICAgIGNvcnJl
Y3QhISEKKyAgICAgKgorICAgICAqIHBhcnNlRmxvYXQoIjA4IikgPT4gOCAgICAgICAgY29ycmVj
dCEhIQorICAgICAqICBhbmQKKyAgICAgKiBwYXJzZUludCgiQTA4IikgICA9PiAgTmFOCisgICAg
ICogcGFyc2VJbnQoIjA4QSIpICAgPT4gIE5hTgorICAgICAqIHBhcnNlRmxvYXQoIkEwOCIpID0+
ICBOYU4KKyAgICAgKiBwYXJzZUZsb2F0KCIwOEEiKSA9PiAgTmFOCisgICAgICoKKyAgICAgKiBS
YWRpeCBpcyBkZWZhdWx0IDEwIG5vdywgYnV0IGNhbiBiZSBjaGFuZ2VkIHRvIGV4cGFuZCB0aGUg
ZnVuY3Rpb25hbGl0eS4KKyAgICAgKgorICAgICAqICdTdHJvbmcgdmFyaWFibGUgdHlwaW5nJyBj
YW4gYmUgYWNoaWV2ZWQgYnkKKyAgICAgKiAgIGlmIChlbXB0eSB8fCAocGFyc2VGbG9hdCh2YWx1
ZSkgIT0gcGFyc2VJbnQodmFsdWUgKiAxKSkgfHwgKCEoaXNGaW5pdGUodmFsdWUpKSkpCisgICAg
ICogYW5kIGlzIG5lY2Vzc2FyeSB0byBwYXJzZSBmLmkuIHBhcnNlSW50KCIwOCIpIGJlY2F1c2Ug
ZWxzZSBpdCBpcyBlcXVhbCB0byAwLgorICAgICAqCisgICAgICogSWYgbm90LCBhbiBWYWxpZGF0
aW9uRXJyb3Igd2lsbCBiZSB0aHJvd24uCisgICAgICogSWYgeW91IHdhbnQgdG8gdXNlIHRoZSBp
bnRlZ2VyIGNoZWNrIGluIGEgcHJvcGVydHkgZGVmaW5pdGlvbiwKKyAgICAgKiB1c2UgdGhlIHtA
bGluayAjaW50ZWdlcn0gbWV0aG9kLgorICAgICAqCisgICAgICogQHBhcmFtIHZhbHVlIHt2YXJ9
IFRoZSB2YWx1ZSB0byBjaGVjay4KKyAgICAgKiBAcGFyYW0gZm9ybUl0ZW0ge3F4LnVpLmZvcm0u
SUZvcm19IFRoZSBmb3JtIGl0ZW0gdG8gY2hlY2sgaWYgdXNlZCBpbiBhCisgICAgICogICB7QGxp
bmsgcXgudWkuZm9ybS5Gb3JtfS4KKyAgICAgKiBAcGFyYW0gZXJyb3JNZXNzYWdlIHtTdHJpbmc/
dW5kZWZpbmVkfSBDdXN0b20gZXJyb3IgbWVzc2FnZS4KKyAgICAgKiBAcGFyYW0gY2hlY2tFbXB0
eSB7Qm9vbGVhbj9mYWxzZX0gQ2hlY2sgZm9yIGVtcHR5IGZpZWxkLgorICAgICAqIEB0aHJvd3Mg
e3F4LmNvcmUuVmFsaWRhdGlvbkVycm9yfSBJZiB0aGUgdmFsdWUgcGFyYW1ldGVyIGlzIG5vdCBh
CisgICAgICogICAgaW50ZWdlcgorICAgICAqLworICAgIGNoZWNrSW50ZWdlciA6IGZ1bmN0aW9u
KHZhbHVlLCBmb3JtSXRlbSwgZXJyb3JNZXNzYWdlLCBjaGVja0VtcHR5KQorICAgIHsKKyAgICAg
IHZhciBlbXB0eSA9IGNoZWNrRW1wdHkgPyAhdmFsdWUgOiBmYWxzZTsKKworICAgICAgaWYgKGVt
cHR5IHx8IChwYXJzZUZsb2F0KHZhbHVlKSAhPSBwYXJzZUludCh2YWx1ZSAqIDEpKSB8fCAoIShp
c0Zpbml0ZSh2YWx1ZSkpKSkKKyAgICAgIHsKKyAgICAgICAgZXJyb3JNZXNzYWdlID0gZXJyb3JN
ZXNzYWdlIHx8IHF4LmxvY2FsZS5NYW5hZ2VyLnRyKCIlMSBpcyBub3QgYW4gaW50ZWdlci4iLCB2
YWx1ZSk7CisgICAgICAgIHRocm93IG5ldyBxeC5jb3JlLlZhbGlkYXRpb25FcnJvcigiVmFsaWRh
dGlvbiBFcnJvciIsIGVycm9yTWVzc2FnZSk7CisgICAgICB9CisgICAgfSwKKworCisgICAgLyoq
CiAgICAgICogUmV0dXJucyB0aGUgZnVuY3Rpb24gdGhhdCBjaGVja3MgZm9yIGEgbnVtYmVyLgog
ICAgICAqCiAgICAgICogQHBhcmFtIGVycm9yTWVzc2FnZSB7U3RyaW5nP251bGx9IEN1c3RvbSBl
cnJvciBtZXNzYWdlLgorICAgICAqIEBwYXJhbSBjaGVja0VtcHR5IHtCb29sZWFuP2ZhbHNlfSBD
aGVjayBmb3IgZW1wdHkgZmllbGQuCiAgICAgICogQHJldHVybiB7RnVuY3Rpb259IFRoZSB7QGxp
bmsgI2NoZWNrTnVtYmVyfSBGdW5jdGlvbi4KICAgICAgKi8KLSAgICBudW1iZXIgOiBmdW5jdGlv
bihlcnJvck1lc3NhZ2UpIHsKKyAgICBudW1iZXIgOiBmdW5jdGlvbihlcnJvck1lc3NhZ2UsIGNo
ZWNrRW1wdHkpIHsKICAgICAgIHJldHVybiBmdW5jdGlvbih2YWx1ZSkgewotICAgICAgICBxeC51
dGlsLlZhbGlkYXRlLmNoZWNrTnVtYmVyKHZhbHVlLCBudWxsLCBlcnJvck1lc3NhZ2UpOworICAg
ICAgICBxeC51dGlsLlZhbGlkYXRlLmNoZWNrTnVtYmVyKHZhbHVlLCBudWxsLCBlcnJvck1lc3Nh
Z2UsIGNoZWNrRW1wdHkpOwogICAgICAgfQogICAgIH0sCiAKQEAgLTgyLDE3ICsxNDUsMTggQEAK
ICAgICAgKiBAcGFyYW0gZm9ybUl0ZW0ge3F4LnVpLmZvcm0uSUZvcm19IFRoZSBmb3JtIGl0ZW0g
dG8gY2hlY2sgaWYgdXNlZCBpbiBhCiAgICAgICogICB7QGxpbmsgcXgudWkuZm9ybS5Gb3JtfS4K
ICAgICAgKiBAcGFyYW0gZXJyb3JNZXNzYWdlIHtTdHJpbmc/dW5kZWZpbmVkfSBDdXN0b20gZXJy
b3IgbWVzc2FnZS4KKyAgICAgKiBAcGFyYW0gY2hlY2tFbXB0eSB7Qm9vbGVhbj9mYWxzZX0gQ2hl
Y2sgZm9yIGVtcHR5IGZpZWxkLgogICAgICAqIEB0aHJvd3Mge3F4LmNvcmUuVmFsaWRhdGlvbkVy
cm9yfSBJZiB0aGUgdmFsdWUgcGFyYW1ldGVyIGlzIG5vdCBhCiAgICAgICogICAgZmluaXRlIG51
bWJlcgogICAgICAqLwotICAgIGNoZWNrTnVtYmVyIDogZnVuY3Rpb24odmFsdWUsIGZvcm1JdGVt
LCBlcnJvck1lc3NhZ2UpCisgICAgY2hlY2tOdW1iZXIgOiBmdW5jdGlvbih2YWx1ZSwgZm9ybUl0
ZW0sIGVycm9yTWVzc2FnZSwgY2hlY2tFbXB0eSkKICAgICB7Ci0gICAgICBlcnJvck1lc3NhZ2Ug
PSBlcnJvck1lc3NhZ2UgfHwKLSAgICAgICAgcXgubG9jYWxlLk1hbmFnZXIudHIoIiUxIGlzIG5v
dCBhIG51bWJlci4iLCB2YWx1ZSk7CisgICAgICB2YXIgZW1wdHkgPSBjaGVja0VtcHR5ID8gIXZh
bHVlIDogZmFsc2U7CiAKLSAgICAgIGlmICgodHlwZW9mIHZhbHVlICE9PSAibnVtYmVyIiAmJiAo
ISh2YWx1ZSBpbnN0YW5jZW9mIE51bWJlcikpKQorICAgICAgaWYgKGVtcHR5IHx8ICh0eXBlb2Yg
dmFsdWUgIT09ICJudW1iZXIiICYmICghKHZhbHVlIGluc3RhbmNlb2YgTnVtYmVyKSkpCiAgICAg
ICAgIHx8ICghKGlzRmluaXRlKHZhbHVlKSkpKQogICAgICAgeworICAgICAgICBlcnJvck1lc3Nh
Z2UgPSBlcnJvck1lc3NhZ2UgfHwgcXgubG9jYWxlLk1hbmFnZXIudHIoIiUxIGlzIG5vdCBhIG51
bWJlci4iLCB2YWx1ZSk7CiAgICAgICAgIHRocm93IG5ldyBxeC5jb3JlLlZhbGlkYXRpb25FcnJv
cigiVmFsaWRhdGlvbiBFcnJvciIsIGVycm9yTWVzc2FnZSk7CiAgICAgICB9CiAgICAgfSwKQEAg
LTEwMiwxMSArMTY2LDEyIEBACiAgICAgICogUmV0dXJucyB0aGUgZnVuY3Rpb24gdGhhdCBjaGVj
a3MgZm9yIGFuIGVtYWlsIGFkZHJlc3MuCiAgICAgICoKICAgICAgKiBAcGFyYW0gZXJyb3JNZXNz
YWdlIHtTdHJpbmc/bnVsbH0gQ3VzdG9tIGVycm9yIG1lc3NhZ2UuCisgICAgICogQHBhcmFtIGNo
ZWNrRW1wdHkge0Jvb2xlYW4/ZmFsc2V9IENoZWNrIGZvciBlbXB0eSBmaWVsZC4KICAgICAgKiBA
cmV0dXJuIHtGdW5jdGlvbn0gVGhlIHtAbGluayAjY2hlY2tFbWFpbH0gRnVuY3Rpb24uCiAgICAg
ICovCi0gICAgZW1haWwgOiBmdW5jdGlvbihlcnJvck1lc3NhZ2UpIHsKKyAgICBlbWFpbCA6IGZ1
bmN0aW9uKGVycm9yTWVzc2FnZSwgY2hlY2tFbXB0eSkgewogICAgICAgcmV0dXJuIGZ1bmN0aW9u
KHZhbHVlKSB7Ci0gICAgICAgIHF4LnV0aWwuVmFsaWRhdGUuY2hlY2tFbWFpbCh2YWx1ZSwgbnVs
bCwgZXJyb3JNZXNzYWdlKTsKKyAgICAgICAgcXgudXRpbC5WYWxpZGF0ZS5jaGVja0VtYWlsKHZh
bHVlLCBudWxsLCBlcnJvck1lc3NhZ2UsIGNoZWNrRW1wdHkpOwogICAgICAgfQogICAgIH0sCiAK
QEAgLTEyMSwxNiArMTg2LDE3IEBACiAgICAgICogQHBhcmFtIGZvcm1JdGVtIHtxeC51aS5mb3Jt
LklGb3JtfSBUaGUgZm9ybSBpdGVtIHRvIGNoZWNrIGlmIHVzZWQgaW4gYQogICAgICAqICAge0Bs
aW5rIHF4LnVpLmZvcm0uRm9ybX0uCiAgICAgICogQHBhcmFtIGVycm9yTWVzc2FnZSB7U3RyaW5n
P251bGx9IEN1c3RvbSBlcnJvciBtZXNzYWdlLgorICAgICAqIEBwYXJhbSBjaGVja0VtcHR5IHtC
b29sZWFuP2ZhbHNlfSBDaGVjayBmb3IgZW1wdHkgZmllbGQuCiAgICAgICogQHRocm93cyB7cXgu
Y29yZS5WYWxpZGF0aW9uRXJyb3J9IElmIHRoZSB2YWx1ZSBwYXJhbWV0ZXIgaXMgbm90CiAgICAg
ICogICAgYSB2YWxpZCBlbWFpbCBhZGRyZXNzLgogICAgICAqLwotICAgIGNoZWNrRW1haWwgOiBm
dW5jdGlvbih2YWx1ZSwgZm9ybUl0ZW0sIGVycm9yTWVzc2FnZSkKKyAgICBjaGVja0VtYWlsIDog
ZnVuY3Rpb24odmFsdWUsIGZvcm1JdGVtLCBlcnJvck1lc3NhZ2UsIGNoZWNrRW1wdHkpCiAgICAg
ewotICAgICAgZXJyb3JNZXNzYWdlID0gZXJyb3JNZXNzYWdlIHx8Ci0gICAgICAgIHF4LmxvY2Fs
ZS5NYW5hZ2VyLnRyKCInJTEnIGlzIG5vdCBhbiBlbWFpbCBhZGRyZXNzLiIsICh2YWx1ZSB8fCAi
IikpOworICAgICAgdmFyIHJlZyA9IC9eKFtBLVphLXowLTlfXC1cLl0pK1xAKFtBLVphLXowLTlf
XC1cLl0pK1wuKFtBLVphLXpdezIsNH0pJC87CisgICAgICB2YXIgZW1wdHkgPSBjaGVja0VtcHR5
ID8gIXZhbHVlIDpmYWxzZTsKIAotICAgICAgdmFyIHJlZyA9IC9eKFtBLVphLXowLTlfXC1cLl0p
K1xAKFtBLVphLXowLTlfXC1cLl0pK1wuKFtBLVphLXpdezIsNH0pJC87Ci0gICAgICBpZiAocmVn
LnRlc3QodmFsdWUpID09PSBmYWxzZSkgeworICAgICAgaWYgKGVtcHR5IHx8IHJlZy50ZXN0KHZh
bHVlKSA9PT0gZmFsc2UpIHsKKyAgICAgICAgZXJyb3JNZXNzYWdlID0gZXJyb3JNZXNzYWdlIHx8
IHF4LmxvY2FsZS5NYW5hZ2VyLnRyKCInJTEnIGlzIG5vdCBhbiBlbWFpbCBhZGRyZXNzLiIsICh2
YWx1ZSB8fCAiIikpOwogICAgICAgICB0aHJvdyBuZXcgcXguY29yZS5WYWxpZGF0aW9uRXJyb3Io
IlZhbGlkYXRpb24gRXJyb3IiLGVycm9yTWVzc2FnZSk7CiAgICAgICB9CiAgICAgfSwKQEAgLTE0
MCwxMSArMjA2LDEyIEBACiAgICAgICogUmV0dXJucyB0aGUgZnVuY3Rpb24gdGhhdCBjaGVja3Mg
Zm9yIGEgc3RyaW5nLgogICAgICAqCiAgICAgICogQHBhcmFtIGVycm9yTWVzc2FnZSB7U3RyaW5n
P251bGx9IEN1c3RvbSBlcnJvciBtZXNzYWdlLgorICAgICAqIEBwYXJhbSBjaGVja0VtcHR5IHtC
b29sZWFuP2ZhbHNlfSBDaGVjayBmb3IgZW1wdHkgZmllbGQuCiAgICAgICogQHJldHVybiB7RnVu
Y3Rpb259IFRoZSB7QGxpbmsgI2NoZWNrU3RyaW5nfSBGdW5jdGlvbi4KICAgICAgKi8KLSAgICBz
dHJpbmcgOiBmdW5jdGlvbihlcnJvck1lc3NhZ2UpIHsKKyAgICBzdHJpbmcgOiBmdW5jdGlvbihl
cnJvck1lc3NhZ2UsIGNoZWNrRW1wdHkpIHsKICAgICAgIHJldHVybiBmdW5jdGlvbih2YWx1ZSkg
ewotICAgICAgICBxeC51dGlsLlZhbGlkYXRlLmNoZWNrU3RyaW5nKHZhbHVlLCBudWxsLCBlcnJv
ck1lc3NhZ2UpOworICAgICAgICBxeC51dGlsLlZhbGlkYXRlLmNoZWNrU3RyaW5nKHZhbHVlLCBu
dWxsLCBlcnJvck1lc3NhZ2UsIGNoZWNrRW1wdHkpOwogICAgICAgfQogICAgIH0sCiAKQEAgLTE1
OSwxNCArMjI2LDE1IEBACiAgICAgICogQHBhcmFtIGZvcm1JdGVtIHtxeC51aS5mb3JtLklGb3Jt
fSBUaGUgZm9ybSBpdGVtIHRvIGNoZWNrIGlmIHVzZWQgaW4gYQogICAgICAqICAge0BsaW5rIHF4
LnVpLmZvcm0uRm9ybX0uCiAgICAgICogQHBhcmFtIGVycm9yTWVzc2FnZSB7U3RyaW5nP251bGx9
IEN1c3RvbSBlcnJvciBtZXNzYWdlLgorICAgICAqIEBwYXJhbSBjaGVja0VtcHR5IHtCb29sZWFu
P2ZhbHNlfSBDaGVjayBmb3IgZW1wdHkgZmllbGQuCiAgICAgICogQHRocm93cyB7cXguY29yZS5W
YWxpZGF0aW9uRXJyb3J9IElmIHRoZSB2YWx1ZSBwYXJhbWV0ZXIgaXMgbm90IGEgc3RyaW5nLgog
ICAgICAqLwotICAgIGNoZWNrU3RyaW5nIDogZnVuY3Rpb24odmFsdWUsIGZvcm1JdGVtLCBlcnJv
ck1lc3NhZ2UpCisgICAgY2hlY2tTdHJpbmcgOiBmdW5jdGlvbih2YWx1ZSwgZm9ybUl0ZW0sIGVy
cm9yTWVzc2FnZSwgY2hlY2tFbXB0eSkKICAgICB7Ci0gICAgICBlcnJvck1lc3NhZ2UgPSBlcnJv
ck1lc3NhZ2UgfHwKLSAgICAgICAgcXgubG9jYWxlLk1hbmFnZXIudHIoIiUxIGlzIG5vdCBhIHN0
cmluZy4iLCB2YWx1ZSk7CisgICAgICB2YXIgZW1wdHkgPSBjaGVja0VtcHR5ID8gIXZhbHVlIDog
ZmFsc2U7CiAKLSAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICJzdHJpbmciICYmICghKHZhbHVl
IGluc3RhbmNlb2YgU3RyaW5nKSkpIHsKKyAgICAgIGlmIChlbXB0eSB8fCB0eXBlb2YgdmFsdWUg
IT09ICJzdHJpbmciICYmICghKHZhbHVlIGluc3RhbmNlb2YgU3RyaW5nKSkpIHsKKyAgICAgICAg
ZXJyb3JNZXNzYWdlID0gZXJyb3JNZXNzYWdlIHx8IHF4LmxvY2FsZS5NYW5hZ2VyLnRyKCIlMSBp
cyBub3QgYSBzdHJpbmcuIiwgdmFsdWUpOwogICAgICAgICB0aHJvdyBuZXcgcXguY29yZS5WYWxp
ZGF0aW9uRXJyb3IoIlZhbGlkYXRpb24gRXJyb3IiLCBlcnJvck1lc3NhZ2UpOwogICAgICAgfQog
ICAgIH0sCkBAIC0xNzYsMTEgKzI0NCwxMiBAQAogICAgICAqIFJldHVybnMgdGhlIGZ1bmN0aW9u
IHRoYXQgY2hlY2tzIGZvciBhbiB1cmwuCiAgICAgICoKICAgICAgKiBAcGFyYW0gZXJyb3JNZXNz
YWdlIHtTdHJpbmc/bnVsbH0gQ3VzdG9tIGVycm9yIG1lc3NhZ2UuCisgICAgICogQHBhcmFtIGNo
ZWNrRW1wdHkge0Jvb2xlYW4/ZmFsc2V9IENoZWNrIGZvciBlbXB0eSBmaWVsZC4KICAgICAgKiBA
cmV0dXJuIHtGdW5jdGlvbn0gVGhlIHtAbGluayAjY2hlY2tVcmx9IEZ1bmN0aW9uLgogICAgICAq
LwotICAgIHVybCA6IGZ1bmN0aW9uKGVycm9yTWVzc2FnZSkgeworICAgIHVybCA6IGZ1bmN0aW9u
KGVycm9yTWVzc2FnZSwgY2hlY2tFbXB0eSkgewogICAgICAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVl
KSB7Ci0gICAgICAgIHF4LnV0aWwuVmFsaWRhdGUuY2hlY2tVcmwodmFsdWUsIG51bGwsIGVycm9y
TWVzc2FnZSk7CisgICAgICAgIHF4LnV0aWwuVmFsaWRhdGUuY2hlY2tVcmwodmFsdWUsIG51bGws
IGVycm9yTWVzc2FnZSwgY2hlY2tFbXB0eSk7CiAgICAgICB9CiAgICAgfSwKIApAQCAtMTk3LDEz
ICsyNjYsMTMgQEAKICAgICAgKiBAcGFyYW0gZXJyb3JNZXNzYWdlIHtTdHJpbmc/bnVsbH0gQ3Vz
dG9tIGVycm9yIG1lc3NhZ2UuCiAgICAgICogQHRocm93cyB7cXguY29yZS5WYWxpZGF0aW9uRXJy
b3J9IElmIHRoZSB2YWx1ZSBwYXJhbWV0ZXIgaXMgbm90IGFuIHVybC4KICAgICAgKi8KLSAgICBj
aGVja1VybCA6IGZ1bmN0aW9uKHZhbHVlLCBmb3JtSXRlbSwgZXJyb3JNZXNzYWdlKQorICAgIGNo
ZWNrVXJsIDogZnVuY3Rpb24odmFsdWUsIGZvcm1JdGVtLCBlcnJvck1lc3NhZ2UsIGNoZWNrRW1w
dHkpCiAgICAgewotICAgICAgZXJyb3JNZXNzYWdlID0gZXJyb3JNZXNzYWdlIHx8Ci0gICAgICAg
IHF4LmxvY2FsZS5NYW5hZ2VyLnRyKCIlMSBpcyBub3QgYW4gdXJsLiIsIHZhbHVlKTsKKyAgICAg
IHZhciByZWcgPSAgLyhbQS1aYS16MC05XSkrOlwvXC8oXHcrOnswLDF9XHcqQCk/KFxTKykoOlsw
LTldKyk/KFwvfFwvKFtcdyMhOi4/Kz0mJUAhXC1cL10pKT8vOworICAgICAgdmFyIGVtcHR5ID0g
Y2hlY2tFbXB0eSA/ICF2YWx1ZSA6ZmFsc2U7CiAKLSAgICAgIHZhciByZWcgPSAgLyhbQS1aYS16
MC05XSkrOlwvXC8oXHcrOnswLDF9XHcqQCk/KFxTKykoOlswLTldKyk/KFwvfFwvKFtcdyMhOi4/
Kz0mJUAhXC1cL10pKT8vOwotICAgICAgaWYgKCFyZWcudGVzdCh2YWx1ZSkpIHsKKyAgICAgIGlm
IChlbXB0eSB8fCAhcmVnLnRlc3QodmFsdWUpKSB7CisgICAgICAgIGVycm9yTWVzc2FnZSA9IGVy
cm9yTWVzc2FnZSB8fCBxeC5sb2NhbGUuTWFuYWdlci50cigiJTEgaXMgbm90IGFuIHVybC4iLCB2
YWx1ZSk7CiAgICAgICAgIHRocm93IG5ldyBxeC5jb3JlLlZhbGlkYXRpb25FcnJvcigiVmFsaWRh
dGlvbiBFcnJvciIsIGVycm9yTWVzc2FnZSk7CiAgICAgICB9CiAgICAgfSwKQEAgLTIxMywxMSAr
MjgyLDEyIEBACiAgICAgICogUmV0dXJucyB0aGUgZnVuY3Rpb24gdGhhdCBjaGVja3MgZm9yIGEg
Y29sb3IuCiAgICAgICoKICAgICAgKiBAcGFyYW0gZXJyb3JNZXNzYWdlIHtTdHJpbmc/bnVsbH0g
Q3VzdG9tIGVycm9yIG1lc3NhZ2UuCisgICAgICogQHBhcmFtIGNoZWNrRW1wdHkge0Jvb2xlYW4/
ZmFsc2V9IENoZWNrIGZvciBlbXB0eSBmaWVsZC4KICAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0g
VGhlIHtAbGluayAjY2hlY2tDb2xvcn0gRnVuY3Rpb24uCiAgICAgICovCi0gICAgY29sb3IgOiBm
dW5jdGlvbihlcnJvck1lc3NhZ2UpIHsKKyAgICBjb2xvciA6IGZ1bmN0aW9uKGVycm9yTWVzc2Fn
ZSwgY2hlY2tFbXB0eSkgewogICAgICAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7Ci0gICAgICAg
IHF4LnV0aWwuVmFsaWRhdGUuY2hlY2tDb2xvcih2YWx1ZSwgbnVsbCwgZXJyb3JNZXNzYWdlKTsK
KyAgICAgICAgcXgudXRpbC5WYWxpZGF0ZS5jaGVja0NvbG9yKHZhbHVlLCBudWxsLCBlcnJvck1l
c3NhZ2UsIGNoZWNrRW1wdHkpOwogICAgICAgfQogICAgIH0sCiAKQEAgLTIzMywxNSArMzAzLDIz
IEBACiAgICAgICogQHBhcmFtIGZvcm1JdGVtIHtxeC51aS5mb3JtLklGb3JtfSBUaGUgZm9ybSBp
dGVtIHRvIGNoZWNrIGlmIHVzZWQgaW4gYQogICAgICAqICAge0BsaW5rIHF4LnVpLmZvcm0uRm9y
bX0uCiAgICAgICogQHBhcmFtIGVycm9yTWVzc2FnZSB7U3RyaW5nP251bGx9IEN1c3RvbSBlcnJv
ciBtZXNzYWdlLgorICAgICAqIEBwYXJhbSBjaGVja0VtcHR5IHtCb29sZWFuP2ZhbHNlfSBDaGVj
ayBmb3IgZW1wdHkgZmllbGQuCiAgICAgICogQHRocm93cyB7cXguY29yZS5WYWxpZGF0aW9uRXJy
b3J9IElmIHRoZSB2YWx1ZSBwYXJhbWV0ZXIgaXMgbm90IGEgY29sb3IuCiAgICAgICovCi0gICAg
Y2hlY2tDb2xvciA6IGZ1bmN0aW9uKHZhbHVlLCBmb3JtSXRlbSwgZXJyb3JNZXNzYWdlKQorICAg
IGNoZWNrQ29sb3IgOiBmdW5jdGlvbih2YWx1ZSwgZm9ybUl0ZW0sIGVycm9yTWVzc2FnZSwgY2hl
Y2tFbXB0eSkKICAgICB7CisgICAgICB2YXIgZW1wdHkgPSBjaGVja0VtcHR5ID8gIXZhbHVlIDpm
YWxzZTsKKwogICAgICAgdHJ5IHsKICAgICAgICAgcXgudXRpbC5Db2xvclV0aWwuc3RyaW5nVG9S
Z2IodmFsdWUpOworCisgICAgICAgIGlmKGVtcHR5KQorICAgICAgICB7CisgICAgICAgICAgdGhy
b3cgIkVtcHR5IjsKKyAgICAgICAgfQorCiAgICAgICB9IGNhdGNoIChlKSB7Ci0gICAgICAgIGVy
cm9yTWVzc2FnZSA9IGVycm9yTWVzc2FnZSB8fAotICAgICAgICAgIHF4LmxvY2FsZS5NYW5hZ2Vy
LnRyKCIlMSBpcyBub3QgYSBjb2xvciEgJTIiLCB2YWx1ZSwgZSk7CisgICAgICAgIGVycm9yTWVz
c2FnZSA9IGVycm9yTWVzc2FnZSB8fCBxeC5sb2NhbGUuTWFuYWdlci50cigiJTEgaXMgbm90IGEg
Y29sb3IhICUyIiwgdmFsdWUsIGUpOwogICAgICAgICB0aHJvdyBuZXcgcXguY29yZS5WYWxpZGF0
aW9uRXJyb3IoIlZhbGlkYXRpb24gRXJyb3IiLCBlcnJvck1lc3NhZ2UpOwogICAgICAgfQogICAg
IH0sCkBAIC0yNTgsMTYgKzMzNiwxNyBAQAogICAgICAqIEBwYXJhbSBmcm9tIHtOdW1iZXJ9IFRo
ZSBsb3dlciBib3JkZXIgb2YgdGhlIHJhbmdlLgogICAgICAqIEBwYXJhbSB0byB7TnVtYmVyfSBU
aGUgdXBwZXIgYm9yZGVyIG9mIHRoZSByYW5nZS4KICAgICAgKiBAcGFyYW0gZXJyb3JNZXNzYWdl
IHtTdHJpbmc/bnVsbH0gQ3VzdG9tIGVycm9yIG1lc3NhZ2UuCisgICAgICogQHBhcmFtIGNoZWNr
RW1wdHkge0Jvb2xlYW4/ZmFsc2V9IENoZWNrIGZvciBlbXB0eSBmaWVsZC4KICAgICAgKiBAcmV0
dXJuIHtGdW5jdGlvbn0gQSBmdW5jdGlvbiB0YWtpbmcgb25lIHBhcmFtZXRlciAodmFsdWUpLgog
ICAgICAqLwotICAgIHJhbmdlIDogZnVuY3Rpb24oZnJvbSwgdG8sIGVycm9yTWVzc2FnZSkKKyAg
ICByYW5nZSA6IGZ1bmN0aW9uKGZyb20sIHRvLCBlcnJvck1lc3NhZ2UsIGNoZWNrRW1wdHkpCiAg
ICAgewogICAgICAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKQogICAgICAgewotICAgICAgICBlcnJv
ck1lc3NhZ2UgPSBlcnJvck1lc3NhZ2UgfHwKLSAgICAgICAgICBxeC5sb2NhbGUuTWFuYWdlci50
cigiJTEgaXMgbm90IGluIHRoZSByYW5nZSBmcm9tIFslMiwgJTNdLiIsIHZhbHVlLCBmcm9tLCB0
byk7CisgICAgICAgIHZhciBlbXB0eSA9IGNoZWNrRW1wdHkgPyAhdmFsdWUgOmZhbHNlOwogCi0g
ICAgICAgIGlmICh2YWx1ZSA8IGZyb20gfHwgdmFsdWUgPiB0bykgeworICAgICAgICBpZiAoZW1w
dHkgfHwgdmFsdWUgPCBmcm9tIHx8IHZhbHVlID4gdG8pIHsKKyAgICAgICAgICBlcnJvck1lc3Nh
Z2UgPSBlcnJvck1lc3NhZ2UgfHwgcXgubG9jYWxlLk1hbmFnZXIudHIoIiUxIGlzIG5vdCBpbiB0
aGUgcmFuZ2UgZnJvbSBbJTIsICUzXS4iLCB2YWx1ZSwgZnJvbSwgdG8pOwogICAgICAgICAgIHRo
cm93IG5ldyBxeC5jb3JlLlZhbGlkYXRpb25FcnJvcigiVmFsaWRhdGlvbiBFcnJvciIsIGVycm9y
TWVzc2FnZSk7CiAgICAgICAgIH0KICAgICAgIH0KQEAgLTI4MSwxNiArMzYwLDE3IEBACiAgICAg
ICoKICAgICAgKiBAcGFyYW0gYXJyYXkge0FycmF5fSBUaGUgYXJyYXkgaG9sZGluZyB0aGUgcG9z
c2liaWxpdGllcy4KICAgICAgKiBAcGFyYW0gZXJyb3JNZXNzYWdlIHtTdHJpbmc/bnVsbH0gQ3Vz
dG9tIGVycm9yIG1lc3NhZ2UuCisgICAgICogQHBhcmFtIGNoZWNrRW1wdHkge0Jvb2xlYW4/ZmFs
c2V9IENoZWNrIGZvciBlbXB0eSBmaWVsZC4KICAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gQSBm
dW5jdGlvbiB0YWtpbmcgb25lIHBhcmFtZXRlciAodmFsdWUpLgogICAgICAqLwotICAgIGluQXJy
YXkgOiBmdW5jdGlvbihhcnJheSwgZXJyb3JNZXNzYWdlKQorICAgIGluQXJyYXkgOiBmdW5jdGlv
bihhcnJheSwgZXJyb3JNZXNzYWdlLCBjaGVja0VtcHR5KQogICAgIHsKICAgICAgIHJldHVybiBm
dW5jdGlvbih2YWx1ZSkKICAgICAgIHsKLSAgICAgICAgZXJyb3JNZXNzYWdlID0gZXJyb3JNZXNz
YWdlIHx8Ci0gICAgICAgICAgcXgubG9jYWxlLk1hbmFnZXIudHIoIiUxIGlzIG5vdCBpbiAlMiIs
IHZhbHVlLCBhcnJheSk7CisgICAgICAgIHZhciBlbXB0eSA9IGNoZWNrRW1wdHkgPyAhdmFsdWUg
OmZhbHNlOwogCi0gICAgICAgIGlmIChhcnJheS5pbmRleE9mKHZhbHVlKSA9PT0gLTEpIHsKKyAg
ICAgICAgaWYgKGVtcHR5IHx8IGFycmF5LmluZGV4T2YodmFsdWUpID09PSAtMSkgeworICAgICAg
ICAgIGVycm9yTWVzc2FnZSA9IGVycm9yTWVzc2FnZSB8fCBxeC5sb2NhbGUuTWFuYWdlci50cigi
JTEgaXMgbm90IGluICUyIiwgdmFsdWUsIGFycmF5KTsKICAgICAgICAgICB0aHJvdyBuZXcgcXgu
Y29yZS5WYWxpZGF0aW9uRXJyb3IoIlZhbGlkYXRpb24gRXJyb3IiLCBlcnJvck1lc3NhZ2UpOwog
ICAgICAgICB9CiAgICAgICB9CkBAIC0zMDUsMTYgKzM4NSwxNyBAQAogICAgICAqIGluY29taW5n
CiAgICAgICogQHBhcmFtIHJlZyB7UmVnRXhwfSBUaGUgUmVnRXhwIGZvciB0aGUgY2hlY2suCiAg
ICAgICogQHBhcmFtIGVycm9yTWVzc2FnZSB7U3RyaW5nP251bGx9IEN1c3RvbSBlcnJvciBtZXNz
YWdlLgorICAgICAqIEBwYXJhbSBjaGVja0VtcHR5IHtCb29sZWFuP2ZhbHNlfSBDaGVjayBmb3Ig
ZW1wdHkgZmllbGQuCiAgICAgICogQHJldHVybiB7RnVuY3Rpb259IEEgZnVuY3Rpb24gdGFraW5n
IG9uZSBwYXJhbWV0ZXIgKHZhbHVlKS4KICAgICAgKi8KLSAgICByZWdFeHAgOiBmdW5jdGlvbihy
ZWcsIGVycm9yTWVzc2FnZSkKKyAgICByZWdFeHAgOiBmdW5jdGlvbihyZWcsIGVycm9yTWVzc2Fn
ZSwgY2hlY2tFbXB0eSkKICAgICB7CiAgICAgICByZXR1cm4gZnVuY3Rpb24odmFsdWUpCiAgICAg
ICB7Ci0gICAgICAgIGVycm9yTWVzc2FnZSA9IGVycm9yTWVzc2FnZSB8fAotICAgICAgICAgIHF4
LmxvY2FsZS5NYW5hZ2VyLnRyKCIlMSBkb2VzIG5vdCBmaXQgJTIuIiwgdmFsdWUsIHJlZyk7Cisg
ICAgICAgIHZhciBlbXB0eSA9IGNoZWNrRW1wdHkgPyAhdmFsdWUgOmZhbHNlOwogCi0gICAgICAg
IGlmICghcmVnLnRlc3QodmFsdWUpKSB7CisgICAgICAgIGlmIChlbXB0eSB8fCAhcmVnLnRlc3Qo
dmFsdWUpKSB7CisgICAgICAgICAgZXJyb3JNZXNzYWdlID0gZXJyb3JNZXNzYWdlIHx8IHF4Lmxv
Y2FsZS5NYW5hZ2VyLnRyKCIlMSBkb2VzIG5vdCBmaXQgJTIuIiwgdmFsdWUsIHJlZyk7CiAgICAg
ICAgICAgdGhyb3cgbmV3IHF4LmNvcmUuVmFsaWRhdGlvbkVycm9yKCJWYWxpZGF0aW9uIEVycm9y
IiwgZXJyb3JNZXNzYWdlKTsKICAgICAgICAgfQogICAgICAgfQpAQCAtMzIyLDUgKzQwMywzIEBA
CiAgIH0KIH0pOwogCi0KLQo=
</data>

          </attachment>
      

    </bug>