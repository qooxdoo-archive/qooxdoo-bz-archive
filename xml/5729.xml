<bug>
          <bug_id>5729</bug_id>
          
          <creation_ts>2011-10-20 16:18:00 +0200</creation_ts>
          <short_desc>Upload Widget Fails to Upload in IE 8</short_desc>
          <delta_ts>2014-03-03 08:46:03 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>contrib</product>
          <component>UploadWidget</component>
          <version>trunk</version>
          <rep_platform>All</rep_platform>
          <op_sys>Windows</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>LATER</resolution>
          
          
          
          
          
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>unspecified</target_milestone>
          
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Trentin Priebe">tpriebe</reporter>
          <assigned_to name="Unassigned">none</assigned_to>
          
          <qa_contact name="Dietrich Streifert">dietrich.streifert</qa_contact>
          <cf_browser>---</cf_browser>
          

      

      

      

          <long_desc isprivate="0">
            <commentid>27278</commentid>
              <attachid>1071</attachid>
            <who name="Trentin Priebe">tpriebe</who>
            <bug_when>2011-10-20 16:18:04 +0200</bug_when>
            <thetext>Created attachment 1071
UploadForm.js with the proposed fix described above

The upload widget was failing to upload my files in IE 8.  This looked to be caused by the encoding/enctype not being set correctly for the form.  I changed the lines in the constructor of uploadForm from:
if (qx.core.Environment.get(&#39;browser.name&#39;) == &#39;ie&#39; &amp;&amp; qx.core.Environment.get(&#39;browser.version&#39;) &lt; 8 ) {
        el.setAttributes({
            encoding: encoding || &quot;multipart/form-data&quot;
        })
    }

to:
if (qx.core.Environment.get(&#39;browser.name&#39;) == &#39;ie&#39; &amp;&amp; qx.core.Environment.get(&#39;browser.version&#39;) &lt;= 8 ) {
        el.setAttributes({
            encoding: encoding || &quot;multipart/form-data&quot;,
      		method: &quot;POST&quot;
        })
    }

Also once the upload was fixed the upload didn&#39;t target a hidden iFrame but was instead popping up a new window with my results. To fix that I changed the Browser check if statement in the _createIFrameTarget to be the same as the new one I put in the constructor.</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>35392</commentid>
            <who name="Martin Wittemann">martin.wittemann</who>
            <bug_when>2014-03-03 08:46:03 +0100</bug_when>
            <thetext>Move open issues to RESOLVED â€“ LATER, whose last comment is older than a year.</thetext>
          </long_desc>
      
          <attachment isobsolete="0" ispatch="1" isprivate="0" isurl="0">
            <attachid>1071</attachid>
            <date>2011-10-20 16:18:00 +0200</date>
            <delta_ts>2011-10-20 16:18:04 +0200</delta_ts>
            <desc>UploadForm.js with the proposed fix described above</desc>
            <filename>UploadForm.js</filename>
            <type>text/plain</type>
            <size>14003</size>
            <attacher>tpriebe</attacher>
            
              <data encoding="base64">LyogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqCgogICBxb294ZG9vIC0gdGhlIG5ldyBlcmEgb2Ygd2ViIGRldmVs
b3BtZW50CgogICBodHRwOi8vcW9veGRvby5vcmcKCiAgIENvcHlyaWdodDoKICAgICAyMDA3IFZp
c2lvbmV0IEdtYkgsIGh0dHA6Ly93d3cudmlzaW9uZXQuZGUKCiAgIExpY2Vuc2U6CiAgICAgTEdQ
TDogaHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzL2xncGwuaHRtbAogICAgIEVQTDogaHR0cDov
L3d3dy5lY2xpcHNlLm9yZy9vcmcvZG9jdW1lbnRzL2VwbC12MTAucGhwCiAgICAgU2VlIHRoZSBM
SUNFTlNFIGZpbGUgaW4gdGhlIHByb2plY3QncyB0b3AtbGV2ZWwgZGlyZWN0b3J5IGZvciBkZXRh
aWxzLgoKICAgQXV0aG9yczoKICAgICAqIERpZXRyaWNoIFN0cmVpZmVydCAobGV2ZWw0MjApCiAg
IAogICBDb250cmlidXRvcnM6CiAgICAgKiBQZXRyIEtvYmFsaWNlayAoZTY2NmUpCiAgICAgKiBU
b2JpIE9ldGlrZXIgKG9ldGlrZXIpCgoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi8KCi8qKgogKiBBbiB1cGxv
YWQgd2lkZ2V0IGltcGxlbWVudGF0aW9uIGNhcGFibGUgb2YgaG9sZGluZyBtdWx0aXBsZSB1cGxv
YWQgYnV0dG9ucwogKiBhbmQgdXBsb2FkIGZpZWxkcy4KICogCiAqIEVhY2ggdXBsb2FkIGZvcm0g
Y3JlYXRlcyBhbiBpZnJhbWUgd2hpY2ggaXMgdXNlZCBhcyBhIHRhcmdldCBmb3IgZm9ybSBzdWJt
aXQuCiAqIAogKgogKi8KcXguQ2xhc3MuZGVmaW5lKCJ1cGxvYWR3aWRnZXQuVXBsb2FkRm9ybSIs
CnsKICBleHRlbmQgOiBxeC51aS5jb250YWluZXIuQ29tcG9zaXRlLAoKICAvLyAtLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLQogIC8vIFtDb25zdHJ1Y3Rvcl0KICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAvKioK
ICAgKiBAcGFyYW0gbmFtZSB7U3RyaW5nfSBmb3JtIG5hbWUgKHtAbGluayAjbmFtZX0pLgogICAq
IEBwYXJhbSB1cmwge1N0cmluZ30gdXJsIGZvciBmb3JtIHN1Ym1pc3Npb24gKHtAbGluayAjdXJs
fSkuCiAgICogQHBhcmFtIGVuY29kaW5nIHtTdHJpbmd9IGVuY29kaW5nIGZvciBmcm9tIHN1Ym1p
c3Npb24uIFRoaXMgaXMgYW4gaW5zdGFudGlhdGlvbiBvbmx5IHBhcmFtZXRlciBhbmQgZGVmYXVs
dHMgdG8gbXVsdGlwYXJ0L2Zvcm0tZGF0YQogICAqLwogIGNvbnN0cnVjdDogZnVuY3Rpb24obmFt
ZSwgdXJsLCBlbmNvZGluZykKICB7CiAgICB0aGlzLmJhc2UoYXJndW1lbnRzKTsKICAgIAogICAg
Ly8gQXBwbHkgaW5pdGlhbCB2YWx1ZXMKICAgIGlmIChuYW1lKSB7CiAgICAgICAgdGhpcy5zZXRO
YW1lKG5hbWUpOwogICAgfQogICAgaWYgKHVybCkgewogICAgICAgIHRoaXMuc2V0VXJsKHVybCk7
CiAgICB9CgogICAgLy90aGlzLnNldEh0bWxQcm9wZXJ0eSgiZW5jb2RpbmciLCBlbmNvZGluZyB8
fCAibXVsdGlwYXJ0L2Zvcm0tZGF0YSIpOwogICAgdmFyIGVsID0gdGhpcy5nZXRDb250ZW50RWxl
bWVudCgpOwogICAgZWwuc2V0QXR0cmlidXRlcyh7CiAgICAgIGVuY3R5cGU6IGVuY29kaW5nIHx8
ICJtdWx0aXBhcnQvZm9ybS1kYXRhIiwKICAgICAgbWV0aG9kOiAiUE9TVCIKICAgIH0pOyAgICAK
ICAgIGlmIChxeC5jb3JlLkVudmlyb25tZW50LmdldCgnYnJvd3Nlci5uYW1lJykgPT0gJ2llJyAm
JiBxeC5jb3JlLkVudmlyb25tZW50LmdldCgnYnJvd3Nlci52ZXJzaW9uJykgPD0gOCApIHsKICAg
ICAgICBlbC5zZXRBdHRyaWJ1dGVzKHsKICAgICAgICAgICAgZW5jb2Rpbmc6IGVuY29kaW5nIHx8
ICJtdWx0aXBhcnQvZm9ybS1kYXRhIiwKICAgICAgCQltZXRob2Q6ICJQT1NUIgogICAgICAgIH0p
CiAgICB9CiAgICBlbC5pbmNsdWRlKCk7CiAgICAvLyBJbml0aWFsaXplIFZhcmlhYmxlcwogICAg
dGhpcy5fX3BhcmFtZXRlcnMgPSB7fTsKICAgIHRoaXMuX19oaWRkZW4gPSB7fTsKICAgIAogICAg
Ly8gY3JlYXRlIGEgaGlkZGVuIGlmcmFtZSB3aGljaCBpcyB1c2VkIGFzIGZvcm0gc3VibWlzc2lv
biB0YXJnZXQKICAgIHRoaXMuX2NyZWF0ZUlGcmFtZVRhcmdldCgpOwogIH0sCgogIC8vIC0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tCiAgLy8gW0Rlc3RydWN0b3JdCiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAg
ZGVzdHJ1Y3Q6IGZ1bmN0aW9uKCkKICB7CiAgICBpZiAodGhpcy5fX2lmcmFtZU5vZGUpCiAgICB7
CiAgICAgIHRyeQogICAgICB7CiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0aGlz
Ll9faWZyYW1lTm9kZSk7CiAgICAgICAgdGhpcy5fX2lmcmFtZU5vZGUub25yZWFkeXN0YXRlY2hh
bmdlID0gbnVsbDsKICAgICAgICB0aGlzLl9faWZyYW1lTm9kZS5vbmxvYWQgPSBudWxsOwogICAg
ICAgIHRoaXMuX19pZnJhbWVOb2RlID0gbnVsbDsKICAgICAgfQogICAgICBjYXRjaCAoZXhjKQog
ICAgICB7CiAgICAgICAgdGhpcy53YXJuKCJjYW4ndCByZW1vdmUgaWZyYW1lIG5vZGUgZnJvbSB0
aGUgRE9NIHRyZWUuIik7CiAgICAgIH0KICAgIH0KICAKICAgIHRoaXMuX19wYXJhbWV0ZXJzID0g
bnVsbDsKICAKICAgIGZvciAodmFyIGlkIGluIHRoaXMuX19oaWRkZW4pCiAgICB7CiAgICAgIGlm
KHRoaXMuX19oaWRkZW5baWRdICYmIHRoaXMuX19oaWRkZW5baWRdLnBhcmVudE5vZGUpCiAgICAg
IHsKICAgICAgICB0aGlzLl9faGlkZGVuW2lkXS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMu
X19oaWRkZW5baWRdKTsKICAgICAgfQogICAgfQogICAgCiAgICB0aGlzLl9faGlkZGVuID0gbnVs
bDsKICB9LAoKICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogIC8vIFtFdmVudHNdCiAgLy8gLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0KCiAgZXZlbnRzOgogIHsKICAgICJzZW5kaW5nIiAgICA6ICJxeC5ldmVudC50
eXBlLkV2ZW50IiwKICAgICJjb21wbGV0ZWQiICA6ICJxeC5ldmVudC50eXBlLkV2ZW50IgogIH0s
CgogIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgLy8gW1Byb3BlcnRpZXNdCiAgLy8gLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0KCiAgcHJvcGVydGllczoKICB7CiAgICAvKioKICAgICAqIFRoZSBuYW1lIHdoaWNo
IGlzIGFzc2lnbmVkIHRvIHRoZSBmb3JtCiAgICAgKi8KICAgIG5hbWU6CiAgICB7CiAgICAgIGNo
ZWNrICAgIDogIlN0cmluZyIsCiAgICAgIGluaXQgICAgIDogIiIsCiAgICAgIGFwcGx5ICAgIDog
Il9hcHBseU5hbWUiCiAgICB9LAoKICAgIC8qKgogICAgICogVGhlIHVybCB3aGljaCBpcyB1c2Vk
IGZvciBmb3JtIHN1Ym1pc3Npb24uCiAgICAgKi8KICAgIHVybDoKICAgIHsKICAgICAgY2hlY2sg
ICAgOiAiU3RyaW5nIiwKICAgICAgaW5pdCAgICAgOiAiIiwKICAgICAgYXBwbHkgICAgOiAiX2Fw
cGx5VXJsIgogICAgfSwKCiAgICAvKioKICAgICAqIFRoZSB0YXJnZXQgd2hpY2ggaXMgdXNlZCBm
b3IgZm9ybSBzdWJtaXNzaW9uLgogICAgICovCiAgICB0YXJnZXQ6CiAgICB7CiAgICAgIGNoZWNr
ICAgIDogIlN0cmluZyIsCiAgICAgIGluaXQgICAgIDogIiIsCiAgICAgIGFwcGx5ICAgIDogIl9h
cHBseVRhcmdldCIKICAgIH0KICB9LAogIAogIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgLy8gW01l
bWJlcnNdCiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgbWVtYmVyczoKICB7CiAgICBfX2lmcmFt
ZU5vZGU6IG51bGwsCiAgICBfX3BhcmFtZXRlcnM6IG51bGwsCiAgICBfX2hpZGRlbjogbnVsbCwK
ICAgIF9faXNTZW50OiBudWxsLAoKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gW01vZGlm
aWVyc10KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIF9hcHBseU5hbWU6IGZ1bmN0aW9uKHZh
bHVlLCBvbGQpCiAgICB7CiAgICAgIHRoaXMuZ2V0Q29udGVudEVsZW1lbnQoKS5zZXRBdHRyaWJ1
dGUoIm5hbWUiLCB2YWx1ZSk7CiAgICB9LAogICAgCiAgICBfYXBwbHlVcmw6IGZ1bmN0aW9uKHZh
bHVlLCBvbGQpCiAgICB7CiAgICAgIHRoaXMuZ2V0Q29udGVudEVsZW1lbnQoKS5zZXRBdHRyaWJ1
dGUoImFjdGlvbiIsIHZhbHVlKTsKICAgIH0sCgogICAgX2FwcGx5VGFyZ2V0OiBmdW5jdGlvbih2
YWx1ZSwgb2xkKQogICAgewogICAgICB0aGlzLmdldENvbnRlbnRFbGVtZW50KCkuc2V0QXR0cmli
dXRlKCJ0YXJnZXQiLCB2YWx1ZSk7CiAgICB9LAogICAgCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0K
ICAgIC8vIFtVdGlsaXRpZXNdCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAvKioKICAgICAq
IENyZWF0ZSBhIGhpZGRlbiBpZnJhbWUgd2hpY2ggaXMgdXNlZCBhcyB0YXJnZXQgZm9yIHRoZSBm
b3JtIHN1Ym1pc3Npb24uCiAgICAgKiBEb24ndCBuZWVkIGEgc3JjIGF0dHJpYnV0ZSwgaWYgaXQg
d2FzIHNldCB0byBqYXZhc2NyaXB0OnZvaWQgd2UgZ2V0IGFuIGluc2VjdXJlCiAgICAgKiBvYmpl
Y3RzIGVycm9yIGluIElFLgogICAgICoKICAgICAqIEB0eXBlIG1lbWJlcgogICAgICogQHJldHVy
biB7dm9pZH0KICAgICAqLwogICAgX2NyZWF0ZUlGcmFtZVRhcmdldDogZnVuY3Rpb24oKQogICAg
ewogICAgICB2YXIgZnJhbWVOYW1lID0gImZyYW1lXyIgKyAobmV3IERhdGUpLnZhbHVlT2YoKTsK
CiAgICAgaWYgKHF4LmNvcmUuRW52aXJvbm1lbnQuZ2V0KCdicm93c2VyLm5hbWUnKSA9PSAnaWUn
ICYmIHF4LmNvcmUuRW52aXJvbm1lbnQuZ2V0KCdicm93c2VyLnZlcnNpb24nKSA8PSA4ICkgewog
ICAgICAgIHRoaXMuX19pZnJhbWVOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnPGlmcmFt
ZSBuYW1lPSInICsgZnJhbWVOYW1lICsgJyI+PC9pZnJhbWU+Jyk7CiAgICAgIH0KICAgICAgZWxz
ZQogICAgICB7CiAgICAgICAgdGhpcy5fX2lmcmFtZU5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVt
ZW50KCJpZnJhbWUiKTsKICAgICAgfQoKICAgICAgdGhpcy5fX2lmcmFtZU5vZGUuaWQgPSAodGhp
cy5fX2lmcmFtZU5vZGUubmFtZSA9IGZyYW1lTmFtZSk7CiAgICAgIHRoaXMuX19pZnJhbWVOb2Rl
LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgIHRoaXMuc2V0VGFyZ2V0KGZyYW1lTmFtZSk7
CgogICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuX19pZnJhbWVOb2RlKTsKCiAg
ICAgIHRoaXMuX19pZnJhbWVOb2RlLm9ubG9hZCA9IHF4LmxhbmcuRnVuY3Rpb24uYmluZCh0aGlz
Ll9vbkxvYWQsIHRoaXMpOwogICAgICB0aGlzLl9faWZyYW1lTm9kZS5vbnJlYWR5c3RhdGVjaGFu
Z2UgPSBxeC5sYW5nLkZ1bmN0aW9uLmJpbmQodGhpcy5fb25SZWFkeVN0YXRlQ2hhbmdlLCB0aGlz
KTsKICAgIH0sCgogICAgLyoqCiAgICAgKiByZXBsYWNlIHRoZSB3aWRnZXRzIGNvbnRlbnQgZWxl
bWVudCB3aXRoIGEgZm9ybSBlbGVtZW50IHNvIHRoYXQgd2UgY2FuIHRoZW4gc2VuZCB0aGUgc3R1
ZmYgYXdheS4KICAgICAqLyAgICAKICAgIF9jcmVhdGVDb250ZW50RWxlbWVudDogZnVuY3Rpb24o
KQogICAgewogICAgICB2YXIgZWwgPSBuZXcgcXguaHRtbC5FbGVtZW50KCJmb3JtIix7CiAgICAg
ICAgb3ZlcmZsb3c6ICdoaWRkZW4nCiAgICAgIH0pOwogICAgICByZXR1cm4gZWw7CiAgICB9LAoK
ICAgIC8qKgogICAgICogQWRkIHBhcmFtZXRlcnMgYXMgaGlkZGVuIGZpZWxkcyB0byB0aGUgZm9y
bS4KICAgICAqCiAgICAgKiBAdHlwZSBtZW1iZXIKICAgICAqIEByZXR1cm4ge29iamVjdH0KICAg
ICAqLwogICAgX2FkZEZvcm1QYXJhbWV0ZXJzOiBmdW5jdGlvbigpCiAgICB7CiAgICAgIHZhciBm
b3JtID0gdGhpcy5nZXRDb250ZW50RWxlbWVudCgpLmdldERvbUVsZW1lbnQoKTsKICAgICAgdmFy
IHBhcmFtZXRlcnMgPSB0aGlzLmdldFBhcmFtZXRlcnMoKTsKICAgICAgdmFyIGZpcnN0Q2hpbGQg
PSBmb3JtLmZpcnN0Q2hpbGQ7CgogICAgICAvLyBQYXJhbWV0ZXJzIG11c3QgYmUgZmlyc3QgZWxl
bWVudCBzbyB0aGF0IHdlIGNhbiBwYXJzZSB0aGVtIGJlZm9yZSB0aGUgZmlsZQogICAgICBmb3Ig
KHZhciBpZCBpbiBwYXJhbWV0ZXJzKSB7CiAgICAJZm9ybS5pbnNlcnRCZWZvcmUodGhpcy5fX2hp
ZGRlbltpZF0sIGZpcnN0Q2hpbGQpOwogICAgICB9CiAgICB9LAoKCiAgICAvKioKICAgICAqIENy
ZWF0ZSBhbiBpbnB1dCBlbGVtZW50IG9mIHR5cGUgaGlkZGVuIHdpdGggdGhlIAogICAgICogbmFt
ZSAoe0BsaW5rICNuYW1lfSkgYW5kIHZhbHVlICh7QGxpbmsgI3ZhbHVlfSkKICAgICAqCiAgICAg
KiBAdHlwZSBtZW1iZXIKICAgICAqIEBwYXJhbSBuYW1lIHtTdHJpbmd9IG5hbWUgYXR0cmlidXRl
IG9mIHRoZSBjcmVhdGVkIGVsZW1lbnQgKHtAbGluayAjbmFtZX0pLgogICAgICogQHBhcmFtIHZh
bHVlIHtTdHJpbmd9IHZhbHVlIGF0dHJpYnV0ZSBvZiB0aGUgY3JlYXRlZCBlbGVtZW50ICh7QGxp
bmsgI3ZhbHVlfSkuCiAgICAgKiBAcmV0dXJuIHt2b2lkfQogICAgICovCiAgICBfY3JlYXRlSGlk
ZGVuRm9ybUZpZWxkOiBmdW5jdGlvbihuYW1lLHZhbHVlKQogICAgewogICAgICB2YXIgaHZhbHVl
ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTsKICAgICAgaHZhbHVlLnR5cGUgPSAi
aGlkZGVuIjsKICAgICAgaHZhbHVlLm5hbWUgPSBuYW1lOwogICAgICBodmFsdWUudmFsdWUgPSB2
YWx1ZTsKICAgIAogICAgICByZXR1cm4gaHZhbHVlOwogICAgfSwKCiAgICAvLyAtLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0KICAgIC8vIFtQYXJhbWV0ZXJzIFNldHRlcnMgLyBHZXR0ZXJzXQogICAgLy8gLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tCgogICAgLyoqCiAgICAgKiBTZXQgYSByZXF1ZXN0IHBhcmFtZXRlciB3aGljaCBp
cyBzdG9yZWQgYXMgYW4gaW5wdXQgdHlwZT1oaWRkZW4uCiAgICAgKiAKICAgICAqIEBwYXJhbSBp
ZCBTdHJpbmcgaWRlbnRpZmllciBvZiB0aGUgcGFyYW1ldGVyIHRvIGFkZC4KICAgICAqIEBwYXJh
bSB2YWx1ZSBTdHJpbmcgVmFsdWUgb2YgcGFyYW1ldGVyLgogICAgICogQHJldHVybiB7dm9pZH0K
ICAgICAqLwogICAgc2V0UGFyYW1ldGVyOiBmdW5jdGlvbihpZCwgdmFsdWUpCiAgICB7CiAgICAg
IHRoaXMuX19wYXJhbWV0ZXJzW2lkXSA9IHZhbHVlOwogICAgICBpZih0aGlzLl9faGlkZGVuW2lk
XSAmJiB0aGlzLl9faGlkZGVuW2lkXS5uYW1lKSB7CiAgICAgICAgdGhpcy5fX2hpZGRlbltpZF0u
dmFsdWUgPSB2YWx1ZTsKICAgICAgfQogICAgICBlbHNlIHsKICAgICAgICB0aGlzLl9faGlkZGVu
W2lkXSA9IHRoaXMuX2NyZWF0ZUhpZGRlbkZvcm1GaWVsZChpZCwgdmFsdWUpOwogICAgICB9CiAg
ICB9LAoKICAgIC8qKgogICAgICogUmVtb3ZlIGEgcGFyYW1ldGVyIGZyb20gdGhlIHJlcXVlc3Qu
CiAgICAgKiAKICAgICAqIEBwYXJhbSBpZCBTdHJpbmcgaWRlbnRpZmllciBvZiB0aGUgcGFyYW1l
dGVyIHRvIHJlbW92ZS4KICAgICAqIEByZXR1cm4ge3ZvaWR9CiAgICAgKi8KICAgIHJlbW92ZVBh
cmFtZXRlcjogZnVuY3Rpb24oaWQpCiAgICB7CiAgICAgIGRlbGV0ZSB0aGlzLl9fcGFyYW1ldGVy
c1tpZF07CiAgICAgIGlmKHRoaXMuX19oaWRkZW5baWRdICYmIHRoaXMuX19oaWRkZW5baWRdLnBh
cmVudE5vZGUpIHsKICAgICAgICB0aGlzLl9faGlkZGVuW2lkXS5wYXJlbnROb2RlLnJlbW92ZUNo
aWxkKHRoaXMuX19oaWRkZW5baWRdKTsKICAgICAgfQogICAgICBkZWxldGUgdGhpcy5fX2hpZGRl
bltpZF07CiAgICB9LAoKICAgIC8qKgogICAgICogR2V0IGEgcGFyYW1ldGVyIGluIHRoZSByZXF1
ZXN0LgogICAgICogCiAgICAgKiBAcGFyYW0gaWQgU3RyaW5nIGlkZW50aWZpZXIgb2YgdGhlIHBh
cmFtZXRlciB0byBnZXQuCiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9CiAgICAgKi8KICAgIGdldFBh
cmFtZXRlcjogZnVuY3Rpb24oaWQpCiAgICB7CiAgICAgIHJldHVybiB0aGlzLl9fcGFyYW1ldGVy
c1tpZF0gfHwgbnVsbDsKICAgIH0sCiAgICAKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgYXJy
YXkgY29udGFpbmcgYWxsIHBhcmFtZXRlcnMgZm9yIHRoZSByZXF1ZXN0LgogICAgICogCiAgICAg
KiBAcmV0dXJuIHtBcnJheX0KICAgICAqLwogICAgZ2V0UGFyYW1ldGVyczogZnVuY3Rpb24oKQog
ICAgewogICAgICByZXR1cm4gdGhpcy5fX3BhcmFtZXRlcnM7CiAgICB9LAoKICAgIC8vIC0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLQogICAgLy8gW1NlbmRdCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAvKioK
ICAgICAqIFNlbmQgdGhlIGZvcm0gdmlhIHRoZSBzdWJtaXQgbWV0aG9kLiBUYXJnZXQgZGVmYXVs
dHMgdG8gdGhlCiAgICAgKiBzZWxmIGNyZWF0ZWQgaWZyYW1lLgogICAgICogCiAgICAgKiBAcmV0
dXJuIHt2b2lkfQogICAgICovCiAgICBzZW5kOiBmdW5jdGlvbigpCiAgICB7CiAgICAgIHZhciBm
b3JtID0gdGhpcy5nZXRDb250ZW50RWxlbWVudCgpLmdldERvbUVsZW1lbnQoKTsKCiAgICAgIGlm
IChmb3JtKQogICAgICB7CiAgICAgICAgdGhpcy5fYWRkRm9ybVBhcmFtZXRlcnMoKTsKCiAgICAg
ICAgZm9ybS5zdWJtaXQoKTsKCiAgICAgICAgdGhpcy5fX2lzU2VudCA9IHRydWU7CiAgICAgICAg
dGhpcy5maXJlRXZlbnQoInNlbmRpbmciKTsKICAgICAgfQogICAgICBlbHNlCiAgICAgIHsKICAg
ICAgICB0aHJvdyBuZXcgRXJyb3IoIkZvcm0gZWxlbWVudCBub3QgY3JlYXRlZCEgVW5hYmxlIHRv
IGNhbGwgZm9ybSBzdWJtaXQhIik7CiAgICAgIH0KICAgIH0sCgoKICAgIC8qKgogICAgICogY2xl
YXIgdGhlIGZvcm0KICAgICAqIAogICAgICogQHJldHVybiB7dm9pZH0KICAgICAqLwogICAgY2xl
YXI6IGZ1bmN0aW9uKCkKICAgIHsKICAgICAgdmFyIGZvcm0gPSB0aGlzLmdldENvbnRlbnRFbGVt
ZW50KCkuZ2V0RG9tRWxlbWVudCgpOwoKICAgICAgaWYgKGZvcm0pIHsKICAgICAgICBmb3JtLnJl
c2V0KCk7CiAgICAgIH0KICAgICAgZWxzZSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJGb3Jt
IGVsZW1lbnQgbm90IGNyZWF0ZWQhIFVuYWJsZSB0byBjYWxsIGZvcm0gcmVzZXQhIik7CiAgICAg
IH0KICAgIH0sCgoKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gW0lmcmFtZV0KICAgIC8v
IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLQoKICAgIC8qKgogICAgICogR2V0IHRoZSBET00gd2luZG93IG9iamVj
dCBvZiB0aGUgdGFyZ2V0IGlmcmFtZS4KICAgICAqCiAgICAgKiBAdHlwZSBtZW1iZXIKICAgICAq
IEByZXR1cm4ge0RPTVdpbmRvd30gVGhlIERPTSB3aW5kb3cgb2JqZWN0IG9mIHRoZSBpZnJhbWUu
CiAgICAgKi8KICAgIGdldElmcmFtZVdpbmRvdzogZnVuY3Rpb24oKQogICAgewogICAgICByZXR1
cm4gcXguYm9tLklmcmFtZS5nZXRXaW5kb3codGhpcy5fX2lmcmFtZU5vZGUpOwogICAgfSwKICAg
IAogICAgLyoqCiAgICAgKiBHZXQgdGhlIERPTSBkb2N1bWVudCBvYmplY3Qgb2YgdGhlIHRhcmdl
dCBpZnJhbWUuCiAgICAgKgogICAgICogQHR5cGUgbWVtYmVyCiAgICAgKiBAcmV0dXJuIHtET01E
b2N1bWVudH0gVGhlIERPTSBkb2N1bWVudCBvYmplY3Qgb2YgdGhlIGlmcmFtZS4KICAgICAqLwog
ICAgZ2V0SWZyYW1lRG9jdW1lbnQ6IGZ1bmN0aW9uKCkKICAgIHsKICAgICAgcmV0dXJuIHF4LmJv
bS5JZnJhbWUuZ2V0RG9jdW1lbnQodGhpcy5fX2lmcmFtZU5vZGUpOwogICAgfSwKCiAgICAvKioK
ICAgICAqIEdldCB0aGUgSFRNTCBib2R5IGVsZW1lbnQgb2YgdGhlIHRhcmdldCBpZnJhbWUuCiAg
ICAgKgogICAgICogQHR5cGUgbWVtYmVyCiAgICAgKiBAcmV0dXJuIHtFbGVtZW50fSBUaGUgRE9N
IG5vZGUgb2YgdGhlIDxjb2RlPmJvZHk8L2NvZGU+IGVsZW1lbnQgb2YgdGhlIGlmcmFtZS4KICAg
ICAqLwogICAgZ2V0SWZyYW1lQm9keTogZnVuY3Rpb24oKQogICAgewogICAgICByZXR1cm4gcXgu
Ym9tLklmcmFtZS5nZXRCb2R5KHRoaXMuX19pZnJhbWVOb2RlKTsKICAgIH0sCiAgICAKICAgIC8q
KgogICAgICogR2V0IHRoZSB0YXJnZXQgaWZyYW1lIEVsZW1lbnQuCiAgICAgKgogICAgICogQHR5
cGUgbWVtYmVyCiAgICAgKiBAcmV0dXJuIHtFbGVtZW50fSBUaGUgRE9NIGVsZW1lbnQgb2YgdGhl
IGlmcmFtZS4KICAgICAqLwogICAgZ2V0SWZyYW1lTm9kZTogZnVuY3Rpb24oKQogICAgewogICAg
ICByZXR1cm4gdGhpcy5fX2lmcmFtZU5vZGU7CiAgICB9LAoKICAgIC8vIC0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LQogICAgLy8gW1Jlc3BvbnNlIERhdGEgU3VwcG9ydF0KICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQog
ICAgCiAgICAvKioKICAgICAqIEdldCB0aGUgdGV4dCBjb250ZW50IG9mIHRoZSB0YXJnZXQgaWZy
YW1lLiAKICAgICAqCiAgICAgKiBAdHlwZSBtZW1iZXIKICAgICAqIEByZXR1cm4ge1N0cmluZ30g
VGhlIHRleHQgcmVzcG9uc2Ugb2YgdGhlIHN1Ym1pdC4KICAgICAqLwogICAgZ2V0SWZyYW1lVGV4
dENvbnRlbnQ6IGZ1bmN0aW9uKCkKICAgIHsKICAgICAgdmFyIHZCb2R5ID0gdGhpcy5nZXRJZnJh
bWVCb2R5KCk7CiAgICAKICAgICAgaWYgKCF2Qm9keSkgewogICAgICAgIHJldHVybiBudWxsOwog
ICAgICB9CiAgICAKICAgICAgLy8gTXNodG1sIHJldHVybnMgdGhlIGNvbnRlbnQgaW5zaWRlIGEg
UFJFCiAgICAgIC8vIGVsZW1lbnQgaWYgd2UgdXNlIHBsYWluIHRleHQKICAgICAgaWYgKHZCb2R5
LmZpcnN0Q2hpbGQgJiYgKHZCb2R5LmZpcnN0Q2hpbGQudGFnTmFtZSA9PSAiUFJFIiB8fCB2Qm9k
eS5maXJzdENoaWxkLnRhZ05hbWUgPT0gInByZSIpKQogICAgICB7CiAgICAgICAgcmV0dXJuIHZC
b2R5LmZpcnN0Q2hpbGQuaW5uZXJIVE1MOwogICAgICB9CiAgICAgIGVsc2UKICAgICAgewogICAg
ICAgIHJldHVybiB2Qm9keS5pbm5lckhUTUw7CiAgICAgIH0KICAgIH0sCiAgICAKCiAgICAvKioK
ICAgICAqIEdldCB0aGUgSFRNTCBjb250ZW50IG9mIHRoZSB0YXJnZXQgaWZyYW1lLiAKICAgICAq
CiAgICAgKiBAdHlwZSBtZW1iZXIKICAgICAqIEByZXR1cm4ge1N0cmluZ30gVGhlIGh0bWwgcmVz
cG9uc2Ugb2YgdGhlIHN1Ym1pdC4KICAgICAqLwogICAgZ2V0SWZyYW1lSHRtbENvbnRlbnQ6IGZ1
bmN0aW9uKCkKICAgIHsKICAgICAgdmFyIHZCb2R5ID0gdGhpcy5nZXRJZnJhbWVCb2R5KCk7CiAg
ICAgIHJldHVybiB2Qm9keSA/IHZCb2R5LmlubmVySFRNTCA6IG51bGw7CiAgICB9LAogICAgCgog
ICAgLyoqCiAgICAgKiBHZXQgdGhlIFhNTCBjb250ZW50IG9mIHRoZSB0YXJnZXQgaWZyYW1lLiAK
ICAgICAqIAogICAgICogVGhpcyBpcyBhIGhhY2sgZm9yIG5vdyBiZWNhdXNlIEkgZGlkbid0IGZp
bmQgYSB3YXkKICAgICAqIHRvIHNlbmQgWE1MIHZpYSB0aGUgaWZyYW1lIHJlc3BvbnNlLgogICAg
ICogCiAgICAgKiBJbiB0aGUgcmVzdWx0aW5nIHRleHQgYWxsIG9jY3VyZW5jZXMgb2YgdGhlICZs
dDsKICAgICAqIGFuZCAmZ3Q7IGVudGl0aWVzIGFyZSByZXBsYWNlcyBieSA8IGFuZCA+IGFuZAog
ICAgICogdGhlIFRleHQgaXMgdGhlbiBwYXJzZWQgaW50byBhIFhNTC1Eb2N1bWVudCBpbnN0YW5j
ZS4KICAgICAqCiAgICAgKiBAdHlwZSBtZW1iZXIKICAgICAqIEByZXR1cm4ge0RvY3VtZW50fSBU
aGUgWE1MIHJlc3BvbnNlIG9mIHRoZSBzdWJtaXQuCiAgICAgKi8KICAgIGdldElmcmFtZVhtbENv
bnRlbnQ6IGZ1bmN0aW9uKCkKICAgIHsKICAgICAgdmFyIHJlc3BvbnNldGV4dCA9IHRoaXMuZ2V0
SWZyYW1lVGV4dENvbnRlbnQoKTsKICAgIAogICAgICBpZighcmVzcG9uc2V0ZXh0IHx8IHJlc3Bv
bnNldGV4dC5sZW5ndGggPT0gMCkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAK
ICAgICAgdmFyIHhtbENvbnRlbnQgPSBudWxsOwogICAgICB2YXIgbmV3VGV4dCA9IHJlc3BvbnNl
dGV4dC5yZXBsYWNlKC8mbHQ7L2csIjwiKTsKICAgICAgbmV3VGV4dCA9IG5ld1RleHQucmVwbGFj
ZSgvJmd0Oy9nLCAiPiIpOwogICAgCiAgICAgIHRyeSB7CiAgICAgICAgeG1sQ29udGVudCA9IHF4
LnhtbC5Eb2N1bWVudC5mcm9tU3RyaW5nKG5ld1RleHQpOwogICAgICB9CiAgICAgIGNhdGNoKGV4
KSB7fTsKICAgIAogICAgICByZXR1cm4geG1sQ29udGVudDsKICAgIH0sCgogICAgLy8gLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tCiAgICAvLyBbRXZlbnQgSGFuZGxlcnNdCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0K
ICAgIAogICAgLyoqCiAgICAgKiBDYXRjaCB0aGUgb25yZWFkeXN0YXRlY2hhbmdlIGV2ZW50IG9m
IHRoZSB0YXJnZXQgaWZyYW1lLgogICAgICoKICAgICAqIEB0eXBlIG1lbWJlcgogICAgICogQHBh
cmFtIGUge0V2ZW50fQogICAgICogQHJldHVybiB7dm9pZH0KICAgICAqLwogICAgX29uUmVhZHlT
dGF0ZUNoYW5nZSA6IGZ1bmN0aW9uKGUpCiAgICB7CiAgICAgIGlmICh0aGlzLmdldElmcmFtZU5v
ZGUoKS5yZWFkeVN0YXRlID09ICJjb21wbGV0ZSIgJiYgdGhpcy5fX2lzU2VudCkKICAgICAgewog
ICAgICAgIHRoaXMuZmlyZUV2ZW50KCJjb21wbGV0ZWQiKTsKICAgICAgICBkZWxldGUgdGhpcy5f
X2lzU2VudDsKICAgICAgfQogICAgfSwKCiAgICAKICAgIC8qKgogICAgICogQ2F0Y2ggdGhlIG9u
bG9hZCBldmVudCBvZiB0aGUgdGFyZ2V0IGlmcmFtZQogICAgICoKICAgICAqIEB0eXBlIG1lbWJl
cgogICAgICogQHBhcmFtIGUge0V2ZW50fQogICAgICogQHJldHVybiB7dm9pZH0KICAgICAqLwog
ICAgX29uTG9hZCA6IGZ1bmN0aW9uKGUpCiAgICB7CiAgICAgIGlmKHRoaXMuX19pc1NlbnQpCiAg
ICAgIHsKICAgICAgICB0aGlzLmZpcmVFdmVudCgiY29tcGxldGVkIik7CiAgICAgICAgZGVsZXRl
IHRoaXMuX19pc1NlbnQ7CiAgICAgIH0KICAgIH0KICB9Cn0pOwo=
</data>

          </attachment>
      

    </bug>