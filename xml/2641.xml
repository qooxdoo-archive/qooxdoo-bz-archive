<bug>
          <bug_id>2641</bug_id>
          
          <creation_ts>2009-08-01 05:08:00 +0200</creation_ts>
          <short_desc>qx.io.remote.request setting data parameters bug</short_desc>
          <delta_ts>2009-09-15 10:14:10 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>framework</product>
          <component>core.io</component>
          <version>0.8.2</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          
          
          
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>unspecified</target_milestone>
          
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Guoshun Zhang">gaussz</reporter>
          <assigned_to name="Unassigned">none</assigned_to>
          <cc>derrell.lipman</cc>
          <qa_contact name="qooxdoo bugs mailing list">qooxdoo-bugs</qa_contact>
          <cf_browser>---</cf_browser>
          

      

      

      

          <long_desc isprivate="0">
            <commentid>11168</commentid>
            <who name="Guoshun Zhang">gaussz</who>
            <bug_when>2009-08-01 05:08:57 +0200</bug_when>
            <thetext>Before I sent a &quot;POST&quot; request(qx.io.remote.request) ,I called setParameters(XXX) to set a parameters to the request, but the request sent both url parameters and data parameters. I wish it will be send with data parameters only,so I&#39;ve tried to call setParameters(XXX,true) to set  data parameters but the result is that the post call did not have any data parameters.
      I&#39;ve checked the source of qx.io.remote,I found problems of qx.io.remote.transport.XmlHttp.js and qx.io.remote.Exchange.js. the Request class have two private variable: the url parameters and the data parameters, but Exchanges.js only passed the url parameters when the “_applyImplementation” method called to set transport implemention property.
      And in XmlHttp.js at “send” method, when &quot;this.getData === null&quot; it will to get a data parameters by “vParameters = this.getParameters(true);” but “this.getParameters(boolean)” is not a defined method.</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>11175</commentid>
            <who name="Andreas Ecker">qooxdoo</who>
            <bug_when>2009-08-03 10:18:23 +0200</bug_when>
            <thetext>Hi Guoshun, would setData() instead of setParameters() be the right API for your use case (i.e. sending parameters in the body only)?</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>11180</commentid>
            <who name="Derrell Lipman">derrell.lipman</who>
            <bug_when>2009-08-03 17:43:13 +0200</bug_when>
            <thetext>You&#39;re right that the getParameters() method, which is auto-generated by virtue of the property &quot;parameters&quot;, takes no parameters. Those parameters are there, I think, for historical reasons.

The definition of &quot;parameters&quot; in this code is URL parameters. That is true whether the parameters are applied to a GET request or a POST request. If you want to add data to a POST request, you should either use setData() directly, or use request.setFormFields(). The latter is an easier interface, but will force use of the Iframe transport, which is the only transport that supports form fields. The backend then needs to handle the specifics of the Iframe transport protocol.

Derrell
</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>11181</commentid>
            <who name="Derrell Lipman">derrell.lipman</who>
            <bug_when>2009-08-03 17:47:49 +0200</bug_when>
            <thetext>Uggh. This code really could use a rewrite. Although &quot;parameters&quot; are by definition (for the past few years) URL parameters, the block of code you mention inside if (this.getData() === null) looks to be obsolete code. This requires more investigation before making any changes to this code, but in any case my previous comment still applies. Use setData() directly, or setFormFields().

This bug will likely remain open until one of us gets around to rewriting qx.io.remote.* or has ample time to review this old code. :-(

Derrell
</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>12285</commentid>
            <who name="Andreas Ecker">qooxdoo</who>
            <bug_when>2009-09-15 10:14:10 +0200</bug_when>
            <thetext>Derrell, since the original bug report could be resolved by pointing to the appropriate API, I suggest to close this bug as invalid. Of course, I second rewriting (and particularly API consolidating) the existing transport layer in a future release, but that is a larger issue already being addressed elsewhere.</thetext>
          </long_desc>
      
      

    </bug>