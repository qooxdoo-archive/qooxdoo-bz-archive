<bug>
          <bug_id>5862</bug_id>
          
          <creation_ts>2011-12-02 09:23:00 +0100</creation_ts>
          <short_desc>Reminder: Update iScroll to the newest version</short_desc>
          <delta_ts>2014-08-20 18:46:55 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>framework</product>
          <component>mobile.core</component>
          <version>master</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          
          
          
          
          
          <keywords>Reminder</keywords>
          <priority>P5</priority>
          <bug_severity>enhancement</bug_severity>
          <target_milestone>unspecified</target_milestone>
          <dependson>5313</dependson>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Tino Butz">tinobutz</reporter>
          <assigned_to name="Unassigned">none</assigned_to>
          
          <qa_contact name="Christopher Zuendorf">christopher.zuendorf</qa_contact>
          <cf_browser>---</cf_browser>
          

      

      

      

          <long_desc isprivate="0">
            <commentid>27772</commentid>
            <who name="Tino Butz">tinobutz</who>
            <bug_when>2011-12-02 09:23:38 +0100</bug_when>
            <thetext>For the next release please update iScroll.</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>29666</commentid>
            <who name="Christopher Zuendorf">christopher.zuendorf</who>
            <bug_when>2012-06-05 10:34:46 +0200</bug_when>
            <thetext>Current iScroll version is up to date: iScroll v4.1.9 - 2011-09-22
Push to 2.1</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>31204</commentid>
            <who name="Christopher Zuendorf">christopher.zuendorf</who>
            <bug_when>2012-11-05 17:43:09 +0100</bug_when>
            <thetext>Won&#39;t update to 4.2 because it causes some bugs in combination with new Scrollable Textarea.

iScroll will be updated, when IE10 optimization is container in the next stable iScroll Release.
iScroll5?</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>32919</commentid>
            <who name="Martin Wittemann">martin.wittemann</who>
            <bug_when>2013-06-12 10:44:15 +0200</bug_when>
            <thetext>Maybe that not necessary if we switch to native scrolling. (See bug #5313)</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>40608</commentid>
            <who name="Martin Wittemann">martin.wittemann</who>
            <bug_when>2014-07-01 14:55:48 +0200</bug_when>
            <thetext>Still valid.</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>41015</commentid>
            <who name="Christopher Zuendorf">christopher.zuendorf</who>
            <bug_when>2014-08-20 15:00:43 +0200</bug_when>
            <thetext>I tried to update to iScroll 5. On first look the migration was easy and it worked quite fast.

Later i discovered some severe bugs when using the snapping feature of iScroll5.

Some bugs:

- The first picker slot did not call the &quot;scrollEnd&quot; method of iScroll.
- When using scrollTo(x,y) method of iScroll, and then calling refresh(), iScroll scrolls to position y:0, because it tries to scroll to the previously snapped page. scrollTo() does not snap to any page, or update the internal currentPage map.

I did not manage to find good workarounds for those bugs.

I would propose to stay on iScroll4, and wait till marketshare of Android devices allows to remove iScroll usage completely:
* The performance of iScroll5 in comparison to iScroll4 was not notably better on Android devices. 
* iScroll5 has no important features which iScroll4 did not have.

By now... iScroll is only used for:

Android 2.3 - 4.2


Android 4.3+ allows to use &quot;webkit-overflow-scrolling:touch&quot;

iOS6+ supports native scroll.
iOS8 has a very good support of native scroll, including a fix of the bug that no scroll events were fired on momentum. As usual the adoption of newer iOS version happen quite fast. One year after its release, the newest version has usually 80% of marketshare (iOS wide).

Windows Phone 8 supports native scrolling which is much faster than iScroll.</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>41016</commentid>
              <attachid>1342</attachid>
            <who name="Christopher Zuendorf">christopher.zuendorf</who>
            <bug_when>2014-08-20 15:12:24 +0200</bug_when>
            <thetext>Created attachment 1342
Github Stash iScroll5 patch

My work for implementing iScroll5</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>41024</commentid>
            <who name="Christopher Zuendorf">christopher.zuendorf</who>
            <bug_when>2014-08-20 18:46:55 +0200</bug_when>
            <thetext>Updated iScroll to version 4.2.5

3f155b6e004acb1c1e26e76dd266cc9ad2f6f152</thetext>
          </long_desc>
      
          <attachment isobsolete="0" ispatch="0" isprivate="0" isurl="0">
            <attachid>1342</attachid>
            <date>2014-08-20 15:12:00 +0200</date>
            <delta_ts>2014-08-20 15:12:24 +0200</delta_ts>
            <desc>Github Stash iScroll5 patch</desc>
            <filename>iscroll5-patch.diff</filename>
            <type>application/octet-stream</type>
            <size>178134</size>
            <attacher>christopher.zuendorf</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL2FwcGxpY2F0aW9uL21vYmlsZXNob3djYXNlL3NvdXJjZS9jbGFzcy9tb2Jp
bGVzaG93Y2FzZS9wYWdlL0RpYWxvZy5qcyBiL2FwcGxpY2F0aW9uL21vYmlsZXNob3djYXNlL3Nv
dXJjZS9jbGFzcy9tb2JpbGVzaG93Y2FzZS9wYWdlL0RpYWxvZy5qcwppbmRleCAzMDlmMjgyLi4z
MmNkMzA0IDEwMDY0NAotLS0gYS9hcHBsaWNhdGlvbi9tb2JpbGVzaG93Y2FzZS9zb3VyY2UvY2xh
c3MvbW9iaWxlc2hvd2Nhc2UvcGFnZS9EaWFsb2cuanMKKysrIGIvYXBwbGljYXRpb24vbW9iaWxl
c2hvd2Nhc2Uvc291cmNlL2NsYXNzL21vYmlsZXNob3djYXNlL3BhZ2UvRGlhbG9nLmpzCkBAIC0y
NjUsNiArMjY1LDggQEAgcXguQ2xhc3MuZGVmaW5lKCJtb2JpbGVzaG93Y2FzZS5wYWdlLkRpYWxv
ZyIsCiAgICAgICogUmVhY3RzIG9uICJjaGFuZ2VTZWxlY3Rpb24iIGV2ZW50IG9uIHBpY2tlciwg
YW5kIGRpc3BsYXlzIHRoZSB2YWx1ZXMgb24gcmVzdWx0c0xhYmVsLgogICAgICAqLwogICAgIF9f
b25QaWNrZXJDaGFuZ2VTZWxlY3Rpb24gOiBmdW5jdGlvbihlKSB7CisgICAgICB0aGlzLl9fcmVz
dWx0c0xhYmVsLnNldFZhbHVlKCJSZWNlaXZlZCA8Yj5jaGFuZ2VTZWxlY3Rpb248L2I+IGZyb20g
UGlja2VyIERpYWxvZy4gW3Nsb3Q6ICIrIGUuZ2V0RGF0YSgpLnNsb3QrICJdIFtpdGVtOiAiKyBl
LmdldERhdGEoKS5pdGVtLnRpdGxlKyJdIik7CisgICAgICBjb25zb2xlLmxvZygicGlja2VyQ2hh
bmdlIik7CiAgICAgICBpZiAoZS5nZXREYXRhKCkuc2xvdCA+IDApIHsKICAgICAgICAgaWYodGhp
cy5fdXBkYXRlUGlja2VyVGltZXIpIHsKICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fdXBk
YXRlUGlja2VyVGltZXIpOwpAQCAtMjczLDkgKzI3NSw4IEBAIHF4LkNsYXNzLmRlZmluZSgibW9i
aWxlc2hvd2Nhc2UucGFnZS5EaWFsb2ciLAogCiAgICAgICAgIHRoaXMuX3VwZGF0ZVBpY2tlclRp
bWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICB0aGlzLl91cGRhdGVQaWNr
ZXJEYXlTbG90KCk7Ci0gICAgICAgIH0uYmluZCh0aGlzKSwgMjUwKTsKKyAgICAgICAgfS5iaW5k
KHRoaXMpLCAyMDApOwogICAgICAgfQotICAgICAgdGhpcy5fX3Jlc3VsdHNMYWJlbC5zZXRWYWx1
ZSgiUmVjZWl2ZWQgPGI+Y2hhbmdlU2VsZWN0aW9uPC9iPiBmcm9tIFBpY2tlciBEaWFsb2cuIFtz
bG90OiAiKyBlLmdldERhdGEoKS5zbG90KyAiXSBbaXRlbTogIisgZS5nZXREYXRhKCkuaXRlbS50
aXRsZSsiXSIpOwogICAgIH0sCiAKIApAQCAtMjg3LDYgKzI4OCw5IEBAIHF4LkNsYXNzLmRlZmlu
ZSgibW9iaWxlc2hvd2Nhc2UucGFnZS5EaWFsb2ciLAogICAgICAgdmFyIG1vbnRoSW5kZXggPSB0
aGlzLl9fcGlja2VyLmdldFNlbGVjdGVkSW5kZXgoMSk7CiAgICAgICB2YXIgeWVhckluZGV4ID0g
dGhpcy5fX3BpY2tlci5nZXRTZWxlY3RlZEluZGV4KDIpOwogCisgICAgICBjb25zb2xlLmxvZyhk
YXlJbmRleCxtb250aEluZGV4LHllYXJJbmRleCk7CisgICAgICByZXR1cm47CisKICAgICAgIHZh
ciBzbG90RGF0YSA9IHRoaXMuX2NyZWF0ZURheVBpY2tlclNsb3QobW9udGhJbmRleCwgbmV3IERh
dGUoKS5nZXRGdWxsWWVhcigpIC0geWVhckluZGV4KTsKIAogICAgICAgdmFyIG9sZERheURhdGEg
PSB0aGlzLl9fcGlja2VyLmdldE1vZGVsKCkuZ2V0SXRlbSgwKTsKZGlmZiAtLWdpdCBhL2ZyYW1l
d29yay9zb3VyY2UvY2xhc3MvcXgvdWkvbW9iaWxlL2NvbnRhaW5lci9NSVNjcm9sbC5qcyBiL2Zy
YW1ld29yay9zb3VyY2UvY2xhc3MvcXgvdWkvbW9iaWxlL2NvbnRhaW5lci9NSVNjcm9sbC5qcwpp
bmRleCAxNTE1YmVkLi5iN2ExOGE0IDEwMDY0NAotLS0gYS9mcmFtZXdvcmsvc291cmNlL2NsYXNz
L3F4L3VpL21vYmlsZS9jb250YWluZXIvTUlTY3JvbGwuanMKKysrIGIvZnJhbWV3b3JrL3NvdXJj
ZS9jbGFzcy9xeC91aS9tb2JpbGUvY29udGFpbmVyL01JU2Nyb2xsLmpzCkBAIC0yOSw3ICsyOSw3
IEBACiAgKiB0aGUgQ1NTIHBvc2l0aW9uOmZpeGVkIHN0eWxlLiBQb3NpdGlvbiBmaXhlZCBpcyBu
b3QgYXZhaWxhYmxlIGluIGlPUyBhbmQKICAqIEFuZHJvaWQgPCAyLjIuCiAgKgotICogQGlnbm9y
ZShpU2Nyb2xsKQorICogQGlnbm9yZShJU2Nyb2xsKQogICogQGFzc2V0KHF4L21vYmlsZS9qcy9p
c2Nyb2xsKi5qcykKICAqLwogcXguTWl4aW4uZGVmaW5lKCJxeC51aS5tb2JpbGUuY29udGFpbmVy
Lk1JU2Nyb2xsIiwKQEAgLTgyLDcgKzgyLDYgQEAgcXguTWl4aW4uZGVmaW5lKCJxeC51aS5tb2Jp
bGUuY29udGFpbmVyLk1JU2Nyb2xsIiwKICAgICB9LAogCiAKLQogICAgIC8qKgogICAgICogUmV0
dXJucyB0aGUgY3VycmVudCBzY3JvbGwgcG9zaXRpb24KICAgICAqIEByZXR1cm4ge0FycmF5fSBh
biBhcnJheSB3aXRoIHRoZSA8Y29kZT5bc2Nyb2xsTGVmdCxzY3JvbGxUb3BdPC9jb2RlPi4KQEAg
LTE1MywxMSArMTUyLDExIEBAIHF4Lk1peGluLmRlZmluZSgicXgudWkubW9iaWxlLmNvbnRhaW5l
ci5NSVNjcm9sbCIsCiAgICAgLyoqCiAgICAgICogTG9hZHMgYW5kIGluaXRzIHRoZSBpU2Nyb2xs
IGluc3RhbmNlLgogICAgICAqCi0gICAgICogQGlnbm9yZShpU2Nyb2xsKQorICAgICAqIEBpZ25v
cmUoSVNjcm9sbCkKICAgICAgKi8KICAgICBfX2luaXRTY3JvbGwgOiBmdW5jdGlvbigpCiAgICAg
ewotICAgICAgaWYgKCF3aW5kb3cuaVNjcm9sbCkKKyAgICAgIGlmICghd2luZG93LklTY3JvbGwp
CiAgICAgICB7CiAgICAgICAgIGlmIChxeC5jb3JlLkVudmlyb25tZW50LmdldCgicXguZGVidWci
KSkKICAgICAgICAgewpAQCAtMTk5LDcgKzE5OCw3IEBAIHF4Lk1peGluLmRlZmluZSgicXgudWku
bW9iaWxlLmNvbnRhaW5lci5NSVNjcm9sbCIsCiAKICAgICAgIHZhciBpU2Nyb2xsUHJvcGVydGll
cyA9IHF4LmxhbmcuT2JqZWN0Lm1lcmdlV2l0aChkZWZhdWx0U2Nyb2xsUHJvcGVydGllcywgY3Vz
dG9tU2Nyb2xsUHJvcGVydGllcywgdHJ1ZSk7CiAKLSAgICAgIHJldHVybiBuZXcgaVNjcm9sbCh0
aGlzLmdldENvbnRhaW5lckVsZW1lbnQoKSwgaVNjcm9sbFByb3BlcnRpZXMpOworICAgICAgcmV0
dXJuIG5ldyBJU2Nyb2xsKHRoaXMuZ2V0Q29udGFpbmVyRWxlbWVudCgpLCBpU2Nyb2xsUHJvcGVy
dGllcyk7CiAgICAgfSwKIAogCkBAIC0yMDgsNjIgKzIwNywxMSBAQCBxeC5NaXhpbi5kZWZpbmUo
InF4LnVpLm1vYmlsZS5jb250YWluZXIuTUlTY3JvbGwiLAogICAgICAqIEByZXR1cm4ge09iamVj
dH0gTWFwIHdpdGggZGVmYXVsdCBpU2Nyb2xsIHByb3BlcnRpZXMKICAgICAgKi8KICAgICBfZ2V0
RGVmYXVsdFNjcm9sbFByb3BlcnRpZXMgOiBmdW5jdGlvbigpIHsKLSAgICAgIHZhciBjb250YWlu
ZXIgPSB0aGlzOwotCiAgICAgICByZXR1cm4gewotICAgICAgICBoaWRlU2Nyb2xsYmFyOiB0cnVl
LAotICAgICAgICBmYWRlU2Nyb2xsYmFyOiB0cnVlLAotICAgICAgICBoU2Nyb2xsYmFyIDogZmFs
c2UsCisgICAgICAgIHNjcm9sbGJhcnM6IHRydWUsCisgICAgICAgIGZhZGVTY3JvbGxiYXJzOiB0
cnVlLAogICAgICAgICBzY3JvbGxiYXJDbGFzczogInNjcm9sbGJhciIsCi0gICAgICAgIHVzZVRy
YW5zZm9ybTogdHJ1ZSwKLSAgICAgICAgb25TY3JvbGxFbmQgOiBmdW5jdGlvbigpIHsKLSAgICAg
ICAgICAvLyBBbGVydCBpbnRlcmVzdGVkIHBhcnRpZXMgdGhhdCB3ZSBzY3JvbGxlZCB0byBlbmQg
b2YgcGFnZS4KLSAgICAgICAgICBpZiAocXguY29yZS5FbnZpcm9ubWVudC5nZXQoInF4Lm1vYmls
ZS5uYXRpdmVzY3JvbGwiKSA9PSBmYWxzZSkKLSAgICAgICAgICB7Ci0gICAgICAgICAgICBjb250
YWluZXIuX3NldEN1cnJlbnRYKC10aGlzLngpOwotICAgICAgICAgICAgY29udGFpbmVyLl9zZXRD
dXJyZW50WSgtdGhpcy55KTsKLSAgICAgICAgICAgIGNvbnRhaW5lci5maXJlRXZlbnQoInNjcm9s
bEVuZCIpOwotICAgICAgICAgICAgaWYodGhpcy55ID09IHRoaXMubWF4U2Nyb2xsWSkgewotICAg
ICAgICAgICAgICBjb250YWluZXIuZmlyZUV2ZW50KCJwYWdlRW5kIik7Ci0gICAgICAgICAgICB9
Ci0gICAgICAgICAgfQotICAgICAgICB9LAotICAgICAgICBvblNjcm9sbE1vdmUgOiBmdW5jdGlv
bigpIHsKLSAgICAgICAgICAvLyBBbGVydCBpbnRlcmVzdGVkIHBhcnRpZXMgdGhhdCB3ZSBzY3Jv
bGxlZCB0byBlbmQgb2YgcGFnZS4KLSAgICAgICAgICBpZiAocXguY29yZS5FbnZpcm9ubWVudC5n
ZXQoInF4Lm1vYmlsZS5uYXRpdmVzY3JvbGwiKSA9PSBmYWxzZSkKLSAgICAgICAgICB7Ci0gICAg
ICAgICAgICBjb250YWluZXIuX3NldEN1cnJlbnRYKC10aGlzLngpOwotICAgICAgICAgICAgY29u
dGFpbmVyLl9zZXRDdXJyZW50WSgtdGhpcy55KTsKLSAgICAgICAgICAgIGlmKHRoaXMueSA9PSB0
aGlzLm1heFNjcm9sbFkpIHsKLSAgICAgICAgICAgICAgY29udGFpbmVyLmZpcmVFdmVudCgicGFn
ZUVuZCIpOwotICAgICAgICAgICAgfQotICAgICAgICAgIH0KLSAgICAgICAgfSwKLSAgICAgICAg
b25CZWZvcmVTY3JvbGxTdGFydCA6IGZ1bmN0aW9uKGUpIHsKLSAgICAgICAgICAvLyBRT09YRE9P
IEVOSEFOQ0VNRU5UOiBEbyBub3QgcHJldmVudCBkZWZhdWx0IGZvciBmb3JtIGVsZW1lbnRzCi0g
ICAgICAgICAgLyogV2hlbiB1cGRhdGluZyBpU2Nyb2xsLCBwbGVhc2UgY2hlY2sgb3V0IHRoYXQg
ZG91YmxlVGFwVGltZXIgaXMgbm90IGFjdGl2ZSAoY29tbWVudGVkIG91dCkKLSAgICAgICAgICAg
KiBpbiBjb2RlLiBEb3VibGVUYXBUaW1lciBjcmVhdGVzIGEgZmFrZSBjbGljayBldmVudC4gQW5k
cm9pZCA0LjEuIGFuZCBuZXdlcgotICAgICAgICAgICAqIGlzIGFibGUgdG8gZmlyZSBuYXRpdmUg
ZXZlbnRzLCB3aGljaCAgY3JlYXRlIHNpZGUgZWZmZWN0IHdpdGggdGhlIGZha2UgZXZlbnQgb2Yg
aVNjcm9sbC4gKi8KLSAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7Ci0gICAgICAgICAg
d2hpbGUgKHRhcmdldC5ub2RlVHlwZSAhPSAxKSB7Ci0gICAgICAgICAgICB0YXJnZXQgPSB0YXJn
ZXQucGFyZW50Tm9kZTsKLSAgICAgICAgICB9Ci0KLSAgICAgICAgICBpZiAodGFyZ2V0LnRhZ05h
bWUgIT0gJ1NFTEVDVCcgJiYgdGFyZ2V0LnRhZ05hbWUgIT0gJ0lOUFVUJyAmJiB0YXJnZXQudGFn
TmFtZSAhPSAnVEVYVEFSRUEnICYmIHRhcmdldC50YWdOYW1lICE9ICdMQUJFTCcpIHsKLSAgICAg
ICAgICAgIC8vIFJlbW92ZSBmb2N1cyBmcm9tIGlucHV0IGVsZW1lbnRzLCBzbyB0aGF0IHRoZSBr
ZXlib2FyZCBhbmQgdGhlIG1vdXNlIGN1cnNvciBpcyBoaWRkZW4KLSAgICAgICAgICAgIHZhciBl
bGVtZW50cyA9IFtdOwotICAgICAgICAgICAgdmFyIGlucHV0RWxlbWVudHMgPSBxeC5sYW5nLkFy
cmF5LmNhc3QoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImlucHV0IiksIEFycmF5KTsK
LSAgICAgICAgICAgIHZhciB0ZXh0QXJlYUVsZW1lbnRzID0gcXgubGFuZy5BcnJheS5jYXN0KGRv
Y3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0ZXh0YXJlYSIpLCBBcnJheSk7Ci0gICAgICAg
ICAgICBlbGVtZW50cyA9IGVsZW1lbnRzLmNvbmNhdChpbnB1dEVsZW1lbnRzKTsKLSAgICAgICAg
ICAgIGVsZW1lbnRzID0gZWxlbWVudHMuY29uY2F0KHRleHRBcmVhRWxlbWVudHMpOwotCi0gICAg
ICAgICAgICBmb3IgKHZhciBpPTAsIGxlbmd0aCA9IGVsZW1lbnRzLmxlbmd0aDsgaSA8IGxlbmd0
aDsgaSsrKSB7Ci0gICAgICAgICAgICAgIGVsZW1lbnRzW2ldLmJsdXIoKTsKLSAgICAgICAgICAg
IH0KLQotICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwotICAgICAgICAgIH0KLSAgICAg
ICAgfQorICAgICAgICB1c2VUcmFuc2Zvcm06IHRydWUKICAgICAgIH07CiAgICAgfSwKIApAQCAt
MzE1LDEzICsyNjMsNDMgQEAgcXguTWl4aW4uZGVmaW5lKCJxeC51aS5tb2JpbGUuY29udGFpbmVy
Lk1JU2Nyb2xsIiwKIAogCiAgICAgLyoqCisgICAgKiBDYWxsZWQgd2hlbiA8Y29kZT5zY3JvbGxF
bmQ8L2NvZGU+IGV2ZW50IG9jY3VycyBvbiBpU2Nyb2xsLgorICAgICogQHBhcmFtIHNjcm9sbENv
bnRhaW5lciB7cXgudWkubW9iaWxlLmNvbnRhaW5lci5TY3JvbGx9IHRoZSBzY3JvbGwgY29udGFp
bmVyLiAKKyAgICAqLworICAgIF9vblNjcm9sbEVuZDogZnVuY3Rpb24oc2Nyb2xsQ29udGFpbmVy
KSB7CisgICAgICBjb25zb2xlLmxvZygiX29uU2Nyb2xsRW5kIik7CisgICAgICAvLyBBbGVydCBp
bnRlcmVzdGVkIHBhcnRpZXMgdGhhdCB3ZSBzY3JvbGxlZCB0byBlbmQgb2YgcGFnZS4KKyAgICAg
IGlmIChxeC5jb3JlLkVudmlyb25tZW50LmdldCgicXgubW9iaWxlLm5hdGl2ZXNjcm9sbCIpID09
IGZhbHNlKSB7CisgICAgICAgIHNjcm9sbENvbnRhaW5lci5fc2V0Q3VycmVudFgoLXRoaXMueCk7
CisgICAgICAgIHNjcm9sbENvbnRhaW5lci5fc2V0Q3VycmVudFkoLXRoaXMueSk7CisgICAgICAg
IHNjcm9sbENvbnRhaW5lci5maXJlRXZlbnQoInNjcm9sbEVuZCIpOworCisgICAgICAgIGlmICgg
dGhpcy5vcHRpb25zLnNuYXAgJiYgIXRoaXMubW92ZWQpIHsKKyAgICAgICAgICB2YXIgc25hcCA9
IHRoaXMuX25lYXJlc3RTbmFwKHRoaXMueCwgdGhpcy55KTsKKyAgICAgICAgICBjb25zb2xlLmxv
Zygic25hcCIsc25hcC5wYWdlWSk7CisgICAgICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IHNuYXA7
CisgICAgICAgIH0KKworICAgICAgICAvLyBEZXByZWNhdGVkIHNpbmNlIDQuMQorICAgICAgICAv
KmlmICh0aGlzLnkgPT0gdGhpcy5tYXhTY3JvbGxZKSB7CisgICAgICAgICAgc2Nyb2xsQ29udGFp
bmVyLmZpcmVFdmVudCgicGFnZUVuZCIpOworICAgICAgICB9Ki8KKyAgICAgIH0KKyAgICB9LAor
CisKKyAgICAvKioKICAgICAgKiBTZXR0ZXIgZm9yIHRoZSBzY3JvbGwgaW5zdGFuY2UuCiAgICAg
ICoKICAgICAgKiBAcGFyYW0gc2Nyb2xsIHtPYmplY3R9IGlTY3JvbGwgaW5zdGFuY2UuCiAgICAg
ICovCiAgICAgX3NldFNjcm9sbCA6IGZ1bmN0aW9uKHNjcm9sbCkKICAgICB7CisgICAgICBpZih0
aGlzLl9fc2Nyb2xsKSB7CisgICAgICAgIHRoaXMuX19zY3JvbGwuZGVzdHJveSgpOworICAgICAg
fQogICAgICAgdGhpcy5fX3Njcm9sbCA9IHNjcm9sbDsKKyAgICAgIHNjcm9sbC5vbigic2Nyb2xs
RW5kIiwgdGhpcy5fb25TY3JvbGxFbmQuYmluZChzY3JvbGwsdGhpcykpOwogICAgIH0sCiAKIApk
aWZmIC0tZ2l0IGEvZnJhbWV3b3JrL3NvdXJjZS9jbGFzcy9xeC91aS9tb2JpbGUvY29udHJvbC9Q
aWNrZXIuanMgYi9mcmFtZXdvcmsvc291cmNlL2NsYXNzL3F4L3VpL21vYmlsZS9jb250cm9sL1Bp
Y2tlci5qcwppbmRleCAwYjYwODU3Li43YmRlZTgyIDEwMDY0NAotLS0gYS9mcmFtZXdvcmsvc291
cmNlL2NsYXNzL3F4L3VpL21vYmlsZS9jb250cm9sL1BpY2tlci5qcworKysgYi9mcmFtZXdvcmsv
c291cmNlL2NsYXNzL3F4L3VpL21vYmlsZS9jb250cm9sL1BpY2tlci5qcwpAQCAtMTQ1LDcgKzE0
NSw4IEBAIHF4LkNsYXNzLmRlZmluZSgicXgudWkubW9iaWxlLmNvbnRyb2wuUGlja2VyIiwKICAg
ICAgKi8KICAgICBfY3JlYXRlUGlja2VyU2xvdCA6IGZ1bmN0aW9uKHNsb3RNb2RlbCwgc2xvdElu
ZGV4LCBkZWxlZ2F0ZSkgewogICAgICAgdmFyIHNjcm9sbENvbnRhaW5lciA9IG5ldyBxeC51aS5t
b2JpbGUuY29udGFpbmVyLlNjcm9sbCh7Ci0gICAgICAgICJzbmFwIjogIi5saXN0LWl0ZW0iCisg
ICAgICAgICJzbmFwIjogIi5saXN0LWl0ZW0iLAorICAgICAgICAic2Nyb2xsYmFycyIgOiBmYWxz
ZQogICAgICAgfSk7CiAgICAgICBzY3JvbGxDb250YWluZXIuc2V0V2F5cG9pbnRzWShbIi5saXN0
LWl0ZW0iXSk7CiAKQEAgLTI1OCw2ICsyNTksNyBAQCBxeC5DbGFzcy5kZWZpbmUoInF4LnVpLm1v
YmlsZS5jb250cm9sLlBpY2tlciIsCiAgICAgICogQHBhcmFtIHNlbGVjdGVkSW5kZXgge0ludGVn
ZXJ9IHRoZSBzZWxlY3RlZEluZGV4IG9mIHRoZSBzbG90LgogICAgICAqLwogICAgIHNldFNlbGVj
dGVkSW5kZXg6IGZ1bmN0aW9uKHNsb3RJbmRleCwgc2VsZWN0ZWRJbmRleCkgeworICAgICAgZGVi
dWdnZXIKICAgICAgIHZhciBzbG90ID0gdGhpcy5fc2xvdHMuZ2V0SXRlbShzbG90SW5kZXgpOwog
ICAgICAgc2xvdC5zZWxlY3RlZEluZGV4ID0gc2VsZWN0ZWRJbmRleDsKICAgICAgIGlmICh0aGlz
LmlzVmlzaWJsZSgpKSB7CmRpZmYgLS1naXQgYS9mcmFtZXdvcmsvc291cmNlL3Jlc291cmNlL3F4
L21vYmlsZS9qcy9pc2Nyb2xsLmpzIGIvZnJhbWV3b3JrL3NvdXJjZS9yZXNvdXJjZS9xeC9tb2Jp
bGUvanMvaXNjcm9sbC5qcwppbmRleCA5MGNlNjFjLi5mYjNiN2IwIDEwMDY0NAotLS0gYS9mcmFt
ZXdvcmsvc291cmNlL3Jlc291cmNlL3F4L21vYmlsZS9qcy9pc2Nyb2xsLmpzCisrKyBiL2ZyYW1l
d29yay9zb3VyY2UvcmVzb3VyY2UvcXgvbW9iaWxlL2pzL2lzY3JvbGwuanMKQEAgLTEsMTA4NiAr
MSwyMDA2IEBACi0vKiEKLSAqIGlTY3JvbGwgdjQuMS45IH4gQ29weXJpZ2h0IChjKSAyMDExIE1h
dHRlbyBTcGluZWxsaSwgaHR0cDovL2N1YmlxLm9yZwotICogUmVsZWFzZWQgdW5kZXIgTUlUIGxp
Y2Vuc2UsIGh0dHA6Ly9jdWJpcS5vcmcvbGljZW5zZQotICovCi0oZnVuY3Rpb24oKXsKLXZhciBt
ID0gTWF0aCwKLSAgbXJvdW5kID0gZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIgPj4gMDsgfSwKLSAg
dmVuZG9yID0gKC93ZWJraXQvaSkudGVzdChuYXZpZ2F0b3IuYXBwVmVyc2lvbikgPyAnd2Via2l0
JyA6Ci0gICAgKC9maXJlZm94L2kpLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkgPyAnTW96JyA6
Ci0gICAgJ29wZXJhJyBpbiB3aW5kb3cgPyAnTycgOiAnJywKLSAgCi0gICAgLy8gQnJvd3NlciBj
YXBhYmlsaXRpZXMKLSAgICBpc0FuZHJvaWQgPSAoL2FuZHJvaWQvZ2kpLnRlc3QobmF2aWdhdG9y
LmFwcFZlcnNpb24pLAotICAgIGlzSURldmljZSA9ICgvaXBob25lfGlwYWQvZ2kpLnRlc3QobmF2
aWdhdG9yLmFwcFZlcnNpb24pLAotICAgIGlzUGxheWJvb2sgPSAoL3BsYXlib29rL2dpKS50ZXN0
KG5hdmlnYXRvci5hcHBWZXJzaW9uKSwKLSAgICBpc1RvdWNoUGFkID0gKC9ocC10YWJsZXQvZ2kp
LnRlc3QobmF2aWdhdG9yLmFwcFZlcnNpb24pLAotCi0gICAgaGFzM2QgPSAnV2ViS2l0Q1NTTWF0
cml4JyBpbiB3aW5kb3cgJiYgJ20xMScgaW4gbmV3IFdlYktpdENTU01hdHJpeCgpLAotICAgIGhh
c1RvdWNoID0gJ29udG91Y2hzdGFydCcgaW4gd2luZG93ICYmICFpc1RvdWNoUGFkLAotICAgIGhh
c1RyYW5zZm9ybSA9IHZlbmRvciArICdUcmFuc2Zvcm0nIGluIGRvY3VtZW50LmRvY3VtZW50RWxl
bWVudC5zdHlsZSwKLSAgICBoYXNUcmFuc2l0aW9uRW5kID0gaXNJRGV2aWNlIHx8IGlzUGxheWJv
b2ssCi0KLSAgbmV4dEZyYW1lID0gKGZ1bmN0aW9uKCkgewotICAgICAgcmV0dXJuIHdpbmRvdy5y
ZXF1ZXN0QW5pbWF0aW9uRnJhbWUKLSAgICAgIHx8IHdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0
aW9uRnJhbWUKLSAgICAgIHx8IHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUKLSAgICAg
IHx8IHdpbmRvdy5vUmVxdWVzdEFuaW1hdGlvbkZyYW1lCi0gICAgICB8fCB3aW5kb3cubXNSZXF1
ZXN0QW5pbWF0aW9uRnJhbWUKLSAgICAgIHx8IGZ1bmN0aW9uKGNhbGxiYWNrKSB7IHJldHVybiBz
ZXRUaW1lb3V0KGNhbGxiYWNrLCAxKTsgfQotICB9KSgpLAotICBjYW5jZWxGcmFtZSA9IChmdW5j
dGlvbiAoKSB7Ci0gICAgICByZXR1cm4gd2luZG93LmNhbmNlbFJlcXVlc3RBbmltYXRpb25GcmFt
ZQotICAgICAgfHwgd2luZG93LndlYmtpdENhbmNlbFJlcXVlc3RBbmltYXRpb25GcmFtZQotICAg
ICAgfHwgd2luZG93Lm1vekNhbmNlbFJlcXVlc3RBbmltYXRpb25GcmFtZQotICAgICAgfHwgd2lu
ZG93Lm9DYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWUKLSAgICAgIHx8IHdpbmRvdy5tc0NhbmNl
bFJlcXVlc3RBbmltYXRpb25GcmFtZQotICAgICAgfHwgY2xlYXJUaW1lb3V0Ci0gIH0pKCksCi0K
LSAgLy8gRXZlbnRzCi0gIC8vIFFPT1hET08gRU5IQU5DRU1FTlQ6IFVzZSB0aGUgcW9veGRvbyBl
dmVudCB0eXBlcwotICBSRVNJWkVfRVYgPSAnb3JpZW50YXRpb25jaGFuZ2UnLAotICBTVEFSVF9F
ViA9ICd0b3VjaHN0YXJ0JywKLSAgTU9WRV9FViA9ICd0b3VjaG1vdmUnLAotICBFTkRfRVYgPSAn
dG91Y2hlbmQnLAotICBDQU5DRUxfRVYgPSAndG91Y2hjYW5jZWwnLAotICBXSEVFTF9FViA9ICdt
b3VzZXdoZWVsJywKLQotICAvLyBIZWxwZXJzCi0gIHRybk9wZW4gPSAndHJhbnNsYXRlJyArICho
YXMzZCA/ICczZCgnIDogJygnKSwKLSAgdHJuQ2xvc2UgPSBoYXMzZCA/ICcsMCknIDogJyknLAot
Ci0gIC8vIENvbnN0cnVjdG9yCi0gIGlTY3JvbGwgPSBmdW5jdGlvbiAoZWwsIG9wdGlvbnMpIHsK
LSAgICB2YXIgdGhhdCA9IHRoaXMsCi0gICAgICBkb2MgPSBkb2N1bWVudCwKLSAgICAgIGk7Ci0K
LSAgICB0aGF0LndyYXBwZXIgPSB0eXBlb2YgZWwgPT0gJ29iamVjdCcgPyBlbCA6IGRvYy5nZXRF
bGVtZW50QnlJZChlbCk7Ci0gICAgdGhhdC53cmFwcGVyLnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRl
bic7Ci0gICAgdGhhdC5zY3JvbGxlciA9IHRoYXQud3JhcHBlci5jaGlsZHJlblswXTsKLQotICAg
IC8vIERlZmF1bHQgb3B0aW9ucwotICAgIHRoYXQub3B0aW9ucyA9IHsKLSAgICAgIGhTY3JvbGw6
IHRydWUsCi0gICAgICB2U2Nyb2xsOiB0cnVlLAotICAgICAgeDogMCwKLSAgICAgIHk6IDAsCi0g
ICAgICBib3VuY2U6IHRydWUsCi0gICAgICBib3VuY2VMb2NrOiBmYWxzZSwKLSAgICAgIG1vbWVu
dHVtOiB0cnVlLAotICAgICAgbG9ja0RpcmVjdGlvbjogdHJ1ZSwKLSAgICAgIHVzZVRyYW5zZm9y
bTogdHJ1ZSwKLSAgICAgIHVzZVRyYW5zaXRpb246IGZhbHNlLAotICAgICAgdG9wT2Zmc2V0OiAw
LAotICAgICAgY2hlY2tET01DaGFuZ2VzOiBmYWxzZSwgICAvLyBFeHBlcmltZW50YWwKLQotICAg
ICAgLy8gU2Nyb2xsYmFyCi0gICAgICBoU2Nyb2xsYmFyOiB0cnVlLAotICAgICAgdlNjcm9sbGJh
cjogdHJ1ZSwKLSAgICAgIGZpeGVkU2Nyb2xsYmFyOiBpc0FuZHJvaWQsCi0gICAgICBoaWRlU2Ny
b2xsYmFyOiBpc0lEZXZpY2UsCi0gICAgICBmYWRlU2Nyb2xsYmFyOiBpc0lEZXZpY2UgJiYgaGFz
M2QsCi0gICAgICBzY3JvbGxiYXJDbGFzczogJycsCi0KLSAgICAgIC8vIFpvb20KLSAgICAgIHpv
b206IGZhbHNlLAotICAgICAgem9vbU1pbjogMSwKLSAgICAgIHpvb21NYXg6IDQsCi0gICAgICBk
b3VibGVUYXBab29tOiAyLAotICAgICAgd2hlZWxBY3Rpb246ICdzY3JvbGwnLAotCi0gICAgICAv
LyBTbmFwCi0gICAgICBzbmFwOiBmYWxzZSwKLSAgICAgIHNuYXBUaHJlc2hvbGQ6IDEsCi0KLSAg
ICAgIC8vIEV2ZW50cwotICAgICAgb25SZWZyZXNoOiBudWxsLAotICAgICAgb25CZWZvcmVTY3Jv
bGxTdGFydDogZnVuY3Rpb24gKGUpIHsgZS5wcmV2ZW50RGVmYXVsdCgpOyB9LAotICAgICAgb25T
Y3JvbGxTdGFydDogbnVsbCwKLSAgICAgIG9uQmVmb3JlU2Nyb2xsTW92ZTogbnVsbCwKLSAgICAg
IG9uU2Nyb2xsTW92ZTogbnVsbCwKLSAgICAgIG9uQmVmb3JlU2Nyb2xsRW5kOiBudWxsLAotICAg
ICAgb25TY3JvbGxFbmQ6IG51bGwsCi0gICAgICBvblRvdWNoRW5kOiBudWxsLAotICAgICAgb25E
ZXN0cm95OiBudWxsLAotICAgICAgb25ab29tU3RhcnQ6IG51bGwsCi0gICAgICBvblpvb206IG51
bGwsCi0gICAgICBvblpvb21FbmQ6IG51bGwKLSAgICB9OworLyohIGlTY3JvbGwgdjUuMS4yIH4g
KGMpIDIwMDgtMjAxNCBNYXR0ZW8gU3BpbmVsbGkgfiBodHRwOi8vY3ViaXEub3JnL2xpY2Vuc2Ug
Ki8KKyhmdW5jdGlvbiAod2luZG93LCBkb2N1bWVudCwgTWF0aCkgewordmFyIHJBRiA9IHdpbmRv
dy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgIHx8CisgIHdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0
aW9uRnJhbWUgIHx8CisgIHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgICB8fAorICB3
aW5kb3cub1JlcXVlc3RBbmltYXRpb25GcmFtZSAgIHx8CisgIHdpbmRvdy5tc1JlcXVlc3RBbmlt
YXRpb25GcmFtZSAgICB8fAorICBmdW5jdGlvbiAoY2FsbGJhY2spIHsgd2luZG93LnNldFRpbWVv
dXQoY2FsbGJhY2ssIDEwMDAgLyA2MCk7IH07CisKK3ZhciB1dGlscyA9IChmdW5jdGlvbiAoKSB7
CisgIHZhciBtZSA9IHt9OworCisgIHZhciBfZWxlbWVudFN0eWxlID0gZG9jdW1lbnQuY3JlYXRl
RWxlbWVudCgnZGl2Jykuc3R5bGU7CisgIHZhciBfdmVuZG9yID0gKGZ1bmN0aW9uICgpIHsKKyAg
ICB2YXIgdmVuZG9ycyA9IFsndCcsICd3ZWJraXRUJywgJ01velQnLCAnbXNUJywgJ09UJ10sCisg
ICAgICB0cmFuc2Zvcm0sCisgICAgICBpID0gMCwKKyAgICAgIGwgPSB2ZW5kb3JzLmxlbmd0aDsK
KworICAgIGZvciAoIDsgaSA8IGw7IGkrKyApIHsKKyAgICAgIHRyYW5zZm9ybSA9IHZlbmRvcnNb
aV0gKyAncmFuc2Zvcm0nOworICAgICAgaWYgKCB0cmFuc2Zvcm0gaW4gX2VsZW1lbnRTdHlsZSAp
IHJldHVybiB2ZW5kb3JzW2ldLnN1YnN0cigwLCB2ZW5kb3JzW2ldLmxlbmd0aC0xKTsKKyAgICB9
CiAKLSAgICAvLyBVc2VyIGRlZmluZWQgb3B0aW9ucwotICAgIGZvciAoaSBpbiBvcHRpb25zKSB0
aGF0Lm9wdGlvbnNbaV0gPSBvcHRpb25zW2ldOwotICAgIAotICAgIC8vIFNldCBzdGFydGluZyBw
b3NpdGlvbgotICAgIHRoYXQueCA9IHRoYXQub3B0aW9ucy54OwotICAgIHRoYXQueSA9IHRoYXQu
b3B0aW9ucy55OwotCi0gICAgLy8gTm9ybWFsaXplIG9wdGlvbnMKLSAgICB0aGF0Lm9wdGlvbnMu
dXNlVHJhbnNmb3JtID0gaGFzVHJhbnNmb3JtID8gdGhhdC5vcHRpb25zLnVzZVRyYW5zZm9ybSA6
IGZhbHNlOwotICAgIHRoYXQub3B0aW9ucy5oU2Nyb2xsYmFyID0gdGhhdC5vcHRpb25zLmhTY3Jv
bGwgJiYgdGhhdC5vcHRpb25zLmhTY3JvbGxiYXI7Ci0gICAgdGhhdC5vcHRpb25zLnZTY3JvbGxi
YXIgPSB0aGF0Lm9wdGlvbnMudlNjcm9sbCAmJiB0aGF0Lm9wdGlvbnMudlNjcm9sbGJhcjsKLSAg
ICB0aGF0Lm9wdGlvbnMuem9vbSA9IHRoYXQub3B0aW9ucy51c2VUcmFuc2Zvcm0gJiYgdGhhdC5v
cHRpb25zLnpvb207Ci0gICAgdGhhdC5vcHRpb25zLnVzZVRyYW5zaXRpb24gPSBoYXNUcmFuc2l0
aW9uRW5kICYmIHRoYXQub3B0aW9ucy51c2VUcmFuc2l0aW9uOwotICAgIAotICAgIC8vIEhlbHBl
cnMgRklYIEFORFJPSUQgQlVHIQotICAgIC8vIHRyYW5zbGF0ZTNkIGFuZCBzY2FsZSBkb2Vzbid0
IHdvcmsgdG9nZXRoZXIhIAotICAgIC8vIElnbm9yaW5nIDNkIE9OTFkgV0hFTiBZT1UgU0VUIHRo
YXQub3B0aW9ucy56b29tCi0gICAgaWYgKCB0aGF0Lm9wdGlvbnMuem9vbSAmJiBpc0FuZHJvaWQg
KXsKLSAgICAgIHRybk9wZW4gPSAndHJhbnNsYXRlKCc7Ci0gICAgICB0cm5DbG9zZSA9ICcpJzsK
LSAgICB9ICAgIAotCi0gICAgLy8gU2V0IHNvbWUgZGVmYXVsdCBzdHlsZXMKLSAgICB0aGF0LnNj
cm9sbGVyLnN0eWxlW3ZlbmRvciArICdUcmFuc2l0aW9uUHJvcGVydHknXSA9IHRoYXQub3B0aW9u
cy51c2VUcmFuc2Zvcm0gPyAnLScgKyB2ZW5kb3IudG9Mb3dlckNhc2UoKSArICctdHJhbnNmb3Jt
JyA6ICd0b3AgbGVmdCc7Ci0gICAgdGhhdC5zY3JvbGxlci5zdHlsZVt2ZW5kb3IgKyAnVHJhbnNp
dGlvbkR1cmF0aW9uJ10gPSAnMCc7Ci0gICAgdGhhdC5zY3JvbGxlci5zdHlsZVt2ZW5kb3IgKyAn
VHJhbnNmb3JtT3JpZ2luJ10gPSAnMCAwJzsKLSAgICBpZiAodGhhdC5vcHRpb25zLnVzZVRyYW5z
aXRpb24pIHRoYXQuc2Nyb2xsZXIuc3R5bGVbdmVuZG9yICsgJ1RyYW5zaXRpb25UaW1pbmdGdW5j
dGlvbiddID0gJ2N1YmljLWJlemllcigwLjMzLDAuNjYsMC42NiwxKSc7Ci0gICAgCi0gICAgaWYg
KHRoYXQub3B0aW9ucy51c2VUcmFuc2Zvcm0pIHRoYXQuc2Nyb2xsZXIuc3R5bGVbdmVuZG9yICsg
J1RyYW5zZm9ybSddID0gdHJuT3BlbiArIHRoYXQueCArICdweCwnICsgdGhhdC55ICsgJ3B4JyAr
IHRybkNsb3NlOwotICAgIGVsc2UgdGhhdC5zY3JvbGxlci5zdHlsZS5jc3NUZXh0ICs9ICc7cG9z
aXRpb246YWJzb2x1dGU7dG9wOicgKyB0aGF0LnkgKyAncHg7bGVmdDonICsgdGhhdC54ICsgJ3B4
JzsKLQotICAgIGlmICh0aGF0Lm9wdGlvbnMudXNlVHJhbnNpdGlvbikgdGhhdC5vcHRpb25zLmZp
eGVkU2Nyb2xsYmFyID0gdHJ1ZTsKLQotICAgIHRoYXQucmVmcmVzaCgpOwotCi0gICAgdGhhdC5f
YmluZChSRVNJWkVfRVYsIHdpbmRvdyk7Ci0gICAgdGhhdC5fYmluZChTVEFSVF9FVik7Ci0gICAg
aWYgKCFoYXNUb3VjaCkgewotICAgICAgdGhhdC5fYmluZCgnbW91c2VvdXQnLCB0aGF0LndyYXBw
ZXIpOwotICAgICAgaWYgKHRoYXQub3B0aW9ucy53aGVlbEFjdGlvbiAhPSAnbm9uZScpCi0gICAg
ICAgIHRoYXQuX2JpbmQoV0hFRUxfRVYpOwotICAgIH0KLQotICAgIGlmICh0aGF0Lm9wdGlvbnMu
Y2hlY2tET01DaGFuZ2VzKSB0aGF0LmNoZWNrRE9NVGltZSA9IHNldEludGVydmFsKGZ1bmN0aW9u
ICgpIHsKLSAgICAgIHRoYXQuX2NoZWNrRE9NQ2hhbmdlcygpOwotICAgIH0sIDUwMCk7Ci0gIH07
CisgICAgcmV0dXJuIGZhbHNlOworICB9KSgpOwogCi0vLyBQcm90b3R5cGUKLWlTY3JvbGwucHJv
dG90eXBlID0gewotICBlbmFibGVkOiB0cnVlLAotICB4OiAwLAotICB5OiAwLAotICBzdGVwczog
W10sCi0gIHNjYWxlOiAxLAotICBjdXJyUGFnZVg6IDAsIGN1cnJQYWdlWTogMCwKLSAgcGFnZXNY
OiBbXSwgcGFnZXNZOiBbXSwKLSAgYW5pVGltZTogbnVsbCwKLSAgd2hlZWxab29tQ291bnQ6IDAs
Ci0gIAotICBoYW5kbGVFdmVudDogZnVuY3Rpb24gKGUpIHsKLSAgICAvLyBRT09YRE9PIEVOSEFO
Q0VNRU5UIC0gVXNlIHRoZSBxb294ZG9vIGV2ZW50Ci0gICAgaWYgKGUuZ2V0VHlwZSkgewotICAg
ICAgdmFyIHR5cGUgPSBlLmdldFR5cGUoKTsKLSAgICB9IGVsc2UgewotICAgICAgdmFyIHR5cGUg
PSBlLnR5cGU7CisgIGZ1bmN0aW9uIF9wcmVmaXhTdHlsZSAoc3R5bGUpIHsKKyAgICBpZiAoIF92
ZW5kb3IgPT09IGZhbHNlICkgcmV0dXJuIGZhbHNlOworICAgIGlmICggX3ZlbmRvciA9PT0gJycg
KSByZXR1cm4gc3R5bGU7CisgICAgcmV0dXJuIF92ZW5kb3IgKyBzdHlsZS5jaGFyQXQoMCkudG9V
cHBlckNhc2UoKSArIHN0eWxlLnN1YnN0cigxKTsKKyAgfQorCisgIG1lLmdldFRpbWUgPSBEYXRl
Lm5vdyB8fCBmdW5jdGlvbiBnZXRUaW1lICgpIHsgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgp
OyB9OworCisgIG1lLmV4dGVuZCA9IGZ1bmN0aW9uICh0YXJnZXQsIG9iaikgeworICAgIGZvciAo
IHZhciBpIGluIG9iaiApIHsKKyAgICAgIHRhcmdldFtpXSA9IG9ialtpXTsKICAgICB9Ci0gICAg
aWYgKGUuZ2V0TmF0aXZlRXZlbnQpIHsKLSAgICAgIGUgPSBlLmdldE5hdGl2ZUV2ZW50KCk7Cisg
IH07CisKKyAgbWUuYWRkRXZlbnQgPSBmdW5jdGlvbiAoZWwsIHR5cGUsIGZuLCBjYXB0dXJlKSB7
CisgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBmbiwgISFjYXB0dXJlKTsKKyAgfTsKKwor
ICBtZS5yZW1vdmVFdmVudCA9IGZ1bmN0aW9uIChlbCwgdHlwZSwgZm4sIGNhcHR1cmUpIHsKKyAg
ICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGZuLCAhIWNhcHR1cmUpOworICB9OworCisg
IG1lLnByZWZpeFBvaW50ZXJFdmVudCA9IGZ1bmN0aW9uIChwb2ludGVyRXZlbnQpIHsKKyAgICBy
ZXR1cm4gd2luZG93Lk1TUG9pbnRlckV2ZW50ID8gCisgICAgICAnTVNQb2ludGVyJyArIHBvaW50
ZXJFdmVudC5jaGFyQXQoOSkudG9VcHBlckNhc2UoKSArIHBvaW50ZXJFdmVudC5zdWJzdHIoMTAp
OgorICAgICAgcG9pbnRlckV2ZW50OworICB9OworCisgIG1lLm1vbWVudHVtID0gZnVuY3Rpb24g
KGN1cnJlbnQsIHN0YXJ0LCB0aW1lLCBsb3dlck1hcmdpbiwgd3JhcHBlclNpemUsIGRlY2VsZXJh
dGlvbikgeworICAgIHZhciBkaXN0YW5jZSA9IGN1cnJlbnQgLSBzdGFydCwKKyAgICAgIHNwZWVk
ID0gTWF0aC5hYnMoZGlzdGFuY2UpIC8gdGltZSwKKyAgICAgIGRlc3RpbmF0aW9uLAorICAgICAg
ZHVyYXRpb247CisKKyAgICBkZWNlbGVyYXRpb24gPSBkZWNlbGVyYXRpb24gPT09IHVuZGVmaW5l
ZCA/IDAuMDAwNiA6IGRlY2VsZXJhdGlvbjsKKworICAgIGRlc3RpbmF0aW9uID0gY3VycmVudCAr
ICggc3BlZWQgKiBzcGVlZCApIC8gKCAyICogZGVjZWxlcmF0aW9uICkgKiAoIGRpc3RhbmNlIDwg
MCA/IC0xIDogMSApOworICAgIGR1cmF0aW9uID0gc3BlZWQgLyBkZWNlbGVyYXRpb247CisKKyAg
ICBpZiAoIGRlc3RpbmF0aW9uIDwgbG93ZXJNYXJnaW4gKSB7CisgICAgICBkZXN0aW5hdGlvbiA9
IHdyYXBwZXJTaXplID8gbG93ZXJNYXJnaW4gLSAoIHdyYXBwZXJTaXplIC8gMi41ICogKCBzcGVl
ZCAvIDggKSApIDogbG93ZXJNYXJnaW47CisgICAgICBkaXN0YW5jZSA9IE1hdGguYWJzKGRlc3Rp
bmF0aW9uIC0gY3VycmVudCk7CisgICAgICBkdXJhdGlvbiA9IGRpc3RhbmNlIC8gc3BlZWQ7Cisg
ICAgfSBlbHNlIGlmICggZGVzdGluYXRpb24gPiAwICkgeworICAgICAgZGVzdGluYXRpb24gPSB3
cmFwcGVyU2l6ZSA/IHdyYXBwZXJTaXplIC8gMi41ICogKCBzcGVlZCAvIDggKSA6IDA7CisgICAg
ICBkaXN0YW5jZSA9IE1hdGguYWJzKGN1cnJlbnQpICsgZGVzdGluYXRpb247CisgICAgICBkdXJh
dGlvbiA9IGRpc3RhbmNlIC8gc3BlZWQ7CiAgICAgfQotICAgIHZhciB0aGF0ID0gdGhpczsKLSAg
ICBzd2l0Y2godHlwZSkgewotICAgICAgY2FzZSBTVEFSVF9FVjoKLSAgICAgICAgaWYgKCFoYXNU
b3VjaCAmJiBlLmJ1dHRvbiAhPT0gMCkgcmV0dXJuOwotICAgICAgICB0aGF0Ll9zdGFydChlKTsK
LSAgICAgICAgYnJlYWs7Ci0gICAgICBjYXNlIE1PVkVfRVY6IHRoYXQuX21vdmUoZSk7IGJyZWFr
OwotICAgICAgY2FzZSBFTkRfRVY6Ci0gICAgICBjYXNlIENBTkNFTF9FVjogdGhhdC5fZW5kKGUp
OyBicmVhazsKLSAgICAgIGNhc2UgUkVTSVpFX0VWOiB0aGF0Ll9yZXNpemUoKTsgYnJlYWs7Ci0g
ICAgICBjYXNlIFdIRUVMX0VWOiB0aGF0Ll93aGVlbChlKTsgYnJlYWs7Ci0gICAgICBjYXNlICdt
b3VzZW91dCc6IHRoYXQuX21vdXNlb3V0KGUpOyBicmVhazsKLSAgICAgIGNhc2UgJ3dlYmtpdFRy
YW5zaXRpb25FbmQnOiB0aGF0Ll90cmFuc2l0aW9uRW5kKGUpOyBicmVhazsKKworICAgIHJldHVy
biB7CisgICAgICBkZXN0aW5hdGlvbjogTWF0aC5yb3VuZChkZXN0aW5hdGlvbiksCisgICAgICBk
dXJhdGlvbjogZHVyYXRpb24KKyAgICB9OworICB9OworCisgIHZhciBfdHJhbnNmb3JtID0gX3By
ZWZpeFN0eWxlKCd0cmFuc2Zvcm0nKTsKKworICBtZS5leHRlbmQobWUsIHsKKyAgICBoYXNUcmFu
c2Zvcm06IF90cmFuc2Zvcm0gIT09IGZhbHNlLAorICAgIGhhc1BlcnNwZWN0aXZlOiBfcHJlZml4
U3R5bGUoJ3BlcnNwZWN0aXZlJykgaW4gX2VsZW1lbnRTdHlsZSwKKyAgICBoYXNUb3VjaDogJ29u
dG91Y2hzdGFydCcgaW4gd2luZG93LAorICAgIGhhc1BvaW50ZXI6IHdpbmRvdy5Qb2ludGVyRXZl
bnQgfHwgd2luZG93Lk1TUG9pbnRlckV2ZW50LCAvLyBJRTEwIGlzIHByZWZpeGVkCisgICAgaGFz
VHJhbnNpdGlvbjogX3ByZWZpeFN0eWxlKCd0cmFuc2l0aW9uJykgaW4gX2VsZW1lbnRTdHlsZQor
ICB9KTsKKworICAvLyBUaGlzIHNob3VsZCBmaW5kIGFsbCBBbmRyb2lkIGJyb3dzZXJzIGxvd2Vy
IHRoYW4gYnVpbGQgNTM1LjE5IChib3RoIHN0b2NrIGJyb3dzZXIgYW5kIHdlYnZpZXcpCisgIG1l
LmlzQmFkQW5kcm9pZCA9IC9BbmRyb2lkIC8udGVzdCh3aW5kb3cubmF2aWdhdG9yLmFwcFZlcnNp
b24pICYmICEoL0Nocm9tZVwvXGQvLnRlc3Qod2luZG93Lm5hdmlnYXRvci5hcHBWZXJzaW9uKSk7
CisKKyAgbWUuZXh0ZW5kKG1lLnN0eWxlID0ge30sIHsKKyAgICB0cmFuc2Zvcm06IF90cmFuc2Zv
cm0sCisgICAgdHJhbnNpdGlvblRpbWluZ0Z1bmN0aW9uOiBfcHJlZml4U3R5bGUoJ3RyYW5zaXRp
b25UaW1pbmdGdW5jdGlvbicpLAorICAgIHRyYW5zaXRpb25EdXJhdGlvbjogX3ByZWZpeFN0eWxl
KCd0cmFuc2l0aW9uRHVyYXRpb24nKSwKKyAgICB0cmFuc2l0aW9uRGVsYXk6IF9wcmVmaXhTdHls
ZSgndHJhbnNpdGlvbkRlbGF5JyksCisgICAgdHJhbnNmb3JtT3JpZ2luOiBfcHJlZml4U3R5bGUo
J3RyYW5zZm9ybU9yaWdpbicpCisgIH0pOworCisgIG1lLmhhc0NsYXNzID0gZnVuY3Rpb24gKGUs
IGMpIHsKKyAgICB2YXIgcmUgPSBuZXcgUmVnRXhwKCIoXnxcXHMpIiArIGMgKyAiKFxcc3wkKSIp
OworICAgIHJldHVybiByZS50ZXN0KGUuY2xhc3NOYW1lKTsKKyAgfTsKKworICBtZS5hZGRDbGFz
cyA9IGZ1bmN0aW9uIChlLCBjKSB7CisgICAgaWYgKCBtZS5oYXNDbGFzcyhlLCBjKSApIHsKKyAg
ICAgIHJldHVybjsKICAgICB9Ci0gIH0sCi0gIAotICBfY2hlY2tET01DaGFuZ2VzOiBmdW5jdGlv
biAoKSB7Ci0gICAgaWYgKHRoaXMubW92ZWQgfHwgdGhpcy56b29tZWQgfHwgdGhpcy5hbmltYXRp
bmcgfHwKLSAgICAgICh0aGlzLnNjcm9sbGVyVyA9PSB0aGlzLnNjcm9sbGVyLm9mZnNldFdpZHRo
ICogdGhpcy5zY2FsZSAmJiB0aGlzLnNjcm9sbGVySCA9PSB0aGlzLnNjcm9sbGVyLm9mZnNldEhl
aWdodCAqIHRoaXMuc2NhbGUpKSByZXR1cm47CiAKLSAgICB0aGlzLnJlZnJlc2goKTsKLSAgfSwK
LSAgCi0gIF9zY3JvbGxiYXI6IGZ1bmN0aW9uIChkaXIpIHsKLSAgICB2YXIgdGhhdCA9IHRoaXMs
Ci0gICAgICBkb2MgPSBkb2N1bWVudCwKLSAgICAgIGJhcjsKLQotICAgIGlmICghdGhhdFtkaXIg
KyAnU2Nyb2xsYmFyJ10pIHsKLSAgICAgIGlmICh0aGF0W2RpciArICdTY3JvbGxiYXJXcmFwcGVy
J10pIHsKLSAgICAgICAgaWYgKGhhc1RyYW5zZm9ybSkgdGhhdFtkaXIgKyAnU2Nyb2xsYmFySW5k
aWNhdG9yJ10uc3R5bGVbdmVuZG9yICsgJ1RyYW5zZm9ybSddID0gJyc7Ci0gICAgICAgIHRoYXRb
ZGlyICsgJ1Njcm9sbGJhcldyYXBwZXInXS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoYXRbZGly
ICsgJ1Njcm9sbGJhcldyYXBwZXInXSk7Ci0gICAgICAgIHRoYXRbZGlyICsgJ1Njcm9sbGJhcldy
YXBwZXInXSA9IG51bGw7Ci0gICAgICAgIHRoYXRbZGlyICsgJ1Njcm9sbGJhckluZGljYXRvcidd
ID0gbnVsbDsKLSAgICAgIH0KKyAgICB2YXIgbmV3Y2xhc3MgPSBlLmNsYXNzTmFtZS5zcGxpdCgn
ICcpOworICAgIG5ld2NsYXNzLnB1c2goYyk7CisgICAgZS5jbGFzc05hbWUgPSBuZXdjbGFzcy5q
b2luKCcgJyk7CisgIH07CiAKKyAgbWUucmVtb3ZlQ2xhc3MgPSBmdW5jdGlvbiAoZSwgYykgewor
ICAgIGlmICggIW1lLmhhc0NsYXNzKGUsIGMpICkgewogICAgICAgcmV0dXJuOwogICAgIH0KIAot
ICAgIGlmICghdGhhdFtkaXIgKyAnU2Nyb2xsYmFyV3JhcHBlciddKSB7Ci0gICAgICAvLyBDcmVh
dGUgdGhlIHNjcm9sbGJhciB3cmFwcGVyCi0gICAgICBiYXIgPSBkb2MuY3JlYXRlRWxlbWVudCgn
ZGl2Jyk7CisgICAgdmFyIHJlID0gbmV3IFJlZ0V4cCgiKF58XFxzKSIgKyBjICsgIihcXHN8JCki
LCAnZycpOworICAgIGUuY2xhc3NOYW1lID0gZS5jbGFzc05hbWUucmVwbGFjZShyZSwgJyAnKTsK
KyAgfTsKKworICBtZS5vZmZzZXQgPSBmdW5jdGlvbiAoZWwpIHsKKyAgICB2YXIgbGVmdCA9IC1l
bC5vZmZzZXRMZWZ0LAorICAgICAgdG9wID0gLWVsLm9mZnNldFRvcDsKKworICAgIC8vIGpzaGlu
dCAtVzA4NAorICAgIHdoaWxlIChlbCA9IGVsLm9mZnNldFBhcmVudCkgeworICAgICAgbGVmdCAt
PSBlbC5vZmZzZXRMZWZ0OworICAgICAgdG9wIC09IGVsLm9mZnNldFRvcDsKKyAgICB9CisgICAg
Ly8ganNoaW50ICtXMDg0CiAKLSAgICAgIGlmICh0aGF0Lm9wdGlvbnMuc2Nyb2xsYmFyQ2xhc3Mp
IGJhci5jbGFzc05hbWUgPSB0aGF0Lm9wdGlvbnMuc2Nyb2xsYmFyQ2xhc3MgKyBkaXIudG9VcHBl
ckNhc2UoKTsKLSAgICAgIGVsc2UgYmFyLnN0eWxlLmNzc1RleHQgPSAncG9zaXRpb246YWJzb2x1
dGU7ei1pbmRleDoxMDA7JyArIChkaXIgPT0gJ2gnID8gJ2hlaWdodDo3cHg7Ym90dG9tOjFweDts
ZWZ0OjJweDtyaWdodDonICsgKHRoYXQudlNjcm9sbGJhciA/ICc3JyA6ICcyJykgKyAncHgnIDog
J3dpZHRoOjdweDtib3R0b206JyArICh0aGF0LmhTY3JvbGxiYXIgPyAnNycgOiAnMicpICsgJ3B4
O3RvcDoycHg7cmlnaHQ6MXB4Jyk7CisgICAgcmV0dXJuIHsKKyAgICAgIGxlZnQ6IGxlZnQsCisg
ICAgICB0b3A6IHRvcAorICAgIH07CisgIH07CiAKLSAgICAgIGJhci5zdHlsZS5jc3NUZXh0ICs9
ICc7cG9pbnRlci1ldmVudHM6bm9uZTstJyArIHZlbmRvciArICctdHJhbnNpdGlvbi1wcm9wZXJ0
eTpvcGFjaXR5Oy0nICsgdmVuZG9yICsgJy10cmFuc2l0aW9uLWR1cmF0aW9uOicgKyAodGhhdC5v
cHRpb25zLmZhZGVTY3JvbGxiYXIgPyAnMzUwbXMnIDogJzAnKSArICc7b3ZlcmZsb3c6aGlkZGVu
O29wYWNpdHk6JyArICh0aGF0Lm9wdGlvbnMuaGlkZVNjcm9sbGJhciA/ICcwJyA6ICcxJyk7Cisg
IG1lLnByZXZlbnREZWZhdWx0RXhjZXB0aW9uID0gZnVuY3Rpb24gKGVsLCBleGNlcHRpb25zKSB7
CisgICAgZm9yICggdmFyIGkgaW4gZXhjZXB0aW9ucyApIHsKKyAgICAgIGlmICggZXhjZXB0aW9u
c1tpXS50ZXN0KGVsW2ldKSApIHsKKyAgICAgICAgcmV0dXJuIHRydWU7CisgICAgICB9CisgICAg
fQogCi0gICAgICB0aGF0LndyYXBwZXIuYXBwZW5kQ2hpbGQoYmFyKTsKLSAgICAgIHRoYXRbZGly
ICsgJ1Njcm9sbGJhcldyYXBwZXInXSA9IGJhcjsKKyAgICByZXR1cm4gZmFsc2U7CisgIH07CiAK
LSAgICAgIC8vIENyZWF0ZSB0aGUgc2Nyb2xsYmFyIGluZGljYXRvcgotICAgICAgYmFyID0gZG9j
LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwotICAgICAgaWYgKCF0aGF0Lm9wdGlvbnMuc2Nyb2xsYmFy
Q2xhc3MpIHsKLSAgICAgICAgYmFyLnN0eWxlLmNzc1RleHQgPSAncG9zaXRpb246YWJzb2x1dGU7
ei1pbmRleDoxMDA7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuNSk7Ym9yZGVyOjFweCBzb2xpZCBy
Z2JhKDI1NSwyNTUsMjU1LDAuOSk7LScgKyB2ZW5kb3IgKyAnLWJhY2tncm91bmQtY2xpcDpwYWRk
aW5nLWJveDstJyArIHZlbmRvciArICctYm94LXNpemluZzpib3JkZXItYm94OycgKyAoZGlyID09
ICdoJyA/ICdoZWlnaHQ6MTAwJScgOiAnd2lkdGg6MTAwJScpICsgJzstJyArIHZlbmRvciArICct
Ym9yZGVyLXJhZGl1czozcHg7Ym9yZGVyLXJhZGl1czozcHgnOworICBtZS5leHRlbmQobWUuZXZl
bnRUeXBlID0ge30sIHsKKyAgICB0b3VjaHN0YXJ0OiAxLAorICAgIHRvdWNobW92ZTogMSwKKyAg
ICB0b3VjaGVuZDogMSwKKworICAgIG1vdXNlZG93bjogMiwKKyAgICBtb3VzZW1vdmU6IDIsCisg
ICAgbW91c2V1cDogMiwKKworICAgIHBvaW50ZXJkb3duOiAzLAorICAgIHBvaW50ZXJtb3ZlOiAz
LAorICAgIHBvaW50ZXJ1cDogMywKKworICAgIE1TUG9pbnRlckRvd246IDMsCisgICAgTVNQb2lu
dGVyTW92ZTogMywKKyAgICBNU1BvaW50ZXJVcDogMworICB9KTsKKworICBtZS5leHRlbmQobWUu
ZWFzZSA9IHt9LCB7CisgICAgcXVhZHJhdGljOiB7CisgICAgICBzdHlsZTogJ2N1YmljLWJlemll
cigwLjI1LCAwLjQ2LCAwLjQ1LCAwLjk0KScsCisgICAgICBmbjogZnVuY3Rpb24gKGspIHsKKyAg
ICAgICAgcmV0dXJuIGsgKiAoIDIgLSBrICk7CisgICAgICB9CisgICAgfSwKKyAgICBjaXJjdWxh
cjogeworICAgICAgc3R5bGU6ICdjdWJpYy1iZXppZXIoMC4xLCAwLjU3LCAwLjEsIDEpJywgLy8g
Tm90IHByb3Blcmx5ICJjaXJjdWxhciIgYnV0IHRoaXMgbG9va3MgYmV0dGVyLCBpdCBzaG91bGQg
YmUgKDAuMDc1LCAwLjgyLCAwLjE2NSwgMSkKKyAgICAgIGZuOiBmdW5jdGlvbiAoaykgeworICAg
ICAgICByZXR1cm4gTWF0aC5zcXJ0KCAxIC0gKCAtLWsgKiBrICkgKTsKKyAgICAgIH0KKyAgICB9
LAorICAgIGJhY2s6IHsKKyAgICAgIHN0eWxlOiAnY3ViaWMtYmV6aWVyKDAuMTc1LCAwLjg4NSwg
MC4zMiwgMS4yNzUpJywKKyAgICAgIGZuOiBmdW5jdGlvbiAoaykgeworICAgICAgICB2YXIgYiA9
IDQ7CisgICAgICAgIHJldHVybiAoIGsgPSBrIC0gMSApICogayAqICggKCBiICsgMSApICogayAr
IGIgKSArIDE7CisgICAgICB9CisgICAgfSwKKyAgICBib3VuY2U6IHsKKyAgICAgIHN0eWxlOiAn
JywKKyAgICAgIGZuOiBmdW5jdGlvbiAoaykgeworICAgICAgICBpZiAoICggayAvPSAxICkgPCAo
IDEgLyAyLjc1ICkgKSB7CisgICAgICAgICAgcmV0dXJuIDcuNTYyNSAqIGsgKiBrOworICAgICAg
ICB9IGVsc2UgaWYgKCBrIDwgKCAyIC8gMi43NSApICkgeworICAgICAgICAgIHJldHVybiA3LjU2
MjUgKiAoIGsgLT0gKCAxLjUgLyAyLjc1ICkgKSAqIGsgKyAwLjc1OworICAgICAgICB9IGVsc2Ug
aWYgKCBrIDwgKCAyLjUgLyAyLjc1ICkgKSB7CisgICAgICAgICAgcmV0dXJuIDcuNTYyNSAqICgg
ayAtPSAoIDIuMjUgLyAyLjc1ICkgKSAqIGsgKyAwLjkzNzU7CisgICAgICAgIH0gZWxzZSB7Cisg
ICAgICAgICAgcmV0dXJuIDcuNTYyNSAqICggayAtPSAoIDIuNjI1IC8gMi43NSApICkgKiBrICsg
MC45ODQzNzU7CisgICAgICAgIH0KICAgICAgIH0KLSAgICAgIGJhci5zdHlsZS5jc3NUZXh0ICs9
ICc7cG9pbnRlci1ldmVudHM6bm9uZTstJyArIHZlbmRvciArICctdHJhbnNpdGlvbi1wcm9wZXJ0
eTotJyArIHZlbmRvciArICctdHJhbnNmb3JtOy0nICsgdmVuZG9yICsgJy10cmFuc2l0aW9uLXRp
bWluZy1mdW5jdGlvbjpjdWJpYy1iZXppZXIoMC4zMywwLjY2LDAuNjYsMSk7LScgKyB2ZW5kb3Ig
KyAnLXRyYW5zaXRpb24tZHVyYXRpb246MDstJyArIHZlbmRvciArICctdHJhbnNmb3JtOicgKyB0
cm5PcGVuICsgJzAsMCcgKyB0cm5DbG9zZTsKLSAgICAgIGlmICh0aGF0Lm9wdGlvbnMudXNlVHJh
bnNpdGlvbikgYmFyLnN0eWxlLmNzc1RleHQgKz0gJzstJyArIHZlbmRvciArICctdHJhbnNpdGlv
bi10aW1pbmctZnVuY3Rpb246Y3ViaWMtYmV6aWVyKDAuMzMsMC42NiwwLjY2LDEpJzsKKyAgICB9
LAorICAgIGVsYXN0aWM6IHsKKyAgICAgIHN0eWxlOiAnJywKKyAgICAgIGZuOiBmdW5jdGlvbiAo
aykgeworICAgICAgICB2YXIgZiA9IDAuMjIsCisgICAgICAgICAgZSA9IDAuNDsKIAotICAgICAg
dGhhdFtkaXIgKyAnU2Nyb2xsYmFyV3JhcHBlciddLmFwcGVuZENoaWxkKGJhcik7Ci0gICAgICB0
aGF0W2RpciArICdTY3JvbGxiYXJJbmRpY2F0b3InXSA9IGJhcjsKLSAgICB9CisgICAgICAgIGlm
ICggayA9PT0gMCApIHsgcmV0dXJuIDA7IH0KKyAgICAgICAgaWYgKCBrID09IDEgKSB7IHJldHVy
biAxOyB9CiAKLSAgICBpZiAoZGlyID09ICdoJykgewotICAgICAgdGhhdC5oU2Nyb2xsYmFyU2l6
ZSA9IHRoYXQuaFNjcm9sbGJhcldyYXBwZXIuY2xpZW50V2lkdGg7Ci0gICAgICB0aGF0LmhTY3Jv
bGxiYXJJbmRpY2F0b3JTaXplID0gbS5tYXgobXJvdW5kKHRoYXQuaFNjcm9sbGJhclNpemUgKiB0
aGF0LmhTY3JvbGxiYXJTaXplIC8gdGhhdC5zY3JvbGxlclcpLCA4KTsKLSAgICAgIHRoYXQuaFNj
cm9sbGJhckluZGljYXRvci5zdHlsZS53aWR0aCA9IHRoYXQuaFNjcm9sbGJhckluZGljYXRvclNp
emUgKyAncHgnOwotICAgICAgdGhhdC5oU2Nyb2xsYmFyTWF4U2Nyb2xsID0gdGhhdC5oU2Nyb2xs
YmFyU2l6ZSAtIHRoYXQuaFNjcm9sbGJhckluZGljYXRvclNpemU7Ci0gICAgICB0aGF0LmhTY3Jv
bGxiYXJQcm9wID0gdGhhdC5oU2Nyb2xsYmFyTWF4U2Nyb2xsIC8gdGhhdC5tYXhTY3JvbGxYOwot
ICAgIH0gZWxzZSB7Ci0gICAgICB0aGF0LnZTY3JvbGxiYXJTaXplID0gdGhhdC52U2Nyb2xsYmFy
V3JhcHBlci5jbGllbnRIZWlnaHQ7Ci0gICAgICB0aGF0LnZTY3JvbGxiYXJJbmRpY2F0b3JTaXpl
ID0gbS5tYXgobXJvdW5kKHRoYXQudlNjcm9sbGJhclNpemUgKiB0aGF0LnZTY3JvbGxiYXJTaXpl
IC8gdGhhdC5zY3JvbGxlckgpLCA4KTsKLSAgICAgIHRoYXQudlNjcm9sbGJhckluZGljYXRvci5z
dHlsZS5oZWlnaHQgPSB0aGF0LnZTY3JvbGxiYXJJbmRpY2F0b3JTaXplICsgJ3B4JzsKLSAgICAg
IHRoYXQudlNjcm9sbGJhck1heFNjcm9sbCA9IHRoYXQudlNjcm9sbGJhclNpemUgLSB0aGF0LnZT
Y3JvbGxiYXJJbmRpY2F0b3JTaXplOwotICAgICAgdGhhdC52U2Nyb2xsYmFyUHJvcCA9IHRoYXQu
dlNjcm9sbGJhck1heFNjcm9sbCAvIHRoYXQubWF4U2Nyb2xsWTsKKyAgICAgICAgcmV0dXJuICgg
ZSAqIE1hdGgucG93KCAyLCAtIDEwICogayApICogTWF0aC5zaW4oICggayAtIGYgLyA0ICkgKiAo
IDIgKiBNYXRoLlBJICkgLyBmICkgKyAxICk7CisgICAgICB9CiAgICAgfQorICB9KTsKKworICBt
ZS50YXAgPSBmdW5jdGlvbiAoZSwgZXZlbnROYW1lKSB7CisgICAgdmFyIGV2ID0gZG9jdW1lbnQu
Y3JlYXRlRXZlbnQoJ0V2ZW50Jyk7CisgICAgZXYuaW5pdEV2ZW50KGV2ZW50TmFtZSwgdHJ1ZSwg
dHJ1ZSk7CisgICAgZXYucGFnZVggPSBlLnBhZ2VYOworICAgIGV2LnBhZ2VZID0gZS5wYWdlWTsK
KyAgICBlLnRhcmdldC5kaXNwYXRjaEV2ZW50KGV2KTsKKyAgfTsKIAotICAgIC8vIFJlc2V0IHBv
c2l0aW9uCi0gICAgdGhhdC5fc2Nyb2xsYmFyUG9zKGRpciwgdHJ1ZSk7Ci0gIH0sCi0gIAotICBf
cmVzaXplOiBmdW5jdGlvbiAoKSB7Ci0gICAgdmFyIHRoYXQgPSB0aGlzOwotICAgIHNldFRpbWVv
dXQoZnVuY3Rpb24gKCkgeyB0aGF0LnJlZnJlc2goKTsgfSwgaXNBbmRyb2lkID8gMjAwIDogMCk7
Ci0gIH0sCi0gIAotICBfcG9zOiBmdW5jdGlvbiAoeCwgeSkgewotICAgIHggPSB0aGlzLmhTY3Jv
bGwgPyB4IDogMDsKLSAgICB5ID0gdGhpcy52U2Nyb2xsID8geSA6IDA7CisgIG1lLmNsaWNrID0g
ZnVuY3Rpb24gKGUpIHsKKyAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQsCisgICAgICBldjsKIAot
ICAgIGlmICh0aGlzLm9wdGlvbnMudXNlVHJhbnNmb3JtKSB7Ci0gICAgICB0aGlzLnNjcm9sbGVy
LnN0eWxlW3ZlbmRvciArICdUcmFuc2Zvcm0nXSA9IHRybk9wZW4gKyB4ICsgJ3B4LCcgKyB5ICsg
J3B4JyArIHRybkNsb3NlICsgJyBzY2FsZSgnICsgdGhpcy5zY2FsZSArICcpJzsKLSAgICB9IGVs
c2UgewotICAgICAgeCA9IG1yb3VuZCh4KTsKLSAgICAgIHkgPSBtcm91bmQoeSk7Ci0gICAgICB0
aGlzLnNjcm9sbGVyLnN0eWxlLmxlZnQgPSB4ICsgJ3B4JzsKLSAgICAgIHRoaXMuc2Nyb2xsZXIu
c3R5bGUudG9wID0geSArICdweCc7CisgICAgaWYgKCAhKC8oU0VMRUNUfElOUFVUfFRFWFRBUkVB
KS9pKS50ZXN0KHRhcmdldC50YWdOYW1lKSApIHsKKyAgICAgIGV2ID0gZG9jdW1lbnQuY3JlYXRl
RXZlbnQoJ01vdXNlRXZlbnRzJyk7CisgICAgICBldi5pbml0TW91c2VFdmVudCgnY2xpY2snLCB0
cnVlLCB0cnVlLCBlLnZpZXcsIDEsCisgICAgICAgIHRhcmdldC5zY3JlZW5YLCB0YXJnZXQuc2Ny
ZWVuWSwgdGFyZ2V0LmNsaWVudFgsIHRhcmdldC5jbGllbnRZLAorICAgICAgICBlLmN0cmxLZXks
IGUuYWx0S2V5LCBlLnNoaWZ0S2V5LCBlLm1ldGFLZXksCisgICAgICAgIDAsIG51bGwpOworCisg
ICAgICBldi5fY29uc3RydWN0ZWQgPSB0cnVlOworICAgICAgdGFyZ2V0LmRpc3BhdGNoRXZlbnQo
ZXYpOwogICAgIH0KKyAgfTsKIAotICAgIHRoaXMueCA9IHg7Ci0gICAgdGhpcy55ID0geTsKKyAg
cmV0dXJuIG1lOworfSkoKTsKIAotICAgIHRoaXMuX3Njcm9sbGJhclBvcygnaCcpOwotICAgIHRo
aXMuX3Njcm9sbGJhclBvcygndicpOwotICB9LAorZnVuY3Rpb24gSVNjcm9sbCAoZWwsIG9wdGlv
bnMpIHsKKyAgdGhpcy53cmFwcGVyID0gdHlwZW9mIGVsID09ICdzdHJpbmcnID8gZG9jdW1lbnQu
cXVlcnlTZWxlY3RvcihlbCkgOiBlbDsKKyAgdGhpcy5zY3JvbGxlciA9IHRoaXMud3JhcHBlci5j
aGlsZHJlblswXTsKKyAgdGhpcy5zY3JvbGxlclN0eWxlID0gdGhpcy5zY3JvbGxlci5zdHlsZTsg
ICAvLyBjYWNoZSBzdHlsZSBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlCiAKLSAgX3Njcm9sbGJhclBv
czogZnVuY3Rpb24gKGRpciwgaGlkZGVuKSB7Ci0gICAgdmFyIHRoYXQgPSB0aGlzLAotICAgICAg
cG9zID0gZGlyID09ICdoJyA/IHRoYXQueCA6IHRoYXQueSwKLSAgICAgIHNpemU7CisgIHRoaXMu
b3B0aW9ucyA9IHsKIAotICAgIGlmICghdGhhdFtkaXIgKyAnU2Nyb2xsYmFyJ10pIHJldHVybjsK
KyAgICByZXNpemVTY3JvbGxiYXJzOiB0cnVlLAogCi0gICAgcG9zID0gdGhhdFtkaXIgKyAnU2Ny
b2xsYmFyUHJvcCddICogcG9zOworICAgIG1vdXNlV2hlZWxTcGVlZDogMjAsCiAKLSAgICBpZiAo
cG9zIDwgMCkgewotICAgICAgaWYgKCF0aGF0Lm9wdGlvbnMuZml4ZWRTY3JvbGxiYXIpIHsKLSAg
ICAgICAgc2l6ZSA9IHRoYXRbZGlyICsgJ1Njcm9sbGJhckluZGljYXRvclNpemUnXSArIG1yb3Vu
ZChwb3MgKiAzKTsKLSAgICAgICAgaWYgKHNpemUgPCA4KSBzaXplID0gODsKLSAgICAgICAgdGhh
dFtkaXIgKyAnU2Nyb2xsYmFySW5kaWNhdG9yJ10uc3R5bGVbZGlyID09ICdoJyA/ICd3aWR0aCcg
OiAnaGVpZ2h0J10gPSBzaXplICsgJ3B4JzsKLSAgICAgIH0KLSAgICAgIHBvcyA9IDA7Ci0gICAg
fSBlbHNlIGlmIChwb3MgPiB0aGF0W2RpciArICdTY3JvbGxiYXJNYXhTY3JvbGwnXSkgewotICAg
ICAgaWYgKCF0aGF0Lm9wdGlvbnMuZml4ZWRTY3JvbGxiYXIpIHsKLSAgICAgICAgc2l6ZSA9IHRo
YXRbZGlyICsgJ1Njcm9sbGJhckluZGljYXRvclNpemUnXSAtIG1yb3VuZCgocG9zIC0gdGhhdFtk
aXIgKyAnU2Nyb2xsYmFyTWF4U2Nyb2xsJ10pICogMyk7Ci0gICAgICAgIGlmIChzaXplIDwgOCkg
c2l6ZSA9IDg7Ci0gICAgICAgIHRoYXRbZGlyICsgJ1Njcm9sbGJhckluZGljYXRvciddLnN0eWxl
W2RpciA9PSAnaCcgPyAnd2lkdGgnIDogJ2hlaWdodCddID0gc2l6ZSArICdweCc7Ci0gICAgICAg
IHBvcyA9IHRoYXRbZGlyICsgJ1Njcm9sbGJhck1heFNjcm9sbCddICsgKHRoYXRbZGlyICsgJ1Nj
cm9sbGJhckluZGljYXRvclNpemUnXSAtIHNpemUpOwotICAgICAgfSBlbHNlIHsKLSAgICAgICAg
cG9zID0gdGhhdFtkaXIgKyAnU2Nyb2xsYmFyTWF4U2Nyb2xsJ107Ci0gICAgICB9Ci0gICAgfQor
ICAgIHNuYXBUaHJlc2hvbGQ6IDAuMzM0LAogCi0gICAgdGhhdFtkaXIgKyAnU2Nyb2xsYmFyV3Jh
cHBlciddLnN0eWxlW3ZlbmRvciArICdUcmFuc2l0aW9uRGVsYXknXSA9ICcwJzsKLSAgICB0aGF0
W2RpciArICdTY3JvbGxiYXJXcmFwcGVyJ10uc3R5bGUub3BhY2l0eSA9IGhpZGRlbiAmJiB0aGF0
Lm9wdGlvbnMuaGlkZVNjcm9sbGJhciA/ICcwJyA6ICcxJzsKLSAgICB0aGF0W2RpciArICdTY3Jv
bGxiYXJJbmRpY2F0b3InXS5zdHlsZVt2ZW5kb3IgKyAnVHJhbnNmb3JtJ10gPSB0cm5PcGVuICsg
KGRpciA9PSAnaCcgPyBwb3MgKyAncHgsMCcgOiAnMCwnICsgcG9zICsgJ3B4JykgKyB0cm5DbG9z
ZTsKLSAgfSwKLSAgCi0gIF9zdGFydDogZnVuY3Rpb24gKGUpIHsKLSAgICB2YXIgdGhhdCA9IHRo
aXMsCi0gICAgICBwb2ludCA9IGhhc1RvdWNoID8gZS50b3VjaGVzWzBdIDogZSwKLSAgICAgIG1h
dHJpeCwgeCwgeSwKLSAgICAgIGMxLCBjMjsKKy8vIElOU0VSVCBQT0lOVDogT1BUSU9OUyAKIAot
ICAgIGlmICghdGhhdC5lbmFibGVkKSByZXR1cm47CisgICAgc3RhcnRYOiAwLAorICAgIHN0YXJ0
WTogMCwKKyAgICBzY3JvbGxZOiB0cnVlLAorICAgIGRpcmVjdGlvbkxvY2tUaHJlc2hvbGQ6IDUs
CisgICAgbW9tZW50dW06IHRydWUsCiAKLSAgICBpZiAodGhhdC5vcHRpb25zLm9uQmVmb3JlU2Ny
b2xsU3RhcnQpIHRoYXQub3B0aW9ucy5vbkJlZm9yZVNjcm9sbFN0YXJ0LmNhbGwodGhhdCwgZSk7
CisgICAgYm91bmNlOiB0cnVlLAorICAgIGJvdW5jZVRpbWU6IDYwMCwKKyAgICBib3VuY2VFYXNp
bmc6ICcnLAogCi0gICAgaWYgKHRoYXQub3B0aW9ucy51c2VUcmFuc2l0aW9uIHx8IHRoYXQub3B0
aW9ucy56b29tKSB0aGF0Ll90cmFuc2l0aW9uVGltZSgwKTsKKyAgICBwcmV2ZW50RGVmYXVsdDog
dHJ1ZSwKKyAgICBwcmV2ZW50RGVmYXVsdEV4Y2VwdGlvbjogeyB0YWdOYW1lOiAvXihJTlBVVHxU
RVhUQVJFQXxCVVRUT058U0VMRUNUKSQvIH0sCiAKLSAgICB0aGF0Lm1vdmVkID0gZmFsc2U7Ci0g
ICAgdGhhdC5hbmltYXRpbmcgPSBmYWxzZTsKLSAgICB0aGF0Lnpvb21lZCA9IGZhbHNlOwotICAg
IHRoYXQuZGlzdFggPSAwOwotICAgIHRoYXQuZGlzdFkgPSAwOwotICAgIHRoYXQuYWJzRGlzdFgg
PSAwOwotICAgIHRoYXQuYWJzRGlzdFkgPSAwOwotICAgIHRoYXQuZGlyWCA9IDA7Ci0gICAgdGhh
dC5kaXJZID0gMDsKKyAgICBIV0NvbXBvc2l0aW5nOiB0cnVlLAorICAgIHVzZVRyYW5zaXRpb246
IHRydWUsCisgICAgdXNlVHJhbnNmb3JtOiB0cnVlCisgIH07CiAKLSAgICAvLyBHZXN0dXJlIHN0
YXJ0Ci0gICAgaWYgKHRoYXQub3B0aW9ucy56b29tICYmIGhhc1RvdWNoICYmIGUudG91Y2hlcy5s
ZW5ndGggPiAxKSB7Ci0gICAgICBjMSA9IG0uYWJzKGUudG91Y2hlc1swXS5wYWdlWC1lLnRvdWNo
ZXNbMV0ucGFnZVgpOwotICAgICAgYzIgPSBtLmFicyhlLnRvdWNoZXNbMF0ucGFnZVktZS50b3Vj
aGVzWzFdLnBhZ2VZKTsKLSAgICAgIHRoYXQudG91Y2hlc0Rpc3RTdGFydCA9IG0uc3FydChjMSAq
IGMxICsgYzIgKiBjMik7CisgIGZvciAoIHZhciBpIGluIG9wdGlvbnMgKSB7CisgICAgdGhpcy5v
cHRpb25zW2ldID0gb3B0aW9uc1tpXTsKKyAgfQogCi0gICAgICB0aGF0Lm9yaWdpblggPSBtLmFi
cyhlLnRvdWNoZXNbMF0ucGFnZVggKyBlLnRvdWNoZXNbMV0ucGFnZVggLSB0aGF0LndyYXBwZXJP
ZmZzZXRMZWZ0ICogMikgLyAyIC0gdGhhdC54OwotICAgICAgdGhhdC5vcmlnaW5ZID0gbS5hYnMo
ZS50b3VjaGVzWzBdLnBhZ2VZICsgZS50b3VjaGVzWzFdLnBhZ2VZIC0gdGhhdC53cmFwcGVyT2Zm
c2V0VG9wICogMikgLyAyIC0gdGhhdC55OworICAvLyBOb3JtYWxpemUgb3B0aW9ucworICB0aGlz
LnRyYW5zbGF0ZVogPSB0aGlzLm9wdGlvbnMuSFdDb21wb3NpdGluZyAmJiB1dGlscy5oYXNQZXJz
cGVjdGl2ZSA/ICcgdHJhbnNsYXRlWigwKScgOiAnJzsKIAotICAgICAgaWYgKHRoYXQub3B0aW9u
cy5vblpvb21TdGFydCkgdGhhdC5vcHRpb25zLm9uWm9vbVN0YXJ0LmNhbGwodGhhdCwgZSk7Ci0g
ICAgfQorICB0aGlzLm9wdGlvbnMudXNlVHJhbnNpdGlvbiA9IHV0aWxzLmhhc1RyYW5zaXRpb24g
JiYgdGhpcy5vcHRpb25zLnVzZVRyYW5zaXRpb247CisgIHRoaXMub3B0aW9ucy51c2VUcmFuc2Zv
cm0gPSB1dGlscy5oYXNUcmFuc2Zvcm0gJiYgdGhpcy5vcHRpb25zLnVzZVRyYW5zZm9ybTsKIAot
ICAgIGlmICh0aGF0Lm9wdGlvbnMubW9tZW50dW0pIHsKLSAgICAgIGlmICh0aGF0Lm9wdGlvbnMu
dXNlVHJhbnNmb3JtKSB7Ci0gICAgICAgIC8vIFZlcnkgbGFtZSBnZW5lcmFsIHB1cnBvc2UgYWx0
ZXJuYXRpdmUgdG8gQ1NTTWF0cml4Ci0gICAgICAgIG1hdHJpeCA9IGdldENvbXB1dGVkU3R5bGUo
dGhhdC5zY3JvbGxlciwgbnVsbClbdmVuZG9yICsgJ1RyYW5zZm9ybSddLnJlcGxhY2UoL1teMC05
LS4sXS9nLCAnJykuc3BsaXQoJywnKTsKLSAgICAgICAgeCA9IG1hdHJpeFs0XSAqIDE7Ci0gICAg
ICAgIHkgPSBtYXRyaXhbNV0gKiAxOwotICAgICAgfSBlbHNlIHsKLSAgICAgICAgeCA9IGdldENv
bXB1dGVkU3R5bGUodGhhdC5zY3JvbGxlciwgbnVsbCkubGVmdC5yZXBsYWNlKC9bXjAtOS1dL2cs
ICcnKSAqIDE7Ci0gICAgICAgIHkgPSBnZXRDb21wdXRlZFN0eWxlKHRoYXQuc2Nyb2xsZXIsIG51
bGwpLnRvcC5yZXBsYWNlKC9bXjAtOS1dL2csICcnKSAqIDE7Ci0gICAgICB9Ci0gICAgICAKLSAg
ICAgIGlmICh4ICE9IHRoYXQueCB8fCB5ICE9IHRoYXQueSkgewotICAgICAgICBpZiAodGhhdC5v
cHRpb25zLnVzZVRyYW5zaXRpb24pIHRoYXQuX3VuYmluZCgnd2Via2l0VHJhbnNpdGlvbkVuZCcp
OwotICAgICAgICBlbHNlIGNhbmNlbEZyYW1lKHRoYXQuYW5pVGltZSk7Ci0gICAgICAgIHRoYXQu
c3RlcHMgPSBbXTsKLSAgICAgICAgdGhhdC5fcG9zKHgsIHkpOwotICAgICAgfQotICAgIH0KKyAg
dGhpcy5vcHRpb25zLmV2ZW50UGFzc3Rocm91Z2ggPSB0aGlzLm9wdGlvbnMuZXZlbnRQYXNzdGhy
b3VnaCA9PT0gdHJ1ZSA/ICd2ZXJ0aWNhbCcgOiB0aGlzLm9wdGlvbnMuZXZlbnRQYXNzdGhyb3Vn
aDsKKyAgdGhpcy5vcHRpb25zLnByZXZlbnREZWZhdWx0ID0gIXRoaXMub3B0aW9ucy5ldmVudFBh
c3N0aHJvdWdoICYmIHRoaXMub3B0aW9ucy5wcmV2ZW50RGVmYXVsdDsKIAotICAgIHRoYXQuYWJz
U3RhcnRYID0gdGhhdC54OyAgLy8gTmVlZGVkIGJ5IHNuYXAgdGhyZXNob2xkCi0gICAgdGhhdC5h
YnNTdGFydFkgPSB0aGF0Lnk7CisgIC8vIElmIHlvdSB3YW50IGV2ZW50UGFzc3Rocm91Z2ggSSBo
YXZlIHRvIGxvY2sgb25lIG9mIHRoZSBheGVzCisgIHRoaXMub3B0aW9ucy5zY3JvbGxZID0gdGhp
cy5vcHRpb25zLmV2ZW50UGFzc3Rocm91Z2ggPT0gJ3ZlcnRpY2FsJyA/IGZhbHNlIDogdGhpcy5v
cHRpb25zLnNjcm9sbFk7CisgIHRoaXMub3B0aW9ucy5zY3JvbGxYID0gdGhpcy5vcHRpb25zLmV2
ZW50UGFzc3Rocm91Z2ggPT0gJ2hvcml6b250YWwnID8gZmFsc2UgOiB0aGlzLm9wdGlvbnMuc2Ny
b2xsWDsKIAotICAgIHRoYXQuc3RhcnRYID0gdGhhdC54OwotICAgIHRoYXQuc3RhcnRZID0gdGhh
dC55OwotICAgIHRoYXQucG9pbnRYID0gcG9pbnQucGFnZVg7Ci0gICAgdGhhdC5wb2ludFkgPSBw
b2ludC5wYWdlWTsKKyAgLy8gV2l0aCBldmVudFBhc3N0aHJvdWdoIHdlIGFsc28gbmVlZCBsb2Nr
RGlyZWN0aW9uIG1lY2hhbmlzbQorICB0aGlzLm9wdGlvbnMuZnJlZVNjcm9sbCA9IHRoaXMub3B0
aW9ucy5mcmVlU2Nyb2xsICYmICF0aGlzLm9wdGlvbnMuZXZlbnRQYXNzdGhyb3VnaDsKKyAgdGhp
cy5vcHRpb25zLmRpcmVjdGlvbkxvY2tUaHJlc2hvbGQgPSB0aGlzLm9wdGlvbnMuZXZlbnRQYXNz
dGhyb3VnaCA/IDAgOiB0aGlzLm9wdGlvbnMuZGlyZWN0aW9uTG9ja1RocmVzaG9sZDsKIAotICAg
IHRoYXQuc3RhcnRUaW1lID0gZS50aW1lU3RhbXAgfHwgRGF0ZS5ub3coKTsKKyAgdGhpcy5vcHRp
b25zLmJvdW5jZUVhc2luZyA9IHR5cGVvZiB0aGlzLm9wdGlvbnMuYm91bmNlRWFzaW5nID09ICdz
dHJpbmcnID8gdXRpbHMuZWFzZVt0aGlzLm9wdGlvbnMuYm91bmNlRWFzaW5nXSB8fCB1dGlscy5l
YXNlLmNpcmN1bGFyIDogdGhpcy5vcHRpb25zLmJvdW5jZUVhc2luZzsKIAotICAgIGlmICh0aGF0
Lm9wdGlvbnMub25TY3JvbGxTdGFydCkgdGhhdC5vcHRpb25zLm9uU2Nyb2xsU3RhcnQuY2FsbCh0
aGF0LCBlKTsKKyAgdGhpcy5vcHRpb25zLnJlc2l6ZVBvbGxpbmcgPSB0aGlzLm9wdGlvbnMucmVz
aXplUG9sbGluZyA9PT0gdW5kZWZpbmVkID8gNjAgOiB0aGlzLm9wdGlvbnMucmVzaXplUG9sbGlu
ZzsKIAotICAgIHRoYXQuX2JpbmQoTU9WRV9FVik7Ci0gICAgdGhhdC5fYmluZChFTkRfRVYpOwot
ICAgIHRoYXQuX2JpbmQoQ0FOQ0VMX0VWKTsKLSAgfSwKLSAgCi0gIF9tb3ZlOiBmdW5jdGlvbiAo
ZSkgewotICAgIHZhciB0aGF0ID0gdGhpcywKLSAgICAgIHBvaW50ID0gaGFzVG91Y2ggPyBlLnRv
dWNoZXNbMF0gOiBlLAotICAgICAgZGVsdGFYID0gcG9pbnQucGFnZVggLSB0aGF0LnBvaW50WCwK
LSAgICAgIGRlbHRhWSA9IHBvaW50LnBhZ2VZIC0gdGhhdC5wb2ludFksCi0gICAgICBuZXdYID0g
dGhhdC54ICsgZGVsdGFYLAotICAgICAgbmV3WSA9IHRoYXQueSArIGRlbHRhWSwKLSAgICAgIGMx
LCBjMiwgc2NhbGUsCi0gICAgICB0aW1lc3RhbXAgPSBlLnRpbWVTdGFtcCB8fCBEYXRlLm5vdygp
OworICBpZiAoIHRoaXMub3B0aW9ucy50YXAgPT09IHRydWUgKSB7CisgICAgdGhpcy5vcHRpb25z
LnRhcCA9ICd0YXAnOworICB9CiAKLSAgICBpZiAodGhhdC5vcHRpb25zLm9uQmVmb3JlU2Nyb2xs
TW92ZSkgdGhhdC5vcHRpb25zLm9uQmVmb3JlU2Nyb2xsTW92ZS5jYWxsKHRoYXQsIGUpOworICBp
ZiAoIHRoaXMub3B0aW9ucy5zaHJpbmtTY3JvbGxiYXJzID09ICdzY2FsZScgKSB7CisgICAgdGhp
cy5vcHRpb25zLnVzZVRyYW5zaXRpb24gPSBmYWxzZTsKKyAgfQogCi0gICAgLy8gWm9vbQotICAg
IGlmICh0aGF0Lm9wdGlvbnMuem9vbSAmJiBoYXNUb3VjaCAmJiBlLnRvdWNoZXMubGVuZ3RoID4g
MSkgewotICAgICAgYzEgPSBtLmFicyhlLnRvdWNoZXNbMF0ucGFnZVggLSBlLnRvdWNoZXNbMV0u
cGFnZVgpOwotICAgICAgYzIgPSBtLmFicyhlLnRvdWNoZXNbMF0ucGFnZVkgLSBlLnRvdWNoZXNb
MV0ucGFnZVkpOwotICAgICAgdGhhdC50b3VjaGVzRGlzdCA9IG0uc3FydChjMSpjMStjMipjMik7
CisgIHRoaXMub3B0aW9ucy5pbnZlcnRXaGVlbERpcmVjdGlvbiA9IHRoaXMub3B0aW9ucy5pbnZl
cnRXaGVlbERpcmVjdGlvbiA/IC0xIDogMTsKIAotICAgICAgdGhhdC56b29tZWQgPSB0cnVlOwor
Ly8gSU5TRVJUIFBPSU5UOiBOT1JNQUxJWkFUSU9OCiAKLSAgICAgIHNjYWxlID0gMSAvIHRoYXQu
dG91Y2hlc0Rpc3RTdGFydCAqIHRoYXQudG91Y2hlc0Rpc3QgKiB0aGlzLnNjYWxlOworICAvLyBT
b21lIGRlZmF1bHRzICAKKyAgdGhpcy54ID0gMDsKKyAgdGhpcy55ID0gMDsKKyAgdGhpcy5kaXJl
Y3Rpb25YID0gMDsKKyAgdGhpcy5kaXJlY3Rpb25ZID0gMDsKKyAgdGhpcy5fZXZlbnRzID0ge307
CiAKLSAgICAgIGlmIChzY2FsZSA8IHRoYXQub3B0aW9ucy56b29tTWluKSBzY2FsZSA9IDAuNSAq
IHRoYXQub3B0aW9ucy56b29tTWluICogTWF0aC5wb3coMi4wLCBzY2FsZSAvIHRoYXQub3B0aW9u
cy56b29tTWluKTsKLSAgICAgIGVsc2UgaWYgKHNjYWxlID4gdGhhdC5vcHRpb25zLnpvb21NYXgp
IHNjYWxlID0gMi4wICogdGhhdC5vcHRpb25zLnpvb21NYXggKiBNYXRoLnBvdygwLjUsIHRoYXQu
b3B0aW9ucy56b29tTWF4IC8gc2NhbGUpOworLy8gSU5TRVJUIFBPSU5UOiBERUZBVUxUUwogCi0g
ICAgICB0aGF0Lmxhc3RTY2FsZSA9IHNjYWxlIC8gdGhpcy5zY2FsZTsKKyAgdGhpcy5faW5pdCgp
OworICB0aGlzLnJlZnJlc2goKTsKIAotICAgICAgbmV3WCA9IHRoaXMub3JpZ2luWCAtIHRoaXMu
b3JpZ2luWCAqIHRoYXQubGFzdFNjYWxlICsgdGhpcy54LAotICAgICAgbmV3WSA9IHRoaXMub3Jp
Z2luWSAtIHRoaXMub3JpZ2luWSAqIHRoYXQubGFzdFNjYWxlICsgdGhpcy55OworICB0aGlzLnNj
cm9sbFRvKHRoaXMub3B0aW9ucy5zdGFydFgsIHRoaXMub3B0aW9ucy5zdGFydFkpOworICB0aGlz
LmVuYWJsZSgpOworfQogCi0gICAgICB0aGlzLnNjcm9sbGVyLnN0eWxlW3ZlbmRvciArICdUcmFu
c2Zvcm0nXSA9IHRybk9wZW4gKyBuZXdYICsgJ3B4LCcgKyBuZXdZICsgJ3B4JyArIHRybkNsb3Nl
ICsgJyBzY2FsZSgnICsgc2NhbGUgKyAnKSc7CitJU2Nyb2xsLnByb3RvdHlwZSA9IHsKKyAgdmVy
c2lvbjogJzUuMS4yJywKIAotICAgICAgaWYgKHRoYXQub3B0aW9ucy5vblpvb20pIHRoYXQub3B0
aW9ucy5vblpvb20uY2FsbCh0aGF0LCBlKTsKLSAgICAgIHJldHVybjsKKyAgX2luaXQ6IGZ1bmN0
aW9uICgpIHsKKyAgICB0aGlzLl9pbml0RXZlbnRzKCk7CisKKyAgICBpZiAoIHRoaXMub3B0aW9u
cy5zY3JvbGxiYXJzIHx8IHRoaXMub3B0aW9ucy5pbmRpY2F0b3JzICkgeworICAgICAgdGhpcy5f
aW5pdEluZGljYXRvcnMoKTsKICAgICB9CiAKLSAgICB0aGF0LnBvaW50WCA9IHBvaW50LnBhZ2VY
OwotICAgIHRoYXQucG9pbnRZID0gcG9pbnQucGFnZVk7CisgICAgaWYgKCB0aGlzLm9wdGlvbnMu
bW91c2VXaGVlbCApIHsKKyAgICAgIHRoaXMuX2luaXRXaGVlbCgpOworICAgIH0KIAotICAgIC8v
IFNsb3cgZG93biBpZiBvdXRzaWRlIG9mIHRoZSBib3VuZGFyaWVzCi0gICAgaWYgKG5ld1ggPiAw
IHx8IG5ld1ggPCB0aGF0Lm1heFNjcm9sbFgpIHsKLSAgICAgIG5ld1ggPSB0aGF0Lm9wdGlvbnMu
Ym91bmNlID8gdGhhdC54ICsgKGRlbHRhWCAvIDIpIDogbmV3WCA+PSAwIHx8IHRoYXQubWF4U2Ny
b2xsWCA+PSAwID8gMCA6IHRoYXQubWF4U2Nyb2xsWDsKKyAgICBpZiAoIHRoaXMub3B0aW9ucy5z
bmFwICkgeworICAgICAgdGhpcy5faW5pdFNuYXAoKTsKICAgICB9Ci0gICAgaWYgKG5ld1kgPiB0
aGF0Lm1pblNjcm9sbFkgfHwgbmV3WSA8IHRoYXQubWF4U2Nyb2xsWSkgeyAKLSAgICAgIG5ld1kg
PSB0aGF0Lm9wdGlvbnMuYm91bmNlID8gdGhhdC55ICsgKGRlbHRhWSAvIDIpIDogbmV3WSA+PSB0
aGF0Lm1pblNjcm9sbFkgfHwgdGhhdC5tYXhTY3JvbGxZID49IDAgPyB0aGF0Lm1pblNjcm9sbFkg
OiB0aGF0Lm1heFNjcm9sbFk7CisKKyAgICBpZiAoIHRoaXMub3B0aW9ucy5rZXlCaW5kaW5ncyAp
IHsKKyAgICAgIHRoaXMuX2luaXRLZXlzKCk7CiAgICAgfQogCi0gICAgaWYgKHRoYXQuYWJzRGlz
dFggPCA2ICYmIHRoYXQuYWJzRGlzdFkgPCA2KSB7Ci0gICAgICB0aGF0LmRpc3RYICs9IGRlbHRh
WDsKLSAgICAgIHRoYXQuZGlzdFkgKz0gZGVsdGFZOwotICAgICAgdGhhdC5hYnNEaXN0WCA9IG0u
YWJzKHRoYXQuZGlzdFgpOwotICAgICAgdGhhdC5hYnNEaXN0WSA9IG0uYWJzKHRoYXQuZGlzdFkp
OworLy8gSU5TRVJUIFBPSU5UOiBfaW5pdAorCisgIH0sCisKKyAgZGVzdHJveTogZnVuY3Rpb24g
KCkgeworICAgIHRoaXMuX2luaXRFdmVudHModHJ1ZSk7CisKKyAgICB0aGlzLl9leGVjRXZlbnQo
J2Rlc3Ryb3knKTsKKyAgfSwKIAorICBfdHJhbnNpdGlvbkVuZDogZnVuY3Rpb24gKGUpIHsKKyAg
ICBpZiAoIGUudGFyZ2V0ICE9IHRoaXMuc2Nyb2xsZXIgfHwgIXRoaXMuaXNJblRyYW5zaXRpb24g
KSB7CiAgICAgICByZXR1cm47CiAgICAgfQogCi0gICAgLy8gTG9jayBkaXJlY3Rpb24KLSAgICBp
ZiAodGhhdC5vcHRpb25zLmxvY2tEaXJlY3Rpb24pIHsKLSAgICAgIGlmICh0aGF0LmFic0Rpc3RY
ID4gdGhhdC5hYnNEaXN0WSArIDUpIHsKLSAgICAgICAgbmV3WSA9IHRoYXQueTsKLSAgICAgICAg
ZGVsdGFZID0gMDsKLSAgICAgIH0gZWxzZSBpZiAodGhhdC5hYnNEaXN0WSA+IHRoYXQuYWJzRGlz
dFggKyA1KSB7Ci0gICAgICAgIG5ld1ggPSB0aGF0Lng7Ci0gICAgICAgIGRlbHRhWCA9IDA7Cisg
ICAgdGhpcy5fdHJhbnNpdGlvblRpbWUoKTsKKyAgICBpZiAoICF0aGlzLnJlc2V0UG9zaXRpb24o
dGhpcy5vcHRpb25zLmJvdW5jZVRpbWUpICkgeworICAgICAgdGhpcy5pc0luVHJhbnNpdGlvbiA9
IGZhbHNlOworICAgICAgdGhpcy5fZXhlY0V2ZW50KCdzY3JvbGxFbmQnKTsKKyAgICB9CisgIH0s
CisKKyAgX3N0YXJ0OiBmdW5jdGlvbiAoZSkgeworICAgIC8vIFJlYWN0IHRvIGxlZnQgbW91c2Ug
YnV0dG9uIG9ubHkKKyAgICBpZiAoIHV0aWxzLmV2ZW50VHlwZVtlLnR5cGVdICE9IDEgKSB7Cisg
ICAgICBpZiAoIGUuYnV0dG9uICE9PSAwICkgeworICAgICAgICByZXR1cm47CiAgICAgICB9CiAg
ICAgfQogCi0gICAgdGhhdC5tb3ZlZCA9IHRydWU7Ci0gICAgdGhhdC5fcG9zKG5ld1gsIG5ld1kp
OwotICAgIHRoYXQuZGlyWCA9IGRlbHRhWCA+IDAgPyAtMSA6IGRlbHRhWCA8IDAgPyAxIDogMDsK
LSAgICB0aGF0LmRpclkgPSBkZWx0YVkgPiAwID8gLTEgOiBkZWx0YVkgPCAwID8gMSA6IDA7Cisg
ICAgaWYgKCAhdGhpcy5lbmFibGVkIHx8ICh0aGlzLmluaXRpYXRlZCAmJiB1dGlscy5ldmVudFR5
cGVbZS50eXBlXSAhPT0gdGhpcy5pbml0aWF0ZWQpICkgeworICAgICAgcmV0dXJuOworICAgIH0K
KworICAgIGlmICggdGhpcy5vcHRpb25zLnByZXZlbnREZWZhdWx0ICYmICF1dGlscy5pc0JhZEFu
ZHJvaWQgJiYgIXV0aWxzLnByZXZlbnREZWZhdWx0RXhjZXB0aW9uKGUudGFyZ2V0LCB0aGlzLm9w
dGlvbnMucHJldmVudERlZmF1bHRFeGNlcHRpb24pICkgeworICAgICAgZS5wcmV2ZW50RGVmYXVs
dCgpOworICAgIH0KIAotICAgIGlmICh0aW1lc3RhbXAgLSB0aGF0LnN0YXJ0VGltZSA+IDMwMCkg
ewotICAgICAgdGhhdC5zdGFydFRpbWUgPSB0aW1lc3RhbXA7Ci0gICAgICB0aGF0LnN0YXJ0WCA9
IHRoYXQueDsKLSAgICAgIHRoYXQuc3RhcnRZID0gdGhhdC55OworICAgIHZhciBwb2ludCA9IGUu
dG91Y2hlcyA/IGUudG91Y2hlc1swXSA6IGUsCisgICAgICBwb3M7CisKKyAgICB0aGlzLmluaXRp
YXRlZCAgPSB1dGlscy5ldmVudFR5cGVbZS50eXBlXTsKKyAgICB0aGlzLm1vdmVkICAgID0gZmFs
c2U7CisgICAgdGhpcy5kaXN0WCAgICA9IDA7CisgICAgdGhpcy5kaXN0WSAgICA9IDA7CisgICAg
dGhpcy5kaXJlY3Rpb25YID0gMDsKKyAgICB0aGlzLmRpcmVjdGlvblkgPSAwOworICAgIHRoaXMu
ZGlyZWN0aW9uTG9ja2VkID0gMDsKKworICAgIHRoaXMuX3RyYW5zaXRpb25UaW1lKCk7CisKKyAg
ICB0aGlzLnN0YXJ0VGltZSA9IHV0aWxzLmdldFRpbWUoKTsKKworICAgIGlmICggdGhpcy5vcHRp
b25zLnVzZVRyYW5zaXRpb24gJiYgdGhpcy5pc0luVHJhbnNpdGlvbiApIHsKKyAgICAgIHRoaXMu
aXNJblRyYW5zaXRpb24gPSBmYWxzZTsKKyAgICAgIHBvcyA9IHRoaXMuZ2V0Q29tcHV0ZWRQb3Np
dGlvbigpOworICAgICAgdGhpcy5fdHJhbnNsYXRlKE1hdGgucm91bmQocG9zLngpLCBNYXRoLnJv
dW5kKHBvcy55KSk7CisgICAgICB0aGlzLl9leGVjRXZlbnQoJ3Njcm9sbEVuZCcpOworICAgIH0g
ZWxzZSBpZiAoICF0aGlzLm9wdGlvbnMudXNlVHJhbnNpdGlvbiAmJiB0aGlzLmlzQW5pbWF0aW5n
ICkgeworICAgICAgdGhpcy5pc0FuaW1hdGluZyA9IGZhbHNlOworICAgICAgdGhpcy5fZXhlY0V2
ZW50KCdzY3JvbGxFbmQnKTsKICAgICB9Ci0gICAgCi0gICAgaWYgKHRoYXQub3B0aW9ucy5vblNj
cm9sbE1vdmUpIHRoYXQub3B0aW9ucy5vblNjcm9sbE1vdmUuY2FsbCh0aGF0LCBlKTsKKworICAg
IHRoaXMuc3RhcnRYICAgID0gdGhpcy54OworICAgIHRoaXMuc3RhcnRZICAgID0gdGhpcy55Owor
ICAgIHRoaXMuYWJzU3RhcnRYID0gdGhpcy54OworICAgIHRoaXMuYWJzU3RhcnRZID0gdGhpcy55
OworICAgIHRoaXMucG9pbnRYICAgID0gcG9pbnQucGFnZVg7CisgICAgdGhpcy5wb2ludFkgICAg
PSBwb2ludC5wYWdlWTsKKworICAgIHRoaXMuX2V4ZWNFdmVudCgnYmVmb3JlU2Nyb2xsU3RhcnQn
KTsKICAgfSwKLSAgCi0gIF9lbmQ6IGZ1bmN0aW9uIChlKSB7Ci0gICAgaWYgKGhhc1RvdWNoICYm
IGUudG91Y2hlcy5sZW5ndGggIT0gMCkgcmV0dXJuOwogCi0gICAgdmFyIHRoYXQgPSB0aGlzLAot
ICAgICAgcG9pbnQgPSBoYXNUb3VjaCA/IGUuY2hhbmdlZFRvdWNoZXNbMF0gOiBlLAotICAgICAg
dGFyZ2V0LCBldiwKLSAgICAgIG1vbWVudHVtWCA9IHsgZGlzdDowLCB0aW1lOjAgfSwKLSAgICAg
IG1vbWVudHVtWSA9IHsgZGlzdDowLCB0aW1lOjAgfSwKLSAgICAgIGR1cmF0aW9uID0gKGUudGlt
ZVN0YW1wIHx8IERhdGUubm93KCkpIC0gdGhhdC5zdGFydFRpbWUsCi0gICAgICBuZXdQb3NYID0g
dGhhdC54LAotICAgICAgbmV3UG9zWSA9IHRoYXQueSwKLSAgICAgIGRpc3RYLCBkaXN0WSwKLSAg
ICAgIG5ld0R1cmF0aW9uLAotICAgICAgc25hcCwKLSAgICAgIHNjYWxlOwotCi0gICAgdGhhdC5f
dW5iaW5kKE1PVkVfRVYpOwotICAgIHRoYXQuX3VuYmluZChFTkRfRVYpOwotICAgIHRoYXQuX3Vu
YmluZChDQU5DRUxfRVYpOwotCi0gICAgaWYgKHRoYXQub3B0aW9ucy5vbkJlZm9yZVNjcm9sbEVu
ZCkgdGhhdC5vcHRpb25zLm9uQmVmb3JlU2Nyb2xsRW5kLmNhbGwodGhhdCwgZSk7Ci0KLSAgICBp
ZiAodGhhdC56b29tZWQpIHsKLSAgICAgIHNjYWxlID0gdGhhdC5zY2FsZSAqIHRoYXQubGFzdFNj
YWxlOwotICAgICAgc2NhbGUgPSBNYXRoLm1heCh0aGF0Lm9wdGlvbnMuem9vbU1pbiwgc2NhbGUp
OwotICAgICAgc2NhbGUgPSBNYXRoLm1pbih0aGF0Lm9wdGlvbnMuem9vbU1heCwgc2NhbGUpOwot
ICAgICAgdGhhdC5sYXN0U2NhbGUgPSBzY2FsZSAvIHRoYXQuc2NhbGU7Ci0gICAgICB0aGF0LnNj
YWxlID0gc2NhbGU7Ci0KLSAgICAgIHRoYXQueCA9IHRoYXQub3JpZ2luWCAtIHRoYXQub3JpZ2lu
WCAqIHRoYXQubGFzdFNjYWxlICsgdGhhdC54OwotICAgICAgdGhhdC55ID0gdGhhdC5vcmlnaW5Z
IC0gdGhhdC5vcmlnaW5ZICogdGhhdC5sYXN0U2NhbGUgKyB0aGF0Lnk7Ci0gICAgICAKLSAgICAg
IHRoYXQuc2Nyb2xsZXIuc3R5bGVbdmVuZG9yICsgJ1RyYW5zaXRpb25EdXJhdGlvbiddID0gJzIw
MG1zJzsKLSAgICAgIHRoYXQuc2Nyb2xsZXIuc3R5bGVbdmVuZG9yICsgJ1RyYW5zZm9ybSddID0g
dHJuT3BlbiArIHRoYXQueCArICdweCwnICsgdGhhdC55ICsgJ3B4JyArIHRybkNsb3NlICsgJyBz
Y2FsZSgnICsgdGhhdC5zY2FsZSArICcpJzsKLSAgICAgIAotICAgICAgdGhhdC56b29tZWQgPSBm
YWxzZTsKLSAgICAgIHRoYXQucmVmcmVzaCgpOworICBfbW92ZTogZnVuY3Rpb24gKGUpIHsKKyAg
ICBpZiAoICF0aGlzLmVuYWJsZWQgfHwgdXRpbHMuZXZlbnRUeXBlW2UudHlwZV0gIT09IHRoaXMu
aW5pdGlhdGVkICkgeworICAgICAgcmV0dXJuOworICAgIH0KKworICAgIGlmICggdGhpcy5vcHRp
b25zLnByZXZlbnREZWZhdWx0ICkgeyAgLy8gaW5jcmVhc2VzIHBlcmZvcm1hbmNlIG9uIEFuZHJv
aWQ/IFRPRE86IGNoZWNrIQorICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOworICAgIH0KIAotICAg
ICAgaWYgKHRoYXQub3B0aW9ucy5vblpvb21FbmQpIHRoYXQub3B0aW9ucy5vblpvb21FbmQuY2Fs
bCh0aGF0LCBlKTsKKyAgICB2YXIgcG9pbnQgICA9IGUudG91Y2hlcyA/IGUudG91Y2hlc1swXSA6
IGUsCisgICAgICBkZWx0YVggICAgPSBwb2ludC5wYWdlWCAtIHRoaXMucG9pbnRYLAorICAgICAg
ZGVsdGFZICAgID0gcG9pbnQucGFnZVkgLSB0aGlzLnBvaW50WSwKKyAgICAgIHRpbWVzdGFtcCA9
IHV0aWxzLmdldFRpbWUoKSwKKyAgICAgIG5ld1gsIG5ld1ksCisgICAgICBhYnNEaXN0WCwgYWJz
RGlzdFk7CisKKyAgICB0aGlzLnBvaW50WCAgID0gcG9pbnQucGFnZVg7CisgICAgdGhpcy5wb2lu
dFkgICA9IHBvaW50LnBhZ2VZOworCisgICAgdGhpcy5kaXN0WCAgICArPSBkZWx0YVg7CisgICAg
dGhpcy5kaXN0WSAgICArPSBkZWx0YVk7CisgICAgYWJzRGlzdFggICAgPSBNYXRoLmFicyh0aGlz
LmRpc3RYKTsKKyAgICBhYnNEaXN0WSAgICA9IE1hdGguYWJzKHRoaXMuZGlzdFkpOworCisgICAg
Ly8gV2UgbmVlZCB0byBtb3ZlIGF0IGxlYXN0IDEwIHBpeGVscyBmb3IgdGhlIHNjcm9sbGluZyB0
byBpbml0aWF0ZQorICAgIGlmICggdGltZXN0YW1wIC0gdGhpcy5lbmRUaW1lID4gMzAwICYmIChh
YnNEaXN0WCA8IDEwICYmIGFic0Rpc3RZIDwgMTApICkgewogICAgICAgcmV0dXJuOwogICAgIH0K
IAotICAgIGlmICghdGhhdC5tb3ZlZCkgewotICAgICAgCi0gICAgICAgaWYgKGhhc1RvdWNoKSB7
Ci0gICAgICAgIAotICAgICAgICBpZiAodGhhdC5kb3VibGVUYXBUaW1lciAmJiB0aGF0Lm9wdGlv
bnMuem9vbSkgewotICAgICAgICAgIC8vIERvdWJsZSB0YXBwZWQKLSAgICAgICAgICBjbGVhclRp
bWVvdXQodGhhdC5kb3VibGVUYXBUaW1lcik7Ci0gICAgICAgICAgdGhhdC5kb3VibGVUYXBUaW1l
ciA9IG51bGw7Ci0gICAgICAgICAgaWYgKHRoYXQub3B0aW9ucy5vblpvb21TdGFydCkgdGhhdC5v
cHRpb25zLm9uWm9vbVN0YXJ0LmNhbGwodGhhdCwgZSk7Ci0gICAgICAgICAgdGhhdC56b29tKHRo
YXQucG9pbnRYLCB0aGF0LnBvaW50WSwgdGhhdC5zY2FsZSA9PSAxID8gdGhhdC5vcHRpb25zLmRv
dWJsZVRhcFpvb20gOiAxKTsKLSAgICAgICAgICBpZiAodGhhdC5vcHRpb25zLm9uWm9vbUVuZCkg
ewotICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKLSAgICAgICAgICAgICAgdGhh
dC5vcHRpb25zLm9uWm9vbUVuZC5jYWxsKHRoYXQsIGUpOwotICAgICAgICAgICAgfSwgMjAwKTsg
Ly8gMjAwIGlzIGRlZmF1bHQgem9vbSBkdXJhdGlvbgotICAgICAgICAgIH0KLSAgICAgICAgfSBl
bHNlIHsKLSAgICAgICAgICB0aGF0LmRvdWJsZVRhcFRpbWVyID0gc2V0VGltZW91dChmdW5jdGlv
biAoKSB7Ci0gICAgICAgICAgICB0aGF0LmRvdWJsZVRhcFRpbWVyID0gbnVsbDsKLQotICAgICAg
ICAgICAgLy8gRmluZCB0aGUgbGFzdCB0b3VjaGVkIGVsZW1lbnQKLSAgICAgICAgICAgIHRhcmdl
dCA9IHBvaW50LnRhcmdldDsKLSAgICAgICAgICAgIHdoaWxlICh0YXJnZXQubm9kZVR5cGUgIT0g
MSkgdGFyZ2V0ID0gdGFyZ2V0LnBhcmVudE5vZGU7Ci0KLSAgICAgICAgICAgIGlmICh0YXJnZXQu
dGFnTmFtZSAhPSAnU0VMRUNUJyAmJiB0YXJnZXQudGFnTmFtZSAhPSAnSU5QVVQnICYmIHRhcmdl
dC50YWdOYW1lICE9ICdURVhUQVJFQScpIHsKLSAgICAgICAgICAgICAgZXYgPSBkb2N1bWVudC5j
cmVhdGVFdmVudCgnTW91c2VFdmVudHMnKTsKLSAgICAgICAgICAgICAgZXYuaW5pdE1vdXNlRXZl
bnQoJ2NsaWNrJywgdHJ1ZSwgdHJ1ZSwgZS52aWV3LCAxLAotICAgICAgICAgICAgICAgIHBvaW50
LnNjcmVlblgsIHBvaW50LnNjcmVlblksIHBvaW50LmNsaWVudFgsIHBvaW50LmNsaWVudFksCi0g
ICAgICAgICAgICAgICAgZS5jdHJsS2V5LCBlLmFsdEtleSwgZS5zaGlmdEtleSwgZS5tZXRhS2V5
LAotICAgICAgICAgICAgICAgIDAsIG51bGwpOwotICAgICAgICAgICAgICBldi5fZmFrZSA9IHRy
dWU7Ci0gICAgICAgICAgICAgIC8vdGFyZ2V0LmRpc3BhdGNoRXZlbnQoZXYpOwotICAgICAgICAg
ICAgfQotICAgICAgICAgIH0sIHRoYXQub3B0aW9ucy56b29tID8gMjUwIDogMCk7Ci0gICAgICAg
IH0KKyAgICAvLyBJZiB5b3UgYXJlIHNjcm9sbGluZyBpbiBvbmUgZGlyZWN0aW9uIGxvY2sgdGhl
IG90aGVyCisgICAgaWYgKCAhdGhpcy5kaXJlY3Rpb25Mb2NrZWQgJiYgIXRoaXMub3B0aW9ucy5m
cmVlU2Nyb2xsICkgeworICAgICAgaWYgKCBhYnNEaXN0WCA+IGFic0Rpc3RZICsgdGhpcy5vcHRp
b25zLmRpcmVjdGlvbkxvY2tUaHJlc2hvbGQgKSB7CisgICAgICAgIHRoaXMuZGlyZWN0aW9uTG9j
a2VkID0gJ2gnOyAgIC8vIGxvY2sgaG9yaXpvbnRhbGx5CisgICAgICB9IGVsc2UgaWYgKCBhYnNE
aXN0WSA+PSBhYnNEaXN0WCArIHRoaXMub3B0aW9ucy5kaXJlY3Rpb25Mb2NrVGhyZXNob2xkICkg
eworICAgICAgICB0aGlzLmRpcmVjdGlvbkxvY2tlZCA9ICd2JzsgICAvLyBsb2NrIHZlcnRpY2Fs
bHkKKyAgICAgIH0gZWxzZSB7CisgICAgICAgIHRoaXMuZGlyZWN0aW9uTG9ja2VkID0gJ24nOyAg
IC8vIG5vIGxvY2sKICAgICAgIH0KKyAgICB9CiAKLSAgICAgIHRoYXQuX3Jlc2V0UG9zKDIwMCk7
CisgICAgaWYgKCB0aGlzLmRpcmVjdGlvbkxvY2tlZCA9PSAnaCcgKSB7CisgICAgICBpZiAoIHRo
aXMub3B0aW9ucy5ldmVudFBhc3N0aHJvdWdoID09ICd2ZXJ0aWNhbCcgKSB7CisgICAgICAgIGUu
cHJldmVudERlZmF1bHQoKTsKKyAgICAgIH0gZWxzZSBpZiAoIHRoaXMub3B0aW9ucy5ldmVudFBh
c3N0aHJvdWdoID09ICdob3Jpem9udGFsJyApIHsKKyAgICAgICAgdGhpcy5pbml0aWF0ZWQgPSBm
YWxzZTsKKyAgICAgICAgcmV0dXJuOworICAgICAgfQogCi0gICAgICBpZiAodGhhdC5vcHRpb25z
Lm9uVG91Y2hFbmQpIHRoYXQub3B0aW9ucy5vblRvdWNoRW5kLmNhbGwodGhhdCwgZSk7Ci0gICAg
ICByZXR1cm47CisgICAgICBkZWx0YVkgPSAwOworICAgIH0gZWxzZSBpZiAoIHRoaXMuZGlyZWN0
aW9uTG9ja2VkID09ICd2JyApIHsKKyAgICAgIGlmICggdGhpcy5vcHRpb25zLmV2ZW50UGFzc3Ro
cm91Z2ggPT0gJ2hvcml6b250YWwnICkgeworICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7Cisg
ICAgICB9IGVsc2UgaWYgKCB0aGlzLm9wdGlvbnMuZXZlbnRQYXNzdGhyb3VnaCA9PSAndmVydGlj
YWwnICkgeworICAgICAgICB0aGlzLmluaXRpYXRlZCA9IGZhbHNlOworICAgICAgICByZXR1cm47
CisgICAgICB9CisKKyAgICAgIGRlbHRhWCA9IDA7CiAgICAgfQogCi0gICAgaWYgKGR1cmF0aW9u
IDwgMzAwICYmIHRoYXQub3B0aW9ucy5tb21lbnR1bSkgewotICAgICAgbW9tZW50dW1YID0gbmV3
UG9zWCA/IHRoYXQuX21vbWVudHVtKG5ld1Bvc1ggLSB0aGF0LnN0YXJ0WCwgZHVyYXRpb24sIC10
aGF0LngsIHRoYXQuc2Nyb2xsZXJXIC0gdGhhdC53cmFwcGVyVyArIHRoYXQueCwgdGhhdC5vcHRp
b25zLmJvdW5jZSA/IHRoYXQud3JhcHBlclcgOiAwKSA6IG1vbWVudHVtWDsKLSAgICAgIG1vbWVu
dHVtWSA9IG5ld1Bvc1kgPyB0aGF0Ll9tb21lbnR1bShuZXdQb3NZIC0gdGhhdC5zdGFydFksIGR1
cmF0aW9uLCAtdGhhdC55LCAodGhhdC5tYXhTY3JvbGxZIDwgMCA/IHRoYXQuc2Nyb2xsZXJIIC0g
dGhhdC53cmFwcGVySCArIHRoYXQueSAtIHRoYXQubWluU2Nyb2xsWSA6IDApLCB0aGF0Lm9wdGlv
bnMuYm91bmNlID8gdGhhdC53cmFwcGVySCA6IDApIDogbW9tZW50dW1ZOworICAgIGRlbHRhWCA9
IHRoaXMuaGFzSG9yaXpvbnRhbFNjcm9sbCA/IGRlbHRhWCA6IDA7CisgICAgZGVsdGFZID0gdGhp
cy5oYXNWZXJ0aWNhbFNjcm9sbCA/IGRlbHRhWSA6IDA7CiAKLSAgICAgIG5ld1Bvc1ggPSB0aGF0
LnggKyBtb21lbnR1bVguZGlzdDsKLSAgICAgIG5ld1Bvc1kgPSB0aGF0LnkgKyBtb21lbnR1bVku
ZGlzdDsKKyAgICBuZXdYID0gdGhpcy54ICsgZGVsdGFYOworICAgIG5ld1kgPSB0aGlzLnkgKyBk
ZWx0YVk7CiAKLSAgICAgIGlmICgodGhhdC54ID4gMCAmJiBuZXdQb3NYID4gMCkgfHwgKHRoYXQu
eCA8IHRoYXQubWF4U2Nyb2xsWCAmJiBuZXdQb3NYIDwgdGhhdC5tYXhTY3JvbGxYKSkgbW9tZW50
dW1YID0geyBkaXN0OjAsIHRpbWU6MCB9OwotICAgICAgaWYgKCh0aGF0LnkgPiB0aGF0Lm1pblNj
cm9sbFkgJiYgbmV3UG9zWSA+IHRoYXQubWluU2Nyb2xsWSkgfHwgKHRoYXQueSA8IHRoYXQubWF4
U2Nyb2xsWSAmJiBuZXdQb3NZIDwgdGhhdC5tYXhTY3JvbGxZKSkgbW9tZW50dW1ZID0geyBkaXN0
OjAsIHRpbWU6MCB9OworICAgIC8vIFNsb3cgZG93biBpZiBvdXRzaWRlIG9mIHRoZSBib3VuZGFy
aWVzCisgICAgaWYgKCBuZXdYID4gMCB8fCBuZXdYIDwgdGhpcy5tYXhTY3JvbGxYICkgeworICAg
ICAgbmV3WCA9IHRoaXMub3B0aW9ucy5ib3VuY2UgPyB0aGlzLnggKyBkZWx0YVggLyAzIDogbmV3
WCA+IDAgPyAwIDogdGhpcy5tYXhTY3JvbGxYOworICAgIH0KKyAgICBpZiAoIG5ld1kgPiAwIHx8
IG5ld1kgPCB0aGlzLm1heFNjcm9sbFkgKSB7CisgICAgICBuZXdZID0gdGhpcy5vcHRpb25zLmJv
dW5jZSA/IHRoaXMueSArIGRlbHRhWSAvIDMgOiBuZXdZID4gMCA/IDAgOiB0aGlzLm1heFNjcm9s
bFk7CiAgICAgfQogCi0gICAgaWYgKG1vbWVudHVtWC5kaXN0IHx8IG1vbWVudHVtWS5kaXN0KSB7
Ci0gICAgICBuZXdEdXJhdGlvbiA9IG0ubWF4KG0ubWF4KG1vbWVudHVtWC50aW1lLCBtb21lbnR1
bVkudGltZSksIDEwKTsKKyAgICB0aGlzLmRpcmVjdGlvblggPSBkZWx0YVggPiAwID8gLTEgOiBk
ZWx0YVggPCAwID8gMSA6IDA7CisgICAgdGhpcy5kaXJlY3Rpb25ZID0gZGVsdGFZID4gMCA/IC0x
IDogZGVsdGFZIDwgMCA/IDEgOiAwOwogCi0gICAgICAvLyBEbyB3ZSBuZWVkIHRvIHNuYXA/Ci0g
ICAgICBpZiAodGhhdC5vcHRpb25zLnNuYXApIHsKLSAgICAgICAgZGlzdFggPSBuZXdQb3NYIC0g
dGhhdC5hYnNTdGFydFg7Ci0gICAgICAgIGRpc3RZID0gbmV3UG9zWSAtIHRoYXQuYWJzU3RhcnRZ
OwotICAgICAgICBpZiAobS5hYnMoZGlzdFgpIDwgdGhhdC5vcHRpb25zLnNuYXBUaHJlc2hvbGQg
JiYgbS5hYnMoZGlzdFkpIDwgdGhhdC5vcHRpb25zLnNuYXBUaHJlc2hvbGQpIHsgdGhhdC5zY3Jv
bGxUbyh0aGF0LmFic1N0YXJ0WCwgdGhhdC5hYnNTdGFydFksIDIwMCk7IH0KLSAgICAgICAgZWxz
ZSB7Ci0gICAgICAgICAgc25hcCA9IHRoYXQuX3NuYXAobmV3UG9zWCwgbmV3UG9zWSk7Ci0gICAg
ICAgICAgbmV3UG9zWCA9IHNuYXAueDsKLSAgICAgICAgICBuZXdQb3NZID0gc25hcC55OwotICAg
ICAgICAgIG5ld0R1cmF0aW9uID0gbS5tYXgoc25hcC50aW1lLCBuZXdEdXJhdGlvbik7Ci0gICAg
ICAgIH0KLSAgICAgIH0KKyAgICBpZiAoICF0aGlzLm1vdmVkICkgeworICAgICAgdGhpcy5fZXhl
Y0V2ZW50KCdzY3JvbGxTdGFydCcpOworICAgIH0KKworICAgIHRoaXMubW92ZWQgPSB0cnVlOwog
Ci0gICAgICB0aGF0LnNjcm9sbFRvKG1yb3VuZChuZXdQb3NYKSwgbXJvdW5kKG5ld1Bvc1kpLCBu
ZXdEdXJhdGlvbik7CisgICAgdGhpcy5fdHJhbnNsYXRlKG5ld1gsIG5ld1kpOwogCi0gICAgICBp
ZiAodGhhdC5vcHRpb25zLm9uVG91Y2hFbmQpIHRoYXQub3B0aW9ucy5vblRvdWNoRW5kLmNhbGwo
dGhhdCwgZSk7CisvKiBSRVBMQUNFIFNUQVJUOiBfbW92ZSAqLworCisgICAgaWYgKCB0aW1lc3Rh
bXAgLSB0aGlzLnN0YXJ0VGltZSA+IDMwMCApIHsKKyAgICAgIHRoaXMuc3RhcnRUaW1lID0gdGlt
ZXN0YW1wOworICAgICAgdGhpcy5zdGFydFggPSB0aGlzLng7CisgICAgICB0aGlzLnN0YXJ0WSA9
IHRoaXMueTsKKyAgICB9CisKKy8qIFJFUExBQ0UgRU5EOiBfbW92ZSAqLworCisgIH0sCisKKyAg
X2VuZDogZnVuY3Rpb24gKGUpIHsKKyAgICBkZWJ1Z2dlcgorICAgIGlmICggIXRoaXMuZW5hYmxl
ZCB8fCB1dGlscy5ldmVudFR5cGVbZS50eXBlXSAhPT0gdGhpcy5pbml0aWF0ZWQgKSB7CiAgICAg
ICByZXR1cm47CiAgICAgfQogCi0gICAgLy8gRG8gd2UgbmVlZCB0byBzbmFwPwotICAgIGlmICh0
aGF0Lm9wdGlvbnMuc25hcCkgewotICAgICAgZGlzdFggPSBuZXdQb3NYIC0gdGhhdC5hYnNTdGFy
dFg7Ci0gICAgICBkaXN0WSA9IG5ld1Bvc1kgLSB0aGF0LmFic1N0YXJ0WTsKLSAgICAgIGlmICht
LmFicyhkaXN0WCkgPCB0aGF0Lm9wdGlvbnMuc25hcFRocmVzaG9sZCAmJiBtLmFicyhkaXN0WSkg
PCB0aGF0Lm9wdGlvbnMuc25hcFRocmVzaG9sZCkgdGhhdC5zY3JvbGxUbyh0aGF0LmFic1N0YXJ0
WCwgdGhhdC5hYnNTdGFydFksIDIwMCk7Ci0gICAgICBlbHNlIHsKLSAgICAgICAgc25hcCA9IHRo
YXQuX3NuYXAodGhhdC54LCB0aGF0LnkpOwotICAgICAgICBpZiAoc25hcC54ICE9IHRoYXQueCB8
fCBzbmFwLnkgIT0gdGhhdC55KSB0aGF0LnNjcm9sbFRvKHNuYXAueCwgc25hcC55LCBzbmFwLnRp
bWUpOwotICAgICAgfQorICAgIGlmICggdGhpcy5vcHRpb25zLnByZXZlbnREZWZhdWx0ICYmICF1
dGlscy5wcmV2ZW50RGVmYXVsdEV4Y2VwdGlvbihlLnRhcmdldCwgdGhpcy5vcHRpb25zLnByZXZl
bnREZWZhdWx0RXhjZXB0aW9uKSApIHsKKyAgICAgIGUucHJldmVudERlZmF1bHQoKTsKKyAgICB9
CiAKLSAgICAgIGlmICh0aGF0Lm9wdGlvbnMub25Ub3VjaEVuZCkgdGhhdC5vcHRpb25zLm9uVG91
Y2hFbmQuY2FsbCh0aGF0LCBlKTsKKyAgICB2YXIgcG9pbnQgPSBlLmNoYW5nZWRUb3VjaGVzID8g
ZS5jaGFuZ2VkVG91Y2hlc1swXSA6IGUsCisgICAgICBtb21lbnR1bVgsCisgICAgICBtb21lbnR1
bVksCisgICAgICBkdXJhdGlvbiA9IHV0aWxzLmdldFRpbWUoKSAtIHRoaXMuc3RhcnRUaW1lLAor
ICAgICAgbmV3WCA9IE1hdGgucm91bmQodGhpcy54KSwKKyAgICAgIG5ld1kgPSBNYXRoLnJvdW5k
KHRoaXMueSksCisgICAgICBkaXN0YW5jZVggPSBNYXRoLmFicyhuZXdYIC0gdGhpcy5zdGFydFgp
LAorICAgICAgZGlzdGFuY2VZID0gTWF0aC5hYnMobmV3WSAtIHRoaXMuc3RhcnRZKSwKKyAgICAg
IHRpbWUgPSAwLAorICAgICAgZWFzaW5nID0gJyc7CisKKyAgICB0aGlzLmlzSW5UcmFuc2l0aW9u
ID0gMDsKKyAgICB0aGlzLmluaXRpYXRlZCA9IDA7CisgICAgdGhpcy5lbmRUaW1lID0gdXRpbHMu
Z2V0VGltZSgpOworCisgICAgLy8gcmVzZXQgaWYgd2UgYXJlIG91dHNpZGUgb2YgdGhlIGJvdW5k
YXJpZXMKKyAgICBpZiAoIHRoaXMucmVzZXRQb3NpdGlvbih0aGlzLm9wdGlvbnMuYm91bmNlVGlt
ZSkgKSB7CiAgICAgICByZXR1cm47CiAgICAgfQogCi0gICAgdGhhdC5fcmVzZXRQb3MoMjAwKTsK
LSAgICBpZiAodGhhdC5vcHRpb25zLm9uVG91Y2hFbmQpIHRoYXQub3B0aW9ucy5vblRvdWNoRW5k
LmNhbGwodGhhdCwgZSk7Ci0gIH0sCi0gIAotICBfcmVzZXRQb3M6IGZ1bmN0aW9uICh0aW1lKSB7
Ci0gICAgdmFyIHRoYXQgPSB0aGlzLAotICAgICAgcmVzZXRYID0gdGhhdC54ID49IDAgPyAwIDog
dGhhdC54IDwgdGhhdC5tYXhTY3JvbGxYID8gdGhhdC5tYXhTY3JvbGxYIDogdGhhdC54LAotICAg
ICAgcmVzZXRZID0gdGhhdC55ID49IHRoYXQubWluU2Nyb2xsWSB8fCB0aGF0Lm1heFNjcm9sbFkg
PiAwID8gdGhhdC5taW5TY3JvbGxZIDogdGhhdC55IDwgdGhhdC5tYXhTY3JvbGxZID8gdGhhdC5t
YXhTY3JvbGxZIDogdGhhdC55OworICAgIHRoaXMuc2Nyb2xsVG8obmV3WCwgbmV3WSk7ICAvLyBl
bnN1cmVzIHRoYXQgdGhlIGxhc3QgcG9zaXRpb24gaXMgcm91bmRlZAogCi0gICAgaWYgKHJlc2V0
WCA9PSB0aGF0LnggJiYgcmVzZXRZID09IHRoYXQueSkgewotICAgICAgaWYgKHRoYXQubW92ZWQp
IHsKLSAgICAgICAgdGhhdC5tb3ZlZCA9IGZhbHNlOwotICAgICAgICBpZiAodGhhdC5vcHRpb25z
Lm9uU2Nyb2xsRW5kKSB0aGF0Lm9wdGlvbnMub25TY3JvbGxFbmQuY2FsbCh0aGF0KTsgICAgLy8g
RXhlY3V0ZSBjdXN0b20gY29kZSBvbiBzY3JvbGwgZW5kCisgICAgLy8gd2Ugc2Nyb2xsZWQgbGVz
cyB0aGFuIDEwIHBpeGVscworICAgIGlmICggIXRoaXMubW92ZWQgKSB7CisgICAgICBpZiAoIHRo
aXMub3B0aW9ucy50YXAgKSB7CisgICAgICAgIHV0aWxzLnRhcChlLCB0aGlzLm9wdGlvbnMudGFw
KTsKICAgICAgIH0KIAotICAgICAgaWYgKHRoYXQuaFNjcm9sbGJhciAmJiB0aGF0Lm9wdGlvbnMu
aGlkZVNjcm9sbGJhcikgewotICAgICAgICBpZiAodmVuZG9yID09ICd3ZWJraXQnKSB0aGF0LmhT
Y3JvbGxiYXJXcmFwcGVyLnN0eWxlW3ZlbmRvciArICdUcmFuc2l0aW9uRGVsYXknXSA9ICczMDBt
cyc7Ci0gICAgICAgIHRoYXQuaFNjcm9sbGJhcldyYXBwZXIuc3R5bGUub3BhY2l0eSA9ICcwJzsK
LSAgICAgIH0KLSAgICAgIGlmICh0aGF0LnZTY3JvbGxiYXIgJiYgdGhhdC5vcHRpb25zLmhpZGVT
Y3JvbGxiYXIpIHsKLSAgICAgICAgaWYgKHZlbmRvciA9PSAnd2Via2l0JykgdGhhdC52U2Nyb2xs
YmFyV3JhcHBlci5zdHlsZVt2ZW5kb3IgKyAnVHJhbnNpdGlvbkRlbGF5J10gPSAnMzAwbXMnOwot
ICAgICAgICB0aGF0LnZTY3JvbGxiYXJXcmFwcGVyLnN0eWxlLm9wYWNpdHkgPSAnMCc7CisgICAg
ICBpZiAoIHRoaXMub3B0aW9ucy5jbGljayApIHsKKyAgICAgICAgdXRpbHMuY2xpY2soZSk7CiAg
ICAgICB9CiAKKyAgICAgIHRoaXMuX2V4ZWNFdmVudCgnc2Nyb2xsQ2FuY2VsJyk7CiAgICAgICBy
ZXR1cm47CiAgICAgfQogCi0gICAgdGhhdC5zY3JvbGxUbyhyZXNldFgsIHJlc2V0WSwgdGltZSB8
fCAwKTsKLSAgfSwKLQotICBfd2hlZWw6IGZ1bmN0aW9uIChlKSB7Ci0gICAgdmFyIHRoYXQgPSB0
aGlzLAotICAgICAgd2hlZWxEZWx0YVgsIHdoZWVsRGVsdGFZLAotICAgICAgZGVsdGFYLCBkZWx0
YVksCi0gICAgICBkZWx0YVNjYWxlOwotCi0gICAgaWYgKCd3aGVlbERlbHRhWCcgaW4gZSkgewot
ICAgICAgd2hlZWxEZWx0YVggPSBlLndoZWVsRGVsdGFYIC8gMTI7Ci0gICAgICB3aGVlbERlbHRh
WSA9IGUud2hlZWxEZWx0YVkgLyAxMjsKLSAgICB9IGVsc2UgaWYgKCdkZXRhaWwnIGluIGUpIHsK
LSAgICAgIHdoZWVsRGVsdGFYID0gd2hlZWxEZWx0YVkgPSAtZS5kZXRhaWwgKiAzOwotICAgIH0g
ZWxzZSB7Ci0gICAgICB3aGVlbERlbHRhWCA9IHdoZWVsRGVsdGFZID0gLWUud2hlZWxEZWx0YTsK
LSAgICB9Ci0gICAgCi0gICAgaWYgKHRoYXQub3B0aW9ucy53aGVlbEFjdGlvbiA9PSAnem9vbScp
IHsKLSAgICAgIGRlbHRhU2NhbGUgPSB0aGF0LnNjYWxlICogTWF0aC5wb3coMiwgMS8zICogKHdo
ZWVsRGVsdGFZID8gd2hlZWxEZWx0YVkgLyBNYXRoLmFicyh3aGVlbERlbHRhWSkgOiAwKSk7Ci0g
ICAgICBpZiAoZGVsdGFTY2FsZSA8IHRoYXQub3B0aW9ucy56b29tTWluKSBkZWx0YVNjYWxlID0g
dGhhdC5vcHRpb25zLnpvb21NaW47Ci0gICAgICBpZiAoZGVsdGFTY2FsZSA+IHRoYXQub3B0aW9u
cy56b29tTWF4KSBkZWx0YVNjYWxlID0gdGhhdC5vcHRpb25zLnpvb21NYXg7Ci0gICAgICAKLSAg
ICAgIGlmIChkZWx0YVNjYWxlICE9IHRoYXQuc2NhbGUpIHsKLSAgICAgICAgaWYgKCF0aGF0Lndo
ZWVsWm9vbUNvdW50ICYmIHRoYXQub3B0aW9ucy5vblpvb21TdGFydCkgdGhhdC5vcHRpb25zLm9u
Wm9vbVN0YXJ0LmNhbGwodGhhdCwgZSk7Ci0gICAgICAgIHRoYXQud2hlZWxab29tQ291bnQrKzsK
LSAgICAgICAgCi0gICAgICAgIHRoYXQuem9vbShlLnBhZ2VYLCBlLnBhZ2VZLCBkZWx0YVNjYWxl
LCA0MDApOwotICAgICAgICAKLSAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKLSAgICAg
ICAgICB0aGF0LndoZWVsWm9vbUNvdW50LS07Ci0gICAgICAgICAgaWYgKCF0aGF0LndoZWVsWm9v
bUNvdW50ICYmIHRoYXQub3B0aW9ucy5vblpvb21FbmQpIHRoYXQub3B0aW9ucy5vblpvb21FbmQu
Y2FsbCh0aGF0LCBlKTsKLSAgICAgICAgfSwgNDAwKTsKLSAgICAgIH0KLSAgICAgIAorICAgIGlm
ICggdGhpcy5fZXZlbnRzLmZsaWNrICYmIGR1cmF0aW9uIDwgMjAwICYmIGRpc3RhbmNlWCA8IDEw
MCAmJiBkaXN0YW5jZVkgPCAxMDAgKSB7CisgICAgICB0aGlzLl9leGVjRXZlbnQoJ2ZsaWNrJyk7
CiAgICAgICByZXR1cm47CiAgICAgfQotICAgIAotICAgIGRlbHRhWCA9IHRoYXQueCArIHdoZWVs
RGVsdGFYOwotICAgIGRlbHRhWSA9IHRoYXQueSArIHdoZWVsRGVsdGFZOwogCi0gICAgaWYgKGRl
bHRhWCA+IDApIGRlbHRhWCA9IDA7Ci0gICAgZWxzZSBpZiAoZGVsdGFYIDwgdGhhdC5tYXhTY3Jv
bGxYKSBkZWx0YVggPSB0aGF0Lm1heFNjcm9sbFg7CisgICAgLy8gc3RhcnQgbW9tZW50dW0gYW5p
bWF0aW9uIGlmIG5lZWRlZAorICAgIGlmICggdGhpcy5vcHRpb25zLm1vbWVudHVtICYmIGR1cmF0
aW9uIDwgMzAwICkgeworICAgICAgbW9tZW50dW1YID0gdGhpcy5oYXNIb3Jpem9udGFsU2Nyb2xs
ID8gdXRpbHMubW9tZW50dW0odGhpcy54LCB0aGlzLnN0YXJ0WCwgZHVyYXRpb24sIHRoaXMubWF4
U2Nyb2xsWCwgdGhpcy5vcHRpb25zLmJvdW5jZSA/IHRoaXMud3JhcHBlcldpZHRoIDogMCwgdGhp
cy5vcHRpb25zLmRlY2VsZXJhdGlvbikgOiB7IGRlc3RpbmF0aW9uOiBuZXdYLCBkdXJhdGlvbjog
MCB9OworICAgICAgbW9tZW50dW1ZID0gdGhpcy5oYXNWZXJ0aWNhbFNjcm9sbCA/IHV0aWxzLm1v
bWVudHVtKHRoaXMueSwgdGhpcy5zdGFydFksIGR1cmF0aW9uLCB0aGlzLm1heFNjcm9sbFksIHRo
aXMub3B0aW9ucy5ib3VuY2UgPyB0aGlzLndyYXBwZXJIZWlnaHQgOiAwLCB0aGlzLm9wdGlvbnMu
ZGVjZWxlcmF0aW9uKSA6IHsgZGVzdGluYXRpb246IG5ld1ksIGR1cmF0aW9uOiAwIH07CisgICAg
ICBuZXdYID0gbW9tZW50dW1YLmRlc3RpbmF0aW9uOworICAgICAgbmV3WSA9IG1vbWVudHVtWS5k
ZXN0aW5hdGlvbjsKKyAgICAgIHRpbWUgPSBNYXRoLm1heChtb21lbnR1bVguZHVyYXRpb24sIG1v
bWVudHVtWS5kdXJhdGlvbik7CisgICAgICB0aGlzLmlzSW5UcmFuc2l0aW9uID0gMTsKKyAgICB9
CiAKLSAgICBpZiAoZGVsdGFZID4gdGhhdC5taW5TY3JvbGxZKSBkZWx0YVkgPSB0aGF0Lm1pblNj
cm9sbFk7Ci0gICAgZWxzZSBpZiAoZGVsdGFZIDwgdGhhdC5tYXhTY3JvbGxZKSBkZWx0YVkgPSB0
aGF0Lm1heFNjcm9sbFk7CiAKLSAgICB0aGF0LnNjcm9sbFRvKGRlbHRhWCwgZGVsdGFZLCAwKTsK
LSAgfSwKLSAgCi0gIF9tb3VzZW91dDogZnVuY3Rpb24gKGUpIHsKLSAgICB2YXIgdCA9IGUucmVs
YXRlZFRhcmdldDsKKyAgICBpZiAoIHRoaXMub3B0aW9ucy5zbmFwICkgeworICAgICAgdmFyIHNu
YXAgPSB0aGlzLl9uZWFyZXN0U25hcChuZXdYLCBuZXdZKTsKKyAgICAgIHRoaXMuY3VycmVudFBh
Z2UgPSBzbmFwOworICAgICAgdGltZSA9IHRoaXMub3B0aW9ucy5zbmFwU3BlZWQgfHwgTWF0aC5t
YXgoCisgICAgICAgICAgTWF0aC5tYXgoCisgICAgICAgICAgICBNYXRoLm1pbihNYXRoLmFicyhu
ZXdYIC0gc25hcC54KSwgMTAwMCksCisgICAgICAgICAgICBNYXRoLm1pbihNYXRoLmFicyhuZXdZ
IC0gc25hcC55KSwgMTAwMCkKKyAgICAgICAgICApLCAzMDApOworICAgICAgbmV3WCA9IHNuYXAu
eDsKKyAgICAgIG5ld1kgPSBzbmFwLnk7CisKKyAgICAgIHRoaXMuZGlyZWN0aW9uWCA9IDA7Cisg
ICAgICB0aGlzLmRpcmVjdGlvblkgPSAwOworICAgICAgZWFzaW5nID0gdGhpcy5vcHRpb25zLmJv
dW5jZUVhc2luZzsKKyAgICB9CisKKy8vIElOU0VSVCBQT0lOVDogX2VuZAogCi0gICAgaWYgKCF0
KSB7Ci0gICAgICB0aGlzLl9lbmQoZSk7CisgICAgaWYgKCBuZXdYICE9IHRoaXMueCB8fCBuZXdZ
ICE9IHRoaXMueSApIHsKKyAgICAgIC8vIGNoYW5nZSBlYXNpbmcgZnVuY3Rpb24gd2hlbiBzY3Jv
bGxlciBnb2VzIG91dCBvZiB0aGUgYm91bmRhcmllcworICAgICAgaWYgKCBuZXdYID4gMCB8fCBu
ZXdYIDwgdGhpcy5tYXhTY3JvbGxYIHx8IG5ld1kgPiAwIHx8IG5ld1kgPCB0aGlzLm1heFNjcm9s
bFkgKSB7CisgICAgICAgIGVhc2luZyA9IHV0aWxzLmVhc2UucXVhZHJhdGljOworICAgICAgfQor
CisgICAgICB0aGlzLnNjcm9sbFRvKG5ld1gsIG5ld1ksIHRpbWUsIGVhc2luZyk7CiAgICAgICBy
ZXR1cm47CiAgICAgfQogCi0gICAgd2hpbGUgKHQgPSB0LnBhcmVudE5vZGUpIGlmICh0ID09IHRo
aXMud3JhcHBlcikgcmV0dXJuOwotICAgIAotICAgIHRoaXMuX2VuZChlKTsKKyAgICB0aGlzLl9l
eGVjRXZlbnQoJ3Njcm9sbEVuZCcpOwogICB9LAogCi0gIF90cmFuc2l0aW9uRW5kOiBmdW5jdGlv
biAoZSkgeworICBfcmVzaXplOiBmdW5jdGlvbiAoKSB7CiAgICAgdmFyIHRoYXQgPSB0aGlzOwog
Ci0gICAgaWYgKGUudGFyZ2V0ICE9IHRoYXQuc2Nyb2xsZXIpIHJldHVybjsKKyAgICBjbGVhclRp
bWVvdXQodGhpcy5yZXNpemVUaW1lb3V0KTsKIAotICAgIHRoYXQuX3VuYmluZCgnd2Via2l0VHJh
bnNpdGlvbkVuZCcpOwotICAgIAotICAgIHRoYXQuX3N0YXJ0QW5pKCk7CisgICAgdGhpcy5yZXNp
emVUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CisgICAgICB0aGF0LnJlZnJlc2go
KTsKKyAgICB9LCB0aGlzLm9wdGlvbnMucmVzaXplUG9sbGluZyk7CiAgIH0sCiAKKyAgcmVzZXRQ
b3NpdGlvbjogZnVuY3Rpb24gKHRpbWUpIHsKKyAgICB2YXIgeCA9IHRoaXMueCwKKyAgICAgIHkg
PSB0aGlzLnk7CiAKLSAgLyoqCi0gICAqCi0gICAqIFV0aWxpdGllcwotICAgKgotICAgKi8KLSAg
X3N0YXJ0QW5pOiBmdW5jdGlvbiAoKSB7Ci0gICAgdmFyIHRoYXQgPSB0aGlzLAotICAgICAgc3Rh
cnRYID0gdGhhdC54LCBzdGFydFkgPSB0aGF0LnksCi0gICAgICBzdGFydFRpbWUgPSBEYXRlLm5v
dygpLAotICAgICAgc3RlcCwgZWFzZU91dCwKLSAgICAgIGFuaW1hdGU7Ci0KLSAgICBpZiAodGhh
dC5hbmltYXRpbmcpIHJldHVybjsKLSAgICAKLSAgICBpZiAoIXRoYXQuc3RlcHMubGVuZ3RoKSB7
Ci0gICAgICB0aGF0Ll9yZXNldFBvcyg0MDApOwotICAgICAgcmV0dXJuOwotICAgIH0KLSAgICAK
LSAgICBzdGVwID0gdGhhdC5zdGVwcy5zaGlmdCgpOwotICAgIAotICAgIGlmIChzdGVwLnggPT0g
c3RhcnRYICYmIHN0ZXAueSA9PSBzdGFydFkpIHN0ZXAudGltZSA9IDA7Ci0KLSAgICB0aGF0LmFu
aW1hdGluZyA9IHRydWU7Ci0gICAgdGhhdC5tb3ZlZCA9IHRydWU7Ci0gICAgCi0gICAgaWYgKHRo
YXQub3B0aW9ucy51c2VUcmFuc2l0aW9uKSB7Ci0gICAgICB0aGF0Ll90cmFuc2l0aW9uVGltZShz
dGVwLnRpbWUpOwotICAgICAgdGhhdC5fcG9zKHN0ZXAueCwgc3RlcC55KTsKLSAgICAgIHRoYXQu
YW5pbWF0aW5nID0gZmFsc2U7Ci0gICAgICBpZiAoc3RlcC50aW1lKSB0aGF0Ll9iaW5kKCd3ZWJr
aXRUcmFuc2l0aW9uRW5kJyk7Ci0gICAgICBlbHNlIHRoYXQuX3Jlc2V0UG9zKDApOwotICAgICAg
cmV0dXJuOworICAgIHRpbWUgPSB0aW1lIHx8IDA7CisKKyAgICBpZiAoICF0aGlzLmhhc0hvcml6
b250YWxTY3JvbGwgfHwgdGhpcy54ID4gMCApIHsKKyAgICAgIHggPSAwOworICAgIH0gZWxzZSBp
ZiAoIHRoaXMueCA8IHRoaXMubWF4U2Nyb2xsWCApIHsKKyAgICAgIHggPSB0aGlzLm1heFNjcm9s
bFg7CiAgICAgfQogCi0gICAgYW5pbWF0ZSA9IGZ1bmN0aW9uICgpIHsKLSAgICAgIHZhciBub3cg
PSBEYXRlLm5vdygpLAotICAgICAgICBuZXdYLCBuZXdZOworICAgIGlmICggIXRoaXMuaGFzVmVy
dGljYWxTY3JvbGwgfHwgdGhpcy55ID4gMCApIHsKKyAgICAgIHkgPSAwOworICAgIH0gZWxzZSBp
ZiAoIHRoaXMueSA8IHRoaXMubWF4U2Nyb2xsWSApIHsKKyAgICAgIHkgPSB0aGlzLm1heFNjcm9s
bFk7CisgICAgfQogCi0gICAgICBpZiAobm93ID49IHN0YXJ0VGltZSArIHN0ZXAudGltZSkgewot
ICAgICAgICB0aGF0Ll9wb3Moc3RlcC54LCBzdGVwLnkpOwotICAgICAgICB0aGF0LmFuaW1hdGlu
ZyA9IGZhbHNlOwotICAgICAgICBpZiAodGhhdC5vcHRpb25zLm9uQW5pbWF0aW9uRW5kKSB0aGF0
Lm9wdGlvbnMub25BbmltYXRpb25FbmQuY2FsbCh0aGF0KTsgICAgICAvLyBFeGVjdXRlIGN1c3Rv
bSBjb2RlIG9uIGFuaW1hdGlvbiBlbmQKLSAgICAgICAgdGhhdC5fc3RhcnRBbmkoKTsKLSAgICAg
ICAgcmV0dXJuOwotICAgICAgfQorICAgIGlmICggeCA9PSB0aGlzLnggJiYgeSA9PSB0aGlzLnkg
KSB7CisgICAgICByZXR1cm4gZmFsc2U7CisgICAgfQogCi0gICAgICBub3cgPSAobm93IC0gc3Rh
cnRUaW1lKSAvIHN0ZXAudGltZSAtIDE7Ci0gICAgICBlYXNlT3V0ID0gbS5zcXJ0KDEgLSBub3cg
KiBub3cpOwotICAgICAgbmV3WCA9IChzdGVwLnggLSBzdGFydFgpICogZWFzZU91dCArIHN0YXJ0
WDsKLSAgICAgIG5ld1kgPSAoc3RlcC55IC0gc3RhcnRZKSAqIGVhc2VPdXQgKyBzdGFydFk7Ci0g
ICAgICB0aGF0Ll9wb3MobmV3WCwgbmV3WSk7Ci0gICAgICBpZiAodGhhdC5hbmltYXRpbmcpIHRo
YXQuYW5pVGltZSA9IG5leHRGcmFtZShhbmltYXRlKTsKLSAgICB9OworICAgIHRoaXMuc2Nyb2xs
VG8oeCwgeSwgdGltZSwgdGhpcy5vcHRpb25zLmJvdW5jZUVhc2luZyk7CiAKLSAgICBhbmltYXRl
KCk7CisgICAgcmV0dXJuIHRydWU7CiAgIH0sCiAKLSAgX3RyYW5zaXRpb25UaW1lOiBmdW5jdGlv
biAodGltZSkgewotICAgIHRpbWUgKz0gJ21zJzsKLSAgICB0aGlzLnNjcm9sbGVyLnN0eWxlW3Zl
bmRvciArICdUcmFuc2l0aW9uRHVyYXRpb24nXSA9IHRpbWU7Ci0gICAgaWYgKHRoaXMuaFNjcm9s
bGJhcikgdGhpcy5oU2Nyb2xsYmFySW5kaWNhdG9yLnN0eWxlW3ZlbmRvciArICdUcmFuc2l0aW9u
RHVyYXRpb24nXSA9IHRpbWU7Ci0gICAgaWYgKHRoaXMudlNjcm9sbGJhcikgdGhpcy52U2Nyb2xs
YmFySW5kaWNhdG9yLnN0eWxlW3ZlbmRvciArICdUcmFuc2l0aW9uRHVyYXRpb24nXSA9IHRpbWU7
CisgIGRpc2FibGU6IGZ1bmN0aW9uICgpIHsKKyAgICB0aGlzLmVuYWJsZWQgPSBmYWxzZTsKICAg
fSwKIAotICBfbW9tZW50dW06IGZ1bmN0aW9uIChkaXN0LCB0aW1lLCBtYXhEaXN0VXBwZXIsIG1h
eERpc3RMb3dlciwgc2l6ZSkgewotICAgIHZhciBkZWNlbGVyYXRpb24gPSAwLjAwMDYsCi0gICAg
ICBzcGVlZCA9IG0uYWJzKGRpc3QpIC8gdGltZSwKLSAgICAgIG5ld0Rpc3QgPSAoc3BlZWQgKiBz
cGVlZCkgLyAoMiAqIGRlY2VsZXJhdGlvbiksCi0gICAgICBuZXdUaW1lID0gMCwgb3V0c2lkZURp
c3QgPSAwOwotCi0gICAgLy8gUHJvcG9ydGluYWxseSByZWR1Y2Ugc3BlZWQgaWYgd2UgYXJlIG91
dHNpZGUgb2YgdGhlIGJvdW5kYXJpZXMgCi0gICAgaWYgKGRpc3QgPiAwICYmIG5ld0Rpc3QgPiBt
YXhEaXN0VXBwZXIpIHsKLSAgICAgIG91dHNpZGVEaXN0ID0gc2l6ZSAvICg2IC8gKG5ld0Rpc3Qg
LyBzcGVlZCAqIGRlY2VsZXJhdGlvbikpOwotICAgICAgbWF4RGlzdFVwcGVyID0gbWF4RGlzdFVw
cGVyICsgb3V0c2lkZURpc3Q7Ci0gICAgICBzcGVlZCA9IHNwZWVkICogbWF4RGlzdFVwcGVyIC8g
bmV3RGlzdDsKLSAgICAgIG5ld0Rpc3QgPSBtYXhEaXN0VXBwZXI7Ci0gICAgfSBlbHNlIGlmIChk
aXN0IDwgMCAmJiBuZXdEaXN0ID4gbWF4RGlzdExvd2VyKSB7Ci0gICAgICBvdXRzaWRlRGlzdCA9
IHNpemUgLyAoNiAvIChuZXdEaXN0IC8gc3BlZWQgKiBkZWNlbGVyYXRpb24pKTsKLSAgICAgIG1h
eERpc3RMb3dlciA9IG1heERpc3RMb3dlciArIG91dHNpZGVEaXN0OwotICAgICAgc3BlZWQgPSBz
cGVlZCAqIG1heERpc3RMb3dlciAvIG5ld0Rpc3Q7Ci0gICAgICBuZXdEaXN0ID0gbWF4RGlzdExv
d2VyOwotICAgIH0KLQotICAgIG5ld0Rpc3QgPSBuZXdEaXN0ICogKGRpc3QgPCAwID8gLTEgOiAx
KTsKLSAgICBuZXdUaW1lID0gc3BlZWQgLyBkZWNlbGVyYXRpb247Ci0KLSAgICByZXR1cm4geyBk
aXN0OiBuZXdEaXN0LCB0aW1lOiBtcm91bmQobmV3VGltZSkgfTsKKyAgZW5hYmxlOiBmdW5jdGlv
biAoKSB7CisgICAgdGhpcy5lbmFibGVkID0gdHJ1ZTsKICAgfSwKIAotICBfb2Zmc2V0OiBmdW5j
dGlvbiAoZWwpIHsKLSAgICB2YXIgbGVmdCA9IC1lbC5vZmZzZXRMZWZ0LAotICAgICAgdG9wID0g
LWVsLm9mZnNldFRvcDsKLSAgICAgIAotICAgIHdoaWxlIChlbCA9IGVsLm9mZnNldFBhcmVudCkg
ewotICAgICAgbGVmdCAtPSBlbC5vZmZzZXRMZWZ0OwotICAgICAgdG9wIC09IGVsLm9mZnNldFRv
cDsKKyAgcmVmcmVzaDogZnVuY3Rpb24gKCkgeworICAgIHZhciByZiA9IHRoaXMud3JhcHBlci5v
ZmZzZXRIZWlnaHQ7ICAgLy8gRm9yY2UgcmVmbG93CisKKyAgICB0aGlzLndyYXBwZXJXaWR0aCA9
IHRoaXMud3JhcHBlci5jbGllbnRXaWR0aDsKKyAgICB0aGlzLndyYXBwZXJIZWlnaHQgID0gdGhp
cy53cmFwcGVyLmNsaWVudEhlaWdodDsKKworLyogUkVQTEFDRSBTVEFSVDogcmVmcmVzaCAqLwor
CisgICAgdGhpcy5zY3JvbGxlcldpZHRoICA9IHRoaXMuc2Nyb2xsZXIub2Zmc2V0V2lkdGg7Cisg
ICAgdGhpcy5zY3JvbGxlckhlaWdodCA9IHRoaXMuc2Nyb2xsZXIub2Zmc2V0SGVpZ2h0OworCisg
ICAgdGhpcy5tYXhTY3JvbGxYICAgPSB0aGlzLndyYXBwZXJXaWR0aCAtIHRoaXMuc2Nyb2xsZXJX
aWR0aDsKKyAgICB0aGlzLm1heFNjcm9sbFkgICA9IHRoaXMud3JhcHBlckhlaWdodCAtIHRoaXMu
c2Nyb2xsZXJIZWlnaHQ7CisKKy8qIFJFUExBQ0UgRU5EOiByZWZyZXNoICovCisKKyAgICB0aGlz
Lmhhc0hvcml6b250YWxTY3JvbGwgID0gdGhpcy5vcHRpb25zLnNjcm9sbFggJiYgdGhpcy5tYXhT
Y3JvbGxYIDwgMDsKKyAgICB0aGlzLmhhc1ZlcnRpY2FsU2Nyb2xsICAgID0gdGhpcy5vcHRpb25z
LnNjcm9sbFkgJiYgdGhpcy5tYXhTY3JvbGxZIDwgMDsKKworICAgIGlmICggIXRoaXMuaGFzSG9y
aXpvbnRhbFNjcm9sbCApIHsKKyAgICAgIHRoaXMubWF4U2Nyb2xsWCA9IDA7CisgICAgICB0aGlz
LnNjcm9sbGVyV2lkdGggPSB0aGlzLndyYXBwZXJXaWR0aDsKICAgICB9Ci0gICAgCi0gICAgaWYg
KGVsICE9IHRoaXMud3JhcHBlcikgewotICAgICAgbGVmdCAqPSB0aGlzLnNjYWxlOwotICAgICAg
dG9wICo9IHRoaXMuc2NhbGU7CisKKyAgICBpZiAoICF0aGlzLmhhc1ZlcnRpY2FsU2Nyb2xsICkg
eworICAgICAgdGhpcy5tYXhTY3JvbGxZID0gMDsKKyAgICAgIHRoaXMuc2Nyb2xsZXJIZWlnaHQg
PSB0aGlzLndyYXBwZXJIZWlnaHQ7CiAgICAgfQogCi0gICAgcmV0dXJuIHsgbGVmdDogbGVmdCwg
dG9wOiB0b3AgfTsKKyAgICB0aGlzLmVuZFRpbWUgPSAwOworICAgIHRoaXMuZGlyZWN0aW9uWCA9
IDA7CisgICAgdGhpcy5kaXJlY3Rpb25ZID0gMDsKKworICAgIHRoaXMud3JhcHBlck9mZnNldCA9
IHV0aWxzLm9mZnNldCh0aGlzLndyYXBwZXIpOworCisgICAgdGhpcy5fZXhlY0V2ZW50KCdyZWZy
ZXNoJyk7CisKKyAgICB0aGlzLnJlc2V0UG9zaXRpb24oKTsKKworLy8gSU5TRVJUIFBPSU5UOiBf
cmVmcmVzaAorCiAgIH0sCiAKLSAgX3NuYXA6IGZ1bmN0aW9uICh4LCB5KSB7Ci0gICAgdmFyIHRo
YXQgPSB0aGlzLAotICAgICAgaSwgbCwKLSAgICAgIHBhZ2UsIHRpbWUsCi0gICAgICBzaXplWCwg
c2l6ZVk7Ci0KLSAgICAvLyBDaGVjayBwYWdlIFgKLSAgICBwYWdlID0gdGhhdC5wYWdlc1gubGVu
Z3RoIC0gMTsKLSAgICBmb3IgKGk9MCwgbD10aGF0LnBhZ2VzWC5sZW5ndGg7IGk8bDsgaSsrKSB7
Ci0gICAgICBpZiAoeCA+PSB0aGF0LnBhZ2VzWFtpXSkgewotICAgICAgICBwYWdlID0gaTsKLSAg
ICAgICAgYnJlYWs7Ci0gICAgICB9CisgIG9uOiBmdW5jdGlvbiAodHlwZSwgZm4pIHsKKyAgICBp
ZiAoICF0aGlzLl9ldmVudHNbdHlwZV0gKSB7CisgICAgICB0aGlzLl9ldmVudHNbdHlwZV0gPSBb
XTsKICAgICB9Ci0gICAgaWYgKHBhZ2UgPT0gdGhhdC5jdXJyUGFnZVggJiYgcGFnZSA+IDAgJiYg
dGhhdC5kaXJYIDwgMCkgcGFnZS0tOwotICAgIHggPSB0aGF0LnBhZ2VzWFtwYWdlXTsKLSAgICBz
aXplWCA9IG0uYWJzKHggLSB0aGF0LnBhZ2VzWFt0aGF0LmN1cnJQYWdlWF0pOwotICAgIHNpemVY
ID0gc2l6ZVggPyBtLmFicyh0aGF0LnggLSB4KSAvIHNpemVYICogNTAwIDogMDsKLSAgICB0aGF0
LmN1cnJQYWdlWCA9IHBhZ2U7Ci0KLSAgICAvLyBDaGVjayBwYWdlIFkKLSAgICBwYWdlID0gdGhh
dC5wYWdlc1kubGVuZ3RoLTE7Ci0gICAgZm9yIChpPTA7IGk8cGFnZTsgaSsrKSB7Ci0gICAgICBp
ZiAoeSA+PSB0aGF0LnBhZ2VzWVtpXSkgewotICAgICAgICBwYWdlID0gaTsKLSAgICAgICAgYnJl
YWs7Ci0gICAgICB9CisKKyAgICB0aGlzLl9ldmVudHNbdHlwZV0ucHVzaChmbik7CisgIH0sCisK
KyAgb2ZmOiBmdW5jdGlvbiAodHlwZSwgZm4pIHsKKyAgICBpZiAoICF0aGlzLl9ldmVudHNbdHlw
ZV0gKSB7CisgICAgICByZXR1cm47CiAgICAgfQotICAgIGlmIChwYWdlID09IHRoYXQuY3VyclBh
Z2VZICYmIHBhZ2UgPiAwICYmIHRoYXQuZGlyWSA8IDApIHBhZ2UtLTsKLSAgICB5ID0gdGhhdC5w
YWdlc1lbcGFnZV07Ci0gICAgc2l6ZVkgPSBtLmFicyh5IC0gdGhhdC5wYWdlc1lbdGhhdC5jdXJy
UGFnZVldKTsKLSAgICBzaXplWSA9IHNpemVZID8gbS5hYnModGhhdC55IC0geSkgLyBzaXplWSAq
IDUwMCA6IDA7Ci0gICAgdGhhdC5jdXJyUGFnZVkgPSBwYWdlOwogCi0gICAgLy8gU25hcCB3aXRo
IGNvbnN0YW50IHNwZWVkIChwcm9wb3J0aW9uYWwgZHVyYXRpb24pCi0gICAgdGltZSA9IG1yb3Vu
ZChtLm1heChzaXplWCwgc2l6ZVkpKSB8fCAyMDA7CisgICAgdmFyIGluZGV4ID0gdGhpcy5fZXZl
bnRzW3R5cGVdLmluZGV4T2YoZm4pOwogCi0gICAgcmV0dXJuIHsgeDogeCwgeTogeSwgdGltZTog
dGltZSB9OworICAgIGlmICggaW5kZXggPiAtMSApIHsKKyAgICAgIHRoaXMuX2V2ZW50c1t0eXBl
XS5zcGxpY2UoaW5kZXgsIDEpOworICAgIH0KICAgfSwKIAotICBfYmluZDogZnVuY3Rpb24gKHR5
cGUsIGVsLCBidWJibGUpIHsKLSAgICAvLyBRT09YRE9PIEVOSEFOQ0VNRU5UOiBVc2UgdGhlIHFv
b3hkb28gZXZlbnQgcmVnaXN0cmF0aW9uICsgdHlwZXMKLSAgICB0eXBlID0gdHlwZSAhPSAnd2Vi
a2l0VHJhbnNpdGlvbkVuZCcgPyB0eXBlIDogJ3RyYW5zaXRpb25FbmQnOwotICAgIHF4LmV2ZW50
LlJlZ2lzdHJhdGlvbi5hZGRMaXN0ZW5lcihlbCB8fCB0aGlzLnNjcm9sbGVyLCB0eXBlLCB0aGlz
LmhhbmRsZUV2ZW50LCB0aGlzLCAhIWJ1YmJsZSk7CisgIF9leGVjRXZlbnQ6IGZ1bmN0aW9uICh0
eXBlKSB7CisgICAgaWYgKCAhdGhpcy5fZXZlbnRzW3R5cGVdICkgeworICAgICAgcmV0dXJuOwor
ICAgIH0KKworICAgIHZhciBpID0gMCwKKyAgICAgIGwgPSB0aGlzLl9ldmVudHNbdHlwZV0ubGVu
Z3RoOworCisgICAgaWYgKCAhbCApIHsKKyAgICAgIHJldHVybjsKKyAgICB9CisKKyAgICBmb3Ig
KCA7IGkgPCBsOyBpKysgKSB7CisgICAgICB0aGlzLl9ldmVudHNbdHlwZV1baV0uYXBwbHkodGhp
cywgW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTsKKyAgICB9CiAgIH0sCiAKLSAgX3VuYmlu
ZDogZnVuY3Rpb24gKHR5cGUsIGVsLCBidWJibGUpIHsKLSAgICAvLyBRT09YRE9PIEVOSEFOQ0VN
RU5UOiBVc2UgdGhlIHFvb3hkb28gZXZlbnQgcmVnaXN0cmF0aW9uICsgdHlwZXMKLSAgICB0eXBl
ID0gdHlwZSAhPSAnd2Via2l0VHJhbnNpdGlvbkVuZCcgPyB0eXBlIDogJ3RyYW5zaXRpb25FbmQn
OwotICAgIHF4LmV2ZW50LlJlZ2lzdHJhdGlvbi5yZW1vdmVMaXN0ZW5lcihlbCB8fCB0aGlzLnNj
cm9sbGVyLCB0eXBlLCB0aGlzLmhhbmRsZUV2ZW50LCB0aGlzLCAhIWJ1YmJsZSk7CisgIHNjcm9s
bEJ5OiBmdW5jdGlvbiAoeCwgeSwgdGltZSwgZWFzaW5nKSB7CisgICAgeCA9IHRoaXMueCArIHg7
CisgICAgeSA9IHRoaXMueSArIHk7CisgICAgdGltZSA9IHRpbWUgfHwgMDsKKworICAgIHRoaXMu
c2Nyb2xsVG8oeCwgeSwgdGltZSwgZWFzaW5nKTsKICAgfSwKIAorICBzY3JvbGxUbzogZnVuY3Rp
b24gKHgsIHksIHRpbWUsIGVhc2luZykgeworICAgIGVhc2luZyA9IGVhc2luZyB8fCB1dGlscy5l
YXNlLmNpcmN1bGFyOwogCi0gIC8qKgotICAgKgotICAgKiBQdWJsaWMgbWV0aG9kcwotICAgKgot
ICAgKi8KLSAgZGVzdHJveTogZnVuY3Rpb24gKCkgewotICAgIHZhciB0aGF0ID0gdGhpczsKKyAg
ICB0aGlzLmlzSW5UcmFuc2l0aW9uID0gdGhpcy5vcHRpb25zLnVzZVRyYW5zaXRpb24gJiYgdGlt
ZSA+IDA7CiAKLSAgICB0aGF0LnNjcm9sbGVyLnN0eWxlW3ZlbmRvciArICdUcmFuc2Zvcm0nXSA9
ICcnOwotCi0gICAgLy8gUmVtb3ZlIHRoZSBzY3JvbGxiYXJzCi0gICAgdGhhdC5oU2Nyb2xsYmFy
ID0gZmFsc2U7Ci0gICAgdGhhdC52U2Nyb2xsYmFyID0gZmFsc2U7Ci0gICAgdGhhdC5fc2Nyb2xs
YmFyKCdoJyk7Ci0gICAgdGhhdC5fc2Nyb2xsYmFyKCd2Jyk7Ci0KLSAgICAvLyBSZW1vdmUgdGhl
IGV2ZW50IGxpc3RlbmVycwotICAgIHRoYXQuX3VuYmluZChSRVNJWkVfRVYsIHdpbmRvdyk7Ci0g
ICAgdGhhdC5fdW5iaW5kKFNUQVJUX0VWKTsKLSAgICB0aGF0Ll91bmJpbmQoTU9WRV9FVik7Ci0g
ICAgdGhhdC5fdW5iaW5kKEVORF9FVik7Ci0gICAgdGhhdC5fdW5iaW5kKENBTkNFTF9FVik7Ci0g
ICAgCi0gICAgaWYgKCF0aGF0Lm9wdGlvbnMuaGFzVG91Y2gpIHsKLSAgICAgIHRoYXQuX3VuYmlu
ZCgnbW91c2VvdXQnLCB0aGF0LndyYXBwZXIpOwotICAgICAgdGhhdC5fdW5iaW5kKFdIRUVMX0VW
KTsKLSAgICB9Ci0gICAgCi0gICAgaWYgKHRoYXQub3B0aW9ucy51c2VUcmFuc2l0aW9uKSB0aGF0
Ll91bmJpbmQoJ3dlYmtpdFRyYW5zaXRpb25FbmQnKTsKLSAgICAKLSAgICBpZiAodGhhdC5vcHRp
b25zLmNoZWNrRE9NQ2hhbmdlcykgY2xlYXJJbnRlcnZhbCh0aGF0LmNoZWNrRE9NVGltZSk7Ci0g
ICAgCi0gICAgaWYgKHRoYXQub3B0aW9ucy5vbkRlc3Ryb3kpIHRoYXQub3B0aW9ucy5vbkRlc3Ry
b3kuY2FsbCh0aGF0KTsKKyAgICBpZiAoICF0aW1lIHx8ICh0aGlzLm9wdGlvbnMudXNlVHJhbnNp
dGlvbiAmJiBlYXNpbmcuc3R5bGUpICkgeworICAgICAgdGhpcy5fdHJhbnNpdGlvblRpbWluZ0Z1
bmN0aW9uKGVhc2luZy5zdHlsZSk7CisgICAgICB0aGlzLl90cmFuc2l0aW9uVGltZSh0aW1lKTsK
KyAgICAgIHRoaXMuX3RyYW5zbGF0ZSh4LCB5KTsKKyAgICB9IGVsc2UgeworICAgICAgdGhpcy5f
YW5pbWF0ZSh4LCB5LCB0aW1lLCBlYXNpbmcuZm4pOworICAgIH0KICAgfSwKIAotICByZWZyZXNo
OiBmdW5jdGlvbiAoKSB7Ci0gICAgdmFyIHRoYXQgPSB0aGlzLAotICAgICAgb2Zmc2V0LAotICAg
ICAgaSwgbCwKLSAgICAgIGVscywKLSAgICAgIHBvcyA9IDAsCi0gICAgICBwYWdlID0gMDsKLQot
ICAgIGlmICh0aGF0LnNjYWxlIDwgdGhhdC5vcHRpb25zLnpvb21NaW4pIHRoYXQuc2NhbGUgPSB0
aGF0Lm9wdGlvbnMuem9vbU1pbjsKLSAgICB0aGF0LndyYXBwZXJXID0gdGhhdC53cmFwcGVyLmNs
aWVudFdpZHRoIHx8IDE7Ci0gICAgdGhhdC53cmFwcGVySCA9IHRoYXQud3JhcHBlci5jbGllbnRI
ZWlnaHQgfHwgMTsKLQotICAgIHRoYXQubWluU2Nyb2xsWSA9IC10aGF0Lm9wdGlvbnMudG9wT2Zm
c2V0IHx8IDA7Ci0gICAgdGhhdC5zY3JvbGxlclcgPSBtcm91bmQodGhhdC5zY3JvbGxlci5vZmZz
ZXRXaWR0aCAqIHRoYXQuc2NhbGUpOwotICAgIHRoYXQuc2Nyb2xsZXJIID0gbXJvdW5kKCh0aGF0
LnNjcm9sbGVyLm9mZnNldEhlaWdodCArIHRoYXQubWluU2Nyb2xsWSkgKiB0aGF0LnNjYWxlKTsK
LSAgICB0aGF0Lm1heFNjcm9sbFggPSB0aGF0LndyYXBwZXJXIC0gdGhhdC5zY3JvbGxlclc7Ci0g
ICAgdGhhdC5tYXhTY3JvbGxZID0gdGhhdC53cmFwcGVySCAtIHRoYXQuc2Nyb2xsZXJIICsgdGhh
dC5taW5TY3JvbGxZOwotICAgIHRoYXQuZGlyWCA9IDA7Ci0gICAgdGhhdC5kaXJZID0gMDsKLQot
ICAgIGlmICh0aGF0Lm9wdGlvbnMub25SZWZyZXNoKSB0aGF0Lm9wdGlvbnMub25SZWZyZXNoLmNh
bGwodGhhdCk7Ci0KLSAgICB0aGF0LmhTY3JvbGwgPSB0aGF0Lm9wdGlvbnMuaFNjcm9sbCAmJiB0
aGF0Lm1heFNjcm9sbFggPCAwOwotICAgIHRoYXQudlNjcm9sbCA9IHRoYXQub3B0aW9ucy52U2Ny
b2xsICYmICghdGhhdC5vcHRpb25zLmJvdW5jZUxvY2sgJiYgIXRoYXQuaFNjcm9sbCB8fCB0aGF0
LnNjcm9sbGVySCA+IHRoYXQud3JhcHBlckgpOwotCi0gICAgdGhhdC5oU2Nyb2xsYmFyID0gdGhh
dC5oU2Nyb2xsICYmIHRoYXQub3B0aW9ucy5oU2Nyb2xsYmFyOwotICAgIHRoYXQudlNjcm9sbGJh
ciA9IHRoYXQudlNjcm9sbCAmJiB0aGF0Lm9wdGlvbnMudlNjcm9sbGJhciAmJiB0aGF0LnNjcm9s
bGVySCA+IHRoYXQud3JhcHBlckg7Ci0KLSAgICBvZmZzZXQgPSB0aGF0Ll9vZmZzZXQodGhhdC53
cmFwcGVyKTsKLSAgICB0aGF0LndyYXBwZXJPZmZzZXRMZWZ0ID0gLW9mZnNldC5sZWZ0OwotICAg
IHRoYXQud3JhcHBlck9mZnNldFRvcCA9IC1vZmZzZXQudG9wOwotCi0gICAgLy8gUHJlcGFyZSBz
bmFwCi0gICAgaWYgKHR5cGVvZiB0aGF0Lm9wdGlvbnMuc25hcCA9PSAnc3RyaW5nJykgewotICAg
ICAgdGhhdC5wYWdlc1ggPSBbXTsKLSAgICAgIHRoYXQucGFnZXNZID0gW107Ci0gICAgICBlbHMg
PSB0aGF0LnNjcm9sbGVyLnF1ZXJ5U2VsZWN0b3JBbGwodGhhdC5vcHRpb25zLnNuYXApOwotICAg
ICAgZm9yIChpPTAsIGw9ZWxzLmxlbmd0aDsgaTxsOyBpKyspIHsKLSAgICAgICAgcG9zID0gdGhh
dC5fb2Zmc2V0KGVsc1tpXSk7Ci0gICAgICAgIHBvcy5sZWZ0ICs9IHRoYXQud3JhcHBlck9mZnNl
dExlZnQ7Ci0gICAgICAgIHBvcy50b3AgKz0gdGhhdC53cmFwcGVyT2Zmc2V0VG9wOwotICAgICAg
ICB0aGF0LnBhZ2VzWFtpXSA9IHBvcy5sZWZ0IDwgdGhhdC5tYXhTY3JvbGxYID8gdGhhdC5tYXhT
Y3JvbGxYIDogcG9zLmxlZnQgKiB0aGF0LnNjYWxlOwotICAgICAgICB0aGF0LnBhZ2VzWVtpXSA9
IHBvcy50b3AgPCB0aGF0Lm1heFNjcm9sbFkgPyB0aGF0Lm1heFNjcm9sbFkgOiBwb3MudG9wICog
dGhhdC5zY2FsZTsKLSAgICAgIH0KLSAgICB9IGVsc2UgaWYgKHRoYXQub3B0aW9ucy5zbmFwKSB7
Ci0gICAgICB0aGF0LnBhZ2VzWCA9IFtdOwotICAgICAgd2hpbGUgKHBvcyA+PSB0aGF0Lm1heFNj
cm9sbFgpIHsKLSAgICAgICAgdGhhdC5wYWdlc1hbcGFnZV0gPSBwb3M7Ci0gICAgICAgIHBvcyA9
IHBvcyAtIHRoYXQud3JhcHBlclc7Ci0gICAgICAgIHBhZ2UrKzsKLSAgICAgIH0KLSAgICAgIGlm
ICh0aGF0Lm1heFNjcm9sbFgldGhhdC53cmFwcGVyVykgdGhhdC5wYWdlc1hbdGhhdC5wYWdlc1gu
bGVuZ3RoXSA9IHRoYXQubWF4U2Nyb2xsWCAtIHRoYXQucGFnZXNYW3RoYXQucGFnZXNYLmxlbmd0
aC0xXSArIHRoYXQucGFnZXNYW3RoYXQucGFnZXNYLmxlbmd0aC0xXTsKLQotICAgICAgcG9zID0g
MDsKLSAgICAgIHBhZ2UgPSAwOwotICAgICAgdGhhdC5wYWdlc1kgPSBbXTsKLSAgICAgIHdoaWxl
IChwb3MgPj0gdGhhdC5tYXhTY3JvbGxZKSB7Ci0gICAgICAgIHRoYXQucGFnZXNZW3BhZ2VdID0g
cG9zOwotICAgICAgICBwb3MgPSBwb3MgLSB0aGF0LndyYXBwZXJIOwotICAgICAgICBwYWdlKys7
Ci0gICAgICB9Ci0gICAgICBpZiAodGhhdC5tYXhTY3JvbGxZJXRoYXQud3JhcHBlckgpIHRoYXQu
cGFnZXNZW3RoYXQucGFnZXNZLmxlbmd0aF0gPSB0aGF0Lm1heFNjcm9sbFkgLSB0aGF0LnBhZ2Vz
WVt0aGF0LnBhZ2VzWS5sZW5ndGgtMV0gKyB0aGF0LnBhZ2VzWVt0aGF0LnBhZ2VzWS5sZW5ndGgt
MV07CisgIHNjcm9sbFRvRWxlbWVudDogZnVuY3Rpb24gKGVsLCB0aW1lLCBvZmZzZXRYLCBvZmZz
ZXRZLCBlYXNpbmcpIHsKKyAgICBlbCA9IGVsLm5vZGVUeXBlID8gZWwgOiB0aGlzLnNjcm9sbGVy
LnF1ZXJ5U2VsZWN0b3IoZWwpOworCisgICAgaWYgKCAhZWwgKSB7CisgICAgICByZXR1cm47CiAg
ICAgfQogCi0gICAgLy8gUHJlcGFyZSB0aGUgc2Nyb2xsYmFycwotICAgIHRoYXQuX3Njcm9sbGJh
cignaCcpOwotICAgIHRoYXQuX3Njcm9sbGJhcigndicpOworICAgIHZhciBwb3MgPSB1dGlscy5v
ZmZzZXQoZWwpOworCisgICAgcG9zLmxlZnQgLT0gdGhpcy53cmFwcGVyT2Zmc2V0LmxlZnQ7Cisg
ICAgcG9zLnRvcCAgLT0gdGhpcy53cmFwcGVyT2Zmc2V0LnRvcDsKIAotICAgIGlmICghdGhhdC56
b29tZWQpIHsKLSAgICAgIHRoYXQuc2Nyb2xsZXIuc3R5bGVbdmVuZG9yICsgJ1RyYW5zaXRpb25E
dXJhdGlvbiddID0gJzAnOwotICAgICAgdGhhdC5fcmVzZXRQb3MoMjAwKTsKKyAgICAvLyBpZiBv
ZmZzZXRYL1kgYXJlIHRydWUgd2UgY2VudGVyIHRoZSBlbGVtZW50IHRvIHRoZSBzY3JlZW4KKyAg
ICBpZiAoIG9mZnNldFggPT09IHRydWUgKSB7CisgICAgICBvZmZzZXRYID0gTWF0aC5yb3VuZChl
bC5vZmZzZXRXaWR0aCAvIDIgLSB0aGlzLndyYXBwZXIub2Zmc2V0V2lkdGggLyAyKTsKKyAgICB9
CisgICAgaWYgKCBvZmZzZXRZID09PSB0cnVlICkgeworICAgICAgb2Zmc2V0WSA9IE1hdGgucm91
bmQoZWwub2Zmc2V0SGVpZ2h0IC8gMiAtIHRoaXMud3JhcHBlci5vZmZzZXRIZWlnaHQgLyAyKTsK
ICAgICB9Ci0gIH0sCiAKLSAgc2Nyb2xsVG86IGZ1bmN0aW9uICh4LCB5LCB0aW1lLCByZWxhdGl2
ZSkgewotICAgIHZhciB0aGF0ID0gdGhpcywKLSAgICAgIHN0ZXAgPSB4LAotICAgICAgaSwgbDsK
KyAgICBwb3MubGVmdCAtPSBvZmZzZXRYIHx8IDA7CisgICAgcG9zLnRvcCAgLT0gb2Zmc2V0WSB8
fCAwOwogCi0gICAgdGhhdC5zdG9wKCk7CisgICAgcG9zLmxlZnQgPSBwb3MubGVmdCA+IDAgPyAw
IDogcG9zLmxlZnQgPCB0aGlzLm1heFNjcm9sbFggPyB0aGlzLm1heFNjcm9sbFggOiBwb3MubGVm
dDsKKyAgICBwb3MudG9wICA9IHBvcy50b3AgID4gMCA/IDAgOiBwb3MudG9wICA8IHRoaXMubWF4
U2Nyb2xsWSA/IHRoaXMubWF4U2Nyb2xsWSA6IHBvcy50b3A7CiAKLSAgICBpZiAoIXN0ZXAubGVu
Z3RoKSBzdGVwID0gW3sgeDogeCwgeTogeSwgdGltZTogdGltZSwgcmVsYXRpdmU6IHJlbGF0aXZl
IH1dOwotICAgIAotICAgIGZvciAoaT0wLCBsPXN0ZXAubGVuZ3RoOyBpPGw7IGkrKykgewotICAg
ICAgaWYgKHN0ZXBbaV0ucmVsYXRpdmUpIHsgc3RlcFtpXS54ID0gdGhhdC54IC0gc3RlcFtpXS54
OyBzdGVwW2ldLnkgPSB0aGF0LnkgLSBzdGVwW2ldLnk7IH0KLSAgICAgIHRoYXQuc3RlcHMucHVz
aCh7IHg6IHN0ZXBbaV0ueCwgeTogc3RlcFtpXS55LCB0aW1lOiBzdGVwW2ldLnRpbWUgfHwgMCB9
KTsKLSAgICB9CisgICAgdGltZSA9IHRpbWUgPT09IHVuZGVmaW5lZCB8fCB0aW1lID09PSBudWxs
IHx8IHRpbWUgPT09ICdhdXRvJyA/IE1hdGgubWF4KE1hdGguYWJzKHRoaXMueC1wb3MubGVmdCks
IE1hdGguYWJzKHRoaXMueS1wb3MudG9wKSkgOiB0aW1lOwogCi0gICAgdGhhdC5fc3RhcnRBbmko
KTsKKyAgICB0aGlzLnNjcm9sbFRvKHBvcy5sZWZ0LCBwb3MudG9wLCB0aW1lLCBlYXNpbmcpOwog
ICB9LAogCi0gIHNjcm9sbFRvRWxlbWVudDogZnVuY3Rpb24gKGVsLCB0aW1lKSB7Ci0gICAgdmFy
IHRoYXQgPSB0aGlzLCBwb3M7Ci0gICAgZWwgPSBlbC5ub2RlVHlwZSA/IGVsIDogdGhhdC5zY3Jv
bGxlci5xdWVyeVNlbGVjdG9yKGVsKTsKLSAgICBpZiAoIWVsKSByZXR1cm47CisgIF90cmFuc2l0
aW9uVGltZTogZnVuY3Rpb24gKHRpbWUpIHsKKyAgICB0aW1lID0gdGltZSB8fCAwOworCisgICAg
dGhpcy5zY3JvbGxlclN0eWxlW3V0aWxzLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbl0gPSB0aW1l
ICsgJ21zJzsKIAotICAgIHBvcyA9IHRoYXQuX29mZnNldChlbCk7Ci0gICAgcG9zLmxlZnQgKz0g
dGhhdC53cmFwcGVyT2Zmc2V0TGVmdDsKLSAgICBwb3MudG9wICs9IHRoYXQud3JhcHBlck9mZnNl
dFRvcDsKKyAgICBpZiAoICF0aW1lICYmIHV0aWxzLmlzQmFkQW5kcm9pZCApIHsKKyAgICAgIHRo
aXMuc2Nyb2xsZXJTdHlsZVt1dGlscy5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb25dID0gJzAuMDAx
cyc7CisgICAgfQogCi0gICAgcG9zLmxlZnQgPSBwb3MubGVmdCA+IDAgPyAwIDogcG9zLmxlZnQg
PCB0aGF0Lm1heFNjcm9sbFggPyB0aGF0Lm1heFNjcm9sbFggOiBwb3MubGVmdDsKLSAgICBwb3Mu
dG9wID0gcG9zLnRvcCA+IHRoYXQubWluU2Nyb2xsWSA/IHRoYXQubWluU2Nyb2xsWSA6IHBvcy50
b3AgPCB0aGF0Lm1heFNjcm9sbFkgPyB0aGF0Lm1heFNjcm9sbFkgOiBwb3MudG9wOwotICAgIHRp
bWUgPSB0aW1lID09PSB1bmRlZmluZWQgPyBtLm1heChtLmFicyhwb3MubGVmdCkqMiwgbS5hYnMo
cG9zLnRvcCkqMikgOiB0aW1lOwogCi0gICAgdGhhdC5zY3JvbGxUbyhwb3MubGVmdCwgcG9zLnRv
cCwgdGltZSk7Ci0gIH0sCisgICAgaWYgKCB0aGlzLmluZGljYXRvcnMgKSB7CisgICAgICBmb3Ig
KCB2YXIgaSA9IHRoaXMuaW5kaWNhdG9ycy5sZW5ndGg7IGktLTsgKSB7CisgICAgICAgIHRoaXMu
aW5kaWNhdG9yc1tpXS50cmFuc2l0aW9uVGltZSh0aW1lKTsKKyAgICAgIH0KKyAgICB9CiAKLSAg
c2Nyb2xsVG9QYWdlOiBmdW5jdGlvbiAocGFnZVgsIHBhZ2VZLCB0aW1lKSB7Ci0gICAgdmFyIHRo
YXQgPSB0aGlzLCB4LCB5OwogCi0gICAgaWYgKHRoYXQub3B0aW9ucy5vblNjcm9sbFN0YXJ0KSB0
aGF0Lm9wdGlvbnMub25TY3JvbGxTdGFydC5jYWxsKHRoYXQpOworLy8gSU5TRVJUIFBPSU5UOiBf
dHJhbnNpdGlvblRpbWUKIAotICAgIGlmICh0aGF0Lm9wdGlvbnMuc25hcCkgewotICAgICAgcGFn
ZVggPSBwYWdlWCA9PSAnbmV4dCcgPyB0aGF0LmN1cnJQYWdlWCsxIDogcGFnZVggPT0gJ3ByZXYn
ID8gdGhhdC5jdXJyUGFnZVgtMSA6IHBhZ2VYOwotICAgICAgcGFnZVkgPSBwYWdlWSA9PSAnbmV4
dCcgPyB0aGF0LmN1cnJQYWdlWSsxIDogcGFnZVkgPT0gJ3ByZXYnID8gdGhhdC5jdXJyUGFnZVkt
MSA6IHBhZ2VZOworICB9LAogCi0gICAgICBwYWdlWCA9IHBhZ2VYIDwgMCA/IDAgOiBwYWdlWCA+
IHRoYXQucGFnZXNYLmxlbmd0aC0xID8gdGhhdC5wYWdlc1gubGVuZ3RoLTEgOiBwYWdlWDsKLSAg
ICAgIHBhZ2VZID0gcGFnZVkgPCAwID8gMCA6IHBhZ2VZID4gdGhhdC5wYWdlc1kubGVuZ3RoLTEg
PyB0aGF0LnBhZ2VzWS5sZW5ndGgtMSA6IHBhZ2VZOworICBfdHJhbnNpdGlvblRpbWluZ0Z1bmN0
aW9uOiBmdW5jdGlvbiAoZWFzaW5nKSB7CisgICAgdGhpcy5zY3JvbGxlclN0eWxlW3V0aWxzLnN0
eWxlLnRyYW5zaXRpb25UaW1pbmdGdW5jdGlvbl0gPSBlYXNpbmc7CiAKLSAgICAgIHRoYXQuY3Vy
clBhZ2VYID0gcGFnZVg7Ci0gICAgICB0aGF0LmN1cnJQYWdlWSA9IHBhZ2VZOwotICAgICAgeCA9
IHRoYXQucGFnZXNYW3BhZ2VYXTsKLSAgICAgIHkgPSB0aGF0LnBhZ2VzWVtwYWdlWV07Ci0gICAg
fSBlbHNlIHsKLSAgICAgIHggPSAtdGhhdC53cmFwcGVyVyAqIHBhZ2VYOwotICAgICAgeSA9IC10
aGF0LndyYXBwZXJIICogcGFnZVk7Ci0gICAgICBpZiAoeCA8IHRoYXQubWF4U2Nyb2xsWCkgeCA9
IHRoYXQubWF4U2Nyb2xsWDsKLSAgICAgIGlmICh5IDwgdGhhdC5tYXhTY3JvbGxZKSB5ID0gdGhh
dC5tYXhTY3JvbGxZOworCisgICAgaWYgKCB0aGlzLmluZGljYXRvcnMgKSB7CisgICAgICBmb3Ig
KCB2YXIgaSA9IHRoaXMuaW5kaWNhdG9ycy5sZW5ndGg7IGktLTsgKSB7CisgICAgICAgIHRoaXMu
aW5kaWNhdG9yc1tpXS50cmFuc2l0aW9uVGltaW5nRnVuY3Rpb24oZWFzaW5nKTsKKyAgICAgIH0K
ICAgICB9CiAKLSAgICB0aGF0LnNjcm9sbFRvKHgsIHksIHRpbWUgfHwgNDAwKTsKLSAgfSwKIAot
ICBkaXNhYmxlOiBmdW5jdGlvbiAoKSB7Ci0gICAgdGhpcy5zdG9wKCk7Ci0gICAgdGhpcy5fcmVz
ZXRQb3MoMCk7Ci0gICAgdGhpcy5lbmFibGVkID0gZmFsc2U7CisvLyBJTlNFUlQgUE9JTlQ6IF90
cmFuc2l0aW9uVGltaW5nRnVuY3Rpb24KIAotICAgIC8vIElmIGRpc2FibGVkIGFmdGVyIHRvdWNo
c3RhcnQgd2UgbWFrZSBzdXJlIHRoYXQgdGhlcmUgYXJlIG5vIGxlZnQgb3ZlciBldmVudHMKLSAg
ICB0aGlzLl91bmJpbmQoTU9WRV9FVik7Ci0gICAgdGhpcy5fdW5iaW5kKEVORF9FVik7Ci0gICAg
dGhpcy5fdW5iaW5kKENBTkNFTF9FVik7Ci0gIH0sCi0gIAotICBlbmFibGU6IGZ1bmN0aW9uICgp
IHsKLSAgICB0aGlzLmVuYWJsZWQgPSB0cnVlOwotICB9LAotICAKLSAgc3RvcDogZnVuY3Rpb24g
KCkgewotICAgIGlmICh0aGlzLm9wdGlvbnMudXNlVHJhbnNpdGlvbikgdGhpcy5fdW5iaW5kKCd3
ZWJraXRUcmFuc2l0aW9uRW5kJyk7Ci0gICAgZWxzZSBjYW5jZWxGcmFtZSh0aGlzLmFuaVRpbWUp
OwotICAgIHRoaXMuc3RlcHMgPSBbXTsKLSAgICB0aGlzLm1vdmVkID0gZmFsc2U7Ci0gICAgdGhp
cy5hbmltYXRpbmcgPSBmYWxzZTsKICAgfSwKLSAgCi0gIHpvb206IGZ1bmN0aW9uICh4LCB5LCBz
Y2FsZSwgdGltZSkgewotICAgIHZhciB0aGF0ID0gdGhpcywKLSAgICAgIHJlbFNjYWxlID0gc2Nh
bGUgLyB0aGF0LnNjYWxlOwogCi0gICAgaWYgKCF0aGF0Lm9wdGlvbnMudXNlVHJhbnNmb3JtKSBy
ZXR1cm47CisgIF90cmFuc2xhdGU6IGZ1bmN0aW9uICh4LCB5KSB7CisgICAgaWYgKCB0aGlzLm9w
dGlvbnMudXNlVHJhbnNmb3JtICkgewogCi0gICAgdGhhdC56b29tZWQgPSB0cnVlOwotICAgIHRp
bWUgPSB0aW1lID09PSB1bmRlZmluZWQgPyAyMDAgOiB0aW1lOwotICAgIHggPSB4IC0gdGhhdC53
cmFwcGVyT2Zmc2V0TGVmdCAtIHRoYXQueDsKLSAgICB5ID0geSAtIHRoYXQud3JhcHBlck9mZnNl
dFRvcCAtIHRoYXQueTsKLSAgICB0aGF0LnggPSB4IC0geCAqIHJlbFNjYWxlICsgdGhhdC54Owot
ICAgIHRoYXQueSA9IHkgLSB5ICogcmVsU2NhbGUgKyB0aGF0Lnk7CisvKiBSRVBMQUNFIFNUQVJU
OiBfdHJhbnNsYXRlICovCiAKLSAgICB0aGF0LnNjYWxlID0gc2NhbGU7Ci0gICAgdGhhdC5yZWZy
ZXNoKCk7CisgICAgICB0aGlzLnNjcm9sbGVyU3R5bGVbdXRpbHMuc3R5bGUudHJhbnNmb3JtXSA9
ICd0cmFuc2xhdGUoJyArIHggKyAncHgsJyArIHkgKyAncHgpJyArIHRoaXMudHJhbnNsYXRlWjsK
IAotICAgIHRoYXQueCA9IHRoYXQueCA+IDAgPyAwIDogdGhhdC54IDwgdGhhdC5tYXhTY3JvbGxY
ID8gdGhhdC5tYXhTY3JvbGxYIDogdGhhdC54OwotICAgIHRoYXQueSA9IHRoYXQueSA+IHRoYXQu
bWluU2Nyb2xsWSA/IHRoYXQubWluU2Nyb2xsWSA6IHRoYXQueSA8IHRoYXQubWF4U2Nyb2xsWSA/
IHRoYXQubWF4U2Nyb2xsWSA6IHRoYXQueTsKKy8qIFJFUExBQ0UgRU5EOiBfdHJhbnNsYXRlICov
CiAKLSAgICB0aGF0LnNjcm9sbGVyLnN0eWxlW3ZlbmRvciArICdUcmFuc2l0aW9uRHVyYXRpb24n
XSA9IHRpbWUgKyAnbXMnOwotICAgIHRoYXQuc2Nyb2xsZXIuc3R5bGVbdmVuZG9yICsgJ1RyYW5z
Zm9ybSddID0gdHJuT3BlbiArIHRoYXQueCArICdweCwnICsgdGhhdC55ICsgJ3B4JyArIHRybkNs
b3NlICsgJyBzY2FsZSgnICsgc2NhbGUgKyAnKSc7Ci0gICAgdGhhdC56b29tZWQgPSBmYWxzZTsK
LSAgfSwKLSAgCi0gIGlzUmVhZHk6IGZ1bmN0aW9uICgpIHsKLSAgICByZXR1cm4gIXRoaXMubW92
ZWQgJiYgIXRoaXMuem9vbWVkICYmICF0aGlzLmFuaW1hdGluZzsKLSAgfQotfTsKKyAgICB9IGVs
c2UgeworICAgICAgeCA9IE1hdGgucm91bmQoeCk7CisgICAgICB5ID0gTWF0aC5yb3VuZCh5KTsK
KyAgICAgIHRoaXMuc2Nyb2xsZXJTdHlsZS5sZWZ0ID0geCArICdweCc7CisgICAgICB0aGlzLnNj
cm9sbGVyU3R5bGUudG9wID0geSArICdweCc7CisgICAgfQorCisgICAgdGhpcy54ID0geDsKKyAg
ICB0aGlzLnkgPSB5OworCisKKyAgaWYgKCB0aGlzLmluZGljYXRvcnMgKSB7CisgICAgZm9yICgg
dmFyIGkgPSB0aGlzLmluZGljYXRvcnMubGVuZ3RoOyBpLS07ICkgeworICAgICAgdGhpcy5pbmRp
Y2F0b3JzW2ldLnVwZGF0ZVBvc2l0aW9uKCk7CisgICAgfQorICB9CisKKworLy8gSU5TRVJUIFBP
SU5UOiBfdHJhbnNsYXRlCisKKyAgfSwKKworICBfaW5pdEV2ZW50czogZnVuY3Rpb24gKHJlbW92
ZSkgeworICAgIHZhciBldmVudFR5cGUgPSByZW1vdmUgPyB1dGlscy5yZW1vdmVFdmVudCA6IHV0
aWxzLmFkZEV2ZW50LAorICAgICAgdGFyZ2V0ID0gdGhpcy5vcHRpb25zLmJpbmRUb1dyYXBwZXIg
PyB0aGlzLndyYXBwZXIgOiB3aW5kb3c7CisKKyAgICBldmVudFR5cGUod2luZG93LCAnb3JpZW50
YXRpb25jaGFuZ2UnLCB0aGlzKTsKKyAgICBldmVudFR5cGUod2luZG93LCAncmVzaXplJywgdGhp
cyk7CisKKyAgICBpZiAoIHRoaXMub3B0aW9ucy5jbGljayApIHsKKyAgICAgIGV2ZW50VHlwZSh0
aGlzLndyYXBwZXIsICdjbGljaycsIHRoaXMsIHRydWUpOworICAgIH0KKworICAgIGlmICggIXRo
aXMub3B0aW9ucy5kaXNhYmxlTW91c2UgKSB7CisgICAgICBldmVudFR5cGUodGhpcy53cmFwcGVy
LCAnbW91c2Vkb3duJywgdGhpcyk7CisgICAgICBldmVudFR5cGUodGFyZ2V0LCAnbW91c2Vtb3Zl
JywgdGhpcyk7CisgICAgICBldmVudFR5cGUodGFyZ2V0LCAnbW91c2VjYW5jZWwnLCB0aGlzKTsK
KyAgICAgIGV2ZW50VHlwZSh0YXJnZXQsICdtb3VzZXVwJywgdGhpcyk7CisgICAgfQorCisgICAg
aWYgKCB1dGlscy5oYXNQb2ludGVyICYmICF0aGlzLm9wdGlvbnMuZGlzYWJsZVBvaW50ZXIgKSB7
CisgICAgICBldmVudFR5cGUodGhpcy53cmFwcGVyLCB1dGlscy5wcmVmaXhQb2ludGVyRXZlbnQo
J3BvaW50ZXJkb3duJyksIHRoaXMpOworICAgICAgZXZlbnRUeXBlKHRhcmdldCwgdXRpbHMucHJl
Zml4UG9pbnRlckV2ZW50KCdwb2ludGVybW92ZScpLCB0aGlzKTsKKyAgICAgIGV2ZW50VHlwZSh0
YXJnZXQsIHV0aWxzLnByZWZpeFBvaW50ZXJFdmVudCgncG9pbnRlcmNhbmNlbCcpLCB0aGlzKTsK
KyAgICAgIGV2ZW50VHlwZSh0YXJnZXQsIHV0aWxzLnByZWZpeFBvaW50ZXJFdmVudCgncG9pbnRl
cnVwJyksIHRoaXMpOworICAgIH0KKworICAgIGlmICggdXRpbHMuaGFzVG91Y2ggJiYgIXRoaXMu
b3B0aW9ucy5kaXNhYmxlVG91Y2ggKSB7CisgICAgICBldmVudFR5cGUodGhpcy53cmFwcGVyLCAn
dG91Y2hzdGFydCcsIHRoaXMpOworICAgICAgZXZlbnRUeXBlKHRhcmdldCwgJ3RvdWNobW92ZScs
IHRoaXMpOworICAgICAgZXZlbnRUeXBlKHRhcmdldCwgJ3RvdWNoY2FuY2VsJywgdGhpcyk7Cisg
ICAgICBldmVudFR5cGUodGFyZ2V0LCAndG91Y2hlbmQnLCB0aGlzKTsKKyAgICB9CisKKyAgICBl
dmVudFR5cGUodGhpcy5zY3JvbGxlciwgJ3RyYW5zaXRpb25lbmQnLCB0aGlzKTsKKyAgICBldmVu
dFR5cGUodGhpcy5zY3JvbGxlciwgJ3dlYmtpdFRyYW5zaXRpb25FbmQnLCB0aGlzKTsKKyAgICBl
dmVudFR5cGUodGhpcy5zY3JvbGxlciwgJ29UcmFuc2l0aW9uRW5kJywgdGhpcyk7CisgICAgZXZl
bnRUeXBlKHRoaXMuc2Nyb2xsZXIsICdNU1RyYW5zaXRpb25FbmQnLCB0aGlzKTsKKyAgfSwKKwor
ICBnZXRDb21wdXRlZFBvc2l0aW9uOiBmdW5jdGlvbiAoKSB7CisgICAgdmFyIG1hdHJpeCA9IHdp
bmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuc2Nyb2xsZXIsIG51bGwpLAorICAgICAgeCwgeTsK
KworICAgIGlmICggdGhpcy5vcHRpb25zLnVzZVRyYW5zZm9ybSApIHsKKyAgICAgIG1hdHJpeCA9
IG1hdHJpeFt1dGlscy5zdHlsZS50cmFuc2Zvcm1dLnNwbGl0KCcpJylbMF0uc3BsaXQoJywgJyk7
CisgICAgICB4ID0gKyhtYXRyaXhbMTJdIHx8IG1hdHJpeFs0XSk7CisgICAgICB5ID0gKyhtYXRy
aXhbMTNdIHx8IG1hdHJpeFs1XSk7CisgICAgfSBlbHNlIHsKKyAgICAgIHggPSArbWF0cml4Lmxl
ZnQucmVwbGFjZSgvW14tXGQuXS9nLCAnJyk7CisgICAgICB5ID0gK21hdHJpeC50b3AucmVwbGFj
ZSgvW14tXGQuXS9nLCAnJyk7CisgICAgfQorCisgICAgcmV0dXJuIHsgeDogeCwgeTogeSB9Owor
ICB9LAorCisgIF9pbml0SW5kaWNhdG9yczogZnVuY3Rpb24gKCkgeworICAgIHZhciBpbnRlcmFj
dGl2ZSA9IHRoaXMub3B0aW9ucy5pbnRlcmFjdGl2ZVNjcm9sbGJhcnMsCisgICAgICBjdXN0b21T
dHlsZSA9IHR5cGVvZiB0aGlzLm9wdGlvbnMuc2Nyb2xsYmFycyAhPSAnc3RyaW5nJywKKyAgICAg
IGluZGljYXRvcnMgPSBbXSwKKyAgICAgIGluZGljYXRvcjsKKworICAgIHZhciB0aGF0ID0gdGhp
czsKKworICAgIHRoaXMuaW5kaWNhdG9ycyA9IFtdOworCisgICAgaWYgKCB0aGlzLm9wdGlvbnMu
c2Nyb2xsYmFycyApIHsKKyAgICAgIC8vIFZlcnRpY2FsIHNjcm9sbGJhcgorICAgICAgaWYgKCB0
aGlzLm9wdGlvbnMuc2Nyb2xsWSApIHsKKyAgICAgICAgaW5kaWNhdG9yID0geworICAgICAgICAg
IGVsOiBjcmVhdGVEZWZhdWx0U2Nyb2xsYmFyKCd2JywgaW50ZXJhY3RpdmUsIHRoaXMub3B0aW9u
cy5zY3JvbGxiYXJzKSwKKyAgICAgICAgICBpbnRlcmFjdGl2ZTogaW50ZXJhY3RpdmUsCisgICAg
ICAgICAgZGVmYXVsdFNjcm9sbGJhcnM6IHRydWUsCisgICAgICAgICAgY3VzdG9tU3R5bGU6IGN1
c3RvbVN0eWxlLAorICAgICAgICAgIHJlc2l6ZTogdGhpcy5vcHRpb25zLnJlc2l6ZVNjcm9sbGJh
cnMsCisgICAgICAgICAgc2hyaW5rOiB0aGlzLm9wdGlvbnMuc2hyaW5rU2Nyb2xsYmFycywKKyAg
ICAgICAgICBmYWRlOiB0aGlzLm9wdGlvbnMuZmFkZVNjcm9sbGJhcnMsCisgICAgICAgICAgbGlz
dGVuWDogZmFsc2UKKyAgICAgICAgfTsKKworICAgICAgICB0aGlzLndyYXBwZXIuYXBwZW5kQ2hp
bGQoaW5kaWNhdG9yLmVsKTsKKyAgICAgICAgaW5kaWNhdG9ycy5wdXNoKGluZGljYXRvcik7Cisg
ICAgICB9CisKKyAgICAgIC8vIEhvcml6b250YWwgc2Nyb2xsYmFyCisgICAgICBpZiAoIHRoaXMu
b3B0aW9ucy5zY3JvbGxYICkgeworICAgICAgICBpbmRpY2F0b3IgPSB7CisgICAgICAgICAgZWw6
IGNyZWF0ZURlZmF1bHRTY3JvbGxiYXIoJ2gnLCBpbnRlcmFjdGl2ZSwgdGhpcy5vcHRpb25zLnNj
cm9sbGJhcnMpLAorICAgICAgICAgIGludGVyYWN0aXZlOiBpbnRlcmFjdGl2ZSwKKyAgICAgICAg
ICBkZWZhdWx0U2Nyb2xsYmFyczogdHJ1ZSwKKyAgICAgICAgICBjdXN0b21TdHlsZTogY3VzdG9t
U3R5bGUsCisgICAgICAgICAgcmVzaXplOiB0aGlzLm9wdGlvbnMucmVzaXplU2Nyb2xsYmFycywK
KyAgICAgICAgICBzaHJpbms6IHRoaXMub3B0aW9ucy5zaHJpbmtTY3JvbGxiYXJzLAorICAgICAg
ICAgIGZhZGU6IHRoaXMub3B0aW9ucy5mYWRlU2Nyb2xsYmFycywKKyAgICAgICAgICBsaXN0ZW5Z
OiBmYWxzZQorICAgICAgICB9OworCisgICAgICAgIHRoaXMud3JhcHBlci5hcHBlbmRDaGlsZChp
bmRpY2F0b3IuZWwpOworICAgICAgICBpbmRpY2F0b3JzLnB1c2goaW5kaWNhdG9yKTsKKyAgICAg
IH0KKyAgICB9CisKKyAgICBpZiAoIHRoaXMub3B0aW9ucy5pbmRpY2F0b3JzICkgeworICAgICAg
Ly8gVE9ETzogY2hlY2sgY29uY2F0IGNvbXBhdGliaWxpdHkKKyAgICAgIGluZGljYXRvcnMgPSBp
bmRpY2F0b3JzLmNvbmNhdCh0aGlzLm9wdGlvbnMuaW5kaWNhdG9ycyk7CisgICAgfQorCisgICAg
Zm9yICggdmFyIGkgPSBpbmRpY2F0b3JzLmxlbmd0aDsgaS0tOyApIHsKKyAgICAgIHRoaXMuaW5k
aWNhdG9ycy5wdXNoKCBuZXcgSW5kaWNhdG9yKHRoaXMsIGluZGljYXRvcnNbaV0pICk7CisgICAg
fQorCisgICAgLy8gVE9ETzogY2hlY2sgaWYgd2UgY2FuIHVzZSBhcnJheS5tYXAgKHdpZGUgY29t
cGF0aWJpbGl0eSBhbmQgcGVyZm9ybWFuY2UgaXNzdWVzKQorICAgIGZ1bmN0aW9uIF9pbmRpY2F0
b3JzTWFwIChmbikgeworICAgICAgZm9yICggdmFyIGkgPSB0aGF0LmluZGljYXRvcnMubGVuZ3Ro
OyBpLS07ICkgeworICAgICAgICBmbi5jYWxsKHRoYXQuaW5kaWNhdG9yc1tpXSk7CisgICAgICB9
CisgICAgfQorCisgICAgaWYgKCB0aGlzLm9wdGlvbnMuZmFkZVNjcm9sbGJhcnMgKSB7CisgICAg
ICB0aGlzLm9uKCdzY3JvbGxFbmQnLCBmdW5jdGlvbiAoKSB7CisgICAgICAgIF9pbmRpY2F0b3Jz
TWFwKGZ1bmN0aW9uICgpIHsKKyAgICAgICAgICB0aGlzLmZhZGUoKTsKKyAgICAgICAgfSk7Cisg
ICAgICB9KTsKKworICAgICAgdGhpcy5vbignc2Nyb2xsQ2FuY2VsJywgZnVuY3Rpb24gKCkgewor
ICAgICAgICBfaW5kaWNhdG9yc01hcChmdW5jdGlvbiAoKSB7CisgICAgICAgICAgdGhpcy5mYWRl
KCk7CisgICAgICAgIH0pOworICAgICAgfSk7CisKKyAgICAgIHRoaXMub24oJ3Njcm9sbFN0YXJ0
JywgZnVuY3Rpb24gKCkgeworICAgICAgICBfaW5kaWNhdG9yc01hcChmdW5jdGlvbiAoKSB7Cisg
ICAgICAgICAgdGhpcy5mYWRlKDEpOworICAgICAgICB9KTsKKyAgICAgIH0pOworCisgICAgICB0
aGlzLm9uKCdiZWZvcmVTY3JvbGxTdGFydCcsIGZ1bmN0aW9uICgpIHsKKyAgICAgICAgX2luZGlj
YXRvcnNNYXAoZnVuY3Rpb24gKCkgeworICAgICAgICAgIHRoaXMuZmFkZSgxLCB0cnVlKTsKKyAg
ICAgICAgfSk7CisgICAgICB9KTsKKyAgICB9CisKKworICAgIHRoaXMub24oJ3JlZnJlc2gnLCBm
dW5jdGlvbiAoKSB7CisgICAgICBfaW5kaWNhdG9yc01hcChmdW5jdGlvbiAoKSB7CisgICAgICAg
IHRoaXMucmVmcmVzaCgpOworICAgICAgfSk7CisgICAgfSk7CisKKyAgICB0aGlzLm9uKCdkZXN0
cm95JywgZnVuY3Rpb24gKCkgeworICAgICAgX2luZGljYXRvcnNNYXAoZnVuY3Rpb24gKCkgewor
ICAgICAgICB0aGlzLmRlc3Ryb3koKTsKKyAgICAgIH0pOworCisgICAgICBkZWxldGUgdGhpcy5p
bmRpY2F0b3JzOworICAgIH0pOworICB9LAorCisgIF9pbml0V2hlZWw6IGZ1bmN0aW9uICgpIHsK
KyAgICB1dGlscy5hZGRFdmVudCh0aGlzLndyYXBwZXIsICd3aGVlbCcsIHRoaXMpOworICAgIHV0
aWxzLmFkZEV2ZW50KHRoaXMud3JhcHBlciwgJ21vdXNld2hlZWwnLCB0aGlzKTsKKyAgICB1dGls
cy5hZGRFdmVudCh0aGlzLndyYXBwZXIsICdET01Nb3VzZVNjcm9sbCcsIHRoaXMpOworCisgICAg
dGhpcy5vbignZGVzdHJveScsIGZ1bmN0aW9uICgpIHsKKyAgICAgIHV0aWxzLnJlbW92ZUV2ZW50
KHRoaXMud3JhcHBlciwgJ3doZWVsJywgdGhpcyk7CisgICAgICB1dGlscy5yZW1vdmVFdmVudCh0
aGlzLndyYXBwZXIsICdtb3VzZXdoZWVsJywgdGhpcyk7CisgICAgICB1dGlscy5yZW1vdmVFdmVu
dCh0aGlzLndyYXBwZXIsICdET01Nb3VzZVNjcm9sbCcsIHRoaXMpOworICAgIH0pOworICB9LAor
CisgIF93aGVlbDogZnVuY3Rpb24gKGUpIHsKKyAgICBpZiAoICF0aGlzLmVuYWJsZWQgKSB7Cisg
ICAgICByZXR1cm47CisgICAgfQorCisgICAgZS5wcmV2ZW50RGVmYXVsdCgpOworICAgIGUuc3Rv
cFByb3BhZ2F0aW9uKCk7CisKKyAgICB2YXIgd2hlZWxEZWx0YVgsIHdoZWVsRGVsdGFZLAorICAg
ICAgbmV3WCwgbmV3WSwKKyAgICAgIHRoYXQgPSB0aGlzOworCisgICAgaWYgKCB0aGlzLndoZWVs
VGltZW91dCA9PT0gdW5kZWZpbmVkICkgeworICAgICAgdGhhdC5fZXhlY0V2ZW50KCdzY3JvbGxT
dGFydCcpOworICAgIH0KKworICAgIC8vIEV4ZWN1dGUgdGhlIHNjcm9sbEVuZCBldmVudCBhZnRl
ciA0MDBtcyB0aGUgd2hlZWwgc3RvcHBlZCBzY3JvbGxpbmcKKyAgICBjbGVhclRpbWVvdXQodGhp
cy53aGVlbFRpbWVvdXQpOworICAgIHRoaXMud2hlZWxUaW1lb3V0ID0gc2V0VGltZW91dChmdW5j
dGlvbiAoKSB7CisgICAgICB0aGF0Ll9leGVjRXZlbnQoJ3Njcm9sbEVuZCcpOworICAgICAgdGhh
dC53aGVlbFRpbWVvdXQgPSB1bmRlZmluZWQ7CisgICAgfSwgNDAwKTsKKworICAgIGlmICggJ2Rl
bHRhWCcgaW4gZSApIHsKKyAgICAgIHdoZWVsRGVsdGFYID0gLWUuZGVsdGFYOworICAgICAgd2hl
ZWxEZWx0YVkgPSAtZS5kZWx0YVk7CisgICAgfSBlbHNlIGlmICggJ3doZWVsRGVsdGFYJyBpbiBl
ICkgeworICAgICAgd2hlZWxEZWx0YVggPSBlLndoZWVsRGVsdGFYIC8gMTIwICogdGhpcy5vcHRp
b25zLm1vdXNlV2hlZWxTcGVlZDsKKyAgICAgIHdoZWVsRGVsdGFZID0gZS53aGVlbERlbHRhWSAv
IDEyMCAqIHRoaXMub3B0aW9ucy5tb3VzZVdoZWVsU3BlZWQ7CisgICAgfSBlbHNlIGlmICggJ3do
ZWVsRGVsdGEnIGluIGUgKSB7CisgICAgICB3aGVlbERlbHRhWCA9IHdoZWVsRGVsdGFZID0gZS53
aGVlbERlbHRhIC8gMTIwICogdGhpcy5vcHRpb25zLm1vdXNlV2hlZWxTcGVlZDsKKyAgICB9IGVs
c2UgaWYgKCAnZGV0YWlsJyBpbiBlICkgeworICAgICAgd2hlZWxEZWx0YVggPSB3aGVlbERlbHRh
WSA9IC1lLmRldGFpbCAvIDMgKiB0aGlzLm9wdGlvbnMubW91c2VXaGVlbFNwZWVkOworICAgIH0g
ZWxzZSB7CisgICAgICByZXR1cm47CisgICAgfQorCisgICAgd2hlZWxEZWx0YVggKj0gdGhpcy5v
cHRpb25zLmludmVydFdoZWVsRGlyZWN0aW9uOworICAgIHdoZWVsRGVsdGFZICo9IHRoaXMub3B0
aW9ucy5pbnZlcnRXaGVlbERpcmVjdGlvbjsKKworICAgIGlmICggIXRoaXMuaGFzVmVydGljYWxT
Y3JvbGwgKSB7CisgICAgICB3aGVlbERlbHRhWCA9IHdoZWVsRGVsdGFZOworICAgICAgd2hlZWxE
ZWx0YVkgPSAwOworICAgIH0KKworICAgIGlmICggdGhpcy5vcHRpb25zLnNuYXAgKSB7CisgICAg
ICBuZXdYID0gdGhpcy5jdXJyZW50UGFnZS5wYWdlWDsKKyAgICAgIG5ld1kgPSB0aGlzLmN1cnJl
bnRQYWdlLnBhZ2VZOworCisgICAgICBpZiAoIHdoZWVsRGVsdGFYID4gMCApIHsKKyAgICAgICAg
bmV3WC0tOworICAgICAgfSBlbHNlIGlmICggd2hlZWxEZWx0YVggPCAwICkgeworICAgICAgICBu
ZXdYKys7CisgICAgICB9CisKKyAgICAgIGlmICggd2hlZWxEZWx0YVkgPiAwICkgeworICAgICAg
ICBuZXdZLS07CisgICAgICB9IGVsc2UgaWYgKCB3aGVlbERlbHRhWSA8IDAgKSB7CisgICAgICAg
IG5ld1krKzsKKyAgICAgIH0KKworICAgICAgdGhpcy5nb1RvUGFnZShuZXdYLCBuZXdZKTsKKwor
ICAgICAgcmV0dXJuOworICAgIH0KKworICAgIG5ld1ggPSB0aGlzLnggKyBNYXRoLnJvdW5kKHRo
aXMuaGFzSG9yaXpvbnRhbFNjcm9sbCA/IHdoZWVsRGVsdGFYIDogMCk7CisgICAgbmV3WSA9IHRo
aXMueSArIE1hdGgucm91bmQodGhpcy5oYXNWZXJ0aWNhbFNjcm9sbCA/IHdoZWVsRGVsdGFZIDog
MCk7CisKKyAgICBpZiAoIG5ld1ggPiAwICkgeworICAgICAgbmV3WCA9IDA7CisgICAgfSBlbHNl
IGlmICggbmV3WCA8IHRoaXMubWF4U2Nyb2xsWCApIHsKKyAgICAgIG5ld1ggPSB0aGlzLm1heFNj
cm9sbFg7CisgICAgfQorCisgICAgaWYgKCBuZXdZID4gMCApIHsKKyAgICAgIG5ld1kgPSAwOwor
ICAgIH0gZWxzZSBpZiAoIG5ld1kgPCB0aGlzLm1heFNjcm9sbFkgKSB7CisgICAgICBuZXdZID0g
dGhpcy5tYXhTY3JvbGxZOworICAgIH0KKworICAgIHRoaXMuc2Nyb2xsVG8obmV3WCwgbmV3WSwg
MCk7CisKKy8vIElOU0VSVCBQT0lOVDogX3doZWVsCisgIH0sCisKKyAgX2luaXRTbmFwOiBmdW5j
dGlvbiAoKSB7CisgICAgdGhpcy5jdXJyZW50UGFnZSA9IHt9OworCisgICAgaWYgKCB0eXBlb2Yg
dGhpcy5vcHRpb25zLnNuYXAgPT0gJ3N0cmluZycgKSB7CisgICAgICB0aGlzLm9wdGlvbnMuc25h
cCA9IHRoaXMuc2Nyb2xsZXIucXVlcnlTZWxlY3RvckFsbCh0aGlzLm9wdGlvbnMuc25hcCk7Cisg
ICAgfQorCisgICAgdGhpcy5vbigncmVmcmVzaCcsIGZ1bmN0aW9uICgpIHsKKyAgICAgIHZhciBp
ID0gMCwgbCwKKyAgICAgICAgbSA9IDAsIG4sCisgICAgICAgIGN4LCBjeSwKKyAgICAgICAgeCA9
IDAsIHksCisgICAgICAgIHN0ZXBYID0gdGhpcy5vcHRpb25zLnNuYXBTdGVwWCB8fCB0aGlzLndy
YXBwZXJXaWR0aCwKKyAgICAgICAgc3RlcFkgPSB0aGlzLm9wdGlvbnMuc25hcFN0ZXBZIHx8IHRo
aXMud3JhcHBlckhlaWdodCwKKyAgICAgICAgZWw7CisKKyAgICAgIHRoaXMucGFnZXMgPSBbXTsK
KworICAgICAgaWYgKCAhdGhpcy53cmFwcGVyV2lkdGggfHwgIXRoaXMud3JhcHBlckhlaWdodCB8
fCAhdGhpcy5zY3JvbGxlcldpZHRoIHx8ICF0aGlzLnNjcm9sbGVySGVpZ2h0ICkgeworICAgICAg
ICByZXR1cm47CisgICAgICB9CisKKyAgICAgIGlmICggdGhpcy5vcHRpb25zLnNuYXAgPT09IHRy
dWUgKSB7CisgICAgICAgIGN4ID0gTWF0aC5yb3VuZCggc3RlcFggLyAyICk7CisgICAgICAgIGN5
ID0gTWF0aC5yb3VuZCggc3RlcFkgLyAyICk7CisKKyAgICAgICAgd2hpbGUgKCB4ID4gLXRoaXMu
c2Nyb2xsZXJXaWR0aCApIHsKKyAgICAgICAgICB0aGlzLnBhZ2VzW2ldID0gW107CisgICAgICAg
ICAgbCA9IDA7CisgICAgICAgICAgeSA9IDA7CisKKyAgICAgICAgICB3aGlsZSAoIHkgPiAtdGhp
cy5zY3JvbGxlckhlaWdodCApIHsKKyAgICAgICAgICAgIHRoaXMucGFnZXNbaV1bbF0gPSB7Cisg
ICAgICAgICAgICAgIHg6IE1hdGgubWF4KHgsIHRoaXMubWF4U2Nyb2xsWCksCisgICAgICAgICAg
ICAgIHk6IE1hdGgubWF4KHksIHRoaXMubWF4U2Nyb2xsWSksCisgICAgICAgICAgICAgIHdpZHRo
OiBzdGVwWCwKKyAgICAgICAgICAgICAgaGVpZ2h0OiBzdGVwWSwKKyAgICAgICAgICAgICAgY3g6
IHggLSBjeCwKKyAgICAgICAgICAgICAgY3k6IHkgLSBjeQorICAgICAgICAgICAgfTsKKworICAg
ICAgICAgICAgeSAtPSBzdGVwWTsKKyAgICAgICAgICAgIGwrKzsKKyAgICAgICAgICB9CisKKyAg
ICAgICAgICB4IC09IHN0ZXBYOworICAgICAgICAgIGkrKzsKKyAgICAgICAgfQorICAgICAgfSBl
bHNlIHsKKyAgICAgICAgZWwgPSB0aGlzLm9wdGlvbnMuc25hcDsKKyAgICAgICAgbCA9IGVsLmxl
bmd0aDsKKyAgICAgICAgbiA9IC0xOworCisgICAgICAgIGZvciAoIDsgaSA8IGw7IGkrKyApIHsK
KyAgICAgICAgICBpZiAoIGkgPT09IDAgfHwgZWxbaV0ub2Zmc2V0TGVmdCA8PSBlbFtpLTFdLm9m
ZnNldExlZnQgKSB7CisgICAgICAgICAgICBtID0gMDsKKyAgICAgICAgICAgIG4rKzsKKyAgICAg
ICAgICB9CisKKyAgICAgICAgICBpZiAoICF0aGlzLnBhZ2VzW21dICkgeworICAgICAgICAgICAg
dGhpcy5wYWdlc1ttXSA9IFtdOworICAgICAgICAgIH0KKworICAgICAgICAgIHggPSBNYXRoLm1h
eCgtZWxbaV0ub2Zmc2V0TGVmdCwgdGhpcy5tYXhTY3JvbGxYKTsKKyAgICAgICAgICB5ID0gTWF0
aC5tYXgoLWVsW2ldLm9mZnNldFRvcCwgdGhpcy5tYXhTY3JvbGxZKTsKKyAgICAgICAgICBjeCA9
IHggLSBNYXRoLnJvdW5kKGVsW2ldLm9mZnNldFdpZHRoIC8gMik7CisgICAgICAgICAgY3kgPSB5
IC0gTWF0aC5yb3VuZChlbFtpXS5vZmZzZXRIZWlnaHQgLyAyKTsKKworICAgICAgICAgIHRoaXMu
cGFnZXNbbV1bbl0gPSB7CisgICAgICAgICAgICB4OiB4LAorICAgICAgICAgICAgeTogeSwKKyAg
ICAgICAgICAgIHdpZHRoOiBlbFtpXS5vZmZzZXRXaWR0aCwKKyAgICAgICAgICAgIGhlaWdodDog
ZWxbaV0ub2Zmc2V0SGVpZ2h0LAorICAgICAgICAgICAgY3g6IGN4LAorICAgICAgICAgICAgY3k6
IGN5CisgICAgICAgICAgfTsKKworICAgICAgICAgIGlmICggeCA+IHRoaXMubWF4U2Nyb2xsWCAp
IHsKKyAgICAgICAgICAgIG0rKzsKKyAgICAgICAgICB9CisgICAgICAgIH0KKyAgICAgIH0KKyAg
ICAgIHRoaXMuZ29Ub1BhZ2UodGhpcy5jdXJyZW50UGFnZS5wYWdlWCB8fCAwLCB0aGlzLmN1cnJl
bnRQYWdlLnBhZ2VZIHx8IDAsIDApOworCisgICAgICAvLyBVcGRhdGUgc25hcCB0aHJlc2hvbGQg
aWYgbmVlZGVkCisgICAgICBpZiAoIHRoaXMub3B0aW9ucy5zbmFwVGhyZXNob2xkICUgMSA9PT0g
MCApIHsKKyAgICAgICAgdGhpcy5zbmFwVGhyZXNob2xkWCA9IHRoaXMub3B0aW9ucy5zbmFwVGhy
ZXNob2xkOworICAgICAgICB0aGlzLnNuYXBUaHJlc2hvbGRZID0gdGhpcy5vcHRpb25zLnNuYXBU
aHJlc2hvbGQ7CisgICAgICB9IGVsc2UgeworICAgICAgICB0aGlzLnNuYXBUaHJlc2hvbGRYID0g
TWF0aC5yb3VuZCh0aGlzLnBhZ2VzW3RoaXMuY3VycmVudFBhZ2UucGFnZVhdW3RoaXMuY3VycmVu
dFBhZ2UucGFnZVldLndpZHRoICogdGhpcy5vcHRpb25zLnNuYXBUaHJlc2hvbGQpOworICAgICAg
ICB0aGlzLnNuYXBUaHJlc2hvbGRZID0gTWF0aC5yb3VuZCh0aGlzLnBhZ2VzW3RoaXMuY3VycmVu
dFBhZ2UucGFnZVhdW3RoaXMuY3VycmVudFBhZ2UucGFnZVldLmhlaWdodCAqIHRoaXMub3B0aW9u
cy5zbmFwVGhyZXNob2xkKTsKKyAgICAgIH0KKyAgICB9KTsKKworICAgIHRoaXMub24oJ2ZsaWNr
JywgZnVuY3Rpb24gKCkgeworICAgICAgdmFyIHRpbWUgPSB0aGlzLm9wdGlvbnMuc25hcFNwZWVk
IHx8IE1hdGgubWF4KAorICAgICAgICAgIE1hdGgubWF4KAorICAgICAgICAgICAgTWF0aC5taW4o
TWF0aC5hYnModGhpcy54IC0gdGhpcy5zdGFydFgpLCAxMDAwKSwKKyAgICAgICAgICAgIE1hdGgu
bWluKE1hdGguYWJzKHRoaXMueSAtIHRoaXMuc3RhcnRZKSwgMTAwMCkKKyAgICAgICAgICApLCAz
MDApOworCisgICAgICB0aGlzLmdvVG9QYWdlKAorICAgICAgICB0aGlzLmN1cnJlbnRQYWdlLnBh
Z2VYICsgdGhpcy5kaXJlY3Rpb25YLAorICAgICAgICB0aGlzLmN1cnJlbnRQYWdlLnBhZ2VZICsg
dGhpcy5kaXJlY3Rpb25ZLAorICAgICAgICB0aW1lCisgICAgICApOworICAgIH0pOworICB9LAor
CisgIF9uZWFyZXN0U25hcDogZnVuY3Rpb24gKHgsIHkpIHsKKyAgICBpZiAoICF0aGlzLnBhZ2Vz
Lmxlbmd0aCApIHsKKyAgICAgIHJldHVybiB7IHg6IDAsIHk6IDAsIHBhZ2VYOiAwLCBwYWdlWTog
MCB9OworICAgIH0KKworICAgIHZhciBpID0gMCwKKyAgICAgIGwgPSB0aGlzLnBhZ2VzLmxlbmd0
aCwKKyAgICAgIG0gPSAwOworCisgICAgLy8gQ2hlY2sgaWYgd2UgZXhjZWVkZWQgdGhlIHNuYXAg
dGhyZXNob2xkCisgICAgaWYgKCBNYXRoLmFicyh4IC0gdGhpcy5hYnNTdGFydFgpIDwgdGhpcy5z
bmFwVGhyZXNob2xkWCAmJgorICAgICAgTWF0aC5hYnMoeSAtIHRoaXMuYWJzU3RhcnRZKSA8IHRo
aXMuc25hcFRocmVzaG9sZFkgKSB7CisgICAgICByZXR1cm4gdGhpcy5jdXJyZW50UGFnZTsKKyAg
ICB9CisKKyAgICBpZiAoIHggPiAwICkgeworICAgICAgeCA9IDA7CisgICAgfSBlbHNlIGlmICgg
eCA8IHRoaXMubWF4U2Nyb2xsWCApIHsKKyAgICAgIHggPSB0aGlzLm1heFNjcm9sbFg7CisgICAg
fQorCisgICAgaWYgKCB5ID4gMCApIHsKKyAgICAgIHkgPSAwOworICAgIH0gZWxzZSBpZiAoIHkg
PCB0aGlzLm1heFNjcm9sbFkgKSB7CisgICAgICB5ID0gdGhpcy5tYXhTY3JvbGxZOworICAgIH0K
KworICAgIGZvciAoIDsgaSA8IGw7IGkrKyApIHsKKyAgICAgIGlmICggeCA+PSB0aGlzLnBhZ2Vz
W2ldWzBdLmN4ICkgeworICAgICAgICB4ID0gdGhpcy5wYWdlc1tpXVswXS54OworICAgICAgICBi
cmVhazsKKyAgICAgIH0KKyAgICB9CisKKyAgICBsID0gdGhpcy5wYWdlc1tpXS5sZW5ndGg7CisK
KyAgICBmb3IgKCA7IG0gPCBsOyBtKysgKSB7CisgICAgICBpZiAoIHkgPj0gdGhpcy5wYWdlc1sw
XVttXS5jeSApIHsKKyAgICAgICAgeSA9IHRoaXMucGFnZXNbMF1bbV0ueTsKKyAgICAgICAgYnJl
YWs7CisgICAgICB9CisgICAgfQorCisgICAgaWYgKCBpID09IHRoaXMuY3VycmVudFBhZ2UucGFn
ZVggKSB7CisgICAgICBpICs9IHRoaXMuZGlyZWN0aW9uWDsKKworICAgICAgaWYgKCBpIDwgMCAp
IHsKKyAgICAgICAgaSA9IDA7CisgICAgICB9IGVsc2UgaWYgKCBpID49IHRoaXMucGFnZXMubGVu
Z3RoICkgeworICAgICAgICBpID0gdGhpcy5wYWdlcy5sZW5ndGggLSAxOworICAgICAgfQorCisg
ICAgICB4ID0gdGhpcy5wYWdlc1tpXVswXS54OworICAgIH0KKworICAgIGlmICggbSA9PSB0aGlz
LmN1cnJlbnRQYWdlLnBhZ2VZICkgeworICAgICAgbSArPSB0aGlzLmRpcmVjdGlvblk7CisKKyAg
ICAgIGlmICggbSA8IDAgKSB7CisgICAgICAgIG0gPSAwOworICAgICAgfSBlbHNlIGlmICggbSA+
PSB0aGlzLnBhZ2VzWzBdLmxlbmd0aCApIHsKKyAgICAgICAgbSA9IHRoaXMucGFnZXNbMF0ubGVu
Z3RoIC0gMTsKKyAgICAgIH0KKworICAgICAgeSA9IHRoaXMucGFnZXNbMF1bbV0ueTsKKyAgICB9
CisKKyAgICByZXR1cm4geworICAgICAgeDogeCwKKyAgICAgIHk6IHksCisgICAgICBwYWdlWDog
aSwKKyAgICAgIHBhZ2VZOiBtCisgICAgfTsKKyAgfSwKKworICBnb1RvUGFnZTogZnVuY3Rpb24g
KHgsIHksIHRpbWUsIGVhc2luZykgeworICAgIGVhc2luZyA9IGVhc2luZyB8fCB0aGlzLm9wdGlv
bnMuYm91bmNlRWFzaW5nOworCisgICAgaWYgKCB4ID49IHRoaXMucGFnZXMubGVuZ3RoICkgewor
ICAgICAgeCA9IHRoaXMucGFnZXMubGVuZ3RoIC0gMTsKKyAgICB9IGVsc2UgaWYgKCB4IDwgMCAp
IHsKKyAgICAgIHggPSAwOworICAgIH0KKworICAgIGlmICggeSA+PSB0aGlzLnBhZ2VzW3hdLmxl
bmd0aCApIHsKKyAgICAgIHkgPSB0aGlzLnBhZ2VzW3hdLmxlbmd0aCAtIDE7CisgICAgfSBlbHNl
IGlmICggeSA8IDAgKSB7CisgICAgICB5ID0gMDsKKyAgICB9CisKKyAgICB2YXIgcG9zWCA9IHRo
aXMucGFnZXNbeF1beV0ueCwKKyAgICAgIHBvc1kgPSB0aGlzLnBhZ2VzW3hdW3ldLnk7CisKKyAg
ICB0aW1lID0gdGltZSA9PT0gdW5kZWZpbmVkID8gdGhpcy5vcHRpb25zLnNuYXBTcGVlZCB8fCBN
YXRoLm1heCgKKyAgICAgIE1hdGgubWF4KAorICAgICAgICBNYXRoLm1pbihNYXRoLmFicyhwb3NY
IC0gdGhpcy54KSwgMTAwMCksCisgICAgICAgIE1hdGgubWluKE1hdGguYWJzKHBvc1kgLSB0aGlz
LnkpLCAxMDAwKQorICAgICAgKSwgMzAwKSA6IHRpbWU7CisKKyAgICB0aGlzLmN1cnJlbnRQYWdl
ID0geworICAgICAgeDogcG9zWCwKKyAgICAgIHk6IHBvc1ksCisgICAgICBwYWdlWDogeCwKKyAg
ICAgIHBhZ2VZOiB5CisgICAgfTsKKworICAgIHRoaXMuc2Nyb2xsVG8ocG9zWCwgcG9zWSwgdGlt
ZSwgZWFzaW5nKTsKKyAgfSwKKworICBuZXh0OiBmdW5jdGlvbiAodGltZSwgZWFzaW5nKSB7Cisg
ICAgdmFyIHggPSB0aGlzLmN1cnJlbnRQYWdlLnBhZ2VYLAorICAgICAgeSA9IHRoaXMuY3VycmVu
dFBhZ2UucGFnZVk7CisKKyAgICB4Kys7CisKKyAgICBpZiAoIHggPj0gdGhpcy5wYWdlcy5sZW5n
dGggJiYgdGhpcy5oYXNWZXJ0aWNhbFNjcm9sbCApIHsKKyAgICAgIHggPSAwOworICAgICAgeSsr
OworICAgIH0KKworICAgIHRoaXMuZ29Ub1BhZ2UoeCwgeSwgdGltZSwgZWFzaW5nKTsKKyAgfSwK
KworICBwcmV2OiBmdW5jdGlvbiAodGltZSwgZWFzaW5nKSB7CisgICAgdmFyIHggPSB0aGlzLmN1
cnJlbnRQYWdlLnBhZ2VYLAorICAgICAgeSA9IHRoaXMuY3VycmVudFBhZ2UucGFnZVk7CisKKyAg
ICB4LS07CisKKyAgICBpZiAoIHggPCAwICYmIHRoaXMuaGFzVmVydGljYWxTY3JvbGwgKSB7Cisg
ICAgICB4ID0gMDsKKyAgICAgIHktLTsKKyAgICB9CisKKyAgICB0aGlzLmdvVG9QYWdlKHgsIHks
IHRpbWUsIGVhc2luZyk7CisgIH0sCisKKyAgX2luaXRLZXlzOiBmdW5jdGlvbiAoZSkgeworICAg
IC8vIGRlZmF1bHQga2V5IGJpbmRpbmdzCisgICAgdmFyIGtleXMgPSB7CisgICAgICBwYWdlVXA6
IDMzLAorICAgICAgcGFnZURvd246IDM0LAorICAgICAgZW5kOiAzNSwKKyAgICAgIGhvbWU6IDM2
LAorICAgICAgbGVmdDogMzcsCisgICAgICB1cDogMzgsCisgICAgICByaWdodDogMzksCisgICAg
ICBkb3duOiA0MAorICAgIH07CisgICAgdmFyIGk7CisKKyAgICAvLyBpZiB5b3UgZ2l2ZSBtZSBj
aGFyYWN0ZXJzIEkgZ2l2ZSB5b3Uga2V5Y29kZQorICAgIGlmICggdHlwZW9mIHRoaXMub3B0aW9u
cy5rZXlCaW5kaW5ncyA9PSAnb2JqZWN0JyApIHsKKyAgICAgIGZvciAoIGkgaW4gdGhpcy5vcHRp
b25zLmtleUJpbmRpbmdzICkgeworICAgICAgICBpZiAoIHR5cGVvZiB0aGlzLm9wdGlvbnMua2V5
QmluZGluZ3NbaV0gPT0gJ3N0cmluZycgKSB7CisgICAgICAgICAgdGhpcy5vcHRpb25zLmtleUJp
bmRpbmdzW2ldID0gdGhpcy5vcHRpb25zLmtleUJpbmRpbmdzW2ldLnRvVXBwZXJDYXNlKCkuY2hh
ckNvZGVBdCgwKTsKKyAgICAgICAgfQorICAgICAgfQorICAgIH0gZWxzZSB7CisgICAgICB0aGlz
Lm9wdGlvbnMua2V5QmluZGluZ3MgPSB7fTsKKyAgICB9CisKKyAgICBmb3IgKCBpIGluIGtleXMg
KSB7CisgICAgICB0aGlzLm9wdGlvbnMua2V5QmluZGluZ3NbaV0gPSB0aGlzLm9wdGlvbnMua2V5
QmluZGluZ3NbaV0gfHwga2V5c1tpXTsKKyAgICB9CisKKyAgICB1dGlscy5hZGRFdmVudCh3aW5k
b3csICdrZXlkb3duJywgdGhpcyk7CisKKyAgICB0aGlzLm9uKCdkZXN0cm95JywgZnVuY3Rpb24g
KCkgeworICAgICAgdXRpbHMucmVtb3ZlRXZlbnQod2luZG93LCAna2V5ZG93bicsIHRoaXMpOwor
ICAgIH0pOworICB9LAorCisgIF9rZXk6IGZ1bmN0aW9uIChlKSB7CisgICAgaWYgKCAhdGhpcy5l
bmFibGVkICkgeworICAgICAgcmV0dXJuOworICAgIH0KKworICAgIHZhciBzbmFwID0gdGhpcy5v
cHRpb25zLnNuYXAsIC8vIHdlIGFyZSB1c2luZyB0aGlzIGFsb3QsIGJldHRlciB0byBjYWNoZSBp
dAorICAgICAgbmV3WCA9IHNuYXAgPyB0aGlzLmN1cnJlbnRQYWdlLnBhZ2VYIDogdGhpcy54LAor
ICAgICAgbmV3WSA9IHNuYXAgPyB0aGlzLmN1cnJlbnRQYWdlLnBhZ2VZIDogdGhpcy55LAorICAg
ICAgbm93ID0gdXRpbHMuZ2V0VGltZSgpLAorICAgICAgcHJldlRpbWUgPSB0aGlzLmtleVRpbWUg
fHwgMCwKKyAgICAgIGFjY2VsZXJhdGlvbiA9IDAuMjUwLAorICAgICAgcG9zOworCisgICAgaWYg
KCB0aGlzLm9wdGlvbnMudXNlVHJhbnNpdGlvbiAmJiB0aGlzLmlzSW5UcmFuc2l0aW9uICkgewor
ICAgICAgcG9zID0gdGhpcy5nZXRDb21wdXRlZFBvc2l0aW9uKCk7CisKKyAgICAgIHRoaXMuX3Ry
YW5zbGF0ZShNYXRoLnJvdW5kKHBvcy54KSwgTWF0aC5yb3VuZChwb3MueSkpOworICAgICAgdGhp
cy5pc0luVHJhbnNpdGlvbiA9IGZhbHNlOworICAgIH0KKworICAgIHRoaXMua2V5QWNjZWxlcmF0
aW9uID0gbm93IC0gcHJldlRpbWUgPCAyMDAgPyBNYXRoLm1pbih0aGlzLmtleUFjY2VsZXJhdGlv
biArIGFjY2VsZXJhdGlvbiwgNTApIDogMDsKKworICAgIHN3aXRjaCAoIGUua2V5Q29kZSApIHsK
KyAgICAgIGNhc2UgdGhpcy5vcHRpb25zLmtleUJpbmRpbmdzLnBhZ2VVcDoKKyAgICAgICAgaWYg
KCB0aGlzLmhhc0hvcml6b250YWxTY3JvbGwgJiYgIXRoaXMuaGFzVmVydGljYWxTY3JvbGwgKSB7
CisgICAgICAgICAgbmV3WCArPSBzbmFwID8gMSA6IHRoaXMud3JhcHBlcldpZHRoOworICAgICAg
ICB9IGVsc2UgeworICAgICAgICAgIG5ld1kgKz0gc25hcCA/IDEgOiB0aGlzLndyYXBwZXJIZWln
aHQ7CisgICAgICAgIH0KKyAgICAgICAgYnJlYWs7CisgICAgICBjYXNlIHRoaXMub3B0aW9ucy5r
ZXlCaW5kaW5ncy5wYWdlRG93bjoKKyAgICAgICAgaWYgKCB0aGlzLmhhc0hvcml6b250YWxTY3Jv
bGwgJiYgIXRoaXMuaGFzVmVydGljYWxTY3JvbGwgKSB7CisgICAgICAgICAgbmV3WCAtPSBzbmFw
ID8gMSA6IHRoaXMud3JhcHBlcldpZHRoOworICAgICAgICB9IGVsc2UgeworICAgICAgICAgIG5l
d1kgLT0gc25hcCA/IDEgOiB0aGlzLndyYXBwZXJIZWlnaHQ7CisgICAgICAgIH0KKyAgICAgICAg
YnJlYWs7CisgICAgICBjYXNlIHRoaXMub3B0aW9ucy5rZXlCaW5kaW5ncy5lbmQ6CisgICAgICAg
IG5ld1ggPSBzbmFwID8gdGhpcy5wYWdlcy5sZW5ndGgtMSA6IHRoaXMubWF4U2Nyb2xsWDsKKyAg
ICAgICAgbmV3WSA9IHNuYXAgPyB0aGlzLnBhZ2VzWzBdLmxlbmd0aC0xIDogdGhpcy5tYXhTY3Jv
bGxZOworICAgICAgICBicmVhazsKKyAgICAgIGNhc2UgdGhpcy5vcHRpb25zLmtleUJpbmRpbmdz
LmhvbWU6CisgICAgICAgIG5ld1ggPSAwOworICAgICAgICBuZXdZID0gMDsKKyAgICAgICAgYnJl
YWs7CisgICAgICBjYXNlIHRoaXMub3B0aW9ucy5rZXlCaW5kaW5ncy5sZWZ0OgorICAgICAgICBu
ZXdYICs9IHNuYXAgPyAtMSA6IDUgKyB0aGlzLmtleUFjY2VsZXJhdGlvbj4+MDsKKyAgICAgICAg
YnJlYWs7CisgICAgICBjYXNlIHRoaXMub3B0aW9ucy5rZXlCaW5kaW5ncy51cDoKKyAgICAgICAg
bmV3WSArPSBzbmFwID8gMSA6IDUgKyB0aGlzLmtleUFjY2VsZXJhdGlvbj4+MDsKKyAgICAgICAg
YnJlYWs7CisgICAgICBjYXNlIHRoaXMub3B0aW9ucy5rZXlCaW5kaW5ncy5yaWdodDoKKyAgICAg
ICAgbmV3WCAtPSBzbmFwID8gLTEgOiA1ICsgdGhpcy5rZXlBY2NlbGVyYXRpb24+PjA7CisgICAg
ICAgIGJyZWFrOworICAgICAgY2FzZSB0aGlzLm9wdGlvbnMua2V5QmluZGluZ3MuZG93bjoKKyAg
ICAgICAgbmV3WSAtPSBzbmFwID8gMSA6IDUgKyB0aGlzLmtleUFjY2VsZXJhdGlvbj4+MDsKKyAg
ICAgICAgYnJlYWs7CisgICAgICBkZWZhdWx0OgorICAgICAgICByZXR1cm47CisgICAgfQorCisg
ICAgaWYgKCBzbmFwICkgeworICAgICAgdGhpcy5nb1RvUGFnZShuZXdYLCBuZXdZKTsKKyAgICAg
IHJldHVybjsKKyAgICB9CisKKyAgICBpZiAoIG5ld1ggPiAwICkgeworICAgICAgbmV3WCA9IDA7
CisgICAgICB0aGlzLmtleUFjY2VsZXJhdGlvbiA9IDA7CisgICAgfSBlbHNlIGlmICggbmV3WCA8
IHRoaXMubWF4U2Nyb2xsWCApIHsKKyAgICAgIG5ld1ggPSB0aGlzLm1heFNjcm9sbFg7CisgICAg
ICB0aGlzLmtleUFjY2VsZXJhdGlvbiA9IDA7CisgICAgfQorCisgICAgaWYgKCBuZXdZID4gMCAp
IHsKKyAgICAgIG5ld1kgPSAwOworICAgICAgdGhpcy5rZXlBY2NlbGVyYXRpb24gPSAwOworICAg
IH0gZWxzZSBpZiAoIG5ld1kgPCB0aGlzLm1heFNjcm9sbFkgKSB7CisgICAgICBuZXdZID0gdGhp
cy5tYXhTY3JvbGxZOworICAgICAgdGhpcy5rZXlBY2NlbGVyYXRpb24gPSAwOworICAgIH0KKwor
ICAgIHRoaXMuc2Nyb2xsVG8obmV3WCwgbmV3WSwgMCk7CisKKyAgICB0aGlzLmtleVRpbWUgPSBu
b3c7CisgIH0sCisKKyAgX2FuaW1hdGU6IGZ1bmN0aW9uIChkZXN0WCwgZGVzdFksIGR1cmF0aW9u
LCBlYXNpbmdGbikgeworICAgIHZhciB0aGF0ID0gdGhpcywKKyAgICAgIHN0YXJ0WCA9IHRoaXMu
eCwKKyAgICAgIHN0YXJ0WSA9IHRoaXMueSwKKyAgICAgIHN0YXJ0VGltZSA9IHV0aWxzLmdldFRp
bWUoKSwKKyAgICAgIGRlc3RUaW1lID0gc3RhcnRUaW1lICsgZHVyYXRpb247CisKKyAgICBmdW5j
dGlvbiBzdGVwICgpIHsKKyAgICAgIHZhciBub3cgPSB1dGlscy5nZXRUaW1lKCksCisgICAgICAg
IG5ld1gsIG5ld1ksCisgICAgICAgIGVhc2luZzsKKworICAgICAgaWYgKCBub3cgPj0gZGVzdFRp
bWUgKSB7CisgICAgICAgIHRoYXQuaXNBbmltYXRpbmcgPSBmYWxzZTsKKyAgICAgICAgdGhhdC5f
dHJhbnNsYXRlKGRlc3RYLCBkZXN0WSk7CisKKyAgICAgICAgaWYgKCAhdGhhdC5yZXNldFBvc2l0
aW9uKHRoYXQub3B0aW9ucy5ib3VuY2VUaW1lKSApIHsKKyAgICAgICAgICB0aGF0Ll9leGVjRXZl
bnQoJ3Njcm9sbEVuZCcpOworICAgICAgICB9CisKKyAgICAgICAgcmV0dXJuOworICAgICAgfQor
CisgICAgICBub3cgPSAoIG5vdyAtIHN0YXJ0VGltZSApIC8gZHVyYXRpb247CisgICAgICBlYXNp
bmcgPSBlYXNpbmdGbihub3cpOworICAgICAgbmV3WCA9ICggZGVzdFggLSBzdGFydFggKSAqIGVh
c2luZyArIHN0YXJ0WDsKKyAgICAgIG5ld1kgPSAoIGRlc3RZIC0gc3RhcnRZICkgKiBlYXNpbmcg
KyBzdGFydFk7CisgICAgICB0aGF0Ll90cmFuc2xhdGUobmV3WCwgbmV3WSk7CisKKyAgICAgIGlm
ICggdGhhdC5pc0FuaW1hdGluZyApIHsKKyAgICAgICAgckFGKHN0ZXApOworICAgICAgfQorICAg
IH0KKworICAgIHRoaXMuaXNBbmltYXRpbmcgPSB0cnVlOworICAgIHN0ZXAoKTsKKyAgfSwKKyAg
aGFuZGxlRXZlbnQ6IGZ1bmN0aW9uIChlKSB7CisgICAgc3dpdGNoICggZS50eXBlICkgeworICAg
ICAgY2FzZSAndG91Y2hzdGFydCc6CisgICAgICBjYXNlICdwb2ludGVyZG93bic6CisgICAgICBj
YXNlICdNU1BvaW50ZXJEb3duJzoKKyAgICAgIGNhc2UgJ21vdXNlZG93bic6CisgICAgICAgIHRo
aXMuX3N0YXJ0KGUpOworICAgICAgICBicmVhazsKKyAgICAgIGNhc2UgJ3RvdWNobW92ZSc6Cisg
ICAgICBjYXNlICdwb2ludGVybW92ZSc6CisgICAgICBjYXNlICdNU1BvaW50ZXJNb3ZlJzoKKyAg
ICAgIGNhc2UgJ21vdXNlbW92ZSc6CisgICAgICAgIHRoaXMuX21vdmUoZSk7CisgICAgICAgIGJy
ZWFrOworICAgICAgY2FzZSAndG91Y2hlbmQnOgorICAgICAgY2FzZSAncG9pbnRlcnVwJzoKKyAg
ICAgIGNhc2UgJ01TUG9pbnRlclVwJzoKKyAgICAgIGNhc2UgJ21vdXNldXAnOgorICAgICAgY2Fz
ZSAndG91Y2hjYW5jZWwnOgorICAgICAgY2FzZSAncG9pbnRlcmNhbmNlbCc6CisgICAgICBjYXNl
ICdNU1BvaW50ZXJDYW5jZWwnOgorICAgICAgY2FzZSAnbW91c2VjYW5jZWwnOgorICAgICAgICB0
aGlzLl9lbmQoZSk7CisgICAgICAgIGJyZWFrOworICAgICAgY2FzZSAnb3JpZW50YXRpb25jaGFu
Z2UnOgorICAgICAgY2FzZSAncmVzaXplJzoKKyAgICAgICAgdGhpcy5fcmVzaXplKCk7CisgICAg
ICAgIGJyZWFrOworICAgICAgY2FzZSAndHJhbnNpdGlvbmVuZCc6CisgICAgICBjYXNlICd3ZWJr
aXRUcmFuc2l0aW9uRW5kJzoKKyAgICAgIGNhc2UgJ29UcmFuc2l0aW9uRW5kJzoKKyAgICAgIGNh
c2UgJ01TVHJhbnNpdGlvbkVuZCc6CisgICAgICAgIHRoaXMuX3RyYW5zaXRpb25FbmQoZSk7Cisg
ICAgICAgIGJyZWFrOworICAgICAgY2FzZSAnd2hlZWwnOgorICAgICAgY2FzZSAnRE9NTW91c2VT
Y3JvbGwnOgorICAgICAgY2FzZSAnbW91c2V3aGVlbCc6CisgICAgICAgIHRoaXMuX3doZWVsKGUp
OworICAgICAgICBicmVhazsKKyAgICAgIGNhc2UgJ2tleWRvd24nOgorICAgICAgICB0aGlzLl9r
ZXkoZSk7CisgICAgICAgIGJyZWFrOworICAgICAgY2FzZSAnY2xpY2snOgorICAgICAgICBpZiAo
ICFlLl9jb25zdHJ1Y3RlZCApIHsKKyAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CisgICAg
ICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKKyAgICAgICAgfQorICAgICAgICBicmVhazsKKyAg
ICB9CisgIH0KK307CitmdW5jdGlvbiBjcmVhdGVEZWZhdWx0U2Nyb2xsYmFyIChkaXJlY3Rpb24s
IGludGVyYWN0aXZlLCB0eXBlKSB7CisgIHZhciBzY3JvbGxiYXIgPSBkb2N1bWVudC5jcmVhdGVF
bGVtZW50KCdkaXYnKSwKKyAgICBpbmRpY2F0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdk
aXYnKTsKKworICBpZiAoIHR5cGUgPT09IHRydWUgKSB7CisgICAgc2Nyb2xsYmFyLnN0eWxlLmNz
c1RleHQgPSAncG9zaXRpb246YWJzb2x1dGU7ei1pbmRleDo5OTk5JzsKKyAgICBpbmRpY2F0b3Iu
c3R5bGUuY3NzVGV4dCA9ICctd2Via2l0LWJveC1zaXppbmc6Ym9yZGVyLWJveDstbW96LWJveC1z
aXppbmc6Ym9yZGVyLWJveDtib3gtc2l6aW5nOmJvcmRlci1ib3g7cG9zaXRpb246YWJzb2x1dGU7
YmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuNSk7Ym9yZGVyOjFweCBzb2xpZCByZ2JhKDI1NSwyNTUs
MjU1LDAuOSk7Ym9yZGVyLXJhZGl1czozcHgnOworICB9CisKKyAgaW5kaWNhdG9yLmNsYXNzTmFt
ZSA9ICdpU2Nyb2xsSW5kaWNhdG9yJzsKKworICBpZiAoIGRpcmVjdGlvbiA9PSAnaCcgKSB7Cisg
ICAgaWYgKCB0eXBlID09PSB0cnVlICkgeworICAgICAgc2Nyb2xsYmFyLnN0eWxlLmNzc1RleHQg
Kz0gJztoZWlnaHQ6N3B4O2xlZnQ6MnB4O3JpZ2h0OjJweDtib3R0b206MCc7CisgICAgICBpbmRp
Y2F0b3Iuc3R5bGUuaGVpZ2h0ID0gJzEwMCUnOworICAgIH0KKyAgICBzY3JvbGxiYXIuY2xhc3NO
YW1lID0gJ2lTY3JvbGxIb3Jpem9udGFsU2Nyb2xsYmFyJzsKKyAgfSBlbHNlIHsKKyAgICBpZiAo
IHR5cGUgPT09IHRydWUgKSB7CisgICAgICBzY3JvbGxiYXIuc3R5bGUuY3NzVGV4dCArPSAnO3dp
ZHRoOjdweDtib3R0b206MnB4O3RvcDoycHg7cmlnaHQ6MXB4JzsKKyAgICAgIGluZGljYXRvci5z
dHlsZS53aWR0aCA9ICcxMDAlJzsKKyAgICB9CisgICAgc2Nyb2xsYmFyLmNsYXNzTmFtZSA9ICdp
U2Nyb2xsVmVydGljYWxTY3JvbGxiYXInOworICB9CisKKyAgc2Nyb2xsYmFyLnN0eWxlLmNzc1Rl
eHQgKz0gJztvdmVyZmxvdzpoaWRkZW4nOworCisgIGlmICggIWludGVyYWN0aXZlICkgeworICAg
IHNjcm9sbGJhci5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnOworICB9CisKKyAgc2Nyb2xs
YmFyLmFwcGVuZENoaWxkKGluZGljYXRvcik7CisKKyAgcmV0dXJuIHNjcm9sbGJhcjsKK30KKwor
ZnVuY3Rpb24gSW5kaWNhdG9yIChzY3JvbGxlciwgb3B0aW9ucykgeworICB0aGlzLndyYXBwZXIg
PSB0eXBlb2Ygb3B0aW9ucy5lbCA9PSAnc3RyaW5nJyA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Io
b3B0aW9ucy5lbCkgOiBvcHRpb25zLmVsOworICB0aGlzLndyYXBwZXJTdHlsZSA9IHRoaXMud3Jh
cHBlci5zdHlsZTsKKyAgdGhpcy5pbmRpY2F0b3IgPSB0aGlzLndyYXBwZXIuY2hpbGRyZW5bMF07
CisgIHRoaXMuaW5kaWNhdG9yU3R5bGUgPSB0aGlzLmluZGljYXRvci5zdHlsZTsKKyAgdGhpcy5z
Y3JvbGxlciA9IHNjcm9sbGVyOworCisgIHRoaXMub3B0aW9ucyA9IHsKKyAgICBsaXN0ZW5YOiB0
cnVlLAorICAgIGxpc3Rlblk6IHRydWUsCisgICAgaW50ZXJhY3RpdmU6IGZhbHNlLAorICAgIHJl
c2l6ZTogdHJ1ZSwKKyAgICBkZWZhdWx0U2Nyb2xsYmFyczogZmFsc2UsCisgICAgc2hyaW5rOiBm
YWxzZSwKKyAgICBmYWRlOiBmYWxzZSwKKyAgICBzcGVlZFJhdGlvWDogMCwKKyAgICBzcGVlZFJh
dGlvWTogMAorICB9OworCisgIGZvciAoIHZhciBpIGluIG9wdGlvbnMgKSB7CisgICAgdGhpcy5v
cHRpb25zW2ldID0gb3B0aW9uc1tpXTsKKyAgfQorCisgIHRoaXMuc2l6ZVJhdGlvWCA9IDE7Cisg
IHRoaXMuc2l6ZVJhdGlvWSA9IDE7CisgIHRoaXMubWF4UG9zWCA9IDA7CisgIHRoaXMubWF4UG9z
WSA9IDA7CisKKyAgaWYgKCB0aGlzLm9wdGlvbnMuaW50ZXJhY3RpdmUgKSB7CisgICAgaWYgKCAh
dGhpcy5vcHRpb25zLmRpc2FibGVUb3VjaCApIHsKKyAgICAgIHV0aWxzLmFkZEV2ZW50KHRoaXMu
aW5kaWNhdG9yLCAndG91Y2hzdGFydCcsIHRoaXMpOworICAgICAgdXRpbHMuYWRkRXZlbnQod2lu
ZG93LCAndG91Y2hlbmQnLCB0aGlzKTsKKyAgICB9CisgICAgaWYgKCAhdGhpcy5vcHRpb25zLmRp
c2FibGVQb2ludGVyICkgeworICAgICAgdXRpbHMuYWRkRXZlbnQodGhpcy5pbmRpY2F0b3IsIHV0
aWxzLnByZWZpeFBvaW50ZXJFdmVudCgncG9pbnRlcmRvd24nKSwgdGhpcyk7CisgICAgICB1dGls
cy5hZGRFdmVudCh3aW5kb3csIHV0aWxzLnByZWZpeFBvaW50ZXJFdmVudCgncG9pbnRlcnVwJyks
IHRoaXMpOworICAgIH0KKyAgICBpZiAoICF0aGlzLm9wdGlvbnMuZGlzYWJsZU1vdXNlICkgewor
ICAgICAgdXRpbHMuYWRkRXZlbnQodGhpcy5pbmRpY2F0b3IsICdtb3VzZWRvd24nLCB0aGlzKTsK
KyAgICAgIHV0aWxzLmFkZEV2ZW50KHdpbmRvdywgJ21vdXNldXAnLCB0aGlzKTsKKyAgICB9Cisg
IH0KKworICBpZiAoIHRoaXMub3B0aW9ucy5mYWRlICkgeworICAgIHRoaXMud3JhcHBlclN0eWxl
W3V0aWxzLnN0eWxlLnRyYW5zZm9ybV0gPSB0aGlzLnNjcm9sbGVyLnRyYW5zbGF0ZVo7CisgICAg
dGhpcy53cmFwcGVyU3R5bGVbdXRpbHMuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uXSA9IHV0aWxz
LmlzQmFkQW5kcm9pZCA/ICcwLjAwMXMnIDogJzBtcyc7CisgICAgdGhpcy53cmFwcGVyU3R5bGUu
b3BhY2l0eSA9ICcwJzsKKyAgfQorfQorCitJbmRpY2F0b3IucHJvdG90eXBlID0geworICBoYW5k
bGVFdmVudDogZnVuY3Rpb24gKGUpIHsKKyAgICBzd2l0Y2ggKCBlLnR5cGUgKSB7CisgICAgICBj
YXNlICd0b3VjaHN0YXJ0JzoKKyAgICAgIGNhc2UgJ3BvaW50ZXJkb3duJzoKKyAgICAgIGNhc2Ug
J01TUG9pbnRlckRvd24nOgorICAgICAgY2FzZSAnbW91c2Vkb3duJzoKKyAgICAgICAgdGhpcy5f
c3RhcnQoZSk7CisgICAgICAgIGJyZWFrOworICAgICAgY2FzZSAndG91Y2htb3ZlJzoKKyAgICAg
IGNhc2UgJ3BvaW50ZXJtb3ZlJzoKKyAgICAgIGNhc2UgJ01TUG9pbnRlck1vdmUnOgorICAgICAg
Y2FzZSAnbW91c2Vtb3ZlJzoKKyAgICAgICAgdGhpcy5fbW92ZShlKTsKKyAgICAgICAgYnJlYWs7
CisgICAgICBjYXNlICd0b3VjaGVuZCc6CisgICAgICBjYXNlICdwb2ludGVydXAnOgorICAgICAg
Y2FzZSAnTVNQb2ludGVyVXAnOgorICAgICAgY2FzZSAnbW91c2V1cCc6CisgICAgICBjYXNlICd0
b3VjaGNhbmNlbCc6CisgICAgICBjYXNlICdwb2ludGVyY2FuY2VsJzoKKyAgICAgIGNhc2UgJ01T
UG9pbnRlckNhbmNlbCc6CisgICAgICBjYXNlICdtb3VzZWNhbmNlbCc6CisgICAgICAgIHRoaXMu
X2VuZChlKTsKKyAgICAgICAgYnJlYWs7CisgICAgfQorICB9LAorCisgIGRlc3Ryb3k6IGZ1bmN0
aW9uICgpIHsKKyAgICBpZiAoIHRoaXMub3B0aW9ucy5pbnRlcmFjdGl2ZSApIHsKKyAgICAgIHV0
aWxzLnJlbW92ZUV2ZW50KHRoaXMuaW5kaWNhdG9yLCAndG91Y2hzdGFydCcsIHRoaXMpOworICAg
ICAgdXRpbHMucmVtb3ZlRXZlbnQodGhpcy5pbmRpY2F0b3IsIHV0aWxzLnByZWZpeFBvaW50ZXJF
dmVudCgncG9pbnRlcmRvd24nKSwgdGhpcyk7CisgICAgICB1dGlscy5yZW1vdmVFdmVudCh0aGlz
LmluZGljYXRvciwgJ21vdXNlZG93bicsIHRoaXMpOworCisgICAgICB1dGlscy5yZW1vdmVFdmVu
dCh3aW5kb3csICd0b3VjaG1vdmUnLCB0aGlzKTsKKyAgICAgIHV0aWxzLnJlbW92ZUV2ZW50KHdp
bmRvdywgdXRpbHMucHJlZml4UG9pbnRlckV2ZW50KCdwb2ludGVybW92ZScpLCB0aGlzKTsKKyAg
ICAgIHV0aWxzLnJlbW92ZUV2ZW50KHdpbmRvdywgJ21vdXNlbW92ZScsIHRoaXMpOworCisgICAg
ICB1dGlscy5yZW1vdmVFdmVudCh3aW5kb3csICd0b3VjaGVuZCcsIHRoaXMpOworICAgICAgdXRp
bHMucmVtb3ZlRXZlbnQod2luZG93LCB1dGlscy5wcmVmaXhQb2ludGVyRXZlbnQoJ3BvaW50ZXJ1
cCcpLCB0aGlzKTsKKyAgICAgIHV0aWxzLnJlbW92ZUV2ZW50KHdpbmRvdywgJ21vdXNldXAnLCB0
aGlzKTsKKyAgICB9CisKKyAgICBpZiAoIHRoaXMub3B0aW9ucy5kZWZhdWx0U2Nyb2xsYmFycyAp
IHsKKyAgICAgIHRoaXMud3JhcHBlci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMud3JhcHBl
cik7CisgICAgfQorICB9LAorCisgIF9zdGFydDogZnVuY3Rpb24gKGUpIHsKKyAgICB2YXIgcG9p
bnQgPSBlLnRvdWNoZXMgPyBlLnRvdWNoZXNbMF0gOiBlOworCisgICAgZS5wcmV2ZW50RGVmYXVs
dCgpOworICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CisKKyAgICB0aGlzLnRyYW5zaXRpb25UaW1l
KCk7CisKKyAgICB0aGlzLmluaXRpYXRlZCA9IHRydWU7CisgICAgdGhpcy5tb3ZlZCA9IGZhbHNl
OworICAgIHRoaXMubGFzdFBvaW50WCA9IHBvaW50LnBhZ2VYOworICAgIHRoaXMubGFzdFBvaW50
WSA9IHBvaW50LnBhZ2VZOworCisgICAgdGhpcy5zdGFydFRpbWUgID0gdXRpbHMuZ2V0VGltZSgp
OworCisgICAgaWYgKCAhdGhpcy5vcHRpb25zLmRpc2FibGVUb3VjaCApIHsKKyAgICAgIHV0aWxz
LmFkZEV2ZW50KHdpbmRvdywgJ3RvdWNobW92ZScsIHRoaXMpOworICAgIH0KKyAgICBpZiAoICF0
aGlzLm9wdGlvbnMuZGlzYWJsZVBvaW50ZXIgKSB7CisgICAgICB1dGlscy5hZGRFdmVudCh3aW5k
b3csIHV0aWxzLnByZWZpeFBvaW50ZXJFdmVudCgncG9pbnRlcm1vdmUnKSwgdGhpcyk7CisgICAg
fQorICAgIGlmICggIXRoaXMub3B0aW9ucy5kaXNhYmxlTW91c2UgKSB7CisgICAgICB1dGlscy5h
ZGRFdmVudCh3aW5kb3csICdtb3VzZW1vdmUnLCB0aGlzKTsKKyAgICB9CisKKyAgICB0aGlzLnNj
cm9sbGVyLl9leGVjRXZlbnQoJ2JlZm9yZVNjcm9sbFN0YXJ0Jyk7CisgIH0sCisKKyAgX21vdmU6
IGZ1bmN0aW9uIChlKSB7CisgICAgdmFyIHBvaW50ID0gZS50b3VjaGVzID8gZS50b3VjaGVzWzBd
IDogZSwKKyAgICAgIGRlbHRhWCwgZGVsdGFZLAorICAgICAgbmV3WCwgbmV3WSwKKyAgICAgIHRp
bWVzdGFtcCA9IHV0aWxzLmdldFRpbWUoKTsKKworICAgIGlmICggIXRoaXMubW92ZWQgKSB7Cisg
ICAgICB0aGlzLnNjcm9sbGVyLl9leGVjRXZlbnQoJ3Njcm9sbFN0YXJ0Jyk7CisgICAgfQorCisg
ICAgdGhpcy5tb3ZlZCA9IHRydWU7CisKKyAgICBkZWx0YVggPSBwb2ludC5wYWdlWCAtIHRoaXMu
bGFzdFBvaW50WDsKKyAgICB0aGlzLmxhc3RQb2ludFggPSBwb2ludC5wYWdlWDsKKworICAgIGRl
bHRhWSA9IHBvaW50LnBhZ2VZIC0gdGhpcy5sYXN0UG9pbnRZOworICAgIHRoaXMubGFzdFBvaW50
WSA9IHBvaW50LnBhZ2VZOworCisgICAgbmV3WCA9IHRoaXMueCArIGRlbHRhWDsKKyAgICBuZXdZ
ID0gdGhpcy55ICsgZGVsdGFZOworCisgICAgdGhpcy5fcG9zKG5ld1gsIG5ld1kpOworCisvLyBJ
TlNFUlQgUE9JTlQ6IGluZGljYXRvci5fbW92ZQorCisgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwor
ICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CisgIH0sCisKKyAgX2VuZDogZnVuY3Rpb24gKGUpIHsK
KyAgICBpZiAoICF0aGlzLmluaXRpYXRlZCApIHsKKyAgICAgIHJldHVybjsKKyAgICB9CisKKyAg
ICB0aGlzLmluaXRpYXRlZCA9IGZhbHNlOworCisgICAgZS5wcmV2ZW50RGVmYXVsdCgpOworICAg
IGUuc3RvcFByb3BhZ2F0aW9uKCk7CisKKyAgICB1dGlscy5yZW1vdmVFdmVudCh3aW5kb3csICd0
b3VjaG1vdmUnLCB0aGlzKTsKKyAgICB1dGlscy5yZW1vdmVFdmVudCh3aW5kb3csIHV0aWxzLnBy
ZWZpeFBvaW50ZXJFdmVudCgncG9pbnRlcm1vdmUnKSwgdGhpcyk7CisgICAgdXRpbHMucmVtb3Zl
RXZlbnQod2luZG93LCAnbW91c2Vtb3ZlJywgdGhpcyk7CisKKyAgICBpZiAoIHRoaXMuc2Nyb2xs
ZXIub3B0aW9ucy5zbmFwICkgeworICAgICAgdmFyIHNuYXAgPSB0aGlzLnNjcm9sbGVyLl9uZWFy
ZXN0U25hcCh0aGlzLnNjcm9sbGVyLngsIHRoaXMuc2Nyb2xsZXIueSk7CisKKyAgICAgIHZhciB0
aW1lID0gdGhpcy5vcHRpb25zLnNuYXBTcGVlZCB8fCBNYXRoLm1heCgKKyAgICAgICAgICBNYXRo
Lm1heCgKKyAgICAgICAgICAgIE1hdGgubWluKE1hdGguYWJzKHRoaXMuc2Nyb2xsZXIueCAtIHNu
YXAueCksIDEwMDApLAorICAgICAgICAgICAgTWF0aC5taW4oTWF0aC5hYnModGhpcy5zY3JvbGxl
ci55IC0gc25hcC55KSwgMTAwMCkKKyAgICAgICAgICApLCAzMDApOworCisgICAgICBpZiAoIHRo
aXMuc2Nyb2xsZXIueCAhPSBzbmFwLnggfHwgdGhpcy5zY3JvbGxlci55ICE9IHNuYXAueSApIHsK
KyAgICAgICAgdGhpcy5zY3JvbGxlci5kaXJlY3Rpb25YID0gMDsKKyAgICAgICAgdGhpcy5zY3Jv
bGxlci5kaXJlY3Rpb25ZID0gMDsKKyAgICAgICAgdGhpcy5zY3JvbGxlci5jdXJyZW50UGFnZSA9
IHNuYXA7CisgICAgICAgIHRoaXMuc2Nyb2xsZXIuc2Nyb2xsVG8oc25hcC54LCBzbmFwLnksIHRp
bWUsIHRoaXMuc2Nyb2xsZXIub3B0aW9ucy5ib3VuY2VFYXNpbmcpOworICAgICAgfQorICAgIH0K
KworICAgIGlmICggdGhpcy5tb3ZlZCApIHsKKyAgICAgIHRoaXMuc2Nyb2xsZXIuX2V4ZWNFdmVu
dCgnc2Nyb2xsRW5kJyk7CisgICAgfQorICB9LAorCisgIHRyYW5zaXRpb25UaW1lOiBmdW5jdGlv
biAodGltZSkgeworICAgIHRpbWUgPSB0aW1lIHx8IDA7CisgICAgdGhpcy5pbmRpY2F0b3JTdHls
ZVt1dGlscy5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb25dID0gdGltZSArICdtcyc7CisKKyAgICBp
ZiAoICF0aW1lICYmIHV0aWxzLmlzQmFkQW5kcm9pZCApIHsKKyAgICAgIHRoaXMuaW5kaWNhdG9y
U3R5bGVbdXRpbHMuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uXSA9ICcwLjAwMXMnOworICAgIH0K
KyAgfSwKKworICB0cmFuc2l0aW9uVGltaW5nRnVuY3Rpb246IGZ1bmN0aW9uIChlYXNpbmcpIHsK
KyAgICB0aGlzLmluZGljYXRvclN0eWxlW3V0aWxzLnN0eWxlLnRyYW5zaXRpb25UaW1pbmdGdW5j
dGlvbl0gPSBlYXNpbmc7CisgIH0sCisKKyAgcmVmcmVzaDogZnVuY3Rpb24gKCkgeworICAgIHRo
aXMudHJhbnNpdGlvblRpbWUoKTsKKworICAgIGlmICggdGhpcy5vcHRpb25zLmxpc3RlblggJiYg
IXRoaXMub3B0aW9ucy5saXN0ZW5ZICkgeworICAgICAgdGhpcy5pbmRpY2F0b3JTdHlsZS5kaXNw
bGF5ID0gdGhpcy5zY3JvbGxlci5oYXNIb3Jpem9udGFsU2Nyb2xsID8gJ2Jsb2NrJyA6ICdub25l
JzsKKyAgICB9IGVsc2UgaWYgKCB0aGlzLm9wdGlvbnMubGlzdGVuWSAmJiAhdGhpcy5vcHRpb25z
Lmxpc3RlblggKSB7CisgICAgICB0aGlzLmluZGljYXRvclN0eWxlLmRpc3BsYXkgPSB0aGlzLnNj
cm9sbGVyLmhhc1ZlcnRpY2FsU2Nyb2xsID8gJ2Jsb2NrJyA6ICdub25lJzsKKyAgICB9IGVsc2Ug
eworICAgICAgdGhpcy5pbmRpY2F0b3JTdHlsZS5kaXNwbGF5ID0gdGhpcy5zY3JvbGxlci5oYXNI
b3Jpem9udGFsU2Nyb2xsIHx8IHRoaXMuc2Nyb2xsZXIuaGFzVmVydGljYWxTY3JvbGwgPyAnYmxv
Y2snIDogJ25vbmUnOworICAgIH0KKworICAgIGlmICggdGhpcy5zY3JvbGxlci5oYXNIb3Jpem9u
dGFsU2Nyb2xsICYmIHRoaXMuc2Nyb2xsZXIuaGFzVmVydGljYWxTY3JvbGwgKSB7CisgICAgICB1
dGlscy5hZGRDbGFzcyh0aGlzLndyYXBwZXIsICdpU2Nyb2xsQm90aFNjcm9sbGJhcnMnKTsKKyAg
ICAgIHV0aWxzLnJlbW92ZUNsYXNzKHRoaXMud3JhcHBlciwgJ2lTY3JvbGxMb25lU2Nyb2xsYmFy
Jyk7CisKKyAgICAgIGlmICggdGhpcy5vcHRpb25zLmRlZmF1bHRTY3JvbGxiYXJzICYmIHRoaXMu
b3B0aW9ucy5jdXN0b21TdHlsZSApIHsKKyAgICAgICAgaWYgKCB0aGlzLm9wdGlvbnMubGlzdGVu
WCApIHsKKyAgICAgICAgICB0aGlzLndyYXBwZXIuc3R5bGUucmlnaHQgPSAnOHB4JzsKKyAgICAg
ICAgfSBlbHNlIHsKKyAgICAgICAgICB0aGlzLndyYXBwZXIuc3R5bGUuYm90dG9tID0gJzhweCc7
CisgICAgICAgIH0KKyAgICAgIH0KKyAgICB9IGVsc2UgeworICAgICAgdXRpbHMucmVtb3ZlQ2xh
c3ModGhpcy53cmFwcGVyLCAnaVNjcm9sbEJvdGhTY3JvbGxiYXJzJyk7CisgICAgICB1dGlscy5h
ZGRDbGFzcyh0aGlzLndyYXBwZXIsICdpU2Nyb2xsTG9uZVNjcm9sbGJhcicpOworCisgICAgICBp
ZiAoIHRoaXMub3B0aW9ucy5kZWZhdWx0U2Nyb2xsYmFycyAmJiB0aGlzLm9wdGlvbnMuY3VzdG9t
U3R5bGUgKSB7CisgICAgICAgIGlmICggdGhpcy5vcHRpb25zLmxpc3RlblggKSB7CisgICAgICAg
ICAgdGhpcy53cmFwcGVyLnN0eWxlLnJpZ2h0ID0gJzJweCc7CisgICAgICAgIH0gZWxzZSB7Cisg
ICAgICAgICAgdGhpcy53cmFwcGVyLnN0eWxlLmJvdHRvbSA9ICcycHgnOworICAgICAgICB9Cisg
ICAgICB9CisgICAgfQorCisgICAgdmFyIHIgPSB0aGlzLndyYXBwZXIub2Zmc2V0SGVpZ2h0OyAg
Ly8gZm9yY2UgcmVmcmVzaAorCisgICAgaWYgKCB0aGlzLm9wdGlvbnMubGlzdGVuWCApIHsKKyAg
ICAgIHRoaXMud3JhcHBlcldpZHRoID0gdGhpcy53cmFwcGVyLmNsaWVudFdpZHRoOworICAgICAg
aWYgKCB0aGlzLm9wdGlvbnMucmVzaXplICkgeworICAgICAgICB0aGlzLmluZGljYXRvcldpZHRo
ID0gTWF0aC5tYXgoTWF0aC5yb3VuZCh0aGlzLndyYXBwZXJXaWR0aCAqIHRoaXMud3JhcHBlcldp
ZHRoIC8gKHRoaXMuc2Nyb2xsZXIuc2Nyb2xsZXJXaWR0aCB8fCB0aGlzLndyYXBwZXJXaWR0aCB8
fCAxKSksIDgpOworICAgICAgICB0aGlzLmluZGljYXRvclN0eWxlLndpZHRoID0gdGhpcy5pbmRp
Y2F0b3JXaWR0aCArICdweCc7CisgICAgICB9IGVsc2UgeworICAgICAgICB0aGlzLmluZGljYXRv
cldpZHRoID0gdGhpcy5pbmRpY2F0b3IuY2xpZW50V2lkdGg7CisgICAgICB9CisKKyAgICAgIHRo
aXMubWF4UG9zWCA9IHRoaXMud3JhcHBlcldpZHRoIC0gdGhpcy5pbmRpY2F0b3JXaWR0aDsKKwor
ICAgICAgaWYgKCB0aGlzLm9wdGlvbnMuc2hyaW5rID09ICdjbGlwJyApIHsKKyAgICAgICAgdGhp
cy5taW5Cb3VuZGFyeVggPSAtdGhpcy5pbmRpY2F0b3JXaWR0aCArIDg7CisgICAgICAgIHRoaXMu
bWF4Qm91bmRhcnlYID0gdGhpcy53cmFwcGVyV2lkdGggLSA4OworICAgICAgfSBlbHNlIHsKKyAg
ICAgICAgdGhpcy5taW5Cb3VuZGFyeVggPSAwOworICAgICAgICB0aGlzLm1heEJvdW5kYXJ5WCA9
IHRoaXMubWF4UG9zWDsKKyAgICAgIH0KKworICAgICAgdGhpcy5zaXplUmF0aW9YID0gdGhpcy5v
cHRpb25zLnNwZWVkUmF0aW9YIHx8ICh0aGlzLnNjcm9sbGVyLm1heFNjcm9sbFggJiYgKHRoaXMu
bWF4UG9zWCAvIHRoaXMuc2Nyb2xsZXIubWF4U2Nyb2xsWCkpOyAgCisgICAgfQorCisgICAgaWYg
KCB0aGlzLm9wdGlvbnMubGlzdGVuWSApIHsKKyAgICAgIHRoaXMud3JhcHBlckhlaWdodCA9IHRo
aXMud3JhcHBlci5jbGllbnRIZWlnaHQ7CisgICAgICBpZiAoIHRoaXMub3B0aW9ucy5yZXNpemUg
KSB7CisgICAgICAgIHRoaXMuaW5kaWNhdG9ySGVpZ2h0ID0gTWF0aC5tYXgoTWF0aC5yb3VuZCh0
aGlzLndyYXBwZXJIZWlnaHQgKiB0aGlzLndyYXBwZXJIZWlnaHQgLyAodGhpcy5zY3JvbGxlci5z
Y3JvbGxlckhlaWdodCB8fCB0aGlzLndyYXBwZXJIZWlnaHQgfHwgMSkpLCA4KTsKKyAgICAgICAg
dGhpcy5pbmRpY2F0b3JTdHlsZS5oZWlnaHQgPSB0aGlzLmluZGljYXRvckhlaWdodCArICdweCc7
CisgICAgICB9IGVsc2UgeworICAgICAgICB0aGlzLmluZGljYXRvckhlaWdodCA9IHRoaXMuaW5k
aWNhdG9yLmNsaWVudEhlaWdodDsKKyAgICAgIH0KKworICAgICAgdGhpcy5tYXhQb3NZID0gdGhp
cy53cmFwcGVySGVpZ2h0IC0gdGhpcy5pbmRpY2F0b3JIZWlnaHQ7CisKKyAgICAgIGlmICggdGhp
cy5vcHRpb25zLnNocmluayA9PSAnY2xpcCcgKSB7CisgICAgICAgIHRoaXMubWluQm91bmRhcnlZ
ID0gLXRoaXMuaW5kaWNhdG9ySGVpZ2h0ICsgODsKKyAgICAgICAgdGhpcy5tYXhCb3VuZGFyeVkg
PSB0aGlzLndyYXBwZXJIZWlnaHQgLSA4OworICAgICAgfSBlbHNlIHsKKyAgICAgICAgdGhpcy5t
aW5Cb3VuZGFyeVkgPSAwOworICAgICAgICB0aGlzLm1heEJvdW5kYXJ5WSA9IHRoaXMubWF4UG9z
WTsKKyAgICAgIH0KKworICAgICAgdGhpcy5tYXhQb3NZID0gdGhpcy53cmFwcGVySGVpZ2h0IC0g
dGhpcy5pbmRpY2F0b3JIZWlnaHQ7CisgICAgICB0aGlzLnNpemVSYXRpb1kgPSB0aGlzLm9wdGlv
bnMuc3BlZWRSYXRpb1kgfHwgKHRoaXMuc2Nyb2xsZXIubWF4U2Nyb2xsWSAmJiAodGhpcy5tYXhQ
b3NZIC8gdGhpcy5zY3JvbGxlci5tYXhTY3JvbGxZKSk7CisgICAgfQorCisgICAgdGhpcy51cGRh
dGVQb3NpdGlvbigpOworICB9LAorCisgIHVwZGF0ZVBvc2l0aW9uOiBmdW5jdGlvbiAoKSB7Cisg
ICAgdmFyIHggPSB0aGlzLm9wdGlvbnMubGlzdGVuWCAmJiBNYXRoLnJvdW5kKHRoaXMuc2l6ZVJh
dGlvWCAqIHRoaXMuc2Nyb2xsZXIueCkgfHwgMCwKKyAgICAgIHkgPSB0aGlzLm9wdGlvbnMubGlz
dGVuWSAmJiBNYXRoLnJvdW5kKHRoaXMuc2l6ZVJhdGlvWSAqIHRoaXMuc2Nyb2xsZXIueSkgfHwg
MDsKKworICAgIGlmICghdGhpcy5vcHRpb25zLmlnbm9yZUJvdW5kYXJpZXMgKSB7CisgICAgICBp
ZiAoIHggPCB0aGlzLm1pbkJvdW5kYXJ5WCApIHsKKyAgICAgICAgaWYgKCB0aGlzLm9wdGlvbnMu
c2hyaW5rID09ICdzY2FsZScgKSB7CisgICAgICAgICAgdGhpcy53aWR0aCA9IE1hdGgubWF4KHRo
aXMuaW5kaWNhdG9yV2lkdGggKyB4LCA4KTsKKyAgICAgICAgICB0aGlzLmluZGljYXRvclN0eWxl
LndpZHRoID0gdGhpcy53aWR0aCArICdweCc7CisgICAgICAgIH0KKyAgICAgICAgeCA9IHRoaXMu
bWluQm91bmRhcnlYOworICAgICAgfSBlbHNlIGlmICggeCA+IHRoaXMubWF4Qm91bmRhcnlYICkg
eworICAgICAgICBpZiAoIHRoaXMub3B0aW9ucy5zaHJpbmsgPT0gJ3NjYWxlJyApIHsKKyAgICAg
ICAgICB0aGlzLndpZHRoID0gTWF0aC5tYXgodGhpcy5pbmRpY2F0b3JXaWR0aCAtICh4IC0gdGhp
cy5tYXhQb3NYKSwgOCk7CisgICAgICAgICAgdGhpcy5pbmRpY2F0b3JTdHlsZS53aWR0aCA9IHRo
aXMud2lkdGggKyAncHgnOworICAgICAgICAgIHggPSB0aGlzLm1heFBvc1ggKyB0aGlzLmluZGlj
YXRvcldpZHRoIC0gdGhpcy53aWR0aDsKKyAgICAgICAgfSBlbHNlIHsKKyAgICAgICAgICB4ID0g
dGhpcy5tYXhCb3VuZGFyeVg7CisgICAgICAgIH0KKyAgICAgIH0gZWxzZSBpZiAoIHRoaXMub3B0
aW9ucy5zaHJpbmsgPT0gJ3NjYWxlJyAmJiB0aGlzLndpZHRoICE9IHRoaXMuaW5kaWNhdG9yV2lk
dGggKSB7CisgICAgICAgIHRoaXMud2lkdGggPSB0aGlzLmluZGljYXRvcldpZHRoOworICAgICAg
ICB0aGlzLmluZGljYXRvclN0eWxlLndpZHRoID0gdGhpcy53aWR0aCArICdweCc7CisgICAgICB9
CisKKyAgICAgIGlmICggeSA8IHRoaXMubWluQm91bmRhcnlZICkgeworICAgICAgICBpZiAoIHRo
aXMub3B0aW9ucy5zaHJpbmsgPT0gJ3NjYWxlJyApIHsKKyAgICAgICAgICB0aGlzLmhlaWdodCA9
IE1hdGgubWF4KHRoaXMuaW5kaWNhdG9ySGVpZ2h0ICsgeSAqIDMsIDgpOworICAgICAgICAgIHRo
aXMuaW5kaWNhdG9yU3R5bGUuaGVpZ2h0ID0gdGhpcy5oZWlnaHQgKyAncHgnOworICAgICAgICB9
CisgICAgICAgIHkgPSB0aGlzLm1pbkJvdW5kYXJ5WTsKKyAgICAgIH0gZWxzZSBpZiAoIHkgPiB0
aGlzLm1heEJvdW5kYXJ5WSApIHsKKyAgICAgICAgaWYgKCB0aGlzLm9wdGlvbnMuc2hyaW5rID09
ICdzY2FsZScgKSB7CisgICAgICAgICAgdGhpcy5oZWlnaHQgPSBNYXRoLm1heCh0aGlzLmluZGlj
YXRvckhlaWdodCAtICh5IC0gdGhpcy5tYXhQb3NZKSAqIDMsIDgpOworICAgICAgICAgIHRoaXMu
aW5kaWNhdG9yU3R5bGUuaGVpZ2h0ID0gdGhpcy5oZWlnaHQgKyAncHgnOworICAgICAgICAgIHkg
PSB0aGlzLm1heFBvc1kgKyB0aGlzLmluZGljYXRvckhlaWdodCAtIHRoaXMuaGVpZ2h0OworICAg
ICAgICB9IGVsc2UgeworICAgICAgICAgIHkgPSB0aGlzLm1heEJvdW5kYXJ5WTsKKyAgICAgICAg
fQorICAgICAgfSBlbHNlIGlmICggdGhpcy5vcHRpb25zLnNocmluayA9PSAnc2NhbGUnICYmIHRo
aXMuaGVpZ2h0ICE9IHRoaXMuaW5kaWNhdG9ySGVpZ2h0ICkgeworICAgICAgICB0aGlzLmhlaWdo
dCA9IHRoaXMuaW5kaWNhdG9ySGVpZ2h0OworICAgICAgICB0aGlzLmluZGljYXRvclN0eWxlLmhl
aWdodCA9IHRoaXMuaGVpZ2h0ICsgJ3B4JzsKKyAgICAgIH0KKyAgICB9CisKKyAgICB0aGlzLngg
PSB4OworICAgIHRoaXMueSA9IHk7CisKKyAgICBpZiAoIHRoaXMuc2Nyb2xsZXIub3B0aW9ucy51
c2VUcmFuc2Zvcm0gKSB7CisgICAgICB0aGlzLmluZGljYXRvclN0eWxlW3V0aWxzLnN0eWxlLnRy
YW5zZm9ybV0gPSAndHJhbnNsYXRlKCcgKyB4ICsgJ3B4LCcgKyB5ICsgJ3B4KScgKyB0aGlzLnNj
cm9sbGVyLnRyYW5zbGF0ZVo7CisgICAgfSBlbHNlIHsKKyAgICAgIHRoaXMuaW5kaWNhdG9yU3R5
bGUubGVmdCA9IHggKyAncHgnOworICAgICAgdGhpcy5pbmRpY2F0b3JTdHlsZS50b3AgPSB5ICsg
J3B4JzsKKyAgICB9CisgIH0sCisKKyAgX3BvczogZnVuY3Rpb24gKHgsIHkpIHsKKyAgICBpZiAo
IHggPCAwICkgeworICAgICAgeCA9IDA7CisgICAgfSBlbHNlIGlmICggeCA+IHRoaXMubWF4UG9z
WCApIHsKKyAgICAgIHggPSB0aGlzLm1heFBvc1g7CisgICAgfQorCisgICAgaWYgKCB5IDwgMCAp
IHsKKyAgICAgIHkgPSAwOworICAgIH0gZWxzZSBpZiAoIHkgPiB0aGlzLm1heFBvc1kgKSB7Cisg
ICAgICB5ID0gdGhpcy5tYXhQb3NZOworICAgIH0KKworICAgIHggPSB0aGlzLm9wdGlvbnMubGlz
dGVuWCA/IE1hdGgucm91bmQoeCAvIHRoaXMuc2l6ZVJhdGlvWCkgOiB0aGlzLnNjcm9sbGVyLng7
CisgICAgeSA9IHRoaXMub3B0aW9ucy5saXN0ZW5ZID8gTWF0aC5yb3VuZCh5IC8gdGhpcy5zaXpl
UmF0aW9ZKSA6IHRoaXMuc2Nyb2xsZXIueTsKKworICAgIHRoaXMuc2Nyb2xsZXIuc2Nyb2xsVG8o
eCwgeSk7CisgIH0sCisKKyAgZmFkZTogZnVuY3Rpb24gKHZhbCwgaG9sZCkgeworICAgIGlmICgg
aG9sZCAmJiAhdGhpcy52aXNpYmxlICkgeworICAgICAgcmV0dXJuOworICAgIH0KKworICAgIGNs
ZWFyVGltZW91dCh0aGlzLmZhZGVUaW1lb3V0KTsKKyAgICB0aGlzLmZhZGVUaW1lb3V0ID0gbnVs
bDsKKworICAgIHZhciB0aW1lID0gdmFsID8gMjUwIDogNTAwLAorICAgICAgZGVsYXkgPSB2YWwg
PyAwIDogMzAwOworCisgICAgdmFsID0gdmFsID8gJzEnIDogJzAnOworCisgICAgdGhpcy53cmFw
cGVyU3R5bGVbdXRpbHMuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uXSA9IHRpbWUgKyAnbXMnOwor
CisgICAgdGhpcy5mYWRlVGltZW91dCA9IHNldFRpbWVvdXQoKGZ1bmN0aW9uICh2YWwpIHsKKyAg
ICAgIHRoaXMud3JhcHBlclN0eWxlLm9wYWNpdHkgPSB2YWw7CisgICAgICB0aGlzLnZpc2libGUg
PSArdmFsOworICAgIH0pLmJpbmQodGhpcywgdmFsKSwgZGVsYXkpOworICB9Cit9OworCitJU2Ny
b2xsLnV0aWxzID0gdXRpbHM7CiAKLWlmICh0eXBlb2YgZXhwb3J0cyAhPT0gJ3VuZGVmaW5lZCcp
IGV4cG9ydHMuaVNjcm9sbCA9IGlTY3JvbGw7Ci1lbHNlIHdpbmRvdy5pU2Nyb2xsID0gaVNjcm9s
bDsKK2lmICggdHlwZW9mIG1vZHVsZSAhPSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cyAp
IHsKKyAgbW9kdWxlLmV4cG9ydHMgPSBJU2Nyb2xsOworfSBlbHNlIHsKKyAgd2luZG93LklTY3Jv
bGwgPSBJU2Nyb2xsOworfQogCi19KSgpOwpcIE5vIG5ld2xpbmUgYXQgZW5kIG9mIGZpbGUKK30p
KHdpbmRvdywgZG9jdW1lbnQsIE1hdGgpOwpcIE5vIG5ld2xpbmUgYXQgZW5kIG9mIGZpbGUKZGlm
ZiAtLWdpdCBhL2ZyYW1ld29yay9zb3VyY2UvcmVzb3VyY2UvcXgvbW9iaWxlL2pzL2lzY3JvbGwu
bWluLmpzIGIvZnJhbWV3b3JrL3NvdXJjZS9yZXNvdXJjZS9xeC9tb2JpbGUvanMvaXNjcm9sbC5t
aW4uanMKaW5kZXggNmQ4ZWZjZS4uNmMyMDgyZCAxMDA2NDQKLS0tIGEvZnJhbWV3b3JrL3NvdXJj
ZS9yZXNvdXJjZS9xeC9tb2JpbGUvanMvaXNjcm9sbC5taW4uanMKKysrIGIvZnJhbWV3b3JrL3Nv
dXJjZS9yZXNvdXJjZS9xeC9tb2JpbGUvanMvaXNjcm9sbC5taW4uanMKQEAgLTEgKzEsMjAwNiBA
QAotKGZ1bmN0aW9uKCl7dmFyIGE9TWF0aCxiPWZ1bmN0aW9uKGEpe3JldHVybiBhPj4wfSxjPS93
ZWJraXQvaS50ZXN0KG5hdmlnYXRvci5hcHBWZXJzaW9uKT8id2Via2l0IjovZmlyZWZveC9pLnRl
c3QobmF2aWdhdG9yLnVzZXJBZ2VudCk/Ik1veiI6Im9wZXJhImluIHdpbmRvdz8iTyI6IiIsZD0v
YW5kcm9pZC9naS50ZXN0KG5hdmlnYXRvci5hcHBWZXJzaW9uKSxlPS9pcGhvbmV8aXBhZC9naS50
ZXN0KG5hdmlnYXRvci5hcHBWZXJzaW9uKSxmPS9wbGF5Ym9vay9naS50ZXN0KG5hdmlnYXRvci5h
cHBWZXJzaW9uKSxnPS9ocC10YWJsZXQvZ2kudGVzdChuYXZpZ2F0b3IuYXBwVmVyc2lvbiksaD0i
V2ViS2l0Q1NTTWF0cml4ImluIHdpbmRvdyYmIm0xMSJpbiBuZXcgV2ViS2l0Q1NTTWF0cml4LGk9
Im9udG91Y2hzdGFydCJpbiB3aW5kb3cmJiFnLGo9YysiVHJhbnNmb3JtImluIGRvY3VtZW50LmRv
Y3VtZW50RWxlbWVudC5zdHlsZSxrPWV8fGYsbD1mdW5jdGlvbigpe3JldHVybiB3aW5kb3cucmVx
dWVzdEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx3
aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cub1JlcXVlc3RBbmltYXRpb25G
cmFtZXx8d2luZG93Lm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxmdW5jdGlvbihhKXtyZXR1cm4g
c2V0VGltZW91dChhLDEpfX0oKSxtPWZ1bmN0aW9uKCl7cmV0dXJuIHdpbmRvdy5jYW5jZWxSZXF1
ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy53ZWJraXRDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJh
bWV8fHdpbmRvdy5tb3pDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy5vQ2FuY2Vs
UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cubXNDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJh
bWV8fGNsZWFyVGltZW91dH0oKSxuPSJvcmllbnRhdGlvbmNoYW5nZSIsbz0idG91Y2hzdGFydCIs
cD0idG91Y2htb3ZlIixxPSJ0b3VjaGVuZCIscj0idG91Y2hjYW5jZWwiLHM9Im1vdXNld2hlZWwi
LHQ9InRyYW5zbGF0ZSIrKGg/IjNkKCI6IigiKSx1PWg/IiwwKSI6IikiLHY9ZnVuY3Rpb24oYSxi
KXt2YXIgbCxmPXRoaXMsZz1kb2N1bWVudDtmLndyYXBwZXI9dHlwZW9mIGE9PSJvYmplY3QiP2E6
Zy5nZXRFbGVtZW50QnlJZChhKSxmLndyYXBwZXIuc3R5bGUub3ZlcmZsb3c9ImhpZGRlbiIsZi5z
Y3JvbGxlcj1mLndyYXBwZXIuY2hpbGRyZW5bMF0sZi5vcHRpb25zPXtoU2Nyb2xsOiEwLHZTY3Jv
bGw6ITAseDowLHk6MCxib3VuY2U6ITAsYm91bmNlTG9jazohMSxtb21lbnR1bTohMCxsb2NrRGly
ZWN0aW9uOiEwLHVzZVRyYW5zZm9ybTohMCx1c2VUcmFuc2l0aW9uOiExLHRvcE9mZnNldDowLGNo
ZWNrRE9NQ2hhbmdlczohMSxoU2Nyb2xsYmFyOiEwLHZTY3JvbGxiYXI6ITAsZml4ZWRTY3JvbGxi
YXI6ZCxoaWRlU2Nyb2xsYmFyOmUsZmFkZVNjcm9sbGJhcjplJiZoLHNjcm9sbGJhckNsYXNzOiIi
LHpvb206ITEsem9vbU1pbjoxLHpvb21NYXg6NCxkb3VibGVUYXBab29tOjIsd2hlZWxBY3Rpb246
InNjcm9sbCIsc25hcDohMSxzbmFwVGhyZXNob2xkOjEsb25SZWZyZXNoOm51bGwsb25CZWZvcmVT
Y3JvbGxTdGFydDpmdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0KCl9LG9uU2Nyb2xsU3RhcnQ6
bnVsbCxvbkJlZm9yZVNjcm9sbE1vdmU6bnVsbCxvblNjcm9sbE1vdmU6bnVsbCxvbkJlZm9yZVNj
cm9sbEVuZDpudWxsLG9uU2Nyb2xsRW5kOm51bGwsb25Ub3VjaEVuZDpudWxsLG9uRGVzdHJveTpu
dWxsLG9uWm9vbVN0YXJ0Om51bGwsb25ab29tOm51bGwsb25ab29tRW5kOm51bGx9O2ZvcihsIGlu
IGIpZi5vcHRpb25zW2xdPWJbbF07Zi54PWYub3B0aW9ucy54LGYueT1mLm9wdGlvbnMueSxmLm9w
dGlvbnMudXNlVHJhbnNmb3JtPWo/Zi5vcHRpb25zLnVzZVRyYW5zZm9ybTohMSxmLm9wdGlvbnMu
aFNjcm9sbGJhcj1mLm9wdGlvbnMuaFNjcm9sbCYmZi5vcHRpb25zLmhTY3JvbGxiYXIsZi5vcHRp
b25zLnZTY3JvbGxiYXI9Zi5vcHRpb25zLnZTY3JvbGwmJmYub3B0aW9ucy52U2Nyb2xsYmFyLGYu
b3B0aW9ucy56b29tPWYub3B0aW9ucy51c2VUcmFuc2Zvcm0mJmYub3B0aW9ucy56b29tLGYub3B0
aW9ucy51c2VUcmFuc2l0aW9uPWsmJmYub3B0aW9ucy51c2VUcmFuc2l0aW9uLGYub3B0aW9ucy56
b29tJiZkJiYodD0idHJhbnNsYXRlKCIsdT0iKSIpLGYuc2Nyb2xsZXIuc3R5bGVbYysiVHJhbnNp
dGlvblByb3BlcnR5Il09Zi5vcHRpb25zLnVzZVRyYW5zZm9ybT8iLSIrYy50b0xvd2VyQ2FzZSgp
KyItdHJhbnNmb3JtIjoidG9wIGxlZnQiLGYuc2Nyb2xsZXIuc3R5bGVbYysiVHJhbnNpdGlvbkR1
cmF0aW9uIl09IjAiLGYuc2Nyb2xsZXIuc3R5bGVbYysiVHJhbnNmb3JtT3JpZ2luIl09IjAgMCIs
Zi5vcHRpb25zLnVzZVRyYW5zaXRpb24mJihmLnNjcm9sbGVyLnN0eWxlW2MrIlRyYW5zaXRpb25U
aW1pbmdGdW5jdGlvbiJdPSJjdWJpYy1iZXppZXIoMC4zMywwLjY2LDAuNjYsMSkiKSxmLm9wdGlv
bnMudXNlVHJhbnNmb3JtP2Yuc2Nyb2xsZXIuc3R5bGVbYysiVHJhbnNmb3JtIl09dCtmLngrInB4
LCIrZi55KyJweCIrdTpmLnNjcm9sbGVyLnN0eWxlLmNzc1RleHQrPSI7cG9zaXRpb246YWJzb2x1
dGU7dG9wOiIrZi55KyJweDtsZWZ0OiIrZi54KyJweCIsZi5vcHRpb25zLnVzZVRyYW5zaXRpb24m
JihmLm9wdGlvbnMuZml4ZWRTY3JvbGxiYXI9ITApLGYucmVmcmVzaCgpLGYuX2JpbmQobix3aW5k
b3cpLGYuX2JpbmQobyksaXx8KGYuX2JpbmQoIm1vdXNlb3V0IixmLndyYXBwZXIpLGYub3B0aW9u
cy53aGVlbEFjdGlvbiE9Im5vbmUiJiZmLl9iaW5kKHMpKSxmLm9wdGlvbnMuY2hlY2tET01DaGFu
Z2VzJiYoZi5jaGVja0RPTVRpbWU9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtmLl9jaGVja0RPTUNo
YW5nZXMoKX0sNTAwKSl9O3YucHJvdG90eXBlPXtlbmFibGVkOiEwLHg6MCx5OjAsc3RlcHM6W10s
c2NhbGU6MSxjdXJyUGFnZVg6MCxjdXJyUGFnZVk6MCxwYWdlc1g6W10scGFnZXNZOltdLGFuaVRp
bWU6bnVsbCx3aGVlbFpvb21Db3VudDowLGhhbmRsZUV2ZW50OmZ1bmN0aW9uKGEpe2lmKGEuZ2V0
VHlwZSl2YXIgYj1hLmdldFR5cGUoKTtlbHNlIHZhciBiPWEudHlwZTthLmdldE5hdGl2ZUV2ZW50
JiYoYT1hLmdldE5hdGl2ZUV2ZW50KCkpO3ZhciBjPXRoaXM7c3dpdGNoKGIpe2Nhc2UgbzppZigh
aSYmYS5idXR0b24hPT0wKXJldHVybjtjLl9zdGFydChhKTticmVhaztjYXNlIHA6Yy5fbW92ZShh
KTticmVhaztjYXNlIHE6Y2FzZSByOmMuX2VuZChhKTticmVhaztjYXNlIG46Yy5fcmVzaXplKCk7
YnJlYWs7Y2FzZSBzOmMuX3doZWVsKGEpO2JyZWFrO2Nhc2UibW91c2VvdXQiOmMuX21vdXNlb3V0
KGEpO2JyZWFrO2Nhc2Uid2Via2l0VHJhbnNpdGlvbkVuZCI6Yy5fdHJhbnNpdGlvbkVuZChhKX19
LF9jaGVja0RPTUNoYW5nZXM6ZnVuY3Rpb24oKXt0aGlzLm1vdmVkfHx0aGlzLnpvb21lZHx8dGhp
cy5hbmltYXRpbmd8fHRoaXMuc2Nyb2xsZXJXPT10aGlzLnNjcm9sbGVyLm9mZnNldFdpZHRoKnRo
aXMuc2NhbGUmJnRoaXMuc2Nyb2xsZXJIPT10aGlzLnNjcm9sbGVyLm9mZnNldEhlaWdodCp0aGlz
LnNjYWxlfHx0aGlzLnJlZnJlc2goKX0sX3Njcm9sbGJhcjpmdW5jdGlvbihkKXt2YXIgZyxlPXRo
aXMsZj1kb2N1bWVudDtyZXR1cm4gZVtkKyJTY3JvbGxiYXIiXT8oZVtkKyJTY3JvbGxiYXJXcmFw
cGVyIl18fChnPWYuY3JlYXRlRWxlbWVudCgiZGl2IiksZS5vcHRpb25zLnNjcm9sbGJhckNsYXNz
P2cuY2xhc3NOYW1lPWUub3B0aW9ucy5zY3JvbGxiYXJDbGFzcytkLnRvVXBwZXJDYXNlKCk6Zy5z
dHlsZS5jc3NUZXh0PSJwb3NpdGlvbjphYnNvbHV0ZTt6LWluZGV4OjEwMDsiKyhkPT0iaCI/Imhl
aWdodDo3cHg7Ym90dG9tOjFweDtsZWZ0OjJweDtyaWdodDoiKyhlLnZTY3JvbGxiYXI/IjciOiIy
IikrInB4Ijoid2lkdGg6N3B4O2JvdHRvbToiKyhlLmhTY3JvbGxiYXI/IjciOiIyIikrInB4O3Rv
cDoycHg7cmlnaHQ6MXB4IiksZy5zdHlsZS5jc3NUZXh0Kz0iO3BvaW50ZXItZXZlbnRzOm5vbmU7
LSIrYysiLXRyYW5zaXRpb24tcHJvcGVydHk6b3BhY2l0eTstIitjKyItdHJhbnNpdGlvbi1kdXJh
dGlvbjoiKyhlLm9wdGlvbnMuZmFkZVNjcm9sbGJhcj8iMzUwbXMiOiIwIikrIjtvdmVyZmxvdzpo
aWRkZW47b3BhY2l0eToiKyhlLm9wdGlvbnMuaGlkZVNjcm9sbGJhcj8iMCI6IjEiKSxlLndyYXBw
ZXIuYXBwZW5kQ2hpbGQoZyksZVtkKyJTY3JvbGxiYXJXcmFwcGVyIl09ZyxnPWYuY3JlYXRlRWxl
bWVudCgiZGl2IiksZS5vcHRpb25zLnNjcm9sbGJhckNsYXNzfHwoZy5zdHlsZS5jc3NUZXh0PSJw
b3NpdGlvbjphYnNvbHV0ZTt6LWluZGV4OjEwMDtiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsMC41KTti
b3JkZXI6MXB4IHNvbGlkIHJnYmEoMjU1LDI1NSwyNTUsMC45KTstIitjKyItYmFja2dyb3VuZC1j
bGlwOnBhZGRpbmctYm94Oy0iK2MrIi1ib3gtc2l6aW5nOmJvcmRlci1ib3g7IisoZD09ImgiPyJo
ZWlnaHQ6MTAwJSI6IndpZHRoOjEwMCUiKSsiOy0iK2MrIi1ib3JkZXItcmFkaXVzOjNweDtib3Jk
ZXItcmFkaXVzOjNweCIpLGcuc3R5bGUuY3NzVGV4dCs9Ijtwb2ludGVyLWV2ZW50czpub25lOy0i
K2MrIi10cmFuc2l0aW9uLXByb3BlcnR5Oi0iK2MrIi10cmFuc2Zvcm07LSIrYysiLXRyYW5zaXRp
b24tdGltaW5nLWZ1bmN0aW9uOmN1YmljLWJlemllcigwLjMzLDAuNjYsMC42NiwxKTstIitjKyIt
dHJhbnNpdGlvbi1kdXJhdGlvbjowOy0iK2MrIi10cmFuc2Zvcm06Iit0KyIwLDAiK3UsZS5vcHRp
b25zLnVzZVRyYW5zaXRpb24mJihnLnN0eWxlLmNzc1RleHQrPSI7LSIrYysiLXRyYW5zaXRpb24t
dGltaW5nLWZ1bmN0aW9uOmN1YmljLWJlemllcigwLjMzLDAuNjYsMC42NiwxKSIpLGVbZCsiU2Ny
b2xsYmFyV3JhcHBlciJdLmFwcGVuZENoaWxkKGcpLGVbZCsiU2Nyb2xsYmFySW5kaWNhdG9yIl09
ZyksZD09ImgiPyhlLmhTY3JvbGxiYXJTaXplPWUuaFNjcm9sbGJhcldyYXBwZXIuY2xpZW50V2lk
dGgsZS5oU2Nyb2xsYmFySW5kaWNhdG9yU2l6ZT1hLm1heChiKGUuaFNjcm9sbGJhclNpemUqZS5o
U2Nyb2xsYmFyU2l6ZS9lLnNjcm9sbGVyVyksOCksZS5oU2Nyb2xsYmFySW5kaWNhdG9yLnN0eWxl
LndpZHRoPWUuaFNjcm9sbGJhckluZGljYXRvclNpemUrInB4IixlLmhTY3JvbGxiYXJNYXhTY3Jv
bGw9ZS5oU2Nyb2xsYmFyU2l6ZS1lLmhTY3JvbGxiYXJJbmRpY2F0b3JTaXplLGUuaFNjcm9sbGJh
clByb3A9ZS5oU2Nyb2xsYmFyTWF4U2Nyb2xsL2UubWF4U2Nyb2xsWCk6KGUudlNjcm9sbGJhclNp
emU9ZS52U2Nyb2xsYmFyV3JhcHBlci5jbGllbnRIZWlnaHQsZS52U2Nyb2xsYmFySW5kaWNhdG9y
U2l6ZT1hLm1heChiKGUudlNjcm9sbGJhclNpemUqZS52U2Nyb2xsYmFyU2l6ZS9lLnNjcm9sbGVy
SCksOCksZS52U2Nyb2xsYmFySW5kaWNhdG9yLnN0eWxlLmhlaWdodD1lLnZTY3JvbGxiYXJJbmRp
Y2F0b3JTaXplKyJweCIsZS52U2Nyb2xsYmFyTWF4U2Nyb2xsPWUudlNjcm9sbGJhclNpemUtZS52
U2Nyb2xsYmFySW5kaWNhdG9yU2l6ZSxlLnZTY3JvbGxiYXJQcm9wPWUudlNjcm9sbGJhck1heFNj
cm9sbC9lLm1heFNjcm9sbFkpLGUuX3Njcm9sbGJhclBvcyhkLCEwKSx2b2lkIDApOihlW2QrIlNj
cm9sbGJhcldyYXBwZXIiXSYmKGomJihlW2QrIlNjcm9sbGJhckluZGljYXRvciJdLnN0eWxlW2Mr
IlRyYW5zZm9ybSJdPSIiKSxlW2QrIlNjcm9sbGJhcldyYXBwZXIiXS5wYXJlbnROb2RlLnJlbW92
ZUNoaWxkKGVbZCsiU2Nyb2xsYmFyV3JhcHBlciJdKSxlW2QrIlNjcm9sbGJhcldyYXBwZXIiXT1u
dWxsLGVbZCsiU2Nyb2xsYmFySW5kaWNhdG9yIl09bnVsbCksdm9pZCAwKX0sX3Jlc2l6ZTpmdW5j
dGlvbigpe3ZhciBhPXRoaXM7c2V0VGltZW91dChmdW5jdGlvbigpe2EucmVmcmVzaCgpfSxkPzIw
MDowKX0sX3BvczpmdW5jdGlvbihhLGQpe2E9dGhpcy5oU2Nyb2xsP2E6MCxkPXRoaXMudlNjcm9s
bD9kOjAsdGhpcy5vcHRpb25zLnVzZVRyYW5zZm9ybT90aGlzLnNjcm9sbGVyLnN0eWxlW2MrIlRy
YW5zZm9ybSJdPXQrYSsicHgsIitkKyJweCIrdSsiIHNjYWxlKCIrdGhpcy5zY2FsZSsiKSI6KGE9
YihhKSxkPWIoZCksdGhpcy5zY3JvbGxlci5zdHlsZS5sZWZ0PWErInB4Iix0aGlzLnNjcm9sbGVy
LnN0eWxlLnRvcD1kKyJweCIpLHRoaXMueD1hLHRoaXMueT1kLHRoaXMuX3Njcm9sbGJhclBvcygi
aCIpLHRoaXMuX3Njcm9sbGJhclBvcygidiIpfSxfc2Nyb2xsYmFyUG9zOmZ1bmN0aW9uKGEsZCl7
dmFyIGcsZT10aGlzLGY9YT09ImgiP2UueDplLnk7ZVthKyJTY3JvbGxiYXIiXSYmKGY9ZVthKyJT
Y3JvbGxiYXJQcm9wIl0qZiwwPmY/KGUub3B0aW9ucy5maXhlZFNjcm9sbGJhcnx8KGc9ZVthKyJT
Y3JvbGxiYXJJbmRpY2F0b3JTaXplIl0rYihmKjMpLDg+ZyYmKGc9OCksZVthKyJTY3JvbGxiYXJJ
bmRpY2F0b3IiXS5zdHlsZVthPT0iaCI/IndpZHRoIjoiaGVpZ2h0Il09ZysicHgiKSxmPTApOmY+
ZVthKyJTY3JvbGxiYXJNYXhTY3JvbGwiXSYmKGUub3B0aW9ucy5maXhlZFNjcm9sbGJhcj9mPWVb
YSsiU2Nyb2xsYmFyTWF4U2Nyb2xsIl06KGc9ZVthKyJTY3JvbGxiYXJJbmRpY2F0b3JTaXplIl0t
YigoZi1lW2ErIlNjcm9sbGJhck1heFNjcm9sbCJdKSozKSw4PmcmJihnPTgpLGVbYSsiU2Nyb2xs
YmFySW5kaWNhdG9yIl0uc3R5bGVbYT09ImgiPyJ3aWR0aCI6ImhlaWdodCJdPWcrInB4IixmPWVb
YSsiU2Nyb2xsYmFyTWF4U2Nyb2xsIl0rKGVbYSsiU2Nyb2xsYmFySW5kaWNhdG9yU2l6ZSJdLWcp
KSksZVthKyJTY3JvbGxiYXJXcmFwcGVyIl0uc3R5bGVbYysiVHJhbnNpdGlvbkRlbGF5Il09IjAi
LGVbYSsiU2Nyb2xsYmFyV3JhcHBlciJdLnN0eWxlLm9wYWNpdHk9ZCYmZS5vcHRpb25zLmhpZGVT
Y3JvbGxiYXI/IjAiOiIxIixlW2ErIlNjcm9sbGJhckluZGljYXRvciJdLnN0eWxlW2MrIlRyYW5z
Zm9ybSJdPXQrKGE9PSJoIj9mKyJweCwwIjoiMCwiK2YrInB4IikrdSl9LF9zdGFydDpmdW5jdGlv
bihiKXt2YXIgZixnLGgsaixrLGQ9dGhpcyxlPWk/Yi50b3VjaGVzWzBdOmI7ZC5lbmFibGVkJiYo
ZC5vcHRpb25zLm9uQmVmb3JlU2Nyb2xsU3RhcnQmJmQub3B0aW9ucy5vbkJlZm9yZVNjcm9sbFN0
YXJ0LmNhbGwoZCxiKSwoZC5vcHRpb25zLnVzZVRyYW5zaXRpb258fGQub3B0aW9ucy56b29tKSYm
ZC5fdHJhbnNpdGlvblRpbWUoMCksZC5tb3ZlZD0hMSxkLmFuaW1hdGluZz0hMSxkLnpvb21lZD0h
MSxkLmRpc3RYPTAsZC5kaXN0WT0wLGQuYWJzRGlzdFg9MCxkLmFic0Rpc3RZPTAsZC5kaXJYPTAs
ZC5kaXJZPTAsZC5vcHRpb25zLnpvb20mJmkmJmIudG91Y2hlcy5sZW5ndGg+MSYmKGo9YS5hYnMo
Yi50b3VjaGVzWzBdLnBhZ2VYLWIudG91Y2hlc1sxXS5wYWdlWCksaz1hLmFicyhiLnRvdWNoZXNb
MF0ucGFnZVktYi50b3VjaGVzWzFdLnBhZ2VZKSxkLnRvdWNoZXNEaXN0U3RhcnQ9YS5zcXJ0KGoq
aitrKmspLGQub3JpZ2luWD1hLmFicyhiLnRvdWNoZXNbMF0ucGFnZVgrYi50b3VjaGVzWzFdLnBh
Z2VYLWQud3JhcHBlck9mZnNldExlZnQqMikvMi1kLngsZC5vcmlnaW5ZPWEuYWJzKGIudG91Y2hl
c1swXS5wYWdlWStiLnRvdWNoZXNbMV0ucGFnZVktZC53cmFwcGVyT2Zmc2V0VG9wKjIpLzItZC55
LGQub3B0aW9ucy5vblpvb21TdGFydCYmZC5vcHRpb25zLm9uWm9vbVN0YXJ0LmNhbGwoZCxiKSks
ZC5vcHRpb25zLm1vbWVudHVtJiYoZC5vcHRpb25zLnVzZVRyYW5zZm9ybT8oZj1nZXRDb21wdXRl
ZFN0eWxlKGQuc2Nyb2xsZXIsbnVsbClbYysiVHJhbnNmb3JtIl0ucmVwbGFjZSgvW14wLTktLixd
L2csIiIpLnNwbGl0KCIsIiksZz1mWzRdKjEsaD1mWzVdKjEpOihnPWdldENvbXB1dGVkU3R5bGUo
ZC5zY3JvbGxlcixudWxsKS5sZWZ0LnJlcGxhY2UoL1teMC05LV0vZywiIikqMSxoPWdldENvbXB1
dGVkU3R5bGUoZC5zY3JvbGxlcixudWxsKS50b3AucmVwbGFjZSgvW14wLTktXS9nLCIiKSoxKSwo
ZyE9ZC54fHxoIT1kLnkpJiYoZC5vcHRpb25zLnVzZVRyYW5zaXRpb24/ZC5fdW5iaW5kKCJ3ZWJr
aXRUcmFuc2l0aW9uRW5kIik6bShkLmFuaVRpbWUpLGQuc3RlcHM9W10sZC5fcG9zKGcsaCkpKSxk
LmFic1N0YXJ0WD1kLngsZC5hYnNTdGFydFk9ZC55LGQuc3RhcnRYPWQueCxkLnN0YXJ0WT1kLnks
ZC5wb2ludFg9ZS5wYWdlWCxkLnBvaW50WT1lLnBhZ2VZLGQuc3RhcnRUaW1lPWIudGltZVN0YW1w
fHxEYXRlLm5vdygpLGQub3B0aW9ucy5vblNjcm9sbFN0YXJ0JiZkLm9wdGlvbnMub25TY3JvbGxT
dGFydC5jYWxsKGQsYiksZC5fYmluZChwKSxkLl9iaW5kKHEpLGQuX2JpbmQocikpfSxfbW92ZTpm
dW5jdGlvbihiKXt2YXIgayxsLG0sZD10aGlzLGU9aT9iLnRvdWNoZXNbMF06YixmPWUucGFnZVgt
ZC5wb2ludFgsZz1lLnBhZ2VZLWQucG9pbnRZLGg9ZC54K2Ysaj1kLnkrZyxuPWIudGltZVN0YW1w
fHxEYXRlLm5vdygpO3JldHVybiBkLm9wdGlvbnMub25CZWZvcmVTY3JvbGxNb3ZlJiZkLm9wdGlv
bnMub25CZWZvcmVTY3JvbGxNb3ZlLmNhbGwoZCxiKSxkLm9wdGlvbnMuem9vbSYmaSYmYi50b3Vj
aGVzLmxlbmd0aD4xPyhrPWEuYWJzKGIudG91Y2hlc1swXS5wYWdlWC1iLnRvdWNoZXNbMV0ucGFn
ZVgpLGw9YS5hYnMoYi50b3VjaGVzWzBdLnBhZ2VZLWIudG91Y2hlc1sxXS5wYWdlWSksZC50b3Vj
aGVzRGlzdD1hLnNxcnQoayprK2wqbCksZC56b29tZWQ9ITAsbT0xL2QudG91Y2hlc0Rpc3RTdGFy
dCpkLnRvdWNoZXNEaXN0KnRoaXMuc2NhbGUsZC5vcHRpb25zLnpvb21NaW4+bT9tPS41KmQub3B0
aW9ucy56b29tTWluKk1hdGgucG93KDIsbS9kLm9wdGlvbnMuem9vbU1pbik6bT5kLm9wdGlvbnMu
em9vbU1heCYmKG09MipkLm9wdGlvbnMuem9vbU1heCpNYXRoLnBvdyguNSxkLm9wdGlvbnMuem9v
bU1heC9tKSksZC5sYXN0U2NhbGU9bS90aGlzLnNjYWxlLGg9dGhpcy5vcmlnaW5YLXRoaXMub3Jp
Z2luWCpkLmxhc3RTY2FsZSt0aGlzLngsaj10aGlzLm9yaWdpblktdGhpcy5vcmlnaW5ZKmQubGFz
dFNjYWxlK3RoaXMueSx0aGlzLnNjcm9sbGVyLnN0eWxlW2MrIlRyYW5zZm9ybSJdPXQraCsicHgs
IitqKyJweCIrdSsiIHNjYWxlKCIrbSsiKSIsZC5vcHRpb25zLm9uWm9vbSYmZC5vcHRpb25zLm9u
Wm9vbS5jYWxsKGQsYiksdm9pZCAwKTooZC5wb2ludFg9ZS5wYWdlWCxkLnBvaW50WT1lLnBhZ2VZ
LChoPjB8fGQubWF4U2Nyb2xsWD5oKSYmKGg9ZC5vcHRpb25zLmJvdW5jZT9kLngrZi8yOmg+PTB8
fGQubWF4U2Nyb2xsWD49MD8wOmQubWF4U2Nyb2xsWCksKGo+ZC5taW5TY3JvbGxZfHxkLm1heFNj
cm9sbFk+aikmJihqPWQub3B0aW9ucy5ib3VuY2U/ZC55K2cvMjpqPj1kLm1pblNjcm9sbFl8fGQu
bWF4U2Nyb2xsWT49MD9kLm1pblNjcm9sbFk6ZC5tYXhTY3JvbGxZKSw2PmQuYWJzRGlzdFgmJjY+
ZC5hYnNEaXN0WT8oZC5kaXN0WCs9ZixkLmRpc3RZKz1nLGQuYWJzRGlzdFg9YS5hYnMoZC5kaXN0
WCksZC5hYnNEaXN0WT1hLmFicyhkLmRpc3RZKSx2b2lkIDApOihkLm9wdGlvbnMubG9ja0RpcmVj
dGlvbiYmKGQuYWJzRGlzdFg+ZC5hYnNEaXN0WSs1PyhqPWQueSxnPTApOmQuYWJzRGlzdFk+ZC5h
YnNEaXN0WCs1JiYoaD1kLngsZj0wKSksZC5tb3ZlZD0hMCxkLl9wb3MoaCxqKSxkLmRpclg9Zj4w
Py0xOjA+Zj8xOjAsZC5kaXJZPWc+MD8tMTowPmc/MTowLG4tZC5zdGFydFRpbWU+MzAwJiYoZC5z
dGFydFRpbWU9bixkLnN0YXJ0WD1kLngsZC5zdGFydFk9ZC55KSxkLm9wdGlvbnMub25TY3JvbGxN
b3ZlJiZkLm9wdGlvbnMub25TY3JvbGxNb3ZlLmNhbGwoZCxiKSx2b2lkIDApKX0sX2VuZDpmdW5j
dGlvbihkKXtpZighaXx8ZC50b3VjaGVzLmxlbmd0aD09MCl7dmFyIGcsaCxvLHMsdix3LHgsZT10
aGlzLGY9aT9kLmNoYW5nZWRUb3VjaGVzWzBdOmQsaj17ZGlzdDowLHRpbWU6MH0saz17ZGlzdDow
LHRpbWU6MH0sbD0oZC50aW1lU3RhbXB8fERhdGUubm93KCkpLWUuc3RhcnRUaW1lLG09ZS54LG49
ZS55O2lmKGUuX3VuYmluZChwKSxlLl91bmJpbmQocSksZS5fdW5iaW5kKHIpLGUub3B0aW9ucy5v
bkJlZm9yZVNjcm9sbEVuZCYmZS5vcHRpb25zLm9uQmVmb3JlU2Nyb2xsRW5kLmNhbGwoZSxkKSxl
Lnpvb21lZClyZXR1cm4geD1lLnNjYWxlKmUubGFzdFNjYWxlLHg9TWF0aC5tYXgoZS5vcHRpb25z
Lnpvb21NaW4seCkseD1NYXRoLm1pbihlLm9wdGlvbnMuem9vbU1heCx4KSxlLmxhc3RTY2FsZT14
L2Uuc2NhbGUsZS5zY2FsZT14LGUueD1lLm9yaWdpblgtZS5vcmlnaW5YKmUubGFzdFNjYWxlK2Uu
eCxlLnk9ZS5vcmlnaW5ZLWUub3JpZ2luWSplLmxhc3RTY2FsZStlLnksZS5zY3JvbGxlci5zdHls
ZVtjKyJUcmFuc2l0aW9uRHVyYXRpb24iXT0iMjAwbXMiLGUuc2Nyb2xsZXIuc3R5bGVbYysiVHJh
bnNmb3JtIl09dCtlLngrInB4LCIrZS55KyJweCIrdSsiIHNjYWxlKCIrZS5zY2FsZSsiKSIsZS56
b29tZWQ9ITEsZS5yZWZyZXNoKCksZS5vcHRpb25zLm9uWm9vbUVuZCYmZS5vcHRpb25zLm9uWm9v
bUVuZC5jYWxsKGUsZCksdm9pZCAwO2lmKCFlLm1vdmVkKXJldHVybiBpJiYoZS5kb3VibGVUYXBU
aW1lciYmZS5vcHRpb25zLnpvb20/KGNsZWFyVGltZW91dChlLmRvdWJsZVRhcFRpbWVyKSxlLmRv
dWJsZVRhcFRpbWVyPW51bGwsZS5vcHRpb25zLm9uWm9vbVN0YXJ0JiZlLm9wdGlvbnMub25ab29t
U3RhcnQuY2FsbChlLGQpLGUuem9vbShlLnBvaW50WCxlLnBvaW50WSxlLnNjYWxlPT0xP2Uub3B0
aW9ucy5kb3VibGVUYXBab29tOjEpLGUub3B0aW9ucy5vblpvb21FbmQmJnNldFRpbWVvdXQoZnVu
Y3Rpb24oKXtlLm9wdGlvbnMub25ab29tRW5kLmNhbGwoZSxkKX0sMjAwKSk6ZS5kb3VibGVUYXBU
aW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS5kb3VibGVUYXBUaW1lcj1udWxsLGc9Zi50YXJn
ZXQ7d2hpbGUoZy5ub2RlVHlwZSE9MSlnPWcucGFyZW50Tm9kZTtnLnRhZ05hbWUhPSJTRUxFQ1Qi
JiZnLnRhZ05hbWUhPSJJTlBVVCImJmcudGFnTmFtZSE9IlRFWFRBUkVBIiYmKGg9ZG9jdW1lbnQu
Y3JlYXRlRXZlbnQoIk1vdXNlRXZlbnRzIiksaC5pbml0TW91c2VFdmVudCgiY2xpY2siLCEwLCEw
LGQudmlldywxLGYuc2NyZWVuWCxmLnNjcmVlblksZi5jbGllbnRYLGYuY2xpZW50WSxkLmN0cmxL
ZXksZC5hbHRLZXksZC5zaGlmdEtleSxkLm1ldGFLZXksMCxudWxsKSxoLl9mYWtlPSEwKX0sZS5v
cHRpb25zLnpvb20/MjUwOjApKSxlLl9yZXNldFBvcygyMDApLGUub3B0aW9ucy5vblRvdWNoRW5k
JiZlLm9wdGlvbnMub25Ub3VjaEVuZC5jYWxsKGUsZCksdm9pZCAwO2lmKDMwMD5sJiZlLm9wdGlv
bnMubW9tZW50dW0mJihqPW0/ZS5fbW9tZW50dW0obS1lLnN0YXJ0WCxsLC1lLngsZS5zY3JvbGxl
clctZS53cmFwcGVyVytlLngsZS5vcHRpb25zLmJvdW5jZT9lLndyYXBwZXJXOjApOmosaz1uP2Uu
X21vbWVudHVtKG4tZS5zdGFydFksbCwtZS55LDA+ZS5tYXhTY3JvbGxZP2Uuc2Nyb2xsZXJILWUu
d3JhcHBlckgrZS55LWUubWluU2Nyb2xsWTowLGUub3B0aW9ucy5ib3VuY2U/ZS53cmFwcGVySDow
KTprLG09ZS54K2ouZGlzdCxuPWUueStrLmRpc3QsKGUueD4wJiZtPjB8fGUubWF4U2Nyb2xsWD5l
LngmJmUubWF4U2Nyb2xsWD5tKSYmKGo9e2Rpc3Q6MCx0aW1lOjB9KSwoZS55PmUubWluU2Nyb2xs
WSYmbj5lLm1pblNjcm9sbFl8fGUubWF4U2Nyb2xsWT5lLnkmJmUubWF4U2Nyb2xsWT5uKSYmKGs9
e2Rpc3Q6MCx0aW1lOjB9KSksai5kaXN0fHxrLmRpc3QpcmV0dXJuIHY9YS5tYXgoYS5tYXgoai50
aW1lLGsudGltZSksMTApLGUub3B0aW9ucy5zbmFwJiYobz1tLWUuYWJzU3RhcnRYLHM9bi1lLmFi
c1N0YXJ0WSxlLm9wdGlvbnMuc25hcFRocmVzaG9sZD5hLmFicyhvKSYmZS5vcHRpb25zLnNuYXBU
aHJlc2hvbGQ+YS5hYnMocyk/ZS5zY3JvbGxUbyhlLmFic1N0YXJ0WCxlLmFic1N0YXJ0WSwyMDAp
Oih3PWUuX3NuYXAobSxuKSxtPXcueCxuPXcueSx2PWEubWF4KHcudGltZSx2KSkpLGUuc2Nyb2xs
VG8oYihtKSxiKG4pLHYpLGUub3B0aW9ucy5vblRvdWNoRW5kJiZlLm9wdGlvbnMub25Ub3VjaEVu
ZC5jYWxsKGUsZCksdm9pZCAwO2lmKGUub3B0aW9ucy5zbmFwKXJldHVybiBvPW0tZS5hYnNTdGFy
dFgscz1uLWUuYWJzU3RhcnRZLGUub3B0aW9ucy5zbmFwVGhyZXNob2xkPmEuYWJzKG8pJiZlLm9w
dGlvbnMuc25hcFRocmVzaG9sZD5hLmFicyhzKT9lLnNjcm9sbFRvKGUuYWJzU3RhcnRYLGUuYWJz
U3RhcnRZLDIwMCk6KHc9ZS5fc25hcChlLngsZS55KSwody54IT1lLnh8fHcueSE9ZS55KSYmZS5z
Y3JvbGxUbyh3Lngsdy55LHcudGltZSkpLGUub3B0aW9ucy5vblRvdWNoRW5kJiZlLm9wdGlvbnMu
b25Ub3VjaEVuZC5jYWxsKGUsZCksdm9pZCAwO2UuX3Jlc2V0UG9zKDIwMCksZS5vcHRpb25zLm9u
VG91Y2hFbmQmJmUub3B0aW9ucy5vblRvdWNoRW5kLmNhbGwoZSxkKX19LF9yZXNldFBvczpmdW5j
dGlvbihhKXt2YXIgYj10aGlzLGQ9Yi54Pj0wPzA6Yi5tYXhTY3JvbGxYPmIueD9iLm1heFNjcm9s
bFg6Yi54LGU9Yi55Pj1iLm1pblNjcm9sbFl8fGIubWF4U2Nyb2xsWT4wP2IubWluU2Nyb2xsWTpi
Lm1heFNjcm9sbFk+Yi55P2IubWF4U2Nyb2xsWTpiLnk7cmV0dXJuIGQ9PWIueCYmZT09Yi55Pyhi
Lm1vdmVkJiYoYi5tb3ZlZD0hMSxiLm9wdGlvbnMub25TY3JvbGxFbmQmJmIub3B0aW9ucy5vblNj
cm9sbEVuZC5jYWxsKGIpKSxiLmhTY3JvbGxiYXImJmIub3B0aW9ucy5oaWRlU2Nyb2xsYmFyJiYo
Yz09IndlYmtpdCImJihiLmhTY3JvbGxiYXJXcmFwcGVyLnN0eWxlW2MrIlRyYW5zaXRpb25EZWxh
eSJdPSIzMDBtcyIpLGIuaFNjcm9sbGJhcldyYXBwZXIuc3R5bGUub3BhY2l0eT0iMCIpLGIudlNj
cm9sbGJhciYmYi5vcHRpb25zLmhpZGVTY3JvbGxiYXImJihjPT0id2Via2l0IiYmKGIudlNjcm9s
bGJhcldyYXBwZXIuc3R5bGVbYysiVHJhbnNpdGlvbkRlbGF5Il09IjMwMG1zIiksYi52U2Nyb2xs
YmFyV3JhcHBlci5zdHlsZS5vcGFjaXR5PSIwIiksdm9pZCAwKTooYi5zY3JvbGxUbyhkLGUsYXx8
MCksdm9pZCAwKX0sX3doZWVsOmZ1bmN0aW9uKGEpe3ZhciBjLGQsZSxmLGcsYj10aGlzO3JldHVy
biJ3aGVlbERlbHRhWCJpbiBhPyhjPWEud2hlZWxEZWx0YVgvMTIsZD1hLndoZWVsRGVsdGFZLzEy
KTpjPWQ9ImRldGFpbCJpbiBhPy1hLmRldGFpbCozOi1hLndoZWVsRGVsdGEsYi5vcHRpb25zLndo
ZWVsQWN0aW9uPT0iem9vbSI/KGc9Yi5zY2FsZSpNYXRoLnBvdygyLDEvMyooZD9kL01hdGguYWJz
KGQpOjApKSxiLm9wdGlvbnMuem9vbU1pbj5nJiYoZz1iLm9wdGlvbnMuem9vbU1pbiksZz5iLm9w
dGlvbnMuem9vbU1heCYmKGc9Yi5vcHRpb25zLnpvb21NYXgpLGchPWIuc2NhbGUmJighYi53aGVl
bFpvb21Db3VudCYmYi5vcHRpb25zLm9uWm9vbVN0YXJ0JiZiLm9wdGlvbnMub25ab29tU3RhcnQu
Y2FsbChiLGEpLGIud2hlZWxab29tQ291bnQrKyxiLnpvb20oYS5wYWdlWCxhLnBhZ2VZLGcsNDAw
KSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi53aGVlbFpvb21Db3VudC0tLCFiLndoZWVsWm9vbUNv
dW50JiZiLm9wdGlvbnMub25ab29tRW5kJiZiLm9wdGlvbnMub25ab29tRW5kLmNhbGwoYixhKX0s
NDAwKSksdm9pZCAwKTooZT1iLngrYyxmPWIueStkLGU+MD9lPTA6Yi5tYXhTY3JvbGxYPmUmJihl
PWIubWF4U2Nyb2xsWCksZj5iLm1pblNjcm9sbFk/Zj1iLm1pblNjcm9sbFk6Yi5tYXhTY3JvbGxZ
PmYmJihmPWIubWF4U2Nyb2xsWSksYi5zY3JvbGxUbyhlLGYsMCksdm9pZCAwKX0sX21vdXNlb3V0
OmZ1bmN0aW9uKGEpe3ZhciBiPWEucmVsYXRlZFRhcmdldDtpZighYilyZXR1cm4gdGhpcy5fZW5k
KGEpLHZvaWQgMDt3aGlsZShiPWIucGFyZW50Tm9kZSlpZihiPT10aGlzLndyYXBwZXIpcmV0dXJu
O3RoaXMuX2VuZChhKX0sX3RyYW5zaXRpb25FbmQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpczthLnRh
cmdldD09Yi5zY3JvbGxlciYmKGIuX3VuYmluZCgid2Via2l0VHJhbnNpdGlvbkVuZCIpLGIuX3N0
YXJ0QW5pKCkpfSxfc3RhcnRBbmk6ZnVuY3Rpb24oKXt2YXIgZixnLGgsYj10aGlzLGM9Yi54LGQ9
Yi55LGU9RGF0ZS5ub3coKTtpZighYi5hbmltYXRpbmcpe2lmKCFiLnN0ZXBzLmxlbmd0aClyZXR1
cm4gYi5fcmVzZXRQb3MoNDAwKSx2b2lkIDA7aWYoZj1iLnN0ZXBzLnNoaWZ0KCksZi54PT1jJiZm
Lnk9PWQmJihmLnRpbWU9MCksYi5hbmltYXRpbmc9ITAsYi5tb3ZlZD0hMCxiLm9wdGlvbnMudXNl
VHJhbnNpdGlvbilyZXR1cm4gYi5fdHJhbnNpdGlvblRpbWUoZi50aW1lKSxiLl9wb3MoZi54LGYu
eSksYi5hbmltYXRpbmc9ITEsZi50aW1lP2IuX2JpbmQoIndlYmtpdFRyYW5zaXRpb25FbmQiKTpi
Ll9yZXNldFBvcygwKSx2b2lkIDA7aD1mdW5jdGlvbigpe3ZhciBqLGssaT1EYXRlLm5vdygpO3Jl
dHVybiBpPj1lK2YudGltZT8oYi5fcG9zKGYueCxmLnkpLGIuYW5pbWF0aW5nPSExLGIub3B0aW9u
cy5vbkFuaW1hdGlvbkVuZCYmYi5vcHRpb25zLm9uQW5pbWF0aW9uRW5kLmNhbGwoYiksYi5fc3Rh
cnRBbmkoKSx2b2lkIDApOihpPShpLWUpL2YudGltZS0xLGc9YS5zcXJ0KDEtaSppKSxqPShmLngt
YykqZytjLGs9KGYueS1kKSpnK2QsYi5fcG9zKGosayksYi5hbmltYXRpbmcmJihiLmFuaVRpbWU9
bChoKSksdm9pZCAwKX0saCgpfX0sX3RyYW5zaXRpb25UaW1lOmZ1bmN0aW9uKGEpe2ErPSJtcyIs
dGhpcy5zY3JvbGxlci5zdHlsZVtjKyJUcmFuc2l0aW9uRHVyYXRpb24iXT1hLHRoaXMuaFNjcm9s
bGJhciYmKHRoaXMuaFNjcm9sbGJhckluZGljYXRvci5zdHlsZVtjKyJUcmFuc2l0aW9uRHVyYXRp
b24iXT1hKSx0aGlzLnZTY3JvbGxiYXImJih0aGlzLnZTY3JvbGxiYXJJbmRpY2F0b3Iuc3R5bGVb
YysiVHJhbnNpdGlvbkR1cmF0aW9uIl09YSl9LF9tb21lbnR1bTpmdW5jdGlvbihjLGQsZSxmLGcp
e3ZhciBoPTZlLTQsaT1hLmFicyhjKS9kLGo9aSppLygyKmgpLGs9MCxsPTA7cmV0dXJuIGM+MCYm
aj5lPyhsPWcvKDYvKGovaSpoKSksZSs9bCxpPWkqZS9qLGo9ZSk6MD5jJiZqPmYmJihsPWcvKDYv
KGovaSpoKSksZis9bCxpPWkqZi9qLGo9Ziksaio9MD5jPy0xOjEsaz1pL2gse2Rpc3Q6aix0aW1l
OmIoayl9fSxfb2Zmc2V0OmZ1bmN0aW9uKGEpe3ZhciBiPS1hLm9mZnNldExlZnQsYz0tYS5vZmZz
ZXRUb3A7d2hpbGUoYT1hLm9mZnNldFBhcmVudCliLT1hLm9mZnNldExlZnQsYy09YS5vZmZzZXRU
b3A7cmV0dXJuIGEhPXRoaXMud3JhcHBlciYmKGIqPXRoaXMuc2NhbGUsYyo9dGhpcy5zY2FsZSks
e2xlZnQ6Yix0b3A6Y319LF9zbmFwOmZ1bmN0aW9uKGMsZCl7dmFyIGYsZyxoLGksaixrLGU9dGhp
cztmb3IoaD1lLnBhZ2VzWC5sZW5ndGgtMSxmPTAsZz1lLnBhZ2VzWC5sZW5ndGg7Zz5mO2YrKylp
ZihjPj1lLnBhZ2VzWFtmXSl7aD1mO2JyZWFrfWZvcihoPT1lLmN1cnJQYWdlWCYmaD4wJiYwPmUu
ZGlyWCYmaC0tLGM9ZS5wYWdlc1hbaF0saj1hLmFicyhjLWUucGFnZXNYW2UuY3VyclBhZ2VYXSks
aj1qP2EuYWJzKGUueC1jKS9qKjUwMDowLGUuY3VyclBhZ2VYPWgsaD1lLnBhZ2VzWS5sZW5ndGgt
MSxmPTA7aD5mO2YrKylpZihkPj1lLnBhZ2VzWVtmXSl7aD1mO2JyZWFrfXJldHVybiBoPT1lLmN1
cnJQYWdlWSYmaD4wJiYwPmUuZGlyWSYmaC0tLGQ9ZS5wYWdlc1lbaF0saz1hLmFicyhkLWUucGFn
ZXNZW2UuY3VyclBhZ2VZXSksaz1rP2EuYWJzKGUueS1kKS9rKjUwMDowLGUuY3VyclBhZ2VZPWgs
aT1iKGEubWF4KGosaykpfHwyMDAse3g6Yyx5OmQsdGltZTppfX0sX2JpbmQ6ZnVuY3Rpb24oYSxi
LGMpe2E9YSE9IndlYmtpdFRyYW5zaXRpb25FbmQiP2E6InRyYW5zaXRpb25FbmQiLHF4LmV2ZW50
LlJlZ2lzdHJhdGlvbi5hZGRMaXN0ZW5lcihifHx0aGlzLnNjcm9sbGVyLGEsdGhpcy5oYW5kbGVF
dmVudCx0aGlzLCEhYyl9LF91bmJpbmQ6ZnVuY3Rpb24oYSxiLGMpe2E9YSE9IndlYmtpdFRyYW5z
aXRpb25FbmQiP2E6InRyYW5zaXRpb25FbmQiLHF4LmV2ZW50LlJlZ2lzdHJhdGlvbi5yZW1vdmVM
aXN0ZW5lcihifHx0aGlzLnNjcm9sbGVyLGEsdGhpcy5oYW5kbGVFdmVudCx0aGlzLCEhYyl9LGRl
c3Ryb3k6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2Euc2Nyb2xsZXIuc3R5bGVbYysiVHJhbnNmb3Jt
Il09IiIsYS5oU2Nyb2xsYmFyPSExLGEudlNjcm9sbGJhcj0hMSxhLl9zY3JvbGxiYXIoImgiKSxh
Ll9zY3JvbGxiYXIoInYiKSxhLl91bmJpbmQobix3aW5kb3cpLGEuX3VuYmluZChvKSxhLl91bmJp
bmQocCksYS5fdW5iaW5kKHEpLGEuX3VuYmluZChyKSxhLm9wdGlvbnMuaGFzVG91Y2h8fChhLl91
bmJpbmQoIm1vdXNlb3V0IixhLndyYXBwZXIpLGEuX3VuYmluZChzKSksYS5vcHRpb25zLnVzZVRy
YW5zaXRpb24mJmEuX3VuYmluZCgid2Via2l0VHJhbnNpdGlvbkVuZCIpLGEub3B0aW9ucy5jaGVj
a0RPTUNoYW5nZXMmJmNsZWFySW50ZXJ2YWwoYS5jaGVja0RPTVRpbWUpLGEub3B0aW9ucy5vbkRl
c3Ryb3kmJmEub3B0aW9ucy5vbkRlc3Ryb3kuY2FsbChhKX0scmVmcmVzaDpmdW5jdGlvbigpe3Zh
ciBkLGUsZixnLGE9dGhpcyxoPTAsaT0wO2lmKGEub3B0aW9ucy56b29tTWluPmEuc2NhbGUmJihh
LnNjYWxlPWEub3B0aW9ucy56b29tTWluKSxhLndyYXBwZXJXPWEud3JhcHBlci5jbGllbnRXaWR0
aHx8MSxhLndyYXBwZXJIPWEud3JhcHBlci5jbGllbnRIZWlnaHR8fDEsYS5taW5TY3JvbGxZPS1h
Lm9wdGlvbnMudG9wT2Zmc2V0fHwwLGEuc2Nyb2xsZXJXPWIoYS5zY3JvbGxlci5vZmZzZXRXaWR0
aCphLnNjYWxlKSxhLnNjcm9sbGVySD1iKChhLnNjcm9sbGVyLm9mZnNldEhlaWdodCthLm1pblNj
cm9sbFkpKmEuc2NhbGUpLGEubWF4U2Nyb2xsWD1hLndyYXBwZXJXLWEuc2Nyb2xsZXJXLGEubWF4
U2Nyb2xsWT1hLndyYXBwZXJILWEuc2Nyb2xsZXJIK2EubWluU2Nyb2xsWSxhLmRpclg9MCxhLmRp
clk9MCxhLm9wdGlvbnMub25SZWZyZXNoJiZhLm9wdGlvbnMub25SZWZyZXNoLmNhbGwoYSksYS5o
U2Nyb2xsPWEub3B0aW9ucy5oU2Nyb2xsJiYwPmEubWF4U2Nyb2xsWCxhLnZTY3JvbGw9YS5vcHRp
b25zLnZTY3JvbGwmJighYS5vcHRpb25zLmJvdW5jZUxvY2smJiFhLmhTY3JvbGx8fGEuc2Nyb2xs
ZXJIPmEud3JhcHBlckgpLGEuaFNjcm9sbGJhcj1hLmhTY3JvbGwmJmEub3B0aW9ucy5oU2Nyb2xs
YmFyLGEudlNjcm9sbGJhcj1hLnZTY3JvbGwmJmEub3B0aW9ucy52U2Nyb2xsYmFyJiZhLnNjcm9s
bGVySD5hLndyYXBwZXJILGQ9YS5fb2Zmc2V0KGEud3JhcHBlciksYS53cmFwcGVyT2Zmc2V0TGVm
dD0tZC5sZWZ0LGEud3JhcHBlck9mZnNldFRvcD0tZC50b3AsdHlwZW9mIGEub3B0aW9ucy5zbmFw
PT0ic3RyaW5nIilmb3IoYS5wYWdlc1g9W10sYS5wYWdlc1k9W10sZz1hLnNjcm9sbGVyLnF1ZXJ5
U2VsZWN0b3JBbGwoYS5vcHRpb25zLnNuYXApLGU9MCxmPWcubGVuZ3RoO2Y+ZTtlKyspaD1hLl9v
ZmZzZXQoZ1tlXSksaC5sZWZ0Kz1hLndyYXBwZXJPZmZzZXRMZWZ0LGgudG9wKz1hLndyYXBwZXJP
ZmZzZXRUb3AsYS5wYWdlc1hbZV09YS5tYXhTY3JvbGxYPmgubGVmdD9hLm1heFNjcm9sbFg6aC5s
ZWZ0KmEuc2NhbGUsYS5wYWdlc1lbZV09YS5tYXhTY3JvbGxZPmgudG9wP2EubWF4U2Nyb2xsWTpo
LnRvcCphLnNjYWxlO2Vsc2UgaWYoYS5vcHRpb25zLnNuYXApe2EucGFnZXNYPVtdO3doaWxlKGg+
PWEubWF4U2Nyb2xsWClhLnBhZ2VzWFtpXT1oLGgtPWEud3JhcHBlclcsaSsrO2EubWF4U2Nyb2xs
WCVhLndyYXBwZXJXJiYoYS5wYWdlc1hbYS5wYWdlc1gubGVuZ3RoXT1hLm1heFNjcm9sbFgtYS5w
YWdlc1hbYS5wYWdlc1gubGVuZ3RoLTFdK2EucGFnZXNYW2EucGFnZXNYLmxlbmd0aC0xXSksaD0w
LGk9MCxhLnBhZ2VzWT1bXTt3aGlsZShoPj1hLm1heFNjcm9sbFkpYS5wYWdlc1lbaV09aCxoLT1h
LndyYXBwZXJILGkrKzthLm1heFNjcm9sbFklYS53cmFwcGVySCYmKGEucGFnZXNZW2EucGFnZXNZ
Lmxlbmd0aF09YS5tYXhTY3JvbGxZLWEucGFnZXNZW2EucGFnZXNZLmxlbmd0aC0xXSthLnBhZ2Vz
WVthLnBhZ2VzWS5sZW5ndGgtMV0pfWEuX3Njcm9sbGJhcigiaCIpLGEuX3Njcm9sbGJhcigidiIp
LGEuem9vbWVkfHwoYS5zY3JvbGxlci5zdHlsZVtjKyJUcmFuc2l0aW9uRHVyYXRpb24iXT0iMCIs
YS5fcmVzZXRQb3MoMjAwKSl9LHNjcm9sbFRvOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBnLGgsZT10
aGlzLGY9YTtmb3IoZS5zdG9wKCksZi5sZW5ndGh8fChmPVt7eDphLHk6Yix0aW1lOmMscmVsYXRp
dmU6ZH1dKSxnPTAsaD1mLmxlbmd0aDtoPmc7ZysrKWZbZ10ucmVsYXRpdmUmJihmW2ddLng9ZS54
LWZbZ10ueCxmW2ddLnk9ZS55LWZbZ10ueSksZS5zdGVwcy5wdXNoKHt4OmZbZ10ueCx5OmZbZ10u
eSx0aW1lOmZbZ10udGltZXx8MH0pO2UuX3N0YXJ0QW5pKCl9LHNjcm9sbFRvRWxlbWVudDpmdW5j
dGlvbihiLGMpe3ZhciBlLGQ9dGhpcztiPWIubm9kZVR5cGU/YjpkLnNjcm9sbGVyLnF1ZXJ5U2Vs
ZWN0b3IoYiksYiYmKGU9ZC5fb2Zmc2V0KGIpLGUubGVmdCs9ZC53cmFwcGVyT2Zmc2V0TGVmdCxl
LnRvcCs9ZC53cmFwcGVyT2Zmc2V0VG9wLGUubGVmdD1lLmxlZnQ+MD8wOmQubWF4U2Nyb2xsWD5l
LmxlZnQ/ZC5tYXhTY3JvbGxYOmUubGVmdCxlLnRvcD1lLnRvcD5kLm1pblNjcm9sbFk/ZC5taW5T
Y3JvbGxZOmQubWF4U2Nyb2xsWT5lLnRvcD9kLm1heFNjcm9sbFk6ZS50b3AsYz1jPT09dm9pZCAw
P2EubWF4KGEuYWJzKGUubGVmdCkqMixhLmFicyhlLnRvcCkqMik6YyxkLnNjcm9sbFRvKGUubGVm
dCxlLnRvcCxjKSl9LHNjcm9sbFRvUGFnZTpmdW5jdGlvbihhLGIsYyl7dmFyIGUsZixkPXRoaXM7
ZC5vcHRpb25zLm9uU2Nyb2xsU3RhcnQmJmQub3B0aW9ucy5vblNjcm9sbFN0YXJ0LmNhbGwoZCks
ZC5vcHRpb25zLnNuYXA/KGE9YT09Im5leHQiP2QuY3VyclBhZ2VYKzE6YT09InByZXYiP2QuY3Vy
clBhZ2VYLTE6YSxiPWI9PSJuZXh0Ij9kLmN1cnJQYWdlWSsxOmI9PSJwcmV2Ij9kLmN1cnJQYWdl
WS0xOmIsYT0wPmE/MDphPmQucGFnZXNYLmxlbmd0aC0xP2QucGFnZXNYLmxlbmd0aC0xOmEsYj0w
PmI/MDpiPmQucGFnZXNZLmxlbmd0aC0xP2QucGFnZXNZLmxlbmd0aC0xOmIsZC5jdXJyUGFnZVg9
YSxkLmN1cnJQYWdlWT1iLGU9ZC5wYWdlc1hbYV0sZj1kLnBhZ2VzWVtiXSk6KGU9LWQud3JhcHBl
clcqYSxmPS1kLndyYXBwZXJIKmIsZC5tYXhTY3JvbGxYPmUmJihlPWQubWF4U2Nyb2xsWCksZC5t
YXhTY3JvbGxZPmYmJihmPWQubWF4U2Nyb2xsWSkpLGQuc2Nyb2xsVG8oZSxmLGN8fDQwMCl9LGRp
c2FibGU6ZnVuY3Rpb24oKXt0aGlzLnN0b3AoKSx0aGlzLl9yZXNldFBvcygwKSx0aGlzLmVuYWJs
ZWQ9ITEsdGhpcy5fdW5iaW5kKHApLHRoaXMuX3VuYmluZChxKSx0aGlzLl91bmJpbmQocil9LGVu
YWJsZTpmdW5jdGlvbigpe3RoaXMuZW5hYmxlZD0hMH0sc3RvcDpmdW5jdGlvbigpe3RoaXMub3B0
aW9ucy51c2VUcmFuc2l0aW9uP3RoaXMuX3VuYmluZCgid2Via2l0VHJhbnNpdGlvbkVuZCIpOm0o
dGhpcy5hbmlUaW1lKSx0aGlzLnN0ZXBzPVtdLHRoaXMubW92ZWQ9ITEsdGhpcy5hbmltYXRpbmc9
ITF9LHpvb206ZnVuY3Rpb24oYSxiLGQsZSl7dmFyIGY9dGhpcyxnPWQvZi5zY2FsZTtmLm9wdGlv
bnMudXNlVHJhbnNmb3JtJiYoZi56b29tZWQ9ITAsZT1lPT09dm9pZCAwPzIwMDplLGE9YS1mLndy
YXBwZXJPZmZzZXRMZWZ0LWYueCxiPWItZi53cmFwcGVyT2Zmc2V0VG9wLWYueSxmLng9YS1hKmcr
Zi54LGYueT1iLWIqZytmLnksZi5zY2FsZT1kLGYucmVmcmVzaCgpLGYueD1mLng+MD8wOmYubWF4
U2Nyb2xsWD5mLng/Zi5tYXhTY3JvbGxYOmYueCxmLnk9Zi55PmYubWluU2Nyb2xsWT9mLm1pblNj
cm9sbFk6Zi5tYXhTY3JvbGxZPmYueT9mLm1heFNjcm9sbFk6Zi55LGYuc2Nyb2xsZXIuc3R5bGVb
YysiVHJhbnNpdGlvbkR1cmF0aW9uIl09ZSsibXMiLGYuc2Nyb2xsZXIuc3R5bGVbYysiVHJhbnNm
b3JtIl09dCtmLngrInB4LCIrZi55KyJweCIrdSsiIHNjYWxlKCIrZCsiKSIsZi56b29tZWQ9ITEp
fSxpc1JlYWR5OmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMubW92ZWQmJiF0aGlzLnpvb21lZCYmIXRo
aXMuYW5pbWF0aW5nfX0sdHlwZW9mIGV4cG9ydHMhPSJ1bmRlZmluZWQiP2V4cG9ydHMuaVNjcm9s
bD12OndpbmRvdy5pU2Nyb2xsPXZ9KSgpClwgTm8gbmV3bGluZSBhdCBlbmQgb2YgZmlsZQorLyoh
IGlTY3JvbGwgdjUuMS4yIH4gKGMpIDIwMDgtMjAxNCBNYXR0ZW8gU3BpbmVsbGkgfiBodHRwOi8v
Y3ViaXEub3JnL2xpY2Vuc2UgKi8KKyhmdW5jdGlvbiAod2luZG93LCBkb2N1bWVudCwgTWF0aCkg
ewordmFyIHJBRiA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgIHx8CisgIHdpbmRvdy53
ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgIHx8CisgIHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0
aW9uRnJhbWUgICB8fAorICB3aW5kb3cub1JlcXVlc3RBbmltYXRpb25GcmFtZSAgIHx8CisgIHdp
bmRvdy5tc1JlcXVlc3RBbmltYXRpb25GcmFtZSAgICB8fAorICBmdW5jdGlvbiAoY2FsbGJhY2sp
IHsgd2luZG93LnNldFRpbWVvdXQoY2FsbGJhY2ssIDEwMDAgLyA2MCk7IH07CisKK3ZhciB1dGls
cyA9IChmdW5jdGlvbiAoKSB7CisgIHZhciBtZSA9IHt9OworCisgIHZhciBfZWxlbWVudFN0eWxl
ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jykuc3R5bGU7CisgIHZhciBfdmVuZG9yID0g
KGZ1bmN0aW9uICgpIHsKKyAgICB2YXIgdmVuZG9ycyA9IFsndCcsICd3ZWJraXRUJywgJ01velQn
LCAnbXNUJywgJ09UJ10sCisgICAgICB0cmFuc2Zvcm0sCisgICAgICBpID0gMCwKKyAgICAgIGwg
PSB2ZW5kb3JzLmxlbmd0aDsKKworICAgIGZvciAoIDsgaSA8IGw7IGkrKyApIHsKKyAgICAgIHRy
YW5zZm9ybSA9IHZlbmRvcnNbaV0gKyAncmFuc2Zvcm0nOworICAgICAgaWYgKCB0cmFuc2Zvcm0g
aW4gX2VsZW1lbnRTdHlsZSApIHJldHVybiB2ZW5kb3JzW2ldLnN1YnN0cigwLCB2ZW5kb3JzW2ld
Lmxlbmd0aC0xKTsKKyAgICB9CisKKyAgICByZXR1cm4gZmFsc2U7CisgIH0pKCk7CisKKyAgZnVu
Y3Rpb24gX3ByZWZpeFN0eWxlIChzdHlsZSkgeworICAgIGlmICggX3ZlbmRvciA9PT0gZmFsc2Ug
KSByZXR1cm4gZmFsc2U7CisgICAgaWYgKCBfdmVuZG9yID09PSAnJyApIHJldHVybiBzdHlsZTsK
KyAgICByZXR1cm4gX3ZlbmRvciArIHN0eWxlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3R5
bGUuc3Vic3RyKDEpOworICB9CisKKyAgbWUuZ2V0VGltZSA9IERhdGUubm93IHx8IGZ1bmN0aW9u
IGdldFRpbWUgKCkgeyByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCk7IH07CisKKyAgbWUuZXh0
ZW5kID0gZnVuY3Rpb24gKHRhcmdldCwgb2JqKSB7CisgICAgZm9yICggdmFyIGkgaW4gb2JqICkg
eworICAgICAgdGFyZ2V0W2ldID0gb2JqW2ldOworICAgIH0KKyAgfTsKKworICBtZS5hZGRFdmVu
dCA9IGZ1bmN0aW9uIChlbCwgdHlwZSwgZm4sIGNhcHR1cmUpIHsKKyAgICBlbC5hZGRFdmVudExp
c3RlbmVyKHR5cGUsIGZuLCAhIWNhcHR1cmUpOworICB9OworCisgIG1lLnJlbW92ZUV2ZW50ID0g
ZnVuY3Rpb24gKGVsLCB0eXBlLCBmbiwgY2FwdHVyZSkgeworICAgIGVsLnJlbW92ZUV2ZW50TGlz
dGVuZXIodHlwZSwgZm4sICEhY2FwdHVyZSk7CisgIH07CisKKyAgbWUucHJlZml4UG9pbnRlckV2
ZW50ID0gZnVuY3Rpb24gKHBvaW50ZXJFdmVudCkgeworICAgIHJldHVybiB3aW5kb3cuTVNQb2lu
dGVyRXZlbnQgPyAKKyAgICAgICdNU1BvaW50ZXInICsgcG9pbnRlckV2ZW50LmNoYXJBdCg5KS50
b1VwcGVyQ2FzZSgpICsgcG9pbnRlckV2ZW50LnN1YnN0cigxMCk6CisgICAgICBwb2ludGVyRXZl
bnQ7CisgIH07CisKKyAgbWUubW9tZW50dW0gPSBmdW5jdGlvbiAoY3VycmVudCwgc3RhcnQsIHRp
bWUsIGxvd2VyTWFyZ2luLCB3cmFwcGVyU2l6ZSwgZGVjZWxlcmF0aW9uKSB7CisgICAgdmFyIGRp
c3RhbmNlID0gY3VycmVudCAtIHN0YXJ0LAorICAgICAgc3BlZWQgPSBNYXRoLmFicyhkaXN0YW5j
ZSkgLyB0aW1lLAorICAgICAgZGVzdGluYXRpb24sCisgICAgICBkdXJhdGlvbjsKKworICAgIGRl
Y2VsZXJhdGlvbiA9IGRlY2VsZXJhdGlvbiA9PT0gdW5kZWZpbmVkID8gMC4wMDA2IDogZGVjZWxl
cmF0aW9uOworCisgICAgZGVzdGluYXRpb24gPSBjdXJyZW50ICsgKCBzcGVlZCAqIHNwZWVkICkg
LyAoIDIgKiBkZWNlbGVyYXRpb24gKSAqICggZGlzdGFuY2UgPCAwID8gLTEgOiAxICk7CisgICAg
ZHVyYXRpb24gPSBzcGVlZCAvIGRlY2VsZXJhdGlvbjsKKworICAgIGlmICggZGVzdGluYXRpb24g
PCBsb3dlck1hcmdpbiApIHsKKyAgICAgIGRlc3RpbmF0aW9uID0gd3JhcHBlclNpemUgPyBsb3dl
ck1hcmdpbiAtICggd3JhcHBlclNpemUgLyAyLjUgKiAoIHNwZWVkIC8gOCApICkgOiBsb3dlck1h
cmdpbjsKKyAgICAgIGRpc3RhbmNlID0gTWF0aC5hYnMoZGVzdGluYXRpb24gLSBjdXJyZW50KTsK
KyAgICAgIGR1cmF0aW9uID0gZGlzdGFuY2UgLyBzcGVlZDsKKyAgICB9IGVsc2UgaWYgKCBkZXN0
aW5hdGlvbiA+IDAgKSB7CisgICAgICBkZXN0aW5hdGlvbiA9IHdyYXBwZXJTaXplID8gd3JhcHBl
clNpemUgLyAyLjUgKiAoIHNwZWVkIC8gOCApIDogMDsKKyAgICAgIGRpc3RhbmNlID0gTWF0aC5h
YnMoY3VycmVudCkgKyBkZXN0aW5hdGlvbjsKKyAgICAgIGR1cmF0aW9uID0gZGlzdGFuY2UgLyBz
cGVlZDsKKyAgICB9CisKKyAgICByZXR1cm4geworICAgICAgZGVzdGluYXRpb246IE1hdGgucm91
bmQoZGVzdGluYXRpb24pLAorICAgICAgZHVyYXRpb246IGR1cmF0aW9uCisgICAgfTsKKyAgfTsK
KworICB2YXIgX3RyYW5zZm9ybSA9IF9wcmVmaXhTdHlsZSgndHJhbnNmb3JtJyk7CisKKyAgbWUu
ZXh0ZW5kKG1lLCB7CisgICAgaGFzVHJhbnNmb3JtOiBfdHJhbnNmb3JtICE9PSBmYWxzZSwKKyAg
ICBoYXNQZXJzcGVjdGl2ZTogX3ByZWZpeFN0eWxlKCdwZXJzcGVjdGl2ZScpIGluIF9lbGVtZW50
U3R5bGUsCisgICAgaGFzVG91Y2g6ICdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdywKKyAgICBoYXNQ
b2ludGVyOiB3aW5kb3cuUG9pbnRlckV2ZW50IHx8IHdpbmRvdy5NU1BvaW50ZXJFdmVudCwgLy8g
SUUxMCBpcyBwcmVmaXhlZAorICAgIGhhc1RyYW5zaXRpb246IF9wcmVmaXhTdHlsZSgndHJhbnNp
dGlvbicpIGluIF9lbGVtZW50U3R5bGUKKyAgfSk7CisKKyAgLy8gVGhpcyBzaG91bGQgZmluZCBh
bGwgQW5kcm9pZCBicm93c2VycyBsb3dlciB0aGFuIGJ1aWxkIDUzNS4xOSAoYm90aCBzdG9jayBi
cm93c2VyIGFuZCB3ZWJ2aWV3KQorICBtZS5pc0JhZEFuZHJvaWQgPSAvQW5kcm9pZCAvLnRlc3Qo
d2luZG93Lm5hdmlnYXRvci5hcHBWZXJzaW9uKSAmJiAhKC9DaHJvbWVcL1xkLy50ZXN0KHdpbmRv
dy5uYXZpZ2F0b3IuYXBwVmVyc2lvbikpOworCisgIG1lLmV4dGVuZChtZS5zdHlsZSA9IHt9LCB7
CisgICAgdHJhbnNmb3JtOiBfdHJhbnNmb3JtLAorICAgIHRyYW5zaXRpb25UaW1pbmdGdW5jdGlv
bjogX3ByZWZpeFN0eWxlKCd0cmFuc2l0aW9uVGltaW5nRnVuY3Rpb24nKSwKKyAgICB0cmFuc2l0
aW9uRHVyYXRpb246IF9wcmVmaXhTdHlsZSgndHJhbnNpdGlvbkR1cmF0aW9uJyksCisgICAgdHJh
bnNpdGlvbkRlbGF5OiBfcHJlZml4U3R5bGUoJ3RyYW5zaXRpb25EZWxheScpLAorICAgIHRyYW5z
Zm9ybU9yaWdpbjogX3ByZWZpeFN0eWxlKCd0cmFuc2Zvcm1PcmlnaW4nKQorICB9KTsKKworICBt
ZS5oYXNDbGFzcyA9IGZ1bmN0aW9uIChlLCBjKSB7CisgICAgdmFyIHJlID0gbmV3IFJlZ0V4cCgi
KF58XFxzKSIgKyBjICsgIihcXHN8JCkiKTsKKyAgICByZXR1cm4gcmUudGVzdChlLmNsYXNzTmFt
ZSk7CisgIH07CisKKyAgbWUuYWRkQ2xhc3MgPSBmdW5jdGlvbiAoZSwgYykgeworICAgIGlmICgg
bWUuaGFzQ2xhc3MoZSwgYykgKSB7CisgICAgICByZXR1cm47CisgICAgfQorCisgICAgdmFyIG5l
d2NsYXNzID0gZS5jbGFzc05hbWUuc3BsaXQoJyAnKTsKKyAgICBuZXdjbGFzcy5wdXNoKGMpOwor
ICAgIGUuY2xhc3NOYW1lID0gbmV3Y2xhc3Muam9pbignICcpOworICB9OworCisgIG1lLnJlbW92
ZUNsYXNzID0gZnVuY3Rpb24gKGUsIGMpIHsKKyAgICBpZiAoICFtZS5oYXNDbGFzcyhlLCBjKSAp
IHsKKyAgICAgIHJldHVybjsKKyAgICB9CisKKyAgICB2YXIgcmUgPSBuZXcgUmVnRXhwKCIoXnxc
XHMpIiArIGMgKyAiKFxcc3wkKSIsICdnJyk7CisgICAgZS5jbGFzc05hbWUgPSBlLmNsYXNzTmFt
ZS5yZXBsYWNlKHJlLCAnICcpOworICB9OworCisgIG1lLm9mZnNldCA9IGZ1bmN0aW9uIChlbCkg
eworICAgIHZhciBsZWZ0ID0gLWVsLm9mZnNldExlZnQsCisgICAgICB0b3AgPSAtZWwub2Zmc2V0
VG9wOworCisgICAgLy8ganNoaW50IC1XMDg0CisgICAgd2hpbGUgKGVsID0gZWwub2Zmc2V0UGFy
ZW50KSB7CisgICAgICBsZWZ0IC09IGVsLm9mZnNldExlZnQ7CisgICAgICB0b3AgLT0gZWwub2Zm
c2V0VG9wOworICAgIH0KKyAgICAvLyBqc2hpbnQgK1cwODQKKworICAgIHJldHVybiB7CisgICAg
ICBsZWZ0OiBsZWZ0LAorICAgICAgdG9wOiB0b3AKKyAgICB9OworICB9OworCisgIG1lLnByZXZl
bnREZWZhdWx0RXhjZXB0aW9uID0gZnVuY3Rpb24gKGVsLCBleGNlcHRpb25zKSB7CisgICAgZm9y
ICggdmFyIGkgaW4gZXhjZXB0aW9ucyApIHsKKyAgICAgIGlmICggZXhjZXB0aW9uc1tpXS50ZXN0
KGVsW2ldKSApIHsKKyAgICAgICAgcmV0dXJuIHRydWU7CisgICAgICB9CisgICAgfQorCisgICAg
cmV0dXJuIGZhbHNlOworICB9OworCisgIG1lLmV4dGVuZChtZS5ldmVudFR5cGUgPSB7fSwgewor
ICAgIHRvdWNoc3RhcnQ6IDEsCisgICAgdG91Y2htb3ZlOiAxLAorICAgIHRvdWNoZW5kOiAxLAor
CisgICAgbW91c2Vkb3duOiAyLAorICAgIG1vdXNlbW92ZTogMiwKKyAgICBtb3VzZXVwOiAyLAor
CisgICAgcG9pbnRlcmRvd246IDMsCisgICAgcG9pbnRlcm1vdmU6IDMsCisgICAgcG9pbnRlcnVw
OiAzLAorCisgICAgTVNQb2ludGVyRG93bjogMywKKyAgICBNU1BvaW50ZXJNb3ZlOiAzLAorICAg
IE1TUG9pbnRlclVwOiAzCisgIH0pOworCisgIG1lLmV4dGVuZChtZS5lYXNlID0ge30sIHsKKyAg
ICBxdWFkcmF0aWM6IHsKKyAgICAgIHN0eWxlOiAnY3ViaWMtYmV6aWVyKDAuMjUsIDAuNDYsIDAu
NDUsIDAuOTQpJywKKyAgICAgIGZuOiBmdW5jdGlvbiAoaykgeworICAgICAgICByZXR1cm4gayAq
ICggMiAtIGsgKTsKKyAgICAgIH0KKyAgICB9LAorICAgIGNpcmN1bGFyOiB7CisgICAgICBzdHls
ZTogJ2N1YmljLWJlemllcigwLjEsIDAuNTcsIDAuMSwgMSknLCAvLyBOb3QgcHJvcGVybHkgImNp
cmN1bGFyIiBidXQgdGhpcyBsb29rcyBiZXR0ZXIsIGl0IHNob3VsZCBiZSAoMC4wNzUsIDAuODIs
IDAuMTY1LCAxKQorICAgICAgZm46IGZ1bmN0aW9uIChrKSB7CisgICAgICAgIHJldHVybiBNYXRo
LnNxcnQoIDEgLSAoIC0tayAqIGsgKSApOworICAgICAgfQorICAgIH0sCisgICAgYmFjazogewor
ICAgICAgc3R5bGU6ICdjdWJpYy1iZXppZXIoMC4xNzUsIDAuODg1LCAwLjMyLCAxLjI3NSknLAor
ICAgICAgZm46IGZ1bmN0aW9uIChrKSB7CisgICAgICAgIHZhciBiID0gNDsKKyAgICAgICAgcmV0
dXJuICggayA9IGsgLSAxICkgKiBrICogKCAoIGIgKyAxICkgKiBrICsgYiApICsgMTsKKyAgICAg
IH0KKyAgICB9LAorICAgIGJvdW5jZTogeworICAgICAgc3R5bGU6ICcnLAorICAgICAgZm46IGZ1
bmN0aW9uIChrKSB7CisgICAgICAgIGlmICggKCBrIC89IDEgKSA8ICggMSAvIDIuNzUgKSApIHsK
KyAgICAgICAgICByZXR1cm4gNy41NjI1ICogayAqIGs7CisgICAgICAgIH0gZWxzZSBpZiAoIGsg
PCAoIDIgLyAyLjc1ICkgKSB7CisgICAgICAgICAgcmV0dXJuIDcuNTYyNSAqICggayAtPSAoIDEu
NSAvIDIuNzUgKSApICogayArIDAuNzU7CisgICAgICAgIH0gZWxzZSBpZiAoIGsgPCAoIDIuNSAv
IDIuNzUgKSApIHsKKyAgICAgICAgICByZXR1cm4gNy41NjI1ICogKCBrIC09ICggMi4yNSAvIDIu
NzUgKSApICogayArIDAuOTM3NTsKKyAgICAgICAgfSBlbHNlIHsKKyAgICAgICAgICByZXR1cm4g
Ny41NjI1ICogKCBrIC09ICggMi42MjUgLyAyLjc1ICkgKSAqIGsgKyAwLjk4NDM3NTsKKyAgICAg
ICAgfQorICAgICAgfQorICAgIH0sCisgICAgZWxhc3RpYzogeworICAgICAgc3R5bGU6ICcnLAor
ICAgICAgZm46IGZ1bmN0aW9uIChrKSB7CisgICAgICAgIHZhciBmID0gMC4yMiwKKyAgICAgICAg
ICBlID0gMC40OworCisgICAgICAgIGlmICggayA9PT0gMCApIHsgcmV0dXJuIDA7IH0KKyAgICAg
ICAgaWYgKCBrID09IDEgKSB7IHJldHVybiAxOyB9CisKKyAgICAgICAgcmV0dXJuICggZSAqIE1h
dGgucG93KCAyLCAtIDEwICogayApICogTWF0aC5zaW4oICggayAtIGYgLyA0ICkgKiAoIDIgKiBN
YXRoLlBJICkgLyBmICkgKyAxICk7CisgICAgICB9CisgICAgfQorICB9KTsKKworICBtZS50YXAg
PSBmdW5jdGlvbiAoZSwgZXZlbnROYW1lKSB7CisgICAgdmFyIGV2ID0gZG9jdW1lbnQuY3JlYXRl
RXZlbnQoJ0V2ZW50Jyk7CisgICAgZXYuaW5pdEV2ZW50KGV2ZW50TmFtZSwgdHJ1ZSwgdHJ1ZSk7
CisgICAgZXYucGFnZVggPSBlLnBhZ2VYOworICAgIGV2LnBhZ2VZID0gZS5wYWdlWTsKKyAgICBl
LnRhcmdldC5kaXNwYXRjaEV2ZW50KGV2KTsKKyAgfTsKKworICBtZS5jbGljayA9IGZ1bmN0aW9u
IChlKSB7CisgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0LAorICAgICAgZXY7CisKKyAgICBpZiAo
ICEoLyhTRUxFQ1R8SU5QVVR8VEVYVEFSRUEpL2kpLnRlc3QodGFyZ2V0LnRhZ05hbWUpICkgewor
ICAgICAgZXYgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnTW91c2VFdmVudHMnKTsKKyAgICAgIGV2
LmluaXRNb3VzZUV2ZW50KCdjbGljaycsIHRydWUsIHRydWUsIGUudmlldywgMSwKKyAgICAgICAg
dGFyZ2V0LnNjcmVlblgsIHRhcmdldC5zY3JlZW5ZLCB0YXJnZXQuY2xpZW50WCwgdGFyZ2V0LmNs
aWVudFksCisgICAgICAgIGUuY3RybEtleSwgZS5hbHRLZXksIGUuc2hpZnRLZXksIGUubWV0YUtl
eSwKKyAgICAgICAgMCwgbnVsbCk7CisKKyAgICAgIGV2Ll9jb25zdHJ1Y3RlZCA9IHRydWU7Cisg
ICAgICB0YXJnZXQuZGlzcGF0Y2hFdmVudChldik7CisgICAgfQorICB9OworCisgIHJldHVybiBt
ZTsKK30pKCk7CisKK2Z1bmN0aW9uIElTY3JvbGwgKGVsLCBvcHRpb25zKSB7CisgIHRoaXMud3Jh
cHBlciA9IHR5cGVvZiBlbCA9PSAnc3RyaW5nJyA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWwp
IDogZWw7CisgIHRoaXMuc2Nyb2xsZXIgPSB0aGlzLndyYXBwZXIuY2hpbGRyZW5bMF07CisgIHRo
aXMuc2Nyb2xsZXJTdHlsZSA9IHRoaXMuc2Nyb2xsZXIuc3R5bGU7ICAgLy8gY2FjaGUgc3R5bGUg
Zm9yIGJldHRlciBwZXJmb3JtYW5jZQorCisgIHRoaXMub3B0aW9ucyA9IHsKKworICAgIHJlc2l6
ZVNjcm9sbGJhcnM6IHRydWUsCisKKyAgICBtb3VzZVdoZWVsU3BlZWQ6IDIwLAorCisgICAgc25h
cFRocmVzaG9sZDogMC4zMzQsCisKKy8vIElOU0VSVCBQT0lOVDogT1BUSU9OUyAKKworICAgIHN0
YXJ0WDogMCwKKyAgICBzdGFydFk6IDAsCisgICAgc2Nyb2xsWTogdHJ1ZSwKKyAgICBkaXJlY3Rp
b25Mb2NrVGhyZXNob2xkOiA1LAorICAgIG1vbWVudHVtOiB0cnVlLAorCisgICAgYm91bmNlOiB0
cnVlLAorICAgIGJvdW5jZVRpbWU6IDYwMCwKKyAgICBib3VuY2VFYXNpbmc6ICcnLAorCisgICAg
cHJldmVudERlZmF1bHQ6IHRydWUsCisgICAgcHJldmVudERlZmF1bHRFeGNlcHRpb246IHsgdGFn
TmFtZTogL14oSU5QVVR8VEVYVEFSRUF8QlVUVE9OfFNFTEVDVCkkLyB9LAorCisgICAgSFdDb21w
b3NpdGluZzogdHJ1ZSwKKyAgICB1c2VUcmFuc2l0aW9uOiB0cnVlLAorICAgIHVzZVRyYW5zZm9y
bTogdHJ1ZQorICB9OworCisgIGZvciAoIHZhciBpIGluIG9wdGlvbnMgKSB7CisgICAgdGhpcy5v
cHRpb25zW2ldID0gb3B0aW9uc1tpXTsKKyAgfQorCisgIC8vIE5vcm1hbGl6ZSBvcHRpb25zCisg
IHRoaXMudHJhbnNsYXRlWiA9IHRoaXMub3B0aW9ucy5IV0NvbXBvc2l0aW5nICYmIHV0aWxzLmhh
c1BlcnNwZWN0aXZlID8gJyB0cmFuc2xhdGVaKDApJyA6ICcnOworCisgIHRoaXMub3B0aW9ucy51
c2VUcmFuc2l0aW9uID0gdXRpbHMuaGFzVHJhbnNpdGlvbiAmJiB0aGlzLm9wdGlvbnMudXNlVHJh
bnNpdGlvbjsKKyAgdGhpcy5vcHRpb25zLnVzZVRyYW5zZm9ybSA9IHV0aWxzLmhhc1RyYW5zZm9y
bSAmJiB0aGlzLm9wdGlvbnMudXNlVHJhbnNmb3JtOworCisgIHRoaXMub3B0aW9ucy5ldmVudFBh
c3N0aHJvdWdoID0gdGhpcy5vcHRpb25zLmV2ZW50UGFzc3Rocm91Z2ggPT09IHRydWUgPyAndmVy
dGljYWwnIDogdGhpcy5vcHRpb25zLmV2ZW50UGFzc3Rocm91Z2g7CisgIHRoaXMub3B0aW9ucy5w
cmV2ZW50RGVmYXVsdCA9ICF0aGlzLm9wdGlvbnMuZXZlbnRQYXNzdGhyb3VnaCAmJiB0aGlzLm9w
dGlvbnMucHJldmVudERlZmF1bHQ7CisKKyAgLy8gSWYgeW91IHdhbnQgZXZlbnRQYXNzdGhyb3Vn
aCBJIGhhdmUgdG8gbG9jayBvbmUgb2YgdGhlIGF4ZXMKKyAgdGhpcy5vcHRpb25zLnNjcm9sbFkg
PSB0aGlzLm9wdGlvbnMuZXZlbnRQYXNzdGhyb3VnaCA9PSAndmVydGljYWwnID8gZmFsc2UgOiB0
aGlzLm9wdGlvbnMuc2Nyb2xsWTsKKyAgdGhpcy5vcHRpb25zLnNjcm9sbFggPSB0aGlzLm9wdGlv
bnMuZXZlbnRQYXNzdGhyb3VnaCA9PSAnaG9yaXpvbnRhbCcgPyBmYWxzZSA6IHRoaXMub3B0aW9u
cy5zY3JvbGxYOworCisgIC8vIFdpdGggZXZlbnRQYXNzdGhyb3VnaCB3ZSBhbHNvIG5lZWQgbG9j
a0RpcmVjdGlvbiBtZWNoYW5pc20KKyAgdGhpcy5vcHRpb25zLmZyZWVTY3JvbGwgPSB0aGlzLm9w
dGlvbnMuZnJlZVNjcm9sbCAmJiAhdGhpcy5vcHRpb25zLmV2ZW50UGFzc3Rocm91Z2g7CisgIHRo
aXMub3B0aW9ucy5kaXJlY3Rpb25Mb2NrVGhyZXNob2xkID0gdGhpcy5vcHRpb25zLmV2ZW50UGFz
c3Rocm91Z2ggPyAwIDogdGhpcy5vcHRpb25zLmRpcmVjdGlvbkxvY2tUaHJlc2hvbGQ7CisKKyAg
dGhpcy5vcHRpb25zLmJvdW5jZUVhc2luZyA9IHR5cGVvZiB0aGlzLm9wdGlvbnMuYm91bmNlRWFz
aW5nID09ICdzdHJpbmcnID8gdXRpbHMuZWFzZVt0aGlzLm9wdGlvbnMuYm91bmNlRWFzaW5nXSB8
fCB1dGlscy5lYXNlLmNpcmN1bGFyIDogdGhpcy5vcHRpb25zLmJvdW5jZUVhc2luZzsKKworICB0
aGlzLm9wdGlvbnMucmVzaXplUG9sbGluZyA9IHRoaXMub3B0aW9ucy5yZXNpemVQb2xsaW5nID09
PSB1bmRlZmluZWQgPyA2MCA6IHRoaXMub3B0aW9ucy5yZXNpemVQb2xsaW5nOworCisgIGlmICgg
dGhpcy5vcHRpb25zLnRhcCA9PT0gdHJ1ZSApIHsKKyAgICB0aGlzLm9wdGlvbnMudGFwID0gJ3Rh
cCc7CisgIH0KKworICBpZiAoIHRoaXMub3B0aW9ucy5zaHJpbmtTY3JvbGxiYXJzID09ICdzY2Fs
ZScgKSB7CisgICAgdGhpcy5vcHRpb25zLnVzZVRyYW5zaXRpb24gPSBmYWxzZTsKKyAgfQorCisg
IHRoaXMub3B0aW9ucy5pbnZlcnRXaGVlbERpcmVjdGlvbiA9IHRoaXMub3B0aW9ucy5pbnZlcnRX
aGVlbERpcmVjdGlvbiA/IC0xIDogMTsKKworLy8gSU5TRVJUIFBPSU5UOiBOT1JNQUxJWkFUSU9O
CisKKyAgLy8gU29tZSBkZWZhdWx0cyAgCisgIHRoaXMueCA9IDA7CisgIHRoaXMueSA9IDA7Cisg
IHRoaXMuZGlyZWN0aW9uWCA9IDA7CisgIHRoaXMuZGlyZWN0aW9uWSA9IDA7CisgIHRoaXMuX2V2
ZW50cyA9IHt9OworCisvLyBJTlNFUlQgUE9JTlQ6IERFRkFVTFRTCisKKyAgdGhpcy5faW5pdCgp
OworICB0aGlzLnJlZnJlc2goKTsKKworICB0aGlzLnNjcm9sbFRvKHRoaXMub3B0aW9ucy5zdGFy
dFgsIHRoaXMub3B0aW9ucy5zdGFydFkpOworICB0aGlzLmVuYWJsZSgpOworfQorCitJU2Nyb2xs
LnByb3RvdHlwZSA9IHsKKyAgdmVyc2lvbjogJzUuMS4yJywKKworICBfaW5pdDogZnVuY3Rpb24g
KCkgeworICAgIHRoaXMuX2luaXRFdmVudHMoKTsKKworICAgIGlmICggdGhpcy5vcHRpb25zLnNj
cm9sbGJhcnMgfHwgdGhpcy5vcHRpb25zLmluZGljYXRvcnMgKSB7CisgICAgICB0aGlzLl9pbml0
SW5kaWNhdG9ycygpOworICAgIH0KKworICAgIGlmICggdGhpcy5vcHRpb25zLm1vdXNlV2hlZWwg
KSB7CisgICAgICB0aGlzLl9pbml0V2hlZWwoKTsKKyAgICB9CisKKyAgICBpZiAoIHRoaXMub3B0
aW9ucy5zbmFwICkgeworICAgICAgdGhpcy5faW5pdFNuYXAoKTsKKyAgICB9CisKKyAgICBpZiAo
IHRoaXMub3B0aW9ucy5rZXlCaW5kaW5ncyApIHsKKyAgICAgIHRoaXMuX2luaXRLZXlzKCk7Cisg
ICAgfQorCisvLyBJTlNFUlQgUE9JTlQ6IF9pbml0CisKKyAgfSwKKworICBkZXN0cm95OiBmdW5j
dGlvbiAoKSB7CisgICAgdGhpcy5faW5pdEV2ZW50cyh0cnVlKTsKKworICAgIHRoaXMuX2V4ZWNF
dmVudCgnZGVzdHJveScpOworICB9LAorCisgIF90cmFuc2l0aW9uRW5kOiBmdW5jdGlvbiAoZSkg
eworICAgIGlmICggZS50YXJnZXQgIT0gdGhpcy5zY3JvbGxlciB8fCAhdGhpcy5pc0luVHJhbnNp
dGlvbiApIHsKKyAgICAgIHJldHVybjsKKyAgICB9CisKKyAgICB0aGlzLl90cmFuc2l0aW9uVGlt
ZSgpOworICAgIGlmICggIXRoaXMucmVzZXRQb3NpdGlvbih0aGlzLm9wdGlvbnMuYm91bmNlVGlt
ZSkgKSB7CisgICAgICB0aGlzLmlzSW5UcmFuc2l0aW9uID0gZmFsc2U7CisgICAgICB0aGlzLl9l
eGVjRXZlbnQoJ3Njcm9sbEVuZCcpOworICAgIH0KKyAgfSwKKworICBfc3RhcnQ6IGZ1bmN0aW9u
IChlKSB7CisgICAgLy8gUmVhY3QgdG8gbGVmdCBtb3VzZSBidXR0b24gb25seQorICAgIGlmICgg
dXRpbHMuZXZlbnRUeXBlW2UudHlwZV0gIT0gMSApIHsKKyAgICAgIGlmICggZS5idXR0b24gIT09
IDAgKSB7CisgICAgICAgIHJldHVybjsKKyAgICAgIH0KKyAgICB9CisKKyAgICBpZiAoICF0aGlz
LmVuYWJsZWQgfHwgKHRoaXMuaW5pdGlhdGVkICYmIHV0aWxzLmV2ZW50VHlwZVtlLnR5cGVdICE9
PSB0aGlzLmluaXRpYXRlZCkgKSB7CisgICAgICByZXR1cm47CisgICAgfQorCisgICAgaWYgKCB0
aGlzLm9wdGlvbnMucHJldmVudERlZmF1bHQgJiYgIXV0aWxzLmlzQmFkQW5kcm9pZCAmJiAhdXRp
bHMucHJldmVudERlZmF1bHRFeGNlcHRpb24oZS50YXJnZXQsIHRoaXMub3B0aW9ucy5wcmV2ZW50
RGVmYXVsdEV4Y2VwdGlvbikgKSB7CisgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CisgICAgfQor
CisgICAgdmFyIHBvaW50ID0gZS50b3VjaGVzID8gZS50b3VjaGVzWzBdIDogZSwKKyAgICAgIHBv
czsKKworICAgIHRoaXMuaW5pdGlhdGVkICA9IHV0aWxzLmV2ZW50VHlwZVtlLnR5cGVdOworICAg
IHRoaXMubW92ZWQgICAgPSBmYWxzZTsKKyAgICB0aGlzLmRpc3RYICAgID0gMDsKKyAgICB0aGlz
LmRpc3RZICAgID0gMDsKKyAgICB0aGlzLmRpcmVjdGlvblggPSAwOworICAgIHRoaXMuZGlyZWN0
aW9uWSA9IDA7CisgICAgdGhpcy5kaXJlY3Rpb25Mb2NrZWQgPSAwOworCisgICAgdGhpcy5fdHJh
bnNpdGlvblRpbWUoKTsKKworICAgIHRoaXMuc3RhcnRUaW1lID0gdXRpbHMuZ2V0VGltZSgpOwor
CisgICAgaWYgKCB0aGlzLm9wdGlvbnMudXNlVHJhbnNpdGlvbiAmJiB0aGlzLmlzSW5UcmFuc2l0
aW9uICkgeworICAgICAgdGhpcy5pc0luVHJhbnNpdGlvbiA9IGZhbHNlOworICAgICAgcG9zID0g
dGhpcy5nZXRDb21wdXRlZFBvc2l0aW9uKCk7CisgICAgICB0aGlzLl90cmFuc2xhdGUoTWF0aC5y
b3VuZChwb3MueCksIE1hdGgucm91bmQocG9zLnkpKTsKKyAgICAgIHRoaXMuX2V4ZWNFdmVudCgn
c2Nyb2xsRW5kJyk7CisgICAgfSBlbHNlIGlmICggIXRoaXMub3B0aW9ucy51c2VUcmFuc2l0aW9u
ICYmIHRoaXMuaXNBbmltYXRpbmcgKSB7CisgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gZmFsc2U7
CisgICAgICB0aGlzLl9leGVjRXZlbnQoJ3Njcm9sbEVuZCcpOworICAgIH0KKworICAgIHRoaXMu
c3RhcnRYICAgID0gdGhpcy54OworICAgIHRoaXMuc3RhcnRZICAgID0gdGhpcy55OworICAgIHRo
aXMuYWJzU3RhcnRYID0gdGhpcy54OworICAgIHRoaXMuYWJzU3RhcnRZID0gdGhpcy55OworICAg
IHRoaXMucG9pbnRYICAgID0gcG9pbnQucGFnZVg7CisgICAgdGhpcy5wb2ludFkgICAgPSBwb2lu
dC5wYWdlWTsKKworICAgIHRoaXMuX2V4ZWNFdmVudCgnYmVmb3JlU2Nyb2xsU3RhcnQnKTsKKyAg
fSwKKworICBfbW92ZTogZnVuY3Rpb24gKGUpIHsKKyAgICBpZiAoICF0aGlzLmVuYWJsZWQgfHwg
dXRpbHMuZXZlbnRUeXBlW2UudHlwZV0gIT09IHRoaXMuaW5pdGlhdGVkICkgeworICAgICAgcmV0
dXJuOworICAgIH0KKworICAgIGlmICggdGhpcy5vcHRpb25zLnByZXZlbnREZWZhdWx0ICkgeyAg
Ly8gaW5jcmVhc2VzIHBlcmZvcm1hbmNlIG9uIEFuZHJvaWQ/IFRPRE86IGNoZWNrIQorICAgICAg
ZS5wcmV2ZW50RGVmYXVsdCgpOworICAgIH0KKworICAgIHZhciBwb2ludCAgID0gZS50b3VjaGVz
ID8gZS50b3VjaGVzWzBdIDogZSwKKyAgICAgIGRlbHRhWCAgICA9IHBvaW50LnBhZ2VYIC0gdGhp
cy5wb2ludFgsCisgICAgICBkZWx0YVkgICAgPSBwb2ludC5wYWdlWSAtIHRoaXMucG9pbnRZLAor
ICAgICAgdGltZXN0YW1wID0gdXRpbHMuZ2V0VGltZSgpLAorICAgICAgbmV3WCwgbmV3WSwKKyAg
ICAgIGFic0Rpc3RYLCBhYnNEaXN0WTsKKworICAgIHRoaXMucG9pbnRYICAgPSBwb2ludC5wYWdl
WDsKKyAgICB0aGlzLnBvaW50WSAgID0gcG9pbnQucGFnZVk7CisKKyAgICB0aGlzLmRpc3RYICAg
ICs9IGRlbHRhWDsKKyAgICB0aGlzLmRpc3RZICAgICs9IGRlbHRhWTsKKyAgICBhYnNEaXN0WCAg
ICA9IE1hdGguYWJzKHRoaXMuZGlzdFgpOworICAgIGFic0Rpc3RZICAgID0gTWF0aC5hYnModGhp
cy5kaXN0WSk7CisKKyAgICAvLyBXZSBuZWVkIHRvIG1vdmUgYXQgbGVhc3QgMTAgcGl4ZWxzIGZv
ciB0aGUgc2Nyb2xsaW5nIHRvIGluaXRpYXRlCisgICAgaWYgKCB0aW1lc3RhbXAgLSB0aGlzLmVu
ZFRpbWUgPiAzMDAgJiYgKGFic0Rpc3RYIDwgMTAgJiYgYWJzRGlzdFkgPCAxMCkgKSB7CisgICAg
ICByZXR1cm47CisgICAgfQorCisgICAgLy8gSWYgeW91IGFyZSBzY3JvbGxpbmcgaW4gb25lIGRp
cmVjdGlvbiBsb2NrIHRoZSBvdGhlcgorICAgIGlmICggIXRoaXMuZGlyZWN0aW9uTG9ja2VkICYm
ICF0aGlzLm9wdGlvbnMuZnJlZVNjcm9sbCApIHsKKyAgICAgIGlmICggYWJzRGlzdFggPiBhYnNE
aXN0WSArIHRoaXMub3B0aW9ucy5kaXJlY3Rpb25Mb2NrVGhyZXNob2xkICkgeworICAgICAgICB0
aGlzLmRpcmVjdGlvbkxvY2tlZCA9ICdoJzsgICAvLyBsb2NrIGhvcml6b250YWxseQorICAgICAg
fSBlbHNlIGlmICggYWJzRGlzdFkgPj0gYWJzRGlzdFggKyB0aGlzLm9wdGlvbnMuZGlyZWN0aW9u
TG9ja1RocmVzaG9sZCApIHsKKyAgICAgICAgdGhpcy5kaXJlY3Rpb25Mb2NrZWQgPSAndic7ICAg
Ly8gbG9jayB2ZXJ0aWNhbGx5CisgICAgICB9IGVsc2UgeworICAgICAgICB0aGlzLmRpcmVjdGlv
bkxvY2tlZCA9ICduJzsgICAvLyBubyBsb2NrCisgICAgICB9CisgICAgfQorCisgICAgaWYgKCB0
aGlzLmRpcmVjdGlvbkxvY2tlZCA9PSAnaCcgKSB7CisgICAgICBpZiAoIHRoaXMub3B0aW9ucy5l
dmVudFBhc3N0aHJvdWdoID09ICd2ZXJ0aWNhbCcgKSB7CisgICAgICAgIGUucHJldmVudERlZmF1
bHQoKTsKKyAgICAgIH0gZWxzZSBpZiAoIHRoaXMub3B0aW9ucy5ldmVudFBhc3N0aHJvdWdoID09
ICdob3Jpem9udGFsJyApIHsKKyAgICAgICAgdGhpcy5pbml0aWF0ZWQgPSBmYWxzZTsKKyAgICAg
ICAgcmV0dXJuOworICAgICAgfQorCisgICAgICBkZWx0YVkgPSAwOworICAgIH0gZWxzZSBpZiAo
IHRoaXMuZGlyZWN0aW9uTG9ja2VkID09ICd2JyApIHsKKyAgICAgIGlmICggdGhpcy5vcHRpb25z
LmV2ZW50UGFzc3Rocm91Z2ggPT0gJ2hvcml6b250YWwnICkgeworICAgICAgICBlLnByZXZlbnRE
ZWZhdWx0KCk7CisgICAgICB9IGVsc2UgaWYgKCB0aGlzLm9wdGlvbnMuZXZlbnRQYXNzdGhyb3Vn
aCA9PSAndmVydGljYWwnICkgeworICAgICAgICB0aGlzLmluaXRpYXRlZCA9IGZhbHNlOworICAg
ICAgICByZXR1cm47CisgICAgICB9CisKKyAgICAgIGRlbHRhWCA9IDA7CisgICAgfQorCisgICAg
ZGVsdGFYID0gdGhpcy5oYXNIb3Jpem9udGFsU2Nyb2xsID8gZGVsdGFYIDogMDsKKyAgICBkZWx0
YVkgPSB0aGlzLmhhc1ZlcnRpY2FsU2Nyb2xsID8gZGVsdGFZIDogMDsKKworICAgIG5ld1ggPSB0
aGlzLnggKyBkZWx0YVg7CisgICAgbmV3WSA9IHRoaXMueSArIGRlbHRhWTsKKworICAgIC8vIFNs
b3cgZG93biBpZiBvdXRzaWRlIG9mIHRoZSBib3VuZGFyaWVzCisgICAgaWYgKCBuZXdYID4gMCB8
fCBuZXdYIDwgdGhpcy5tYXhTY3JvbGxYICkgeworICAgICAgbmV3WCA9IHRoaXMub3B0aW9ucy5i
b3VuY2UgPyB0aGlzLnggKyBkZWx0YVggLyAzIDogbmV3WCA+IDAgPyAwIDogdGhpcy5tYXhTY3Jv
bGxYOworICAgIH0KKyAgICBpZiAoIG5ld1kgPiAwIHx8IG5ld1kgPCB0aGlzLm1heFNjcm9sbFkg
KSB7CisgICAgICBuZXdZID0gdGhpcy5vcHRpb25zLmJvdW5jZSA/IHRoaXMueSArIGRlbHRhWSAv
IDMgOiBuZXdZID4gMCA/IDAgOiB0aGlzLm1heFNjcm9sbFk7CisgICAgfQorCisgICAgdGhpcy5k
aXJlY3Rpb25YID0gZGVsdGFYID4gMCA/IC0xIDogZGVsdGFYIDwgMCA/IDEgOiAwOworICAgIHRo
aXMuZGlyZWN0aW9uWSA9IGRlbHRhWSA+IDAgPyAtMSA6IGRlbHRhWSA8IDAgPyAxIDogMDsKKwor
ICAgIGlmICggIXRoaXMubW92ZWQgKSB7CisgICAgICB0aGlzLl9leGVjRXZlbnQoJ3Njcm9sbFN0
YXJ0Jyk7CisgICAgfQorCisgICAgdGhpcy5tb3ZlZCA9IHRydWU7CisKKyAgICB0aGlzLl90cmFu
c2xhdGUobmV3WCwgbmV3WSk7CisKKy8qIFJFUExBQ0UgU1RBUlQ6IF9tb3ZlICovCisKKyAgICBp
ZiAoIHRpbWVzdGFtcCAtIHRoaXMuc3RhcnRUaW1lID4gMzAwICkgeworICAgICAgdGhpcy5zdGFy
dFRpbWUgPSB0aW1lc3RhbXA7CisgICAgICB0aGlzLnN0YXJ0WCA9IHRoaXMueDsKKyAgICAgIHRo
aXMuc3RhcnRZID0gdGhpcy55OworICAgIH0KKworLyogUkVQTEFDRSBFTkQ6IF9tb3ZlICovCisK
KyAgfSwKKworICBfZW5kOiBmdW5jdGlvbiAoZSkgeworICAgIGlmICggIXRoaXMuZW5hYmxlZCB8
fCB1dGlscy5ldmVudFR5cGVbZS50eXBlXSAhPT0gdGhpcy5pbml0aWF0ZWQgKSB7CisgICAgICBy
ZXR1cm47CisgICAgfQorCisgICAgaWYgKCB0aGlzLm9wdGlvbnMucHJldmVudERlZmF1bHQgJiYg
IXV0aWxzLnByZXZlbnREZWZhdWx0RXhjZXB0aW9uKGUudGFyZ2V0LCB0aGlzLm9wdGlvbnMucHJl
dmVudERlZmF1bHRFeGNlcHRpb24pICkgeworICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOworICAg
IH0KKworICAgIHZhciBwb2ludCA9IGUuY2hhbmdlZFRvdWNoZXMgPyBlLmNoYW5nZWRUb3VjaGVz
WzBdIDogZSwKKyAgICAgIG1vbWVudHVtWCwKKyAgICAgIG1vbWVudHVtWSwKKyAgICAgIGR1cmF0
aW9uID0gdXRpbHMuZ2V0VGltZSgpIC0gdGhpcy5zdGFydFRpbWUsCisgICAgICBuZXdYID0gTWF0
aC5yb3VuZCh0aGlzLngpLAorICAgICAgbmV3WSA9IE1hdGgucm91bmQodGhpcy55KSwKKyAgICAg
IGRpc3RhbmNlWCA9IE1hdGguYWJzKG5ld1ggLSB0aGlzLnN0YXJ0WCksCisgICAgICBkaXN0YW5j
ZVkgPSBNYXRoLmFicyhuZXdZIC0gdGhpcy5zdGFydFkpLAorICAgICAgdGltZSA9IDAsCisgICAg
ICBlYXNpbmcgPSAnJzsKKworICAgIHRoaXMuaXNJblRyYW5zaXRpb24gPSAwOworICAgIHRoaXMu
aW5pdGlhdGVkID0gMDsKKyAgICB0aGlzLmVuZFRpbWUgPSB1dGlscy5nZXRUaW1lKCk7CisKKyAg
ICAvLyByZXNldCBpZiB3ZSBhcmUgb3V0c2lkZSBvZiB0aGUgYm91bmRhcmllcworICAgIGlmICgg
dGhpcy5yZXNldFBvc2l0aW9uKHRoaXMub3B0aW9ucy5ib3VuY2VUaW1lKSApIHsKKyAgICAgIHJl
dHVybjsKKyAgICB9CisKKyAgICB0aGlzLnNjcm9sbFRvKG5ld1gsIG5ld1kpOyAgLy8gZW5zdXJl
cyB0aGF0IHRoZSBsYXN0IHBvc2l0aW9uIGlzIHJvdW5kZWQKKworICAgIC8vIHdlIHNjcm9sbGVk
IGxlc3MgdGhhbiAxMCBwaXhlbHMKKyAgICBpZiAoICF0aGlzLm1vdmVkICkgeworICAgICAgaWYg
KCB0aGlzLm9wdGlvbnMudGFwICkgeworICAgICAgICB1dGlscy50YXAoZSwgdGhpcy5vcHRpb25z
LnRhcCk7CisgICAgICB9CisKKyAgICAgIGlmICggdGhpcy5vcHRpb25zLmNsaWNrICkgeworICAg
ICAgICB1dGlscy5jbGljayhlKTsKKyAgICAgIH0KKworICAgICAgdGhpcy5fZXhlY0V2ZW50KCdz
Y3JvbGxDYW5jZWwnKTsKKyAgICAgIHJldHVybjsKKyAgICB9CisKKyAgICBpZiAoIHRoaXMuX2V2
ZW50cy5mbGljayAmJiBkdXJhdGlvbiA8IDIwMCAmJiBkaXN0YW5jZVggPCAxMDAgJiYgZGlzdGFu
Y2VZIDwgMTAwICkgeworICAgICAgdGhpcy5fZXhlY0V2ZW50KCdmbGljaycpOworICAgICAgcmV0
dXJuOworICAgIH0KKworICAgIC8vIHN0YXJ0IG1vbWVudHVtIGFuaW1hdGlvbiBpZiBuZWVkZWQK
KyAgICBpZiAoIHRoaXMub3B0aW9ucy5tb21lbnR1bSAmJiBkdXJhdGlvbiA8IDMwMCApIHsKKyAg
ICAgIG1vbWVudHVtWCA9IHRoaXMuaGFzSG9yaXpvbnRhbFNjcm9sbCA/IHV0aWxzLm1vbWVudHVt
KHRoaXMueCwgdGhpcy5zdGFydFgsIGR1cmF0aW9uLCB0aGlzLm1heFNjcm9sbFgsIHRoaXMub3B0
aW9ucy5ib3VuY2UgPyB0aGlzLndyYXBwZXJXaWR0aCA6IDAsIHRoaXMub3B0aW9ucy5kZWNlbGVy
YXRpb24pIDogeyBkZXN0aW5hdGlvbjogbmV3WCwgZHVyYXRpb246IDAgfTsKKyAgICAgIG1vbWVu
dHVtWSA9IHRoaXMuaGFzVmVydGljYWxTY3JvbGwgPyB1dGlscy5tb21lbnR1bSh0aGlzLnksIHRo
aXMuc3RhcnRZLCBkdXJhdGlvbiwgdGhpcy5tYXhTY3JvbGxZLCB0aGlzLm9wdGlvbnMuYm91bmNl
ID8gdGhpcy53cmFwcGVySGVpZ2h0IDogMCwgdGhpcy5vcHRpb25zLmRlY2VsZXJhdGlvbikgOiB7
IGRlc3RpbmF0aW9uOiBuZXdZLCBkdXJhdGlvbjogMCB9OworICAgICAgbmV3WCA9IG1vbWVudHVt
WC5kZXN0aW5hdGlvbjsKKyAgICAgIG5ld1kgPSBtb21lbnR1bVkuZGVzdGluYXRpb247CisgICAg
ICB0aW1lID0gTWF0aC5tYXgobW9tZW50dW1YLmR1cmF0aW9uLCBtb21lbnR1bVkuZHVyYXRpb24p
OworICAgICAgdGhpcy5pc0luVHJhbnNpdGlvbiA9IDE7CisgICAgfQorCisKKyAgICBpZiAoIHRo
aXMub3B0aW9ucy5zbmFwICkgeworICAgICAgdmFyIHNuYXAgPSB0aGlzLl9uZWFyZXN0U25hcChu
ZXdYLCBuZXdZKTsKKyAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSBzbmFwOworICAgICAgdGltZSA9
IHRoaXMub3B0aW9ucy5zbmFwU3BlZWQgfHwgTWF0aC5tYXgoCisgICAgICAgICAgTWF0aC5tYXgo
CisgICAgICAgICAgICBNYXRoLm1pbihNYXRoLmFicyhuZXdYIC0gc25hcC54KSwgMTAwMCksCisg
ICAgICAgICAgICBNYXRoLm1pbihNYXRoLmFicyhuZXdZIC0gc25hcC55KSwgMTAwMCkKKyAgICAg
ICAgICApLCAzMDApOworICAgICAgbmV3WCA9IHNuYXAueDsKKyAgICAgIG5ld1kgPSBzbmFwLnk7
CisKKyAgICAgIHRoaXMuZGlyZWN0aW9uWCA9IDA7CisgICAgICB0aGlzLmRpcmVjdGlvblkgPSAw
OworICAgICAgZWFzaW5nID0gdGhpcy5vcHRpb25zLmJvdW5jZUVhc2luZzsKKyAgICB9CisKKy8v
IElOU0VSVCBQT0lOVDogX2VuZAorCisgICAgaWYgKCBuZXdYICE9IHRoaXMueCB8fCBuZXdZICE9
IHRoaXMueSApIHsKKyAgICAgIC8vIGNoYW5nZSBlYXNpbmcgZnVuY3Rpb24gd2hlbiBzY3JvbGxl
ciBnb2VzIG91dCBvZiB0aGUgYm91bmRhcmllcworICAgICAgaWYgKCBuZXdYID4gMCB8fCBuZXdY
IDwgdGhpcy5tYXhTY3JvbGxYIHx8IG5ld1kgPiAwIHx8IG5ld1kgPCB0aGlzLm1heFNjcm9sbFkg
KSB7CisgICAgICAgIGVhc2luZyA9IHV0aWxzLmVhc2UucXVhZHJhdGljOworICAgICAgfQorCisg
ICAgICB0aGlzLnNjcm9sbFRvKG5ld1gsIG5ld1ksIHRpbWUsIGVhc2luZyk7CisgICAgICByZXR1
cm47CisgICAgfQorCisgICAgdGhpcy5fZXhlY0V2ZW50KCdzY3JvbGxFbmQnKTsKKyAgfSwKKwor
ICBfcmVzaXplOiBmdW5jdGlvbiAoKSB7CisgICAgdmFyIHRoYXQgPSB0aGlzOworCisgICAgY2xl
YXJUaW1lb3V0KHRoaXMucmVzaXplVGltZW91dCk7CisKKyAgICB0aGlzLnJlc2l6ZVRpbWVvdXQg
PSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKKyAgICAgIHRoYXQucmVmcmVzaCgpOworICAgIH0s
IHRoaXMub3B0aW9ucy5yZXNpemVQb2xsaW5nKTsKKyAgfSwKKworICByZXNldFBvc2l0aW9uOiBm
dW5jdGlvbiAodGltZSkgeworICAgIHZhciB4ID0gdGhpcy54LAorICAgICAgeSA9IHRoaXMueTsK
KworICAgIHRpbWUgPSB0aW1lIHx8IDA7CisKKyAgICBpZiAoICF0aGlzLmhhc0hvcml6b250YWxT
Y3JvbGwgfHwgdGhpcy54ID4gMCApIHsKKyAgICAgIHggPSAwOworICAgIH0gZWxzZSBpZiAoIHRo
aXMueCA8IHRoaXMubWF4U2Nyb2xsWCApIHsKKyAgICAgIHggPSB0aGlzLm1heFNjcm9sbFg7Cisg
ICAgfQorCisgICAgaWYgKCAhdGhpcy5oYXNWZXJ0aWNhbFNjcm9sbCB8fCB0aGlzLnkgPiAwICkg
eworICAgICAgeSA9IDA7CisgICAgfSBlbHNlIGlmICggdGhpcy55IDwgdGhpcy5tYXhTY3JvbGxZ
ICkgeworICAgICAgeSA9IHRoaXMubWF4U2Nyb2xsWTsKKyAgICB9CisKKyAgICBpZiAoIHggPT0g
dGhpcy54ICYmIHkgPT0gdGhpcy55ICkgeworICAgICAgcmV0dXJuIGZhbHNlOworICAgIH0KKwor
ICAgIHRoaXMuc2Nyb2xsVG8oeCwgeSwgdGltZSwgdGhpcy5vcHRpb25zLmJvdW5jZUVhc2luZyk7
CisKKyAgICByZXR1cm4gdHJ1ZTsKKyAgfSwKKworICBkaXNhYmxlOiBmdW5jdGlvbiAoKSB7Cisg
ICAgdGhpcy5lbmFibGVkID0gZmFsc2U7CisgIH0sCisKKyAgZW5hYmxlOiBmdW5jdGlvbiAoKSB7
CisgICAgdGhpcy5lbmFibGVkID0gdHJ1ZTsKKyAgfSwKKworICByZWZyZXNoOiBmdW5jdGlvbiAo
KSB7CisgICAgdmFyIHJmID0gdGhpcy53cmFwcGVyLm9mZnNldEhlaWdodDsgICAvLyBGb3JjZSBy
ZWZsb3cKKworICAgIHRoaXMud3JhcHBlcldpZHRoID0gdGhpcy53cmFwcGVyLmNsaWVudFdpZHRo
OworICAgIHRoaXMud3JhcHBlckhlaWdodCAgPSB0aGlzLndyYXBwZXIuY2xpZW50SGVpZ2h0Owor
CisvKiBSRVBMQUNFIFNUQVJUOiByZWZyZXNoICovCisKKyAgICB0aGlzLnNjcm9sbGVyV2lkdGgg
ID0gdGhpcy5zY3JvbGxlci5vZmZzZXRXaWR0aDsKKyAgICB0aGlzLnNjcm9sbGVySGVpZ2h0ID0g
dGhpcy5zY3JvbGxlci5vZmZzZXRIZWlnaHQ7CisKKyAgICB0aGlzLm1heFNjcm9sbFggICA9IHRo
aXMud3JhcHBlcldpZHRoIC0gdGhpcy5zY3JvbGxlcldpZHRoOworICAgIHRoaXMubWF4U2Nyb2xs
WSAgID0gdGhpcy53cmFwcGVySGVpZ2h0IC0gdGhpcy5zY3JvbGxlckhlaWdodDsKKworLyogUkVQ
TEFDRSBFTkQ6IHJlZnJlc2ggKi8KKworICAgIHRoaXMuaGFzSG9yaXpvbnRhbFNjcm9sbCAgPSB0
aGlzLm9wdGlvbnMuc2Nyb2xsWCAmJiB0aGlzLm1heFNjcm9sbFggPCAwOworICAgIHRoaXMuaGFz
VmVydGljYWxTY3JvbGwgICAgPSB0aGlzLm9wdGlvbnMuc2Nyb2xsWSAmJiB0aGlzLm1heFNjcm9s
bFkgPCAwOworCisgICAgaWYgKCAhdGhpcy5oYXNIb3Jpem9udGFsU2Nyb2xsICkgeworICAgICAg
dGhpcy5tYXhTY3JvbGxYID0gMDsKKyAgICAgIHRoaXMuc2Nyb2xsZXJXaWR0aCA9IHRoaXMud3Jh
cHBlcldpZHRoOworICAgIH0KKworICAgIGlmICggIXRoaXMuaGFzVmVydGljYWxTY3JvbGwgKSB7
CisgICAgICB0aGlzLm1heFNjcm9sbFkgPSAwOworICAgICAgdGhpcy5zY3JvbGxlckhlaWdodCA9
IHRoaXMud3JhcHBlckhlaWdodDsKKyAgICB9CisKKyAgICB0aGlzLmVuZFRpbWUgPSAwOworICAg
IHRoaXMuZGlyZWN0aW9uWCA9IDA7CisgICAgdGhpcy5kaXJlY3Rpb25ZID0gMDsKKworICAgIHRo
aXMud3JhcHBlck9mZnNldCA9IHV0aWxzLm9mZnNldCh0aGlzLndyYXBwZXIpOworCisgICAgdGhp
cy5fZXhlY0V2ZW50KCdyZWZyZXNoJyk7CisKKyAgICB0aGlzLnJlc2V0UG9zaXRpb24oKTsKKwor
Ly8gSU5TRVJUIFBPSU5UOiBfcmVmcmVzaAorCisgIH0sCisKKyAgb246IGZ1bmN0aW9uICh0eXBl
LCBmbikgeworICAgIGlmICggIXRoaXMuX2V2ZW50c1t0eXBlXSApIHsKKyAgICAgIHRoaXMuX2V2
ZW50c1t0eXBlXSA9IFtdOworICAgIH0KKworICAgIHRoaXMuX2V2ZW50c1t0eXBlXS5wdXNoKGZu
KTsKKyAgfSwKKworICBvZmY6IGZ1bmN0aW9uICh0eXBlLCBmbikgeworICAgIGlmICggIXRoaXMu
X2V2ZW50c1t0eXBlXSApIHsKKyAgICAgIHJldHVybjsKKyAgICB9CisKKyAgICB2YXIgaW5kZXgg
PSB0aGlzLl9ldmVudHNbdHlwZV0uaW5kZXhPZihmbik7CisKKyAgICBpZiAoIGluZGV4ID4gLTEg
KSB7CisgICAgICB0aGlzLl9ldmVudHNbdHlwZV0uc3BsaWNlKGluZGV4LCAxKTsKKyAgICB9Cisg
IH0sCisKKyAgX2V4ZWNFdmVudDogZnVuY3Rpb24gKHR5cGUpIHsKKyAgICBpZiAoICF0aGlzLl9l
dmVudHNbdHlwZV0gKSB7CisgICAgICByZXR1cm47CisgICAgfQorCisgICAgdmFyIGkgPSAwLAor
ICAgICAgbCA9IHRoaXMuX2V2ZW50c1t0eXBlXS5sZW5ndGg7CisKKyAgICBpZiAoICFsICkgewor
ICAgICAgcmV0dXJuOworICAgIH0KKworICAgIGZvciAoIDsgaSA8IGw7IGkrKyApIHsKKyAgICAg
IHRoaXMuX2V2ZW50c1t0eXBlXVtpXS5hcHBseSh0aGlzLCBbXS5zbGljZS5jYWxsKGFyZ3VtZW50
cywgMSkpOworICAgIH0KKyAgfSwKKworICBzY3JvbGxCeTogZnVuY3Rpb24gKHgsIHksIHRpbWUs
IGVhc2luZykgeworICAgIHggPSB0aGlzLnggKyB4OworICAgIHkgPSB0aGlzLnkgKyB5OworICAg
IHRpbWUgPSB0aW1lIHx8IDA7CisKKyAgICB0aGlzLnNjcm9sbFRvKHgsIHksIHRpbWUsIGVhc2lu
Zyk7CisgIH0sCisKKyAgc2Nyb2xsVG86IGZ1bmN0aW9uICh4LCB5LCB0aW1lLCBlYXNpbmcpIHsK
KyAgICBlYXNpbmcgPSBlYXNpbmcgfHwgdXRpbHMuZWFzZS5jaXJjdWxhcjsKKworICAgIHRoaXMu
aXNJblRyYW5zaXRpb24gPSB0aGlzLm9wdGlvbnMudXNlVHJhbnNpdGlvbiAmJiB0aW1lID4gMDsK
KworICAgIGlmICggIXRpbWUgfHwgKHRoaXMub3B0aW9ucy51c2VUcmFuc2l0aW9uICYmIGVhc2lu
Zy5zdHlsZSkgKSB7CisgICAgICB0aGlzLl90cmFuc2l0aW9uVGltaW5nRnVuY3Rpb24oZWFzaW5n
LnN0eWxlKTsKKyAgICAgIHRoaXMuX3RyYW5zaXRpb25UaW1lKHRpbWUpOworICAgICAgdGhpcy5f
dHJhbnNsYXRlKHgsIHkpOworICAgIH0gZWxzZSB7CisgICAgICB0aGlzLl9hbmltYXRlKHgsIHks
IHRpbWUsIGVhc2luZy5mbik7CisgICAgfQorICB9LAorCisgIHNjcm9sbFRvRWxlbWVudDogZnVu
Y3Rpb24gKGVsLCB0aW1lLCBvZmZzZXRYLCBvZmZzZXRZLCBlYXNpbmcpIHsKKyAgICBlbCA9IGVs
Lm5vZGVUeXBlID8gZWwgOiB0aGlzLnNjcm9sbGVyLnF1ZXJ5U2VsZWN0b3IoZWwpOworCisgICAg
aWYgKCAhZWwgKSB7CisgICAgICByZXR1cm47CisgICAgfQorCisgICAgdmFyIHBvcyA9IHV0aWxz
Lm9mZnNldChlbCk7CisKKyAgICBwb3MubGVmdCAtPSB0aGlzLndyYXBwZXJPZmZzZXQubGVmdDsK
KyAgICBwb3MudG9wICAtPSB0aGlzLndyYXBwZXJPZmZzZXQudG9wOworCisgICAgLy8gaWYgb2Zm
c2V0WC9ZIGFyZSB0cnVlIHdlIGNlbnRlciB0aGUgZWxlbWVudCB0byB0aGUgc2NyZWVuCisgICAg
aWYgKCBvZmZzZXRYID09PSB0cnVlICkgeworICAgICAgb2Zmc2V0WCA9IE1hdGgucm91bmQoZWwu
b2Zmc2V0V2lkdGggLyAyIC0gdGhpcy53cmFwcGVyLm9mZnNldFdpZHRoIC8gMik7CisgICAgfQor
ICAgIGlmICggb2Zmc2V0WSA9PT0gdHJ1ZSApIHsKKyAgICAgIG9mZnNldFkgPSBNYXRoLnJvdW5k
KGVsLm9mZnNldEhlaWdodCAvIDIgLSB0aGlzLndyYXBwZXIub2Zmc2V0SGVpZ2h0IC8gMik7Cisg
ICAgfQorCisgICAgcG9zLmxlZnQgLT0gb2Zmc2V0WCB8fCAwOworICAgIHBvcy50b3AgIC09IG9m
ZnNldFkgfHwgMDsKKworICAgIHBvcy5sZWZ0ID0gcG9zLmxlZnQgPiAwID8gMCA6IHBvcy5sZWZ0
IDwgdGhpcy5tYXhTY3JvbGxYID8gdGhpcy5tYXhTY3JvbGxYIDogcG9zLmxlZnQ7CisgICAgcG9z
LnRvcCAgPSBwb3MudG9wICA+IDAgPyAwIDogcG9zLnRvcCAgPCB0aGlzLm1heFNjcm9sbFkgPyB0
aGlzLm1heFNjcm9sbFkgOiBwb3MudG9wOworCisgICAgdGltZSA9IHRpbWUgPT09IHVuZGVmaW5l
ZCB8fCB0aW1lID09PSBudWxsIHx8IHRpbWUgPT09ICdhdXRvJyA/IE1hdGgubWF4KE1hdGguYWJz
KHRoaXMueC1wb3MubGVmdCksIE1hdGguYWJzKHRoaXMueS1wb3MudG9wKSkgOiB0aW1lOworCisg
ICAgdGhpcy5zY3JvbGxUbyhwb3MubGVmdCwgcG9zLnRvcCwgdGltZSwgZWFzaW5nKTsKKyAgfSwK
KworICBfdHJhbnNpdGlvblRpbWU6IGZ1bmN0aW9uICh0aW1lKSB7CisgICAgdGltZSA9IHRpbWUg
fHwgMDsKKworICAgIHRoaXMuc2Nyb2xsZXJTdHlsZVt1dGlscy5zdHlsZS50cmFuc2l0aW9uRHVy
YXRpb25dID0gdGltZSArICdtcyc7CisKKyAgICBpZiAoICF0aW1lICYmIHV0aWxzLmlzQmFkQW5k
cm9pZCApIHsKKyAgICAgIHRoaXMuc2Nyb2xsZXJTdHlsZVt1dGlscy5zdHlsZS50cmFuc2l0aW9u
RHVyYXRpb25dID0gJzAuMDAxcyc7CisgICAgfQorCisKKyAgICBpZiAoIHRoaXMuaW5kaWNhdG9y
cyApIHsKKyAgICAgIGZvciAoIHZhciBpID0gdGhpcy5pbmRpY2F0b3JzLmxlbmd0aDsgaS0tOyAp
IHsKKyAgICAgICAgdGhpcy5pbmRpY2F0b3JzW2ldLnRyYW5zaXRpb25UaW1lKHRpbWUpOworICAg
ICAgfQorICAgIH0KKworCisvLyBJTlNFUlQgUE9JTlQ6IF90cmFuc2l0aW9uVGltZQorCisgIH0s
CisKKyAgX3RyYW5zaXRpb25UaW1pbmdGdW5jdGlvbjogZnVuY3Rpb24gKGVhc2luZykgeworICAg
IHRoaXMuc2Nyb2xsZXJTdHlsZVt1dGlscy5zdHlsZS50cmFuc2l0aW9uVGltaW5nRnVuY3Rpb25d
ID0gZWFzaW5nOworCisKKyAgICBpZiAoIHRoaXMuaW5kaWNhdG9ycyApIHsKKyAgICAgIGZvciAo
IHZhciBpID0gdGhpcy5pbmRpY2F0b3JzLmxlbmd0aDsgaS0tOyApIHsKKyAgICAgICAgdGhpcy5p
bmRpY2F0b3JzW2ldLnRyYW5zaXRpb25UaW1pbmdGdW5jdGlvbihlYXNpbmcpOworICAgICAgfQor
ICAgIH0KKworCisvLyBJTlNFUlQgUE9JTlQ6IF90cmFuc2l0aW9uVGltaW5nRnVuY3Rpb24KKwor
ICB9LAorCisgIF90cmFuc2xhdGU6IGZ1bmN0aW9uICh4LCB5KSB7CisgICAgaWYgKCB0aGlzLm9w
dGlvbnMudXNlVHJhbnNmb3JtICkgeworCisvKiBSRVBMQUNFIFNUQVJUOiBfdHJhbnNsYXRlICov
CisKKyAgICAgIHRoaXMuc2Nyb2xsZXJTdHlsZVt1dGlscy5zdHlsZS50cmFuc2Zvcm1dID0gJ3Ry
YW5zbGF0ZSgnICsgeCArICdweCwnICsgeSArICdweCknICsgdGhpcy50cmFuc2xhdGVaOworCisv
KiBSRVBMQUNFIEVORDogX3RyYW5zbGF0ZSAqLworCisgICAgfSBlbHNlIHsKKyAgICAgIHggPSBN
YXRoLnJvdW5kKHgpOworICAgICAgeSA9IE1hdGgucm91bmQoeSk7CisgICAgICB0aGlzLnNjcm9s
bGVyU3R5bGUubGVmdCA9IHggKyAncHgnOworICAgICAgdGhpcy5zY3JvbGxlclN0eWxlLnRvcCA9
IHkgKyAncHgnOworICAgIH0KKworICAgIHRoaXMueCA9IHg7CisgICAgdGhpcy55ID0geTsKKwor
CisgIGlmICggdGhpcy5pbmRpY2F0b3JzICkgeworICAgIGZvciAoIHZhciBpID0gdGhpcy5pbmRp
Y2F0b3JzLmxlbmd0aDsgaS0tOyApIHsKKyAgICAgIHRoaXMuaW5kaWNhdG9yc1tpXS51cGRhdGVQ
b3NpdGlvbigpOworICAgIH0KKyAgfQorCisKKy8vIElOU0VSVCBQT0lOVDogX3RyYW5zbGF0ZQor
CisgIH0sCisKKyAgX2luaXRFdmVudHM6IGZ1bmN0aW9uIChyZW1vdmUpIHsKKyAgICB2YXIgZXZl
bnRUeXBlID0gcmVtb3ZlID8gdXRpbHMucmVtb3ZlRXZlbnQgOiB1dGlscy5hZGRFdmVudCwKKyAg
ICAgIHRhcmdldCA9IHRoaXMub3B0aW9ucy5iaW5kVG9XcmFwcGVyID8gdGhpcy53cmFwcGVyIDog
d2luZG93OworCisgICAgZXZlbnRUeXBlKHdpbmRvdywgJ29yaWVudGF0aW9uY2hhbmdlJywgdGhp
cyk7CisgICAgZXZlbnRUeXBlKHdpbmRvdywgJ3Jlc2l6ZScsIHRoaXMpOworCisgICAgaWYgKCB0
aGlzLm9wdGlvbnMuY2xpY2sgKSB7CisgICAgICBldmVudFR5cGUodGhpcy53cmFwcGVyLCAnY2xp
Y2snLCB0aGlzLCB0cnVlKTsKKyAgICB9CisKKyAgICBpZiAoICF0aGlzLm9wdGlvbnMuZGlzYWJs
ZU1vdXNlICkgeworICAgICAgZXZlbnRUeXBlKHRoaXMud3JhcHBlciwgJ21vdXNlZG93bicsIHRo
aXMpOworICAgICAgZXZlbnRUeXBlKHRhcmdldCwgJ21vdXNlbW92ZScsIHRoaXMpOworICAgICAg
ZXZlbnRUeXBlKHRhcmdldCwgJ21vdXNlY2FuY2VsJywgdGhpcyk7CisgICAgICBldmVudFR5cGUo
dGFyZ2V0LCAnbW91c2V1cCcsIHRoaXMpOworICAgIH0KKworICAgIGlmICggdXRpbHMuaGFzUG9p
bnRlciAmJiAhdGhpcy5vcHRpb25zLmRpc2FibGVQb2ludGVyICkgeworICAgICAgZXZlbnRUeXBl
KHRoaXMud3JhcHBlciwgdXRpbHMucHJlZml4UG9pbnRlckV2ZW50KCdwb2ludGVyZG93bicpLCB0
aGlzKTsKKyAgICAgIGV2ZW50VHlwZSh0YXJnZXQsIHV0aWxzLnByZWZpeFBvaW50ZXJFdmVudCgn
cG9pbnRlcm1vdmUnKSwgdGhpcyk7CisgICAgICBldmVudFR5cGUodGFyZ2V0LCB1dGlscy5wcmVm
aXhQb2ludGVyRXZlbnQoJ3BvaW50ZXJjYW5jZWwnKSwgdGhpcyk7CisgICAgICBldmVudFR5cGUo
dGFyZ2V0LCB1dGlscy5wcmVmaXhQb2ludGVyRXZlbnQoJ3BvaW50ZXJ1cCcpLCB0aGlzKTsKKyAg
ICB9CisKKyAgICBpZiAoIHV0aWxzLmhhc1RvdWNoICYmICF0aGlzLm9wdGlvbnMuZGlzYWJsZVRv
dWNoICkgeworICAgICAgZXZlbnRUeXBlKHRoaXMud3JhcHBlciwgJ3RvdWNoc3RhcnQnLCB0aGlz
KTsKKyAgICAgIGV2ZW50VHlwZSh0YXJnZXQsICd0b3VjaG1vdmUnLCB0aGlzKTsKKyAgICAgIGV2
ZW50VHlwZSh0YXJnZXQsICd0b3VjaGNhbmNlbCcsIHRoaXMpOworICAgICAgZXZlbnRUeXBlKHRh
cmdldCwgJ3RvdWNoZW5kJywgdGhpcyk7CisgICAgfQorCisgICAgZXZlbnRUeXBlKHRoaXMuc2Ny
b2xsZXIsICd0cmFuc2l0aW9uZW5kJywgdGhpcyk7CisgICAgZXZlbnRUeXBlKHRoaXMuc2Nyb2xs
ZXIsICd3ZWJraXRUcmFuc2l0aW9uRW5kJywgdGhpcyk7CisgICAgZXZlbnRUeXBlKHRoaXMuc2Ny
b2xsZXIsICdvVHJhbnNpdGlvbkVuZCcsIHRoaXMpOworICAgIGV2ZW50VHlwZSh0aGlzLnNjcm9s
bGVyLCAnTVNUcmFuc2l0aW9uRW5kJywgdGhpcyk7CisgIH0sCisKKyAgZ2V0Q29tcHV0ZWRQb3Np
dGlvbjogZnVuY3Rpb24gKCkgeworICAgIHZhciBtYXRyaXggPSB3aW5kb3cuZ2V0Q29tcHV0ZWRT
dHlsZSh0aGlzLnNjcm9sbGVyLCBudWxsKSwKKyAgICAgIHgsIHk7CisKKyAgICBpZiAoIHRoaXMu
b3B0aW9ucy51c2VUcmFuc2Zvcm0gKSB7CisgICAgICBtYXRyaXggPSBtYXRyaXhbdXRpbHMuc3R5
bGUudHJhbnNmb3JtXS5zcGxpdCgnKScpWzBdLnNwbGl0KCcsICcpOworICAgICAgeCA9ICsobWF0
cml4WzEyXSB8fCBtYXRyaXhbNF0pOworICAgICAgeSA9ICsobWF0cml4WzEzXSB8fCBtYXRyaXhb
NV0pOworICAgIH0gZWxzZSB7CisgICAgICB4ID0gK21hdHJpeC5sZWZ0LnJlcGxhY2UoL1teLVxk
Ll0vZywgJycpOworICAgICAgeSA9ICttYXRyaXgudG9wLnJlcGxhY2UoL1teLVxkLl0vZywgJycp
OworICAgIH0KKworICAgIHJldHVybiB7IHg6IHgsIHk6IHkgfTsKKyAgfSwKKworICBfaW5pdElu
ZGljYXRvcnM6IGZ1bmN0aW9uICgpIHsKKyAgICB2YXIgaW50ZXJhY3RpdmUgPSB0aGlzLm9wdGlv
bnMuaW50ZXJhY3RpdmVTY3JvbGxiYXJzLAorICAgICAgY3VzdG9tU3R5bGUgPSB0eXBlb2YgdGhp
cy5vcHRpb25zLnNjcm9sbGJhcnMgIT0gJ3N0cmluZycsCisgICAgICBpbmRpY2F0b3JzID0gW10s
CisgICAgICBpbmRpY2F0b3I7CisKKyAgICB2YXIgdGhhdCA9IHRoaXM7CisKKyAgICB0aGlzLmlu
ZGljYXRvcnMgPSBbXTsKKworICAgIGlmICggdGhpcy5vcHRpb25zLnNjcm9sbGJhcnMgKSB7Cisg
ICAgICAvLyBWZXJ0aWNhbCBzY3JvbGxiYXIKKyAgICAgIGlmICggdGhpcy5vcHRpb25zLnNjcm9s
bFkgKSB7CisgICAgICAgIGluZGljYXRvciA9IHsKKyAgICAgICAgICBlbDogY3JlYXRlRGVmYXVs
dFNjcm9sbGJhcigndicsIGludGVyYWN0aXZlLCB0aGlzLm9wdGlvbnMuc2Nyb2xsYmFycyksCisg
ICAgICAgICAgaW50ZXJhY3RpdmU6IGludGVyYWN0aXZlLAorICAgICAgICAgIGRlZmF1bHRTY3Jv
bGxiYXJzOiB0cnVlLAorICAgICAgICAgIGN1c3RvbVN0eWxlOiBjdXN0b21TdHlsZSwKKyAgICAg
ICAgICByZXNpemU6IHRoaXMub3B0aW9ucy5yZXNpemVTY3JvbGxiYXJzLAorICAgICAgICAgIHNo
cmluazogdGhpcy5vcHRpb25zLnNocmlua1Njcm9sbGJhcnMsCisgICAgICAgICAgZmFkZTogdGhp
cy5vcHRpb25zLmZhZGVTY3JvbGxiYXJzLAorICAgICAgICAgIGxpc3Rlblg6IGZhbHNlCisgICAg
ICAgIH07CisKKyAgICAgICAgdGhpcy53cmFwcGVyLmFwcGVuZENoaWxkKGluZGljYXRvci5lbCk7
CisgICAgICAgIGluZGljYXRvcnMucHVzaChpbmRpY2F0b3IpOworICAgICAgfQorCisgICAgICAv
LyBIb3Jpem9udGFsIHNjcm9sbGJhcgorICAgICAgaWYgKCB0aGlzLm9wdGlvbnMuc2Nyb2xsWCAp
IHsKKyAgICAgICAgaW5kaWNhdG9yID0geworICAgICAgICAgIGVsOiBjcmVhdGVEZWZhdWx0U2Ny
b2xsYmFyKCdoJywgaW50ZXJhY3RpdmUsIHRoaXMub3B0aW9ucy5zY3JvbGxiYXJzKSwKKyAgICAg
ICAgICBpbnRlcmFjdGl2ZTogaW50ZXJhY3RpdmUsCisgICAgICAgICAgZGVmYXVsdFNjcm9sbGJh
cnM6IHRydWUsCisgICAgICAgICAgY3VzdG9tU3R5bGU6IGN1c3RvbVN0eWxlLAorICAgICAgICAg
IHJlc2l6ZTogdGhpcy5vcHRpb25zLnJlc2l6ZVNjcm9sbGJhcnMsCisgICAgICAgICAgc2hyaW5r
OiB0aGlzLm9wdGlvbnMuc2hyaW5rU2Nyb2xsYmFycywKKyAgICAgICAgICBmYWRlOiB0aGlzLm9w
dGlvbnMuZmFkZVNjcm9sbGJhcnMsCisgICAgICAgICAgbGlzdGVuWTogZmFsc2UKKyAgICAgICAg
fTsKKworICAgICAgICB0aGlzLndyYXBwZXIuYXBwZW5kQ2hpbGQoaW5kaWNhdG9yLmVsKTsKKyAg
ICAgICAgaW5kaWNhdG9ycy5wdXNoKGluZGljYXRvcik7CisgICAgICB9CisgICAgfQorCisgICAg
aWYgKCB0aGlzLm9wdGlvbnMuaW5kaWNhdG9ycyApIHsKKyAgICAgIC8vIFRPRE86IGNoZWNrIGNv
bmNhdCBjb21wYXRpYmlsaXR5CisgICAgICBpbmRpY2F0b3JzID0gaW5kaWNhdG9ycy5jb25jYXQo
dGhpcy5vcHRpb25zLmluZGljYXRvcnMpOworICAgIH0KKworICAgIGZvciAoIHZhciBpID0gaW5k
aWNhdG9ycy5sZW5ndGg7IGktLTsgKSB7CisgICAgICB0aGlzLmluZGljYXRvcnMucHVzaCggbmV3
IEluZGljYXRvcih0aGlzLCBpbmRpY2F0b3JzW2ldKSApOworICAgIH0KKworICAgIC8vIFRPRE86
IGNoZWNrIGlmIHdlIGNhbiB1c2UgYXJyYXkubWFwICh3aWRlIGNvbXBhdGliaWxpdHkgYW5kIHBl
cmZvcm1hbmNlIGlzc3VlcykKKyAgICBmdW5jdGlvbiBfaW5kaWNhdG9yc01hcCAoZm4pIHsKKyAg
ICAgIGZvciAoIHZhciBpID0gdGhhdC5pbmRpY2F0b3JzLmxlbmd0aDsgaS0tOyApIHsKKyAgICAg
ICAgZm4uY2FsbCh0aGF0LmluZGljYXRvcnNbaV0pOworICAgICAgfQorICAgIH0KKworICAgIGlm
ICggdGhpcy5vcHRpb25zLmZhZGVTY3JvbGxiYXJzICkgeworICAgICAgdGhpcy5vbignc2Nyb2xs
RW5kJywgZnVuY3Rpb24gKCkgeworICAgICAgICBfaW5kaWNhdG9yc01hcChmdW5jdGlvbiAoKSB7
CisgICAgICAgICAgdGhpcy5mYWRlKCk7CisgICAgICAgIH0pOworICAgICAgfSk7CisKKyAgICAg
IHRoaXMub24oJ3Njcm9sbENhbmNlbCcsIGZ1bmN0aW9uICgpIHsKKyAgICAgICAgX2luZGljYXRv
cnNNYXAoZnVuY3Rpb24gKCkgeworICAgICAgICAgIHRoaXMuZmFkZSgpOworICAgICAgICB9KTsK
KyAgICAgIH0pOworCisgICAgICB0aGlzLm9uKCdzY3JvbGxTdGFydCcsIGZ1bmN0aW9uICgpIHsK
KyAgICAgICAgX2luZGljYXRvcnNNYXAoZnVuY3Rpb24gKCkgeworICAgICAgICAgIHRoaXMuZmFk
ZSgxKTsKKyAgICAgICAgfSk7CisgICAgICB9KTsKKworICAgICAgdGhpcy5vbignYmVmb3JlU2Ny
b2xsU3RhcnQnLCBmdW5jdGlvbiAoKSB7CisgICAgICAgIF9pbmRpY2F0b3JzTWFwKGZ1bmN0aW9u
ICgpIHsKKyAgICAgICAgICB0aGlzLmZhZGUoMSwgdHJ1ZSk7CisgICAgICAgIH0pOworICAgICAg
fSk7CisgICAgfQorCisKKyAgICB0aGlzLm9uKCdyZWZyZXNoJywgZnVuY3Rpb24gKCkgeworICAg
ICAgX2luZGljYXRvcnNNYXAoZnVuY3Rpb24gKCkgeworICAgICAgICB0aGlzLnJlZnJlc2goKTsK
KyAgICAgIH0pOworICAgIH0pOworCisgICAgdGhpcy5vbignZGVzdHJveScsIGZ1bmN0aW9uICgp
IHsKKyAgICAgIF9pbmRpY2F0b3JzTWFwKGZ1bmN0aW9uICgpIHsKKyAgICAgICAgdGhpcy5kZXN0
cm95KCk7CisgICAgICB9KTsKKworICAgICAgZGVsZXRlIHRoaXMuaW5kaWNhdG9yczsKKyAgICB9
KTsKKyAgfSwKKworICBfaW5pdFdoZWVsOiBmdW5jdGlvbiAoKSB7CisgICAgdXRpbHMuYWRkRXZl
bnQodGhpcy53cmFwcGVyLCAnd2hlZWwnLCB0aGlzKTsKKyAgICB1dGlscy5hZGRFdmVudCh0aGlz
LndyYXBwZXIsICdtb3VzZXdoZWVsJywgdGhpcyk7CisgICAgdXRpbHMuYWRkRXZlbnQodGhpcy53
cmFwcGVyLCAnRE9NTW91c2VTY3JvbGwnLCB0aGlzKTsKKworICAgIHRoaXMub24oJ2Rlc3Ryb3kn
LCBmdW5jdGlvbiAoKSB7CisgICAgICB1dGlscy5yZW1vdmVFdmVudCh0aGlzLndyYXBwZXIsICd3
aGVlbCcsIHRoaXMpOworICAgICAgdXRpbHMucmVtb3ZlRXZlbnQodGhpcy53cmFwcGVyLCAnbW91
c2V3aGVlbCcsIHRoaXMpOworICAgICAgdXRpbHMucmVtb3ZlRXZlbnQodGhpcy53cmFwcGVyLCAn
RE9NTW91c2VTY3JvbGwnLCB0aGlzKTsKKyAgICB9KTsKKyAgfSwKKworICBfd2hlZWw6IGZ1bmN0
aW9uIChlKSB7CisgICAgaWYgKCAhdGhpcy5lbmFibGVkICkgeworICAgICAgcmV0dXJuOworICAg
IH0KKworICAgIGUucHJldmVudERlZmF1bHQoKTsKKyAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwor
CisgICAgdmFyIHdoZWVsRGVsdGFYLCB3aGVlbERlbHRhWSwKKyAgICAgIG5ld1gsIG5ld1ksCisg
ICAgICB0aGF0ID0gdGhpczsKKworICAgIGlmICggdGhpcy53aGVlbFRpbWVvdXQgPT09IHVuZGVm
aW5lZCApIHsKKyAgICAgIHRoYXQuX2V4ZWNFdmVudCgnc2Nyb2xsU3RhcnQnKTsKKyAgICB9CisK
KyAgICAvLyBFeGVjdXRlIHRoZSBzY3JvbGxFbmQgZXZlbnQgYWZ0ZXIgNDAwbXMgdGhlIHdoZWVs
IHN0b3BwZWQgc2Nyb2xsaW5nCisgICAgY2xlYXJUaW1lb3V0KHRoaXMud2hlZWxUaW1lb3V0KTsK
KyAgICB0aGlzLndoZWVsVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeworICAgICAg
dGhhdC5fZXhlY0V2ZW50KCdzY3JvbGxFbmQnKTsKKyAgICAgIHRoYXQud2hlZWxUaW1lb3V0ID0g
dW5kZWZpbmVkOworICAgIH0sIDQwMCk7CisKKyAgICBpZiAoICdkZWx0YVgnIGluIGUgKSB7Cisg
ICAgICB3aGVlbERlbHRhWCA9IC1lLmRlbHRhWDsKKyAgICAgIHdoZWVsRGVsdGFZID0gLWUuZGVs
dGFZOworICAgIH0gZWxzZSBpZiAoICd3aGVlbERlbHRhWCcgaW4gZSApIHsKKyAgICAgIHdoZWVs
RGVsdGFYID0gZS53aGVlbERlbHRhWCAvIDEyMCAqIHRoaXMub3B0aW9ucy5tb3VzZVdoZWVsU3Bl
ZWQ7CisgICAgICB3aGVlbERlbHRhWSA9IGUud2hlZWxEZWx0YVkgLyAxMjAgKiB0aGlzLm9wdGlv
bnMubW91c2VXaGVlbFNwZWVkOworICAgIH0gZWxzZSBpZiAoICd3aGVlbERlbHRhJyBpbiBlICkg
eworICAgICAgd2hlZWxEZWx0YVggPSB3aGVlbERlbHRhWSA9IGUud2hlZWxEZWx0YSAvIDEyMCAq
IHRoaXMub3B0aW9ucy5tb3VzZVdoZWVsU3BlZWQ7CisgICAgfSBlbHNlIGlmICggJ2RldGFpbCcg
aW4gZSApIHsKKyAgICAgIHdoZWVsRGVsdGFYID0gd2hlZWxEZWx0YVkgPSAtZS5kZXRhaWwgLyAz
ICogdGhpcy5vcHRpb25zLm1vdXNlV2hlZWxTcGVlZDsKKyAgICB9IGVsc2UgeworICAgICAgcmV0
dXJuOworICAgIH0KKworICAgIHdoZWVsRGVsdGFYICo9IHRoaXMub3B0aW9ucy5pbnZlcnRXaGVl
bERpcmVjdGlvbjsKKyAgICB3aGVlbERlbHRhWSAqPSB0aGlzLm9wdGlvbnMuaW52ZXJ0V2hlZWxE
aXJlY3Rpb247CisKKyAgICBpZiAoICF0aGlzLmhhc1ZlcnRpY2FsU2Nyb2xsICkgeworICAgICAg
d2hlZWxEZWx0YVggPSB3aGVlbERlbHRhWTsKKyAgICAgIHdoZWVsRGVsdGFZID0gMDsKKyAgICB9
CisKKyAgICBpZiAoIHRoaXMub3B0aW9ucy5zbmFwICkgeworICAgICAgbmV3WCA9IHRoaXMuY3Vy
cmVudFBhZ2UucGFnZVg7CisgICAgICBuZXdZID0gdGhpcy5jdXJyZW50UGFnZS5wYWdlWTsKKwor
ICAgICAgaWYgKCB3aGVlbERlbHRhWCA+IDAgKSB7CisgICAgICAgIG5ld1gtLTsKKyAgICAgIH0g
ZWxzZSBpZiAoIHdoZWVsRGVsdGFYIDwgMCApIHsKKyAgICAgICAgbmV3WCsrOworICAgICAgfQor
CisgICAgICBpZiAoIHdoZWVsRGVsdGFZID4gMCApIHsKKyAgICAgICAgbmV3WS0tOworICAgICAg
fSBlbHNlIGlmICggd2hlZWxEZWx0YVkgPCAwICkgeworICAgICAgICBuZXdZKys7CisgICAgICB9
CisKKyAgICAgIHRoaXMuZ29Ub1BhZ2UobmV3WCwgbmV3WSk7CisKKyAgICAgIHJldHVybjsKKyAg
ICB9CisKKyAgICBuZXdYID0gdGhpcy54ICsgTWF0aC5yb3VuZCh0aGlzLmhhc0hvcml6b250YWxT
Y3JvbGwgPyB3aGVlbERlbHRhWCA6IDApOworICAgIG5ld1kgPSB0aGlzLnkgKyBNYXRoLnJvdW5k
KHRoaXMuaGFzVmVydGljYWxTY3JvbGwgPyB3aGVlbERlbHRhWSA6IDApOworCisgICAgaWYgKCBu
ZXdYID4gMCApIHsKKyAgICAgIG5ld1ggPSAwOworICAgIH0gZWxzZSBpZiAoIG5ld1ggPCB0aGlz
Lm1heFNjcm9sbFggKSB7CisgICAgICBuZXdYID0gdGhpcy5tYXhTY3JvbGxYOworICAgIH0KKwor
ICAgIGlmICggbmV3WSA+IDAgKSB7CisgICAgICBuZXdZID0gMDsKKyAgICB9IGVsc2UgaWYgKCBu
ZXdZIDwgdGhpcy5tYXhTY3JvbGxZICkgeworICAgICAgbmV3WSA9IHRoaXMubWF4U2Nyb2xsWTsK
KyAgICB9CisKKyAgICB0aGlzLnNjcm9sbFRvKG5ld1gsIG5ld1ksIDApOworCisvLyBJTlNFUlQg
UE9JTlQ6IF93aGVlbAorICB9LAorCisgIF9pbml0U25hcDogZnVuY3Rpb24gKCkgeworICAgIHRo
aXMuY3VycmVudFBhZ2UgPSB7fTsKKworICAgIGlmICggdHlwZW9mIHRoaXMub3B0aW9ucy5zbmFw
ID09ICdzdHJpbmcnICkgeworICAgICAgdGhpcy5vcHRpb25zLnNuYXAgPSB0aGlzLnNjcm9sbGVy
LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5vcHRpb25zLnNuYXApOworICAgIH0KKworICAgIHRoaXMu
b24oJ3JlZnJlc2gnLCBmdW5jdGlvbiAoKSB7CisgICAgICB2YXIgaSA9IDAsIGwsCisgICAgICAg
IG0gPSAwLCBuLAorICAgICAgICBjeCwgY3ksCisgICAgICAgIHggPSAwLCB5LAorICAgICAgICBz
dGVwWCA9IHRoaXMub3B0aW9ucy5zbmFwU3RlcFggfHwgdGhpcy53cmFwcGVyV2lkdGgsCisgICAg
ICAgIHN0ZXBZID0gdGhpcy5vcHRpb25zLnNuYXBTdGVwWSB8fCB0aGlzLndyYXBwZXJIZWlnaHQs
CisgICAgICAgIGVsOworCisgICAgICB0aGlzLnBhZ2VzID0gW107CisKKyAgICAgIGlmICggIXRo
aXMud3JhcHBlcldpZHRoIHx8ICF0aGlzLndyYXBwZXJIZWlnaHQgfHwgIXRoaXMuc2Nyb2xsZXJX
aWR0aCB8fCAhdGhpcy5zY3JvbGxlckhlaWdodCApIHsKKyAgICAgICAgcmV0dXJuOworICAgICAg
fQorCisgICAgICBpZiAoIHRoaXMub3B0aW9ucy5zbmFwID09PSB0cnVlICkgeworICAgICAgICBj
eCA9IE1hdGgucm91bmQoIHN0ZXBYIC8gMiApOworICAgICAgICBjeSA9IE1hdGgucm91bmQoIHN0
ZXBZIC8gMiApOworCisgICAgICAgIHdoaWxlICggeCA+IC10aGlzLnNjcm9sbGVyV2lkdGggKSB7
CisgICAgICAgICAgdGhpcy5wYWdlc1tpXSA9IFtdOworICAgICAgICAgIGwgPSAwOworICAgICAg
ICAgIHkgPSAwOworCisgICAgICAgICAgd2hpbGUgKCB5ID4gLXRoaXMuc2Nyb2xsZXJIZWlnaHQg
KSB7CisgICAgICAgICAgICB0aGlzLnBhZ2VzW2ldW2xdID0geworICAgICAgICAgICAgICB4OiBN
YXRoLm1heCh4LCB0aGlzLm1heFNjcm9sbFgpLAorICAgICAgICAgICAgICB5OiBNYXRoLm1heCh5
LCB0aGlzLm1heFNjcm9sbFkpLAorICAgICAgICAgICAgICB3aWR0aDogc3RlcFgsCisgICAgICAg
ICAgICAgIGhlaWdodDogc3RlcFksCisgICAgICAgICAgICAgIGN4OiB4IC0gY3gsCisgICAgICAg
ICAgICAgIGN5OiB5IC0gY3kKKyAgICAgICAgICAgIH07CisKKyAgICAgICAgICAgIHkgLT0gc3Rl
cFk7CisgICAgICAgICAgICBsKys7CisgICAgICAgICAgfQorCisgICAgICAgICAgeCAtPSBzdGVw
WDsKKyAgICAgICAgICBpKys7CisgICAgICAgIH0KKyAgICAgIH0gZWxzZSB7CisgICAgICAgIGVs
ID0gdGhpcy5vcHRpb25zLnNuYXA7CisgICAgICAgIGwgPSBlbC5sZW5ndGg7CisgICAgICAgIG4g
PSAtMTsKKworICAgICAgICBmb3IgKCA7IGkgPCBsOyBpKysgKSB7CisgICAgICAgICAgaWYgKCBp
ID09PSAwIHx8IGVsW2ldLm9mZnNldExlZnQgPD0gZWxbaS0xXS5vZmZzZXRMZWZ0ICkgeworICAg
ICAgICAgICAgbSA9IDA7CisgICAgICAgICAgICBuKys7CisgICAgICAgICAgfQorCisgICAgICAg
ICAgaWYgKCAhdGhpcy5wYWdlc1ttXSApIHsKKyAgICAgICAgICAgIHRoaXMucGFnZXNbbV0gPSBb
XTsKKyAgICAgICAgICB9CisKKyAgICAgICAgICB4ID0gTWF0aC5tYXgoLWVsW2ldLm9mZnNldExl
ZnQsIHRoaXMubWF4U2Nyb2xsWCk7CisgICAgICAgICAgeSA9IE1hdGgubWF4KC1lbFtpXS5vZmZz
ZXRUb3AsIHRoaXMubWF4U2Nyb2xsWSk7CisgICAgICAgICAgY3ggPSB4IC0gTWF0aC5yb3VuZChl
bFtpXS5vZmZzZXRXaWR0aCAvIDIpOworICAgICAgICAgIGN5ID0geSAtIE1hdGgucm91bmQoZWxb
aV0ub2Zmc2V0SGVpZ2h0IC8gMik7CisKKyAgICAgICAgICB0aGlzLnBhZ2VzW21dW25dID0gewor
ICAgICAgICAgICAgeDogeCwKKyAgICAgICAgICAgIHk6IHksCisgICAgICAgICAgICB3aWR0aDog
ZWxbaV0ub2Zmc2V0V2lkdGgsCisgICAgICAgICAgICBoZWlnaHQ6IGVsW2ldLm9mZnNldEhlaWdo
dCwKKyAgICAgICAgICAgIGN4OiBjeCwKKyAgICAgICAgICAgIGN5OiBjeQorICAgICAgICAgIH07
CisKKyAgICAgICAgICBpZiAoIHggPiB0aGlzLm1heFNjcm9sbFggKSB7CisgICAgICAgICAgICBt
Kys7CisgICAgICAgICAgfQorICAgICAgICB9CisgICAgICB9CisKKyAgICAgIHRoaXMuZ29Ub1Bh
Z2UodGhpcy5jdXJyZW50UGFnZS5wYWdlWCB8fCAwLCB0aGlzLmN1cnJlbnRQYWdlLnBhZ2VZIHx8
IDAsIDApOworCisgICAgICAvLyBVcGRhdGUgc25hcCB0aHJlc2hvbGQgaWYgbmVlZGVkCisgICAg
ICBpZiAoIHRoaXMub3B0aW9ucy5zbmFwVGhyZXNob2xkICUgMSA9PT0gMCApIHsKKyAgICAgICAg
dGhpcy5zbmFwVGhyZXNob2xkWCA9IHRoaXMub3B0aW9ucy5zbmFwVGhyZXNob2xkOworICAgICAg
ICB0aGlzLnNuYXBUaHJlc2hvbGRZID0gdGhpcy5vcHRpb25zLnNuYXBUaHJlc2hvbGQ7CisgICAg
ICB9IGVsc2UgeworICAgICAgICB0aGlzLnNuYXBUaHJlc2hvbGRYID0gTWF0aC5yb3VuZCh0aGlz
LnBhZ2VzW3RoaXMuY3VycmVudFBhZ2UucGFnZVhdW3RoaXMuY3VycmVudFBhZ2UucGFnZVldLndp
ZHRoICogdGhpcy5vcHRpb25zLnNuYXBUaHJlc2hvbGQpOworICAgICAgICB0aGlzLnNuYXBUaHJl
c2hvbGRZID0gTWF0aC5yb3VuZCh0aGlzLnBhZ2VzW3RoaXMuY3VycmVudFBhZ2UucGFnZVhdW3Ro
aXMuY3VycmVudFBhZ2UucGFnZVldLmhlaWdodCAqIHRoaXMub3B0aW9ucy5zbmFwVGhyZXNob2xk
KTsKKyAgICAgIH0KKyAgICB9KTsKKworICAgIHRoaXMub24oJ2ZsaWNrJywgZnVuY3Rpb24gKCkg
eworICAgICAgdmFyIHRpbWUgPSB0aGlzLm9wdGlvbnMuc25hcFNwZWVkIHx8IE1hdGgubWF4KAor
ICAgICAgICAgIE1hdGgubWF4KAorICAgICAgICAgICAgTWF0aC5taW4oTWF0aC5hYnModGhpcy54
IC0gdGhpcy5zdGFydFgpLCAxMDAwKSwKKyAgICAgICAgICAgIE1hdGgubWluKE1hdGguYWJzKHRo
aXMueSAtIHRoaXMuc3RhcnRZKSwgMTAwMCkKKyAgICAgICAgICApLCAzMDApOworCisgICAgICB0
aGlzLmdvVG9QYWdlKAorICAgICAgICB0aGlzLmN1cnJlbnRQYWdlLnBhZ2VYICsgdGhpcy5kaXJl
Y3Rpb25YLAorICAgICAgICB0aGlzLmN1cnJlbnRQYWdlLnBhZ2VZICsgdGhpcy5kaXJlY3Rpb25Z
LAorICAgICAgICB0aW1lCisgICAgICApOworICAgIH0pOworICB9LAorCisgIF9uZWFyZXN0U25h
cDogZnVuY3Rpb24gKHgsIHkpIHsKKyAgICBpZiAoICF0aGlzLnBhZ2VzLmxlbmd0aCApIHsKKyAg
ICAgIHJldHVybiB7IHg6IDAsIHk6IDAsIHBhZ2VYOiAwLCBwYWdlWTogMCB9OworICAgIH0KKwor
ICAgIHZhciBpID0gMCwKKyAgICAgIGwgPSB0aGlzLnBhZ2VzLmxlbmd0aCwKKyAgICAgIG0gPSAw
OworCisgICAgLy8gQ2hlY2sgaWYgd2UgZXhjZWVkZWQgdGhlIHNuYXAgdGhyZXNob2xkCisgICAg
aWYgKCBNYXRoLmFicyh4IC0gdGhpcy5hYnNTdGFydFgpIDwgdGhpcy5zbmFwVGhyZXNob2xkWCAm
JgorICAgICAgTWF0aC5hYnMoeSAtIHRoaXMuYWJzU3RhcnRZKSA8IHRoaXMuc25hcFRocmVzaG9s
ZFkgKSB7CisgICAgICByZXR1cm4gdGhpcy5jdXJyZW50UGFnZTsKKyAgICB9CisKKyAgICBpZiAo
IHggPiAwICkgeworICAgICAgeCA9IDA7CisgICAgfSBlbHNlIGlmICggeCA8IHRoaXMubWF4U2Ny
b2xsWCApIHsKKyAgICAgIHggPSB0aGlzLm1heFNjcm9sbFg7CisgICAgfQorCisgICAgaWYgKCB5
ID4gMCApIHsKKyAgICAgIHkgPSAwOworICAgIH0gZWxzZSBpZiAoIHkgPCB0aGlzLm1heFNjcm9s
bFkgKSB7CisgICAgICB5ID0gdGhpcy5tYXhTY3JvbGxZOworICAgIH0KKworICAgIGZvciAoIDsg
aSA8IGw7IGkrKyApIHsKKyAgICAgIGlmICggeCA+PSB0aGlzLnBhZ2VzW2ldWzBdLmN4ICkgewor
ICAgICAgICB4ID0gdGhpcy5wYWdlc1tpXVswXS54OworICAgICAgICBicmVhazsKKyAgICAgIH0K
KyAgICB9CisKKyAgICBsID0gdGhpcy5wYWdlc1tpXS5sZW5ndGg7CisKKyAgICBmb3IgKCA7IG0g
PCBsOyBtKysgKSB7CisgICAgICBpZiAoIHkgPj0gdGhpcy5wYWdlc1swXVttXS5jeSApIHsKKyAg
ICAgICAgeSA9IHRoaXMucGFnZXNbMF1bbV0ueTsKKyAgICAgICAgYnJlYWs7CisgICAgICB9Cisg
ICAgfQorCisgICAgaWYgKCBpID09IHRoaXMuY3VycmVudFBhZ2UucGFnZVggKSB7CisgICAgICBp
ICs9IHRoaXMuZGlyZWN0aW9uWDsKKworICAgICAgaWYgKCBpIDwgMCApIHsKKyAgICAgICAgaSA9
IDA7CisgICAgICB9IGVsc2UgaWYgKCBpID49IHRoaXMucGFnZXMubGVuZ3RoICkgeworICAgICAg
ICBpID0gdGhpcy5wYWdlcy5sZW5ndGggLSAxOworICAgICAgfQorCisgICAgICB4ID0gdGhpcy5w
YWdlc1tpXVswXS54OworICAgIH0KKworICAgIGlmICggbSA9PSB0aGlzLmN1cnJlbnRQYWdlLnBh
Z2VZICkgeworICAgICAgbSArPSB0aGlzLmRpcmVjdGlvblk7CisKKyAgICAgIGlmICggbSA8IDAg
KSB7CisgICAgICAgIG0gPSAwOworICAgICAgfSBlbHNlIGlmICggbSA+PSB0aGlzLnBhZ2VzWzBd
Lmxlbmd0aCApIHsKKyAgICAgICAgbSA9IHRoaXMucGFnZXNbMF0ubGVuZ3RoIC0gMTsKKyAgICAg
IH0KKworICAgICAgeSA9IHRoaXMucGFnZXNbMF1bbV0ueTsKKyAgICB9CisKKyAgICByZXR1cm4g
eworICAgICAgeDogeCwKKyAgICAgIHk6IHksCisgICAgICBwYWdlWDogaSwKKyAgICAgIHBhZ2VZ
OiBtCisgICAgfTsKKyAgfSwKKworICBnb1RvUGFnZTogZnVuY3Rpb24gKHgsIHksIHRpbWUsIGVh
c2luZykgeworICAgIGVhc2luZyA9IGVhc2luZyB8fCB0aGlzLm9wdGlvbnMuYm91bmNlRWFzaW5n
OworCisgICAgaWYgKCB4ID49IHRoaXMucGFnZXMubGVuZ3RoICkgeworICAgICAgeCA9IHRoaXMu
cGFnZXMubGVuZ3RoIC0gMTsKKyAgICB9IGVsc2UgaWYgKCB4IDwgMCApIHsKKyAgICAgIHggPSAw
OworICAgIH0KKworICAgIGlmICggeSA+PSB0aGlzLnBhZ2VzW3hdLmxlbmd0aCApIHsKKyAgICAg
IHkgPSB0aGlzLnBhZ2VzW3hdLmxlbmd0aCAtIDE7CisgICAgfSBlbHNlIGlmICggeSA8IDAgKSB7
CisgICAgICB5ID0gMDsKKyAgICB9CisKKyAgICB2YXIgcG9zWCA9IHRoaXMucGFnZXNbeF1beV0u
eCwKKyAgICAgIHBvc1kgPSB0aGlzLnBhZ2VzW3hdW3ldLnk7CisKKyAgICB0aW1lID0gdGltZSA9
PT0gdW5kZWZpbmVkID8gdGhpcy5vcHRpb25zLnNuYXBTcGVlZCB8fCBNYXRoLm1heCgKKyAgICAg
IE1hdGgubWF4KAorICAgICAgICBNYXRoLm1pbihNYXRoLmFicyhwb3NYIC0gdGhpcy54KSwgMTAw
MCksCisgICAgICAgIE1hdGgubWluKE1hdGguYWJzKHBvc1kgLSB0aGlzLnkpLCAxMDAwKQorICAg
ICAgKSwgMzAwKSA6IHRpbWU7CisKKyAgICB0aGlzLmN1cnJlbnRQYWdlID0geworICAgICAgeDog
cG9zWCwKKyAgICAgIHk6IHBvc1ksCisgICAgICBwYWdlWDogeCwKKyAgICAgIHBhZ2VZOiB5Cisg
ICAgfTsKKworICAgIHRoaXMuc2Nyb2xsVG8ocG9zWCwgcG9zWSwgdGltZSwgZWFzaW5nKTsKKyAg
fSwKKworICBuZXh0OiBmdW5jdGlvbiAodGltZSwgZWFzaW5nKSB7CisgICAgdmFyIHggPSB0aGlz
LmN1cnJlbnRQYWdlLnBhZ2VYLAorICAgICAgeSA9IHRoaXMuY3VycmVudFBhZ2UucGFnZVk7CisK
KyAgICB4Kys7CisKKyAgICBpZiAoIHggPj0gdGhpcy5wYWdlcy5sZW5ndGggJiYgdGhpcy5oYXNW
ZXJ0aWNhbFNjcm9sbCApIHsKKyAgICAgIHggPSAwOworICAgICAgeSsrOworICAgIH0KKworICAg
IHRoaXMuZ29Ub1BhZ2UoeCwgeSwgdGltZSwgZWFzaW5nKTsKKyAgfSwKKworICBwcmV2OiBmdW5j
dGlvbiAodGltZSwgZWFzaW5nKSB7CisgICAgdmFyIHggPSB0aGlzLmN1cnJlbnRQYWdlLnBhZ2VY
LAorICAgICAgeSA9IHRoaXMuY3VycmVudFBhZ2UucGFnZVk7CisKKyAgICB4LS07CisKKyAgICBp
ZiAoIHggPCAwICYmIHRoaXMuaGFzVmVydGljYWxTY3JvbGwgKSB7CisgICAgICB4ID0gMDsKKyAg
ICAgIHktLTsKKyAgICB9CisKKyAgICB0aGlzLmdvVG9QYWdlKHgsIHksIHRpbWUsIGVhc2luZyk7
CisgIH0sCisKKyAgX2luaXRLZXlzOiBmdW5jdGlvbiAoZSkgeworICAgIC8vIGRlZmF1bHQga2V5
IGJpbmRpbmdzCisgICAgdmFyIGtleXMgPSB7CisgICAgICBwYWdlVXA6IDMzLAorICAgICAgcGFn
ZURvd246IDM0LAorICAgICAgZW5kOiAzNSwKKyAgICAgIGhvbWU6IDM2LAorICAgICAgbGVmdDog
MzcsCisgICAgICB1cDogMzgsCisgICAgICByaWdodDogMzksCisgICAgICBkb3duOiA0MAorICAg
IH07CisgICAgdmFyIGk7CisKKyAgICAvLyBpZiB5b3UgZ2l2ZSBtZSBjaGFyYWN0ZXJzIEkgZ2l2
ZSB5b3Uga2V5Y29kZQorICAgIGlmICggdHlwZW9mIHRoaXMub3B0aW9ucy5rZXlCaW5kaW5ncyA9
PSAnb2JqZWN0JyApIHsKKyAgICAgIGZvciAoIGkgaW4gdGhpcy5vcHRpb25zLmtleUJpbmRpbmdz
ICkgeworICAgICAgICBpZiAoIHR5cGVvZiB0aGlzLm9wdGlvbnMua2V5QmluZGluZ3NbaV0gPT0g
J3N0cmluZycgKSB7CisgICAgICAgICAgdGhpcy5vcHRpb25zLmtleUJpbmRpbmdzW2ldID0gdGhp
cy5vcHRpb25zLmtleUJpbmRpbmdzW2ldLnRvVXBwZXJDYXNlKCkuY2hhckNvZGVBdCgwKTsKKyAg
ICAgICAgfQorICAgICAgfQorICAgIH0gZWxzZSB7CisgICAgICB0aGlzLm9wdGlvbnMua2V5Qmlu
ZGluZ3MgPSB7fTsKKyAgICB9CisKKyAgICBmb3IgKCBpIGluIGtleXMgKSB7CisgICAgICB0aGlz
Lm9wdGlvbnMua2V5QmluZGluZ3NbaV0gPSB0aGlzLm9wdGlvbnMua2V5QmluZGluZ3NbaV0gfHwg
a2V5c1tpXTsKKyAgICB9CisKKyAgICB1dGlscy5hZGRFdmVudCh3aW5kb3csICdrZXlkb3duJywg
dGhpcyk7CisKKyAgICB0aGlzLm9uKCdkZXN0cm95JywgZnVuY3Rpb24gKCkgeworICAgICAgdXRp
bHMucmVtb3ZlRXZlbnQod2luZG93LCAna2V5ZG93bicsIHRoaXMpOworICAgIH0pOworICB9LAor
CisgIF9rZXk6IGZ1bmN0aW9uIChlKSB7CisgICAgaWYgKCAhdGhpcy5lbmFibGVkICkgeworICAg
ICAgcmV0dXJuOworICAgIH0KKworICAgIHZhciBzbmFwID0gdGhpcy5vcHRpb25zLnNuYXAsIC8v
IHdlIGFyZSB1c2luZyB0aGlzIGFsb3QsIGJldHRlciB0byBjYWNoZSBpdAorICAgICAgbmV3WCA9
IHNuYXAgPyB0aGlzLmN1cnJlbnRQYWdlLnBhZ2VYIDogdGhpcy54LAorICAgICAgbmV3WSA9IHNu
YXAgPyB0aGlzLmN1cnJlbnRQYWdlLnBhZ2VZIDogdGhpcy55LAorICAgICAgbm93ID0gdXRpbHMu
Z2V0VGltZSgpLAorICAgICAgcHJldlRpbWUgPSB0aGlzLmtleVRpbWUgfHwgMCwKKyAgICAgIGFj
Y2VsZXJhdGlvbiA9IDAuMjUwLAorICAgICAgcG9zOworCisgICAgaWYgKCB0aGlzLm9wdGlvbnMu
dXNlVHJhbnNpdGlvbiAmJiB0aGlzLmlzSW5UcmFuc2l0aW9uICkgeworICAgICAgcG9zID0gdGhp
cy5nZXRDb21wdXRlZFBvc2l0aW9uKCk7CisKKyAgICAgIHRoaXMuX3RyYW5zbGF0ZShNYXRoLnJv
dW5kKHBvcy54KSwgTWF0aC5yb3VuZChwb3MueSkpOworICAgICAgdGhpcy5pc0luVHJhbnNpdGlv
biA9IGZhbHNlOworICAgIH0KKworICAgIHRoaXMua2V5QWNjZWxlcmF0aW9uID0gbm93IC0gcHJl
dlRpbWUgPCAyMDAgPyBNYXRoLm1pbih0aGlzLmtleUFjY2VsZXJhdGlvbiArIGFjY2VsZXJhdGlv
biwgNTApIDogMDsKKworICAgIHN3aXRjaCAoIGUua2V5Q29kZSApIHsKKyAgICAgIGNhc2UgdGhp
cy5vcHRpb25zLmtleUJpbmRpbmdzLnBhZ2VVcDoKKyAgICAgICAgaWYgKCB0aGlzLmhhc0hvcml6
b250YWxTY3JvbGwgJiYgIXRoaXMuaGFzVmVydGljYWxTY3JvbGwgKSB7CisgICAgICAgICAgbmV3
WCArPSBzbmFwID8gMSA6IHRoaXMud3JhcHBlcldpZHRoOworICAgICAgICB9IGVsc2UgeworICAg
ICAgICAgIG5ld1kgKz0gc25hcCA/IDEgOiB0aGlzLndyYXBwZXJIZWlnaHQ7CisgICAgICAgIH0K
KyAgICAgICAgYnJlYWs7CisgICAgICBjYXNlIHRoaXMub3B0aW9ucy5rZXlCaW5kaW5ncy5wYWdl
RG93bjoKKyAgICAgICAgaWYgKCB0aGlzLmhhc0hvcml6b250YWxTY3JvbGwgJiYgIXRoaXMuaGFz
VmVydGljYWxTY3JvbGwgKSB7CisgICAgICAgICAgbmV3WCAtPSBzbmFwID8gMSA6IHRoaXMud3Jh
cHBlcldpZHRoOworICAgICAgICB9IGVsc2UgeworICAgICAgICAgIG5ld1kgLT0gc25hcCA/IDEg
OiB0aGlzLndyYXBwZXJIZWlnaHQ7CisgICAgICAgIH0KKyAgICAgICAgYnJlYWs7CisgICAgICBj
YXNlIHRoaXMub3B0aW9ucy5rZXlCaW5kaW5ncy5lbmQ6CisgICAgICAgIG5ld1ggPSBzbmFwID8g
dGhpcy5wYWdlcy5sZW5ndGgtMSA6IHRoaXMubWF4U2Nyb2xsWDsKKyAgICAgICAgbmV3WSA9IHNu
YXAgPyB0aGlzLnBhZ2VzWzBdLmxlbmd0aC0xIDogdGhpcy5tYXhTY3JvbGxZOworICAgICAgICBi
cmVhazsKKyAgICAgIGNhc2UgdGhpcy5vcHRpb25zLmtleUJpbmRpbmdzLmhvbWU6CisgICAgICAg
IG5ld1ggPSAwOworICAgICAgICBuZXdZID0gMDsKKyAgICAgICAgYnJlYWs7CisgICAgICBjYXNl
IHRoaXMub3B0aW9ucy5rZXlCaW5kaW5ncy5sZWZ0OgorICAgICAgICBuZXdYICs9IHNuYXAgPyAt
MSA6IDUgKyB0aGlzLmtleUFjY2VsZXJhdGlvbj4+MDsKKyAgICAgICAgYnJlYWs7CisgICAgICBj
YXNlIHRoaXMub3B0aW9ucy5rZXlCaW5kaW5ncy51cDoKKyAgICAgICAgbmV3WSArPSBzbmFwID8g
MSA6IDUgKyB0aGlzLmtleUFjY2VsZXJhdGlvbj4+MDsKKyAgICAgICAgYnJlYWs7CisgICAgICBj
YXNlIHRoaXMub3B0aW9ucy5rZXlCaW5kaW5ncy5yaWdodDoKKyAgICAgICAgbmV3WCAtPSBzbmFw
ID8gLTEgOiA1ICsgdGhpcy5rZXlBY2NlbGVyYXRpb24+PjA7CisgICAgICAgIGJyZWFrOworICAg
ICAgY2FzZSB0aGlzLm9wdGlvbnMua2V5QmluZGluZ3MuZG93bjoKKyAgICAgICAgbmV3WSAtPSBz
bmFwID8gMSA6IDUgKyB0aGlzLmtleUFjY2VsZXJhdGlvbj4+MDsKKyAgICAgICAgYnJlYWs7Cisg
ICAgICBkZWZhdWx0OgorICAgICAgICByZXR1cm47CisgICAgfQorCisgICAgaWYgKCBzbmFwICkg
eworICAgICAgdGhpcy5nb1RvUGFnZShuZXdYLCBuZXdZKTsKKyAgICAgIHJldHVybjsKKyAgICB9
CisKKyAgICBpZiAoIG5ld1ggPiAwICkgeworICAgICAgbmV3WCA9IDA7CisgICAgICB0aGlzLmtl
eUFjY2VsZXJhdGlvbiA9IDA7CisgICAgfSBlbHNlIGlmICggbmV3WCA8IHRoaXMubWF4U2Nyb2xs
WCApIHsKKyAgICAgIG5ld1ggPSB0aGlzLm1heFNjcm9sbFg7CisgICAgICB0aGlzLmtleUFjY2Vs
ZXJhdGlvbiA9IDA7CisgICAgfQorCisgICAgaWYgKCBuZXdZID4gMCApIHsKKyAgICAgIG5ld1kg
PSAwOworICAgICAgdGhpcy5rZXlBY2NlbGVyYXRpb24gPSAwOworICAgIH0gZWxzZSBpZiAoIG5l
d1kgPCB0aGlzLm1heFNjcm9sbFkgKSB7CisgICAgICBuZXdZID0gdGhpcy5tYXhTY3JvbGxZOwor
ICAgICAgdGhpcy5rZXlBY2NlbGVyYXRpb24gPSAwOworICAgIH0KKworICAgIHRoaXMuc2Nyb2xs
VG8obmV3WCwgbmV3WSwgMCk7CisKKyAgICB0aGlzLmtleVRpbWUgPSBub3c7CisgIH0sCisKKyAg
X2FuaW1hdGU6IGZ1bmN0aW9uIChkZXN0WCwgZGVzdFksIGR1cmF0aW9uLCBlYXNpbmdGbikgewor
ICAgIHZhciB0aGF0ID0gdGhpcywKKyAgICAgIHN0YXJ0WCA9IHRoaXMueCwKKyAgICAgIHN0YXJ0
WSA9IHRoaXMueSwKKyAgICAgIHN0YXJ0VGltZSA9IHV0aWxzLmdldFRpbWUoKSwKKyAgICAgIGRl
c3RUaW1lID0gc3RhcnRUaW1lICsgZHVyYXRpb247CisKKyAgICBmdW5jdGlvbiBzdGVwICgpIHsK
KyAgICAgIHZhciBub3cgPSB1dGlscy5nZXRUaW1lKCksCisgICAgICAgIG5ld1gsIG5ld1ksCisg
ICAgICAgIGVhc2luZzsKKworICAgICAgaWYgKCBub3cgPj0gZGVzdFRpbWUgKSB7CisgICAgICAg
IHRoYXQuaXNBbmltYXRpbmcgPSBmYWxzZTsKKyAgICAgICAgdGhhdC5fdHJhbnNsYXRlKGRlc3RY
LCBkZXN0WSk7CisKKyAgICAgICAgaWYgKCAhdGhhdC5yZXNldFBvc2l0aW9uKHRoYXQub3B0aW9u
cy5ib3VuY2VUaW1lKSApIHsKKyAgICAgICAgICB0aGF0Ll9leGVjRXZlbnQoJ3Njcm9sbEVuZCcp
OworICAgICAgICB9CisKKyAgICAgICAgcmV0dXJuOworICAgICAgfQorCisgICAgICBub3cgPSAo
IG5vdyAtIHN0YXJ0VGltZSApIC8gZHVyYXRpb247CisgICAgICBlYXNpbmcgPSBlYXNpbmdGbihu
b3cpOworICAgICAgbmV3WCA9ICggZGVzdFggLSBzdGFydFggKSAqIGVhc2luZyArIHN0YXJ0WDsK
KyAgICAgIG5ld1kgPSAoIGRlc3RZIC0gc3RhcnRZICkgKiBlYXNpbmcgKyBzdGFydFk7CisgICAg
ICB0aGF0Ll90cmFuc2xhdGUobmV3WCwgbmV3WSk7CisKKyAgICAgIGlmICggdGhhdC5pc0FuaW1h
dGluZyApIHsKKyAgICAgICAgckFGKHN0ZXApOworICAgICAgfQorICAgIH0KKworICAgIHRoaXMu
aXNBbmltYXRpbmcgPSB0cnVlOworICAgIHN0ZXAoKTsKKyAgfSwKKyAgaGFuZGxlRXZlbnQ6IGZ1
bmN0aW9uIChlKSB7CisgICAgc3dpdGNoICggZS50eXBlICkgeworICAgICAgY2FzZSAndG91Y2hz
dGFydCc6CisgICAgICBjYXNlICdwb2ludGVyZG93bic6CisgICAgICBjYXNlICdNU1BvaW50ZXJE
b3duJzoKKyAgICAgIGNhc2UgJ21vdXNlZG93bic6CisgICAgICAgIHRoaXMuX3N0YXJ0KGUpOwor
ICAgICAgICBicmVhazsKKyAgICAgIGNhc2UgJ3RvdWNobW92ZSc6CisgICAgICBjYXNlICdwb2lu
dGVybW92ZSc6CisgICAgICBjYXNlICdNU1BvaW50ZXJNb3ZlJzoKKyAgICAgIGNhc2UgJ21vdXNl
bW92ZSc6CisgICAgICAgIHRoaXMuX21vdmUoZSk7CisgICAgICAgIGJyZWFrOworICAgICAgY2Fz
ZSAndG91Y2hlbmQnOgorICAgICAgY2FzZSAncG9pbnRlcnVwJzoKKyAgICAgIGNhc2UgJ01TUG9p
bnRlclVwJzoKKyAgICAgIGNhc2UgJ21vdXNldXAnOgorICAgICAgY2FzZSAndG91Y2hjYW5jZWwn
OgorICAgICAgY2FzZSAncG9pbnRlcmNhbmNlbCc6CisgICAgICBjYXNlICdNU1BvaW50ZXJDYW5j
ZWwnOgorICAgICAgY2FzZSAnbW91c2VjYW5jZWwnOgorICAgICAgICB0aGlzLl9lbmQoZSk7Cisg
ICAgICAgIGJyZWFrOworICAgICAgY2FzZSAnb3JpZW50YXRpb25jaGFuZ2UnOgorICAgICAgY2Fz
ZSAncmVzaXplJzoKKyAgICAgICAgdGhpcy5fcmVzaXplKCk7CisgICAgICAgIGJyZWFrOworICAg
ICAgY2FzZSAndHJhbnNpdGlvbmVuZCc6CisgICAgICBjYXNlICd3ZWJraXRUcmFuc2l0aW9uRW5k
JzoKKyAgICAgIGNhc2UgJ29UcmFuc2l0aW9uRW5kJzoKKyAgICAgIGNhc2UgJ01TVHJhbnNpdGlv
bkVuZCc6CisgICAgICAgIHRoaXMuX3RyYW5zaXRpb25FbmQoZSk7CisgICAgICAgIGJyZWFrOwor
ICAgICAgY2FzZSAnd2hlZWwnOgorICAgICAgY2FzZSAnRE9NTW91c2VTY3JvbGwnOgorICAgICAg
Y2FzZSAnbW91c2V3aGVlbCc6CisgICAgICAgIHRoaXMuX3doZWVsKGUpOworICAgICAgICBicmVh
azsKKyAgICAgIGNhc2UgJ2tleWRvd24nOgorICAgICAgICB0aGlzLl9rZXkoZSk7CisgICAgICAg
IGJyZWFrOworICAgICAgY2FzZSAnY2xpY2snOgorICAgICAgICBpZiAoICFlLl9jb25zdHJ1Y3Rl
ZCApIHsKKyAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CisgICAgICAgICAgZS5zdG9wUHJv
cGFnYXRpb24oKTsKKyAgICAgICAgfQorICAgICAgICBicmVhazsKKyAgICB9CisgIH0KK307Citm
dW5jdGlvbiBjcmVhdGVEZWZhdWx0U2Nyb2xsYmFyIChkaXJlY3Rpb24sIGludGVyYWN0aXZlLCB0
eXBlKSB7CisgIHZhciBzY3JvbGxiYXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSwK
KyAgICBpbmRpY2F0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKKworICBpZiAo
IHR5cGUgPT09IHRydWUgKSB7CisgICAgc2Nyb2xsYmFyLnN0eWxlLmNzc1RleHQgPSAncG9zaXRp
b246YWJzb2x1dGU7ei1pbmRleDo5OTk5JzsKKyAgICBpbmRpY2F0b3Iuc3R5bGUuY3NzVGV4dCA9
ICctd2Via2l0LWJveC1zaXppbmc6Ym9yZGVyLWJveDstbW96LWJveC1zaXppbmc6Ym9yZGVyLWJv
eDtib3gtc2l6aW5nOmJvcmRlci1ib3g7cG9zaXRpb246YWJzb2x1dGU7YmFja2dyb3VuZDpyZ2Jh
KDAsMCwwLDAuNSk7Ym9yZGVyOjFweCBzb2xpZCByZ2JhKDI1NSwyNTUsMjU1LDAuOSk7Ym9yZGVy
LXJhZGl1czozcHgnOworICB9CisKKyAgaW5kaWNhdG9yLmNsYXNzTmFtZSA9ICdpU2Nyb2xsSW5k
aWNhdG9yJzsKKworICBpZiAoIGRpcmVjdGlvbiA9PSAnaCcgKSB7CisgICAgaWYgKCB0eXBlID09
PSB0cnVlICkgeworICAgICAgc2Nyb2xsYmFyLnN0eWxlLmNzc1RleHQgKz0gJztoZWlnaHQ6N3B4
O2xlZnQ6MnB4O3JpZ2h0OjJweDtib3R0b206MCc7CisgICAgICBpbmRpY2F0b3Iuc3R5bGUuaGVp
Z2h0ID0gJzEwMCUnOworICAgIH0KKyAgICBzY3JvbGxiYXIuY2xhc3NOYW1lID0gJ2lTY3JvbGxI
b3Jpem9udGFsU2Nyb2xsYmFyJzsKKyAgfSBlbHNlIHsKKyAgICBpZiAoIHR5cGUgPT09IHRydWUg
KSB7CisgICAgICBzY3JvbGxiYXIuc3R5bGUuY3NzVGV4dCArPSAnO3dpZHRoOjdweDtib3R0b206
MnB4O3RvcDoycHg7cmlnaHQ6MXB4JzsKKyAgICAgIGluZGljYXRvci5zdHlsZS53aWR0aCA9ICcx
MDAlJzsKKyAgICB9CisgICAgc2Nyb2xsYmFyLmNsYXNzTmFtZSA9ICdpU2Nyb2xsVmVydGljYWxT
Y3JvbGxiYXInOworICB9CisKKyAgc2Nyb2xsYmFyLnN0eWxlLmNzc1RleHQgKz0gJztvdmVyZmxv
dzpoaWRkZW4nOworCisgIGlmICggIWludGVyYWN0aXZlICkgeworICAgIHNjcm9sbGJhci5zdHls
ZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnOworICB9CisKKyAgc2Nyb2xsYmFyLmFwcGVuZENoaWxk
KGluZGljYXRvcik7CisKKyAgcmV0dXJuIHNjcm9sbGJhcjsKK30KKworZnVuY3Rpb24gSW5kaWNh
dG9yIChzY3JvbGxlciwgb3B0aW9ucykgeworICB0aGlzLndyYXBwZXIgPSB0eXBlb2Ygb3B0aW9u
cy5lbCA9PSAnc3RyaW5nJyA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iob3B0aW9ucy5lbCkgOiBv
cHRpb25zLmVsOworICB0aGlzLndyYXBwZXJTdHlsZSA9IHRoaXMud3JhcHBlci5zdHlsZTsKKyAg
dGhpcy5pbmRpY2F0b3IgPSB0aGlzLndyYXBwZXIuY2hpbGRyZW5bMF07CisgIHRoaXMuaW5kaWNh
dG9yU3R5bGUgPSB0aGlzLmluZGljYXRvci5zdHlsZTsKKyAgdGhpcy5zY3JvbGxlciA9IHNjcm9s
bGVyOworCisgIHRoaXMub3B0aW9ucyA9IHsKKyAgICBsaXN0ZW5YOiB0cnVlLAorICAgIGxpc3Rl
blk6IHRydWUsCisgICAgaW50ZXJhY3RpdmU6IGZhbHNlLAorICAgIHJlc2l6ZTogdHJ1ZSwKKyAg
ICBkZWZhdWx0U2Nyb2xsYmFyczogZmFsc2UsCisgICAgc2hyaW5rOiBmYWxzZSwKKyAgICBmYWRl
OiBmYWxzZSwKKyAgICBzcGVlZFJhdGlvWDogMCwKKyAgICBzcGVlZFJhdGlvWTogMAorICB9Owor
CisgIGZvciAoIHZhciBpIGluIG9wdGlvbnMgKSB7CisgICAgdGhpcy5vcHRpb25zW2ldID0gb3B0
aW9uc1tpXTsKKyAgfQorCisgIHRoaXMuc2l6ZVJhdGlvWCA9IDE7CisgIHRoaXMuc2l6ZVJhdGlv
WSA9IDE7CisgIHRoaXMubWF4UG9zWCA9IDA7CisgIHRoaXMubWF4UG9zWSA9IDA7CisKKyAgaWYg
KCB0aGlzLm9wdGlvbnMuaW50ZXJhY3RpdmUgKSB7CisgICAgaWYgKCAhdGhpcy5vcHRpb25zLmRp
c2FibGVUb3VjaCApIHsKKyAgICAgIHV0aWxzLmFkZEV2ZW50KHRoaXMuaW5kaWNhdG9yLCAndG91
Y2hzdGFydCcsIHRoaXMpOworICAgICAgdXRpbHMuYWRkRXZlbnQod2luZG93LCAndG91Y2hlbmQn
LCB0aGlzKTsKKyAgICB9CisgICAgaWYgKCAhdGhpcy5vcHRpb25zLmRpc2FibGVQb2ludGVyICkg
eworICAgICAgdXRpbHMuYWRkRXZlbnQodGhpcy5pbmRpY2F0b3IsIHV0aWxzLnByZWZpeFBvaW50
ZXJFdmVudCgncG9pbnRlcmRvd24nKSwgdGhpcyk7CisgICAgICB1dGlscy5hZGRFdmVudCh3aW5k
b3csIHV0aWxzLnByZWZpeFBvaW50ZXJFdmVudCgncG9pbnRlcnVwJyksIHRoaXMpOworICAgIH0K
KyAgICBpZiAoICF0aGlzLm9wdGlvbnMuZGlzYWJsZU1vdXNlICkgeworICAgICAgdXRpbHMuYWRk
RXZlbnQodGhpcy5pbmRpY2F0b3IsICdtb3VzZWRvd24nLCB0aGlzKTsKKyAgICAgIHV0aWxzLmFk
ZEV2ZW50KHdpbmRvdywgJ21vdXNldXAnLCB0aGlzKTsKKyAgICB9CisgIH0KKworICBpZiAoIHRo
aXMub3B0aW9ucy5mYWRlICkgeworICAgIHRoaXMud3JhcHBlclN0eWxlW3V0aWxzLnN0eWxlLnRy
YW5zZm9ybV0gPSB0aGlzLnNjcm9sbGVyLnRyYW5zbGF0ZVo7CisgICAgdGhpcy53cmFwcGVyU3R5
bGVbdXRpbHMuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uXSA9IHV0aWxzLmlzQmFkQW5kcm9pZCA/
ICcwLjAwMXMnIDogJzBtcyc7CisgICAgdGhpcy53cmFwcGVyU3R5bGUub3BhY2l0eSA9ICcwJzsK
KyAgfQorfQorCitJbmRpY2F0b3IucHJvdG90eXBlID0geworICBoYW5kbGVFdmVudDogZnVuY3Rp
b24gKGUpIHsKKyAgICBzd2l0Y2ggKCBlLnR5cGUgKSB7CisgICAgICBjYXNlICd0b3VjaHN0YXJ0
JzoKKyAgICAgIGNhc2UgJ3BvaW50ZXJkb3duJzoKKyAgICAgIGNhc2UgJ01TUG9pbnRlckRvd24n
OgorICAgICAgY2FzZSAnbW91c2Vkb3duJzoKKyAgICAgICAgdGhpcy5fc3RhcnQoZSk7CisgICAg
ICAgIGJyZWFrOworICAgICAgY2FzZSAndG91Y2htb3ZlJzoKKyAgICAgIGNhc2UgJ3BvaW50ZXJt
b3ZlJzoKKyAgICAgIGNhc2UgJ01TUG9pbnRlck1vdmUnOgorICAgICAgY2FzZSAnbW91c2Vtb3Zl
JzoKKyAgICAgICAgdGhpcy5fbW92ZShlKTsKKyAgICAgICAgYnJlYWs7CisgICAgICBjYXNlICd0
b3VjaGVuZCc6CisgICAgICBjYXNlICdwb2ludGVydXAnOgorICAgICAgY2FzZSAnTVNQb2ludGVy
VXAnOgorICAgICAgY2FzZSAnbW91c2V1cCc6CisgICAgICBjYXNlICd0b3VjaGNhbmNlbCc6Cisg
ICAgICBjYXNlICdwb2ludGVyY2FuY2VsJzoKKyAgICAgIGNhc2UgJ01TUG9pbnRlckNhbmNlbCc6
CisgICAgICBjYXNlICdtb3VzZWNhbmNlbCc6CisgICAgICAgIHRoaXMuX2VuZChlKTsKKyAgICAg
ICAgYnJlYWs7CisgICAgfQorICB9LAorCisgIGRlc3Ryb3k6IGZ1bmN0aW9uICgpIHsKKyAgICBp
ZiAoIHRoaXMub3B0aW9ucy5pbnRlcmFjdGl2ZSApIHsKKyAgICAgIHV0aWxzLnJlbW92ZUV2ZW50
KHRoaXMuaW5kaWNhdG9yLCAndG91Y2hzdGFydCcsIHRoaXMpOworICAgICAgdXRpbHMucmVtb3Zl
RXZlbnQodGhpcy5pbmRpY2F0b3IsIHV0aWxzLnByZWZpeFBvaW50ZXJFdmVudCgncG9pbnRlcmRv
d24nKSwgdGhpcyk7CisgICAgICB1dGlscy5yZW1vdmVFdmVudCh0aGlzLmluZGljYXRvciwgJ21v
dXNlZG93bicsIHRoaXMpOworCisgICAgICB1dGlscy5yZW1vdmVFdmVudCh3aW5kb3csICd0b3Vj
aG1vdmUnLCB0aGlzKTsKKyAgICAgIHV0aWxzLnJlbW92ZUV2ZW50KHdpbmRvdywgdXRpbHMucHJl
Zml4UG9pbnRlckV2ZW50KCdwb2ludGVybW92ZScpLCB0aGlzKTsKKyAgICAgIHV0aWxzLnJlbW92
ZUV2ZW50KHdpbmRvdywgJ21vdXNlbW92ZScsIHRoaXMpOworCisgICAgICB1dGlscy5yZW1vdmVF
dmVudCh3aW5kb3csICd0b3VjaGVuZCcsIHRoaXMpOworICAgICAgdXRpbHMucmVtb3ZlRXZlbnQo
d2luZG93LCB1dGlscy5wcmVmaXhQb2ludGVyRXZlbnQoJ3BvaW50ZXJ1cCcpLCB0aGlzKTsKKyAg
ICAgIHV0aWxzLnJlbW92ZUV2ZW50KHdpbmRvdywgJ21vdXNldXAnLCB0aGlzKTsKKyAgICB9CisK
KyAgICBpZiAoIHRoaXMub3B0aW9ucy5kZWZhdWx0U2Nyb2xsYmFycyApIHsKKyAgICAgIHRoaXMu
d3JhcHBlci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMud3JhcHBlcik7CisgICAgfQorICB9
LAorCisgIF9zdGFydDogZnVuY3Rpb24gKGUpIHsKKyAgICB2YXIgcG9pbnQgPSBlLnRvdWNoZXMg
PyBlLnRvdWNoZXNbMF0gOiBlOworCisgICAgZS5wcmV2ZW50RGVmYXVsdCgpOworICAgIGUuc3Rv
cFByb3BhZ2F0aW9uKCk7CisKKyAgICB0aGlzLnRyYW5zaXRpb25UaW1lKCk7CisKKyAgICB0aGlz
LmluaXRpYXRlZCA9IHRydWU7CisgICAgdGhpcy5tb3ZlZCA9IGZhbHNlOworICAgIHRoaXMubGFz
dFBvaW50WCA9IHBvaW50LnBhZ2VYOworICAgIHRoaXMubGFzdFBvaW50WSA9IHBvaW50LnBhZ2VZ
OworCisgICAgdGhpcy5zdGFydFRpbWUgID0gdXRpbHMuZ2V0VGltZSgpOworCisgICAgaWYgKCAh
dGhpcy5vcHRpb25zLmRpc2FibGVUb3VjaCApIHsKKyAgICAgIHV0aWxzLmFkZEV2ZW50KHdpbmRv
dywgJ3RvdWNobW92ZScsIHRoaXMpOworICAgIH0KKyAgICBpZiAoICF0aGlzLm9wdGlvbnMuZGlz
YWJsZVBvaW50ZXIgKSB7CisgICAgICB1dGlscy5hZGRFdmVudCh3aW5kb3csIHV0aWxzLnByZWZp
eFBvaW50ZXJFdmVudCgncG9pbnRlcm1vdmUnKSwgdGhpcyk7CisgICAgfQorICAgIGlmICggIXRo
aXMub3B0aW9ucy5kaXNhYmxlTW91c2UgKSB7CisgICAgICB1dGlscy5hZGRFdmVudCh3aW5kb3cs
ICdtb3VzZW1vdmUnLCB0aGlzKTsKKyAgICB9CisKKyAgICB0aGlzLnNjcm9sbGVyLl9leGVjRXZl
bnQoJ2JlZm9yZVNjcm9sbFN0YXJ0Jyk7CisgIH0sCisKKyAgX21vdmU6IGZ1bmN0aW9uIChlKSB7
CisgICAgdmFyIHBvaW50ID0gZS50b3VjaGVzID8gZS50b3VjaGVzWzBdIDogZSwKKyAgICAgIGRl
bHRhWCwgZGVsdGFZLAorICAgICAgbmV3WCwgbmV3WSwKKyAgICAgIHRpbWVzdGFtcCA9IHV0aWxz
LmdldFRpbWUoKTsKKworICAgIGlmICggIXRoaXMubW92ZWQgKSB7CisgICAgICB0aGlzLnNjcm9s
bGVyLl9leGVjRXZlbnQoJ3Njcm9sbFN0YXJ0Jyk7CisgICAgfQorCisgICAgdGhpcy5tb3ZlZCA9
IHRydWU7CisKKyAgICBkZWx0YVggPSBwb2ludC5wYWdlWCAtIHRoaXMubGFzdFBvaW50WDsKKyAg
ICB0aGlzLmxhc3RQb2ludFggPSBwb2ludC5wYWdlWDsKKworICAgIGRlbHRhWSA9IHBvaW50LnBh
Z2VZIC0gdGhpcy5sYXN0UG9pbnRZOworICAgIHRoaXMubGFzdFBvaW50WSA9IHBvaW50LnBhZ2VZ
OworCisgICAgbmV3WCA9IHRoaXMueCArIGRlbHRhWDsKKyAgICBuZXdZID0gdGhpcy55ICsgZGVs
dGFZOworCisgICAgdGhpcy5fcG9zKG5ld1gsIG5ld1kpOworCisvLyBJTlNFUlQgUE9JTlQ6IGlu
ZGljYXRvci5fbW92ZQorCisgICAgZS5wcmV2ZW50RGVmYXVsdCgpOworICAgIGUuc3RvcFByb3Bh
Z2F0aW9uKCk7CisgIH0sCisKKyAgX2VuZDogZnVuY3Rpb24gKGUpIHsKKyAgICBpZiAoICF0aGlz
LmluaXRpYXRlZCApIHsKKyAgICAgIHJldHVybjsKKyAgICB9CisKKyAgICB0aGlzLmluaXRpYXRl
ZCA9IGZhbHNlOworCisgICAgZS5wcmV2ZW50RGVmYXVsdCgpOworICAgIGUuc3RvcFByb3BhZ2F0
aW9uKCk7CisKKyAgICB1dGlscy5yZW1vdmVFdmVudCh3aW5kb3csICd0b3VjaG1vdmUnLCB0aGlz
KTsKKyAgICB1dGlscy5yZW1vdmVFdmVudCh3aW5kb3csIHV0aWxzLnByZWZpeFBvaW50ZXJFdmVu
dCgncG9pbnRlcm1vdmUnKSwgdGhpcyk7CisgICAgdXRpbHMucmVtb3ZlRXZlbnQod2luZG93LCAn
bW91c2Vtb3ZlJywgdGhpcyk7CisKKyAgICBpZiAoIHRoaXMuc2Nyb2xsZXIub3B0aW9ucy5zbmFw
ICkgeworICAgICAgdmFyIHNuYXAgPSB0aGlzLnNjcm9sbGVyLl9uZWFyZXN0U25hcCh0aGlzLnNj
cm9sbGVyLngsIHRoaXMuc2Nyb2xsZXIueSk7CisKKyAgICAgIHZhciB0aW1lID0gdGhpcy5vcHRp
b25zLnNuYXBTcGVlZCB8fCBNYXRoLm1heCgKKyAgICAgICAgICBNYXRoLm1heCgKKyAgICAgICAg
ICAgIE1hdGgubWluKE1hdGguYWJzKHRoaXMuc2Nyb2xsZXIueCAtIHNuYXAueCksIDEwMDApLAor
ICAgICAgICAgICAgTWF0aC5taW4oTWF0aC5hYnModGhpcy5zY3JvbGxlci55IC0gc25hcC55KSwg
MTAwMCkKKyAgICAgICAgICApLCAzMDApOworCisgICAgICBpZiAoIHRoaXMuc2Nyb2xsZXIueCAh
PSBzbmFwLnggfHwgdGhpcy5zY3JvbGxlci55ICE9IHNuYXAueSApIHsKKyAgICAgICAgdGhpcy5z
Y3JvbGxlci5kaXJlY3Rpb25YID0gMDsKKyAgICAgICAgdGhpcy5zY3JvbGxlci5kaXJlY3Rpb25Z
ID0gMDsKKyAgICAgICAgdGhpcy5zY3JvbGxlci5jdXJyZW50UGFnZSA9IHNuYXA7CisgICAgICAg
IHRoaXMuc2Nyb2xsZXIuc2Nyb2xsVG8oc25hcC54LCBzbmFwLnksIHRpbWUsIHRoaXMuc2Nyb2xs
ZXIub3B0aW9ucy5ib3VuY2VFYXNpbmcpOworICAgICAgfQorICAgIH0KKworICAgIGlmICggdGhp
cy5tb3ZlZCApIHsKKyAgICAgIHRoaXMuc2Nyb2xsZXIuX2V4ZWNFdmVudCgnc2Nyb2xsRW5kJyk7
CisgICAgfQorICB9LAorCisgIHRyYW5zaXRpb25UaW1lOiBmdW5jdGlvbiAodGltZSkgeworICAg
IHRpbWUgPSB0aW1lIHx8IDA7CisgICAgdGhpcy5pbmRpY2F0b3JTdHlsZVt1dGlscy5zdHlsZS50
cmFuc2l0aW9uRHVyYXRpb25dID0gdGltZSArICdtcyc7CisKKyAgICBpZiAoICF0aW1lICYmIHV0
aWxzLmlzQmFkQW5kcm9pZCApIHsKKyAgICAgIHRoaXMuaW5kaWNhdG9yU3R5bGVbdXRpbHMuc3R5
bGUudHJhbnNpdGlvbkR1cmF0aW9uXSA9ICcwLjAwMXMnOworICAgIH0KKyAgfSwKKworICB0cmFu
c2l0aW9uVGltaW5nRnVuY3Rpb246IGZ1bmN0aW9uIChlYXNpbmcpIHsKKyAgICB0aGlzLmluZGlj
YXRvclN0eWxlW3V0aWxzLnN0eWxlLnRyYW5zaXRpb25UaW1pbmdGdW5jdGlvbl0gPSBlYXNpbmc7
CisgIH0sCisKKyAgcmVmcmVzaDogZnVuY3Rpb24gKCkgeworICAgIHRoaXMudHJhbnNpdGlvblRp
bWUoKTsKKworICAgIGlmICggdGhpcy5vcHRpb25zLmxpc3RlblggJiYgIXRoaXMub3B0aW9ucy5s
aXN0ZW5ZICkgeworICAgICAgdGhpcy5pbmRpY2F0b3JTdHlsZS5kaXNwbGF5ID0gdGhpcy5zY3Jv
bGxlci5oYXNIb3Jpem9udGFsU2Nyb2xsID8gJ2Jsb2NrJyA6ICdub25lJzsKKyAgICB9IGVsc2Ug
aWYgKCB0aGlzLm9wdGlvbnMubGlzdGVuWSAmJiAhdGhpcy5vcHRpb25zLmxpc3RlblggKSB7Cisg
ICAgICB0aGlzLmluZGljYXRvclN0eWxlLmRpc3BsYXkgPSB0aGlzLnNjcm9sbGVyLmhhc1ZlcnRp
Y2FsU2Nyb2xsID8gJ2Jsb2NrJyA6ICdub25lJzsKKyAgICB9IGVsc2UgeworICAgICAgdGhpcy5p
bmRpY2F0b3JTdHlsZS5kaXNwbGF5ID0gdGhpcy5zY3JvbGxlci5oYXNIb3Jpem9udGFsU2Nyb2xs
IHx8IHRoaXMuc2Nyb2xsZXIuaGFzVmVydGljYWxTY3JvbGwgPyAnYmxvY2snIDogJ25vbmUnOwor
ICAgIH0KKworICAgIGlmICggdGhpcy5zY3JvbGxlci5oYXNIb3Jpem9udGFsU2Nyb2xsICYmIHRo
aXMuc2Nyb2xsZXIuaGFzVmVydGljYWxTY3JvbGwgKSB7CisgICAgICB1dGlscy5hZGRDbGFzcyh0
aGlzLndyYXBwZXIsICdpU2Nyb2xsQm90aFNjcm9sbGJhcnMnKTsKKyAgICAgIHV0aWxzLnJlbW92
ZUNsYXNzKHRoaXMud3JhcHBlciwgJ2lTY3JvbGxMb25lU2Nyb2xsYmFyJyk7CisKKyAgICAgIGlm
ICggdGhpcy5vcHRpb25zLmRlZmF1bHRTY3JvbGxiYXJzICYmIHRoaXMub3B0aW9ucy5jdXN0b21T
dHlsZSApIHsKKyAgICAgICAgaWYgKCB0aGlzLm9wdGlvbnMubGlzdGVuWCApIHsKKyAgICAgICAg
ICB0aGlzLndyYXBwZXIuc3R5bGUucmlnaHQgPSAnOHB4JzsKKyAgICAgICAgfSBlbHNlIHsKKyAg
ICAgICAgICB0aGlzLndyYXBwZXIuc3R5bGUuYm90dG9tID0gJzhweCc7CisgICAgICAgIH0KKyAg
ICAgIH0KKyAgICB9IGVsc2UgeworICAgICAgdXRpbHMucmVtb3ZlQ2xhc3ModGhpcy53cmFwcGVy
LCAnaVNjcm9sbEJvdGhTY3JvbGxiYXJzJyk7CisgICAgICB1dGlscy5hZGRDbGFzcyh0aGlzLndy
YXBwZXIsICdpU2Nyb2xsTG9uZVNjcm9sbGJhcicpOworCisgICAgICBpZiAoIHRoaXMub3B0aW9u
cy5kZWZhdWx0U2Nyb2xsYmFycyAmJiB0aGlzLm9wdGlvbnMuY3VzdG9tU3R5bGUgKSB7CisgICAg
ICAgIGlmICggdGhpcy5vcHRpb25zLmxpc3RlblggKSB7CisgICAgICAgICAgdGhpcy53cmFwcGVy
LnN0eWxlLnJpZ2h0ID0gJzJweCc7CisgICAgICAgIH0gZWxzZSB7CisgICAgICAgICAgdGhpcy53
cmFwcGVyLnN0eWxlLmJvdHRvbSA9ICcycHgnOworICAgICAgICB9CisgICAgICB9CisgICAgfQor
CisgICAgdmFyIHIgPSB0aGlzLndyYXBwZXIub2Zmc2V0SGVpZ2h0OyAgLy8gZm9yY2UgcmVmcmVz
aAorCisgICAgaWYgKCB0aGlzLm9wdGlvbnMubGlzdGVuWCApIHsKKyAgICAgIHRoaXMud3JhcHBl
cldpZHRoID0gdGhpcy53cmFwcGVyLmNsaWVudFdpZHRoOworICAgICAgaWYgKCB0aGlzLm9wdGlv
bnMucmVzaXplICkgeworICAgICAgICB0aGlzLmluZGljYXRvcldpZHRoID0gTWF0aC5tYXgoTWF0
aC5yb3VuZCh0aGlzLndyYXBwZXJXaWR0aCAqIHRoaXMud3JhcHBlcldpZHRoIC8gKHRoaXMuc2Ny
b2xsZXIuc2Nyb2xsZXJXaWR0aCB8fCB0aGlzLndyYXBwZXJXaWR0aCB8fCAxKSksIDgpOworICAg
ICAgICB0aGlzLmluZGljYXRvclN0eWxlLndpZHRoID0gdGhpcy5pbmRpY2F0b3JXaWR0aCArICdw
eCc7CisgICAgICB9IGVsc2UgeworICAgICAgICB0aGlzLmluZGljYXRvcldpZHRoID0gdGhpcy5p
bmRpY2F0b3IuY2xpZW50V2lkdGg7CisgICAgICB9CisKKyAgICAgIHRoaXMubWF4UG9zWCA9IHRo
aXMud3JhcHBlcldpZHRoIC0gdGhpcy5pbmRpY2F0b3JXaWR0aDsKKworICAgICAgaWYgKCB0aGlz
Lm9wdGlvbnMuc2hyaW5rID09ICdjbGlwJyApIHsKKyAgICAgICAgdGhpcy5taW5Cb3VuZGFyeVgg
PSAtdGhpcy5pbmRpY2F0b3JXaWR0aCArIDg7CisgICAgICAgIHRoaXMubWF4Qm91bmRhcnlYID0g
dGhpcy53cmFwcGVyV2lkdGggLSA4OworICAgICAgfSBlbHNlIHsKKyAgICAgICAgdGhpcy5taW5C
b3VuZGFyeVggPSAwOworICAgICAgICB0aGlzLm1heEJvdW5kYXJ5WCA9IHRoaXMubWF4UG9zWDsK
KyAgICAgIH0KKworICAgICAgdGhpcy5zaXplUmF0aW9YID0gdGhpcy5vcHRpb25zLnNwZWVkUmF0
aW9YIHx8ICh0aGlzLnNjcm9sbGVyLm1heFNjcm9sbFggJiYgKHRoaXMubWF4UG9zWCAvIHRoaXMu
c2Nyb2xsZXIubWF4U2Nyb2xsWCkpOyAgCisgICAgfQorCisgICAgaWYgKCB0aGlzLm9wdGlvbnMu
bGlzdGVuWSApIHsKKyAgICAgIHRoaXMud3JhcHBlckhlaWdodCA9IHRoaXMud3JhcHBlci5jbGll
bnRIZWlnaHQ7CisgICAgICBpZiAoIHRoaXMub3B0aW9ucy5yZXNpemUgKSB7CisgICAgICAgIHRo
aXMuaW5kaWNhdG9ySGVpZ2h0ID0gTWF0aC5tYXgoTWF0aC5yb3VuZCh0aGlzLndyYXBwZXJIZWln
aHQgKiB0aGlzLndyYXBwZXJIZWlnaHQgLyAodGhpcy5zY3JvbGxlci5zY3JvbGxlckhlaWdodCB8
fCB0aGlzLndyYXBwZXJIZWlnaHQgfHwgMSkpLCA4KTsKKyAgICAgICAgdGhpcy5pbmRpY2F0b3JT
dHlsZS5oZWlnaHQgPSB0aGlzLmluZGljYXRvckhlaWdodCArICdweCc7CisgICAgICB9IGVsc2Ug
eworICAgICAgICB0aGlzLmluZGljYXRvckhlaWdodCA9IHRoaXMuaW5kaWNhdG9yLmNsaWVudEhl
aWdodDsKKyAgICAgIH0KKworICAgICAgdGhpcy5tYXhQb3NZID0gdGhpcy53cmFwcGVySGVpZ2h0
IC0gdGhpcy5pbmRpY2F0b3JIZWlnaHQ7CisKKyAgICAgIGlmICggdGhpcy5vcHRpb25zLnNocmlu
ayA9PSAnY2xpcCcgKSB7CisgICAgICAgIHRoaXMubWluQm91bmRhcnlZID0gLXRoaXMuaW5kaWNh
dG9ySGVpZ2h0ICsgODsKKyAgICAgICAgdGhpcy5tYXhCb3VuZGFyeVkgPSB0aGlzLndyYXBwZXJI
ZWlnaHQgLSA4OworICAgICAgfSBlbHNlIHsKKyAgICAgICAgdGhpcy5taW5Cb3VuZGFyeVkgPSAw
OworICAgICAgICB0aGlzLm1heEJvdW5kYXJ5WSA9IHRoaXMubWF4UG9zWTsKKyAgICAgIH0KKwor
ICAgICAgdGhpcy5tYXhQb3NZID0gdGhpcy53cmFwcGVySGVpZ2h0IC0gdGhpcy5pbmRpY2F0b3JI
ZWlnaHQ7CisgICAgICB0aGlzLnNpemVSYXRpb1kgPSB0aGlzLm9wdGlvbnMuc3BlZWRSYXRpb1kg
fHwgKHRoaXMuc2Nyb2xsZXIubWF4U2Nyb2xsWSAmJiAodGhpcy5tYXhQb3NZIC8gdGhpcy5zY3Jv
bGxlci5tYXhTY3JvbGxZKSk7CisgICAgfQorCisgICAgdGhpcy51cGRhdGVQb3NpdGlvbigpOwor
ICB9LAorCisgIHVwZGF0ZVBvc2l0aW9uOiBmdW5jdGlvbiAoKSB7CisgICAgdmFyIHggPSB0aGlz
Lm9wdGlvbnMubGlzdGVuWCAmJiBNYXRoLnJvdW5kKHRoaXMuc2l6ZVJhdGlvWCAqIHRoaXMuc2Ny
b2xsZXIueCkgfHwgMCwKKyAgICAgIHkgPSB0aGlzLm9wdGlvbnMubGlzdGVuWSAmJiBNYXRoLnJv
dW5kKHRoaXMuc2l6ZVJhdGlvWSAqIHRoaXMuc2Nyb2xsZXIueSkgfHwgMDsKKworICAgIGlmICgg
IXRoaXMub3B0aW9ucy5pZ25vcmVCb3VuZGFyaWVzICkgeworICAgICAgaWYgKCB4IDwgdGhpcy5t
aW5Cb3VuZGFyeVggKSB7CisgICAgICAgIGlmICggdGhpcy5vcHRpb25zLnNocmluayA9PSAnc2Nh
bGUnICkgeworICAgICAgICAgIHRoaXMud2lkdGggPSBNYXRoLm1heCh0aGlzLmluZGljYXRvcldp
ZHRoICsgeCwgOCk7CisgICAgICAgICAgdGhpcy5pbmRpY2F0b3JTdHlsZS53aWR0aCA9IHRoaXMu
d2lkdGggKyAncHgnOworICAgICAgICB9CisgICAgICAgIHggPSB0aGlzLm1pbkJvdW5kYXJ5WDsK
KyAgICAgIH0gZWxzZSBpZiAoIHggPiB0aGlzLm1heEJvdW5kYXJ5WCApIHsKKyAgICAgICAgaWYg
KCB0aGlzLm9wdGlvbnMuc2hyaW5rID09ICdzY2FsZScgKSB7CisgICAgICAgICAgdGhpcy53aWR0
aCA9IE1hdGgubWF4KHRoaXMuaW5kaWNhdG9yV2lkdGggLSAoeCAtIHRoaXMubWF4UG9zWCksIDgp
OworICAgICAgICAgIHRoaXMuaW5kaWNhdG9yU3R5bGUud2lkdGggPSB0aGlzLndpZHRoICsgJ3B4
JzsKKyAgICAgICAgICB4ID0gdGhpcy5tYXhQb3NYICsgdGhpcy5pbmRpY2F0b3JXaWR0aCAtIHRo
aXMud2lkdGg7CisgICAgICAgIH0gZWxzZSB7CisgICAgICAgICAgeCA9IHRoaXMubWF4Qm91bmRh
cnlYOworICAgICAgICB9CisgICAgICB9IGVsc2UgaWYgKCB0aGlzLm9wdGlvbnMuc2hyaW5rID09
ICdzY2FsZScgJiYgdGhpcy53aWR0aCAhPSB0aGlzLmluZGljYXRvcldpZHRoICkgeworICAgICAg
ICB0aGlzLndpZHRoID0gdGhpcy5pbmRpY2F0b3JXaWR0aDsKKyAgICAgICAgdGhpcy5pbmRpY2F0
b3JTdHlsZS53aWR0aCA9IHRoaXMud2lkdGggKyAncHgnOworICAgICAgfQorCisgICAgICBpZiAo
IHkgPCB0aGlzLm1pbkJvdW5kYXJ5WSApIHsKKyAgICAgICAgaWYgKCB0aGlzLm9wdGlvbnMuc2hy
aW5rID09ICdzY2FsZScgKSB7CisgICAgICAgICAgdGhpcy5oZWlnaHQgPSBNYXRoLm1heCh0aGlz
LmluZGljYXRvckhlaWdodCArIHkgKiAzLCA4KTsKKyAgICAgICAgICB0aGlzLmluZGljYXRvclN0
eWxlLmhlaWdodCA9IHRoaXMuaGVpZ2h0ICsgJ3B4JzsKKyAgICAgICAgfQorICAgICAgICB5ID0g
dGhpcy5taW5Cb3VuZGFyeVk7CisgICAgICB9IGVsc2UgaWYgKCB5ID4gdGhpcy5tYXhCb3VuZGFy
eVkgKSB7CisgICAgICAgIGlmICggdGhpcy5vcHRpb25zLnNocmluayA9PSAnc2NhbGUnICkgewor
ICAgICAgICAgIHRoaXMuaGVpZ2h0ID0gTWF0aC5tYXgodGhpcy5pbmRpY2F0b3JIZWlnaHQgLSAo
eSAtIHRoaXMubWF4UG9zWSkgKiAzLCA4KTsKKyAgICAgICAgICB0aGlzLmluZGljYXRvclN0eWxl
LmhlaWdodCA9IHRoaXMuaGVpZ2h0ICsgJ3B4JzsKKyAgICAgICAgICB5ID0gdGhpcy5tYXhQb3NZ
ICsgdGhpcy5pbmRpY2F0b3JIZWlnaHQgLSB0aGlzLmhlaWdodDsKKyAgICAgICAgfSBlbHNlIHsK
KyAgICAgICAgICB5ID0gdGhpcy5tYXhCb3VuZGFyeVk7CisgICAgICAgIH0KKyAgICAgIH0gZWxz
ZSBpZiAoIHRoaXMub3B0aW9ucy5zaHJpbmsgPT0gJ3NjYWxlJyAmJiB0aGlzLmhlaWdodCAhPSB0
aGlzLmluZGljYXRvckhlaWdodCApIHsKKyAgICAgICAgdGhpcy5oZWlnaHQgPSB0aGlzLmluZGlj
YXRvckhlaWdodDsKKyAgICAgICAgdGhpcy5pbmRpY2F0b3JTdHlsZS5oZWlnaHQgPSB0aGlzLmhl
aWdodCArICdweCc7CisgICAgICB9CisgICAgfQorCisgICAgdGhpcy54ID0geDsKKyAgICB0aGlz
LnkgPSB5OworCisgICAgaWYgKCB0aGlzLnNjcm9sbGVyLm9wdGlvbnMudXNlVHJhbnNmb3JtICkg
eworICAgICAgdGhpcy5pbmRpY2F0b3JTdHlsZVt1dGlscy5zdHlsZS50cmFuc2Zvcm1dID0gJ3Ry
YW5zbGF0ZSgnICsgeCArICdweCwnICsgeSArICdweCknICsgdGhpcy5zY3JvbGxlci50cmFuc2xh
dGVaOworICAgIH0gZWxzZSB7CisgICAgICB0aGlzLmluZGljYXRvclN0eWxlLmxlZnQgPSB4ICsg
J3B4JzsKKyAgICAgIHRoaXMuaW5kaWNhdG9yU3R5bGUudG9wID0geSArICdweCc7CisgICAgfQor
ICB9LAorCisgIF9wb3M6IGZ1bmN0aW9uICh4LCB5KSB7CisgICAgaWYgKCB4IDwgMCApIHsKKyAg
ICAgIHggPSAwOworICAgIH0gZWxzZSBpZiAoIHggPiB0aGlzLm1heFBvc1ggKSB7CisgICAgICB4
ID0gdGhpcy5tYXhQb3NYOworICAgIH0KKworICAgIGlmICggeSA8IDAgKSB7CisgICAgICB5ID0g
MDsKKyAgICB9IGVsc2UgaWYgKCB5ID4gdGhpcy5tYXhQb3NZICkgeworICAgICAgeSA9IHRoaXMu
bWF4UG9zWTsKKyAgICB9CisKKyAgICB4ID0gdGhpcy5vcHRpb25zLmxpc3RlblggPyBNYXRoLnJv
dW5kKHggLyB0aGlzLnNpemVSYXRpb1gpIDogdGhpcy5zY3JvbGxlci54OworICAgIHkgPSB0aGlz
Lm9wdGlvbnMubGlzdGVuWSA/IE1hdGgucm91bmQoeSAvIHRoaXMuc2l6ZVJhdGlvWSkgOiB0aGlz
LnNjcm9sbGVyLnk7CisKKyAgICB0aGlzLnNjcm9sbGVyLnNjcm9sbFRvKHgsIHkpOworICB9LAor
CisgIGZhZGU6IGZ1bmN0aW9uICh2YWwsIGhvbGQpIHsKKyAgICBpZiAoIGhvbGQgJiYgIXRoaXMu
dmlzaWJsZSApIHsKKyAgICAgIHJldHVybjsKKyAgICB9CisKKyAgICBjbGVhclRpbWVvdXQodGhp
cy5mYWRlVGltZW91dCk7CisgICAgdGhpcy5mYWRlVGltZW91dCA9IG51bGw7CisKKyAgICB2YXIg
dGltZSA9IHZhbCA/IDI1MCA6IDUwMCwKKyAgICAgIGRlbGF5ID0gdmFsID8gMCA6IDMwMDsKKwor
ICAgIHZhbCA9IHZhbCA/ICcxJyA6ICcwJzsKKworICAgIHRoaXMud3JhcHBlclN0eWxlW3V0aWxz
LnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbl0gPSB0aW1lICsgJ21zJzsKKworICAgIHRoaXMuZmFk
ZVRpbWVvdXQgPSBzZXRUaW1lb3V0KChmdW5jdGlvbiAodmFsKSB7CisgICAgICB0aGlzLndyYXBw
ZXJTdHlsZS5vcGFjaXR5ID0gdmFsOworICAgICAgdGhpcy52aXNpYmxlID0gK3ZhbDsKKyAgICB9
KS5iaW5kKHRoaXMsIHZhbCksIGRlbGF5KTsKKyAgfQorfTsKKworSVNjcm9sbC51dGlscyA9IHV0
aWxzOworCitpZiAoIHR5cGVvZiBtb2R1bGUgIT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9y
dHMgKSB7CisgIG1vZHVsZS5leHBvcnRzID0gSVNjcm9sbDsKK30gZWxzZSB7CisgIHdpbmRvdy5J
U2Nyb2xsID0gSVNjcm9sbDsKK30KKworfSkod2luZG93LCBkb2N1bWVudCwgTWF0aCk7ClwgTm8g
bmV3bGluZSBhdCBlbmQgb2YgZmlsZQpkaWZmIC0tZ2l0IGEvZnJhbWV3b3JrL3NvdXJjZS9yZXNv
dXJjZS9xeC9tb2JpbGUvc2Nzcy91aS9fcGlja2VyLnNjc3MgYi9mcmFtZXdvcmsvc291cmNlL3Jl
c291cmNlL3F4L21vYmlsZS9zY3NzL3VpL19waWNrZXIuc2NzcwppbmRleCAwOWEyOTI5Li40MjQ3
ZjI2IDEwMDY0NAotLS0gYS9mcmFtZXdvcmsvc291cmNlL3Jlc291cmNlL3F4L21vYmlsZS9zY3Nz
L3VpL19waWNrZXIuc2NzcworKysgYi9mcmFtZXdvcmsvc291cmNlL3Jlc291cmNlL3F4L21vYmls
ZS9zY3NzL3VpL19waWNrZXIuc2NzcwpAQCAtMTgsMTAgKzE4LDYgQEAKICAgICBtYXJnaW4tdG9w
OiAwICFpbXBvcnRhbnQ7CiAgIH0KIAotICAuc2Nyb2xsYmFyViB7Ci0gICAgZGlzcGxheTpub25l
OwotICB9Ci0KICAgLnBsYWNlaG9sZGVyLWl0ZW0gewogICAgIGJveC1zaXppbmc6Ym9yZGVyLWJv
eDsKICAgfQpAQCAtNDQsNiArNDAsMTAgQEAKICAgLnNjcm9sbCArIC5zY3JvbGwgewogICAgIGJv
cmRlci1sZWZ0OiAkcGlja2VyLXNwaW5uaW5nLXdoZWVsLWRpdmlkZXItd2lkdGggc29saWQgJHBp
Y2tlci1zcGlubmluZy13aGVlbC1kaXZpZGVyLWNvbG9yOwogICB9CisKKyAgLyouaVNjcm9sbFZl
cnRpY2FsU2Nyb2xsYmFyIHsKKyAgICBkaXNwbGF5Om5vbmU7CisgIH0qLwogfQogCiAucGlja2Vy
OmFmdGVyIHsK
</data>

          </attachment>
      

    </bug>