<bug>
          <bug_id>458</bug_id>
          
          <creation_ts>2007-06-02 18:58:00 +0200</creation_ts>
          <short_desc>qx.ui.resizer.Resizer does not work correct</short_desc>
          <delta_ts>2007-08-01 15:52:48 +0200</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>framework</product>
          <component>core</component>
          <version>0.7</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>FIXED</resolution>
          
          
          
          
          
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>unspecified</target_milestone>
          
          
          <votes>5</votes>
          <everconfirmed>1</everconfirmed>
          <reporter name="MH">TK3C</reporter>
          <assigned_to name="Unassigned">none</assigned_to>
          <cc>johnl</cc>
          <qa_contact name="qooxdoo bugs mailing list">qooxdoo-bugs</qa_contact>
          <cf_browser>---</cf_browser>
          

      

      

      

          <long_desc isprivate="0">
            <commentid>1488</commentid>
            <who name="MH">TK3C</who>
            <bug_when>2007-06-02 18:58:13 +0200</bug_when>
            <thetext>Hi, 
qx.ui.resizer.Resizer does not work allways right.
Left and TOP resizing is going crazy (for example in vertical box layout)
If the parent widget is scrollable then resizer icons appear only when the scroll position is 0.

Martin</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>2069</commentid>
            <who name="J. David Lee">johnl</who>
            <bug_when>2007-07-27 18:34:34 +0200</bug_when>
            <thetext>I also have the problem stated: If I place a resizer inside of a VerticalLayout that has a scroll bar, the resizer only works when the scroll position is 0, otherwise the resizers can&#39;t be resized.</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>2070</commentid>
              <attachid>229</attachid>
            <who name="J. David Lee">johnl</who>
            <bug_when>2007-07-27 19:17:50 +0200</bug_when>
            <thetext>Created attachment 229
Working version of MResizable.js</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>2071</commentid>
            <who name="J. David Lee">johnl</who>
            <bug_when>2007-07-27 19:18:45 +0200</bug_when>
            <thetext>I was able to fix this by editing MResizable.js and replacing all the calculations using getPage[...] with getClient[...], for example: 

getPageBoxTop -&gt; getClientBoxTop.

I&#39;ll attach the working version.

Note: I&#39;m using FF 2.0.0.5 on Ubuntu x86.</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>2093</commentid>
            <who name="Fabian Jakobs">fabian.jakobs</who>
            <bug_when>2007-08-01 15:52:48 +0200</bug_when>
            <thetext>If the whole page scrolls, client top is not going to work. I have fixed this issue using the new Location class of html2, which does compute the element location more accurately.

Since this class is missing from the legacy_0_7 branch the fix is only applied to trunk.</thetext>
          </long_desc>
      
          <attachment isobsolete="0" ispatch="0" isprivate="0" isurl="0">
            <attachid>229</attachid>
            <date>2007-07-27 19:17:00 +0200</date>
            <delta_ts>2007-07-27 19:17:50 +0200</delta_ts>
            <desc>Working version of MResizable.js</desc>
            <filename>MResizable.js</filename>
            <type>application/javascript</type>
            <size>11944</size>
            <attacher>johnl</attacher>
            
              <data encoding="base64">LyogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqCgogICBxb294ZG9vIC0gdGhlIG5ldyBlcmEgb2Ygd2ViIGRldmVs
b3BtZW50CgogICBodHRwOi8vcW9veGRvby5vcmcKCiAgIENvcHlyaWdodDoKICAgICAyMDA3IERh
dmlkIFDDqXJleiBDYXJtb25hCiAgICAgMjAwNC0yMDA3IDEmMSBJbnRlcm5ldCBBRywgR2VybWFu
eSwgaHR0cDovL3d3dy4xYW5kMS5vcmcKCiAgIExpY2Vuc2U6CiAgICAgTEdQTDogaHR0cDovL3d3
dy5nbnUub3JnL2xpY2Vuc2VzL2xncGwuaHRtbAogICAgIEVQTDogaHR0cDovL3d3dy5lY2xpcHNl
Lm9yZy9vcmcvZG9jdW1lbnRzL2VwbC12MTAucGhwCiAgICAgU2VlIHRoZSBMSUNFTlNFIGZpbGUg
aW4gdGhlIHByb2plY3QncyB0b3AtbGV2ZWwgZGlyZWN0b3J5IGZvciBkZXRhaWxzLgoKICAgQXV0
aG9yczoKICAgICAqIERhdmlkIFBlcmV6IENhcm1vbmEgKGRhdmlkLXBlcmV6KQogICAgICogU2Vi
YXN0aWFuIFdlcm5lciAod3BiYXN0aSkKCioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqLwoKLyoqCiAqIFByb3Zp
ZGVzIHJlc2l6aW5nIGJlaGF2aW9yIHRvIGFueSB3aWRnZXQuCiAqIFRoZSB3aWRnZXQgdGhhdCBp
bmNsdWRlcyB0aGlzIG1peGluLCBtdXN0IGltcGxlbWVudCB0aGUge0BsaW5rIHF4LnVpLnJlc2l6
ZXIuSVJlc2l6YWJsZX0gaW50ZXJmYWNlLgogKi8KcXguTWl4aW4uZGVmaW5lKCJxeC51aS5yZXNp
emVyLk1SZXNpemFibGUiLAp7CiAgLyoKICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogICAgIENPTlNU
UlVDVE9SCiAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICAqLwoKICBjb25zdHJ1Y3QgOiBmdW5jdGlv
bihjaGlsZCkKICB7CiAgICB0aGlzLl9mcmFtZSA9IG5ldyBxeC51aS5iYXNpYy5UZXJtaW5hdG9y
OwogICAgdGhpcy5fZnJhbWUuc2V0QXBwZWFyYW5jZSgicmVzaXplci1mcmFtZSIpOwogICAgdGhp
cy5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWRvd24iLCB0aGlzLl9vbm1vdXNlZG93bik7CiAgICB0
aGlzLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNldXAiLCB0aGlzLl9vbm1vdXNldXApOwogICAgdGhp
cy5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLCB0aGlzLl9vbm1vdXNlbW92ZSk7CiAgfSwK
CgoKCgogIC8qCiAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICAgICBQUk9QRVJUSUVTCiAgKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioKICAqLwoKICBwcm9wZXJ0aWVzIDoKICB7CiAgICAvKiogSXQgaXMgcmVz
aXphYmxlIGluIHRoZSBsZWZ0IGRpcmVjdGlvbi4gKi8KICAgIHJlc2l6YWJsZVdlc3QgOgogICAg
ewogICAgICBjaGVjayA6ICJCb29sZWFuIiwKICAgICAgaW5pdCA6IHRydWUsCiAgICAgIGFwcGx5
IDogIl9hcHBseVJlc2l6YWJsZSIKICAgIH0sCgoKICAgIC8qKiBJdCBpcyByZXNpemFibGUgaW4g
dGhlIHRvcCBkaXJlY3Rpb24uICovCiAgICByZXNpemFibGVOb3J0aCA6CiAgICB7CiAgICAgIGNo
ZWNrIDogIkJvb2xlYW4iLAogICAgICBpbml0IDogdHJ1ZSwKICAgICAgYXBwbHkgOiAiX2FwcGx5
UmVzaXphYmxlIgogICAgfSwKCgogICAgLyoqIEl0IGlzIHJlc2l6YWJsZSBpbiB0aGUgcmlnaHQg
ZGlyZWN0aW9uLiAqLwogICAgcmVzaXphYmxlRWFzdCA6CiAgICB7CiAgICAgIGNoZWNrIDogIkJv
b2xlYW4iLAogICAgICBpbml0IDogdHJ1ZSwKICAgICAgYXBwbHkgOiAiX2FwcGx5UmVzaXphYmxl
IgogICAgfSwKCgogICAgLyoqIEl0IGlzIHJlc2l6YWJsZSBpbiB0aGUgYm90dG9tIGRpcmVjdGlv
bi4gKi8KICAgIHJlc2l6YWJsZVNvdXRoIDoKICAgIHsKICAgICAgY2hlY2sgOiAiQm9vbGVhbiIs
CiAgICAgIGluaXQgOiB0cnVlLAogICAgICBhcHBseSA6ICJfYXBwbHlSZXNpemFibGUiCiAgICB9
LAoKCiAgICAvKiogSWYgdGhlIHdpbmRvdyBpcyByZXNpemFibGUgKi8KICAgIHJlc2l6YWJsZSA6
CiAgICB7CiAgICAgIGdyb3VwIDogWyAicmVzaXphYmxlTm9ydGgiLCAicmVzaXphYmxlRWFzdCIs
ICJyZXNpemFibGVTb3V0aCIsICJyZXNpemFibGVXZXN0IiBdLAogICAgICBtb2RlICA6ICJzaG9y
dGhhbmQiCiAgICB9LAoKCiAgICAvKiogVGhlIHJlc2l6ZSBtZXRob2QgdG8gdXNlICovCiAgICBy
ZXNpemVNZXRob2QgOgogICAgewogICAgICBpbml0IDogImZyYW1lIiwKICAgICAgY2hlY2sgOiBb
ICJvcGFxdWUiLCAibGF6eW9wYXF1ZSIsICJmcmFtZSIsICJ0cmFuc2x1Y2VudCIgXSwKICAgICAg
ZXZlbnQgOiAiY2hhbmdlUmVzaXplTWV0aG9kIgogICAgfQogIH0sCgoKCgoKCiAgLyoKICAqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKgogICAgIE1FTUJFUlMKICAqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogICov
CgogIG1lbWJlcnMgOgogIHsKICAgIC8qKgogICAgICogQWRqdXN0IHNvIHRoYXQgaXQgcmV0dXJu
cyBhIGJvb2xlYW4gaW5zdGVhZCBvZiBhbiBhcnJheS4KICAgICAqCiAgICAgKiBAdHlwZSBtZW1i
ZXIKICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IFRPRE9DCiAgICAgKi8KICAgIGlzUmVzaXphYmxl
IDogZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiB0aGlzLmdldFJlc2l6YWJsZVdlc3QoKSB8fCB0
aGlzLmdldFJlc2l6YWJsZUVhc3QoKSB8fCB0aGlzLmdldFJlc2l6YWJsZU5vcnRoKCkgfHwgdGhp
cy5nZXRSZXNpemFibGVTb3V0aCgpOwogICAgfSwKCgogICAgLyoqCiAgICAgKiBBZGp1c3Qgc28g
dGhhdCBpdCByZXR1cm5zIGEgYm9vbGVhbiBpbnN0ZWFkIG9mIGFuIGFycmF5LgogICAgICogV3Jh
cHBlciBhcm91bmQgaXNSZXNpemFibGUuIFBsZWFzZSB1c2UgaXNSZXNpemFibGUgaW5zdGVhZC4K
ICAgICAqCiAgICAgKiBAdHlwZSBtZW1iZXIKICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IFRPRE9D
CiAgICAgKi8KICAgIGdldFJlc2l6YWJsZSA6IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gdGhp
cy5pc1Jlc2l6YWJsZSgpOwogICAgfSwKCgoKICAgIF9hcHBseVJlc2l6YWJsZSA6IGZ1bmN0aW9u
KHZhbHVlLCBvbGQpIHsKICAgICAgLy8gcGxhY2Vob2xkZXIKICAgIH0sCgoKICAgIC8qKgogICAg
ICogVE9ET0MKICAgICAqCiAgICAgKiBAdHlwZSBtZW1iZXIKICAgICAqIEBwYXJhbSBlIHtFdmVu
dH0gVE9ET0MKICAgICAqIEByZXR1cm4ge3ZvaWR9CiAgICAgKi8KICAgIF9vbm1vdXNlZG93biA6
IGZ1bmN0aW9uKGUpCiAgICB7CiAgICAgIGlmICh0aGlzLl9yZXNpemVOb3J0aCB8fCB0aGlzLl9y
ZXNpemVTb3V0aCB8fCB0aGlzLl9yZXNpemVXZXN0IHx8IHRoaXMuX3Jlc2l6ZUVhc3QpCiAgICAg
IHsKICAgICAgICAvLyBlbmFibGUgY2FwdHVyaW5nCiAgICAgICAgdGhpcy5zZXRDYXB0dXJlKHRy
dWUpOwoKICAgICAgICAvLyBhY3RpdmF0ZSBnbG9iYWwgY3Vyc29yCiAgICAgICAgdGhpcy5nZXRU
b3BMZXZlbFdpZGdldCgpLnNldEdsb2JhbEN1cnNvcih0aGlzLmdldEN1cnNvcigpKTsKCiAgICAg
ICAgLy8gY2FjaGluZyBlbGVtZW50CiAgICAgICAgdmFyIGVsID0gdGhpcy5nZXRFbGVtZW50KCk7
CgogICAgICAgIC8vIG1lYXN1cmluZyBhbmQgY2FjaGluZyBvZiB2YWx1ZXMgZm9yIHJlc2l6ZSBz
ZXNzaW9uCiAgICAgICAgdmFyIHBhID0gdGhpcy5fZ2V0UmVzaXplUGFyZW50KCk7CiAgICAgICAg
dmFyIHBsID0gcGEuZ2V0RWxlbWVudCgpOwoKICAgICAgICB2YXIgbCA9IHF4Lmh0bWwuTG9jYXRp
b24uZ2V0Q2xpZW50QXJlYUxlZnQocGwpOwogICAgICAgIHZhciB0ID0gcXguaHRtbC5Mb2NhdGlv
bi5nZXRDbGllbnRBcmVhVG9wKHBsKTsKICAgICAgICB2YXIgciA9IHF4Lmh0bWwuTG9jYXRpb24u
Z2V0Q2xpZW50QXJlYVJpZ2h0KHBsKTsKICAgICAgICB2YXIgYiA9IHF4Lmh0bWwuTG9jYXRpb24u
Z2V0Q2xpZW50QXJlYUJvdHRvbShwbCk7CgogICAgICAgIC8vIGhhbmRsZSBmcmFtZSBhbmQgdHJh
bnNsdWNlbnRseQogICAgICAgIHN3aXRjaCh0aGlzLmdldFJlc2l6ZU1ldGhvZCgpKQogICAgICAg
IHsKICAgICAgICAgIGNhc2UgInRyYW5zbHVjZW50IjoKICAgICAgICAgICAgdGhpcy5zZXRPcGFj
aXR5KDAuNSk7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgImZyYW1lIjoKICAg
ICAgICAgICAgdmFyIGYgPSB0aGlzLl9mcmFtZTsKCiAgICAgICAgICAgIGlmIChmLmdldFBhcmVu
dCgpICE9IHBhKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgZi5zZXRQYXJlbnQocGEpOwog
ICAgICAgICAgICAgIHF4LnVpLmNvcmUuV2lkZ2V0LmZsdXNoR2xvYmFsUXVldWVzKCk7CiAgICAg
ICAgICAgIH0KCiAgICAgICAgICAgIGYuX3JlbmRlclJ1bnRpbWVMZWZ0KHF4Lmh0bWwuTG9jYXRp
b24uZ2V0Q2xpZW50Qm94TGVmdChlbCkgLSBsKTsKICAgICAgICAgICAgZi5fcmVuZGVyUnVudGlt
ZVRvcChxeC5odG1sLkxvY2F0aW9uLmdldENsaWVudEJveFRvcChlbCkgLSB0KTsKCiAgICAgICAg
ICAgIGYuX3JlbmRlclJ1bnRpbWVXaWR0aChxeC5odG1sLkRpbWVuc2lvbi5nZXRCb3hXaWR0aChl
bCkpOwogICAgICAgICAgICBmLl9yZW5kZXJSdW50aW1lSGVpZ2h0KHF4Lmh0bWwuRGltZW5zaW9u
LmdldEJveEhlaWdodChlbCkpOwoKICAgICAgICAgICAgZi5zZXRaSW5kZXgodGhpcy5nZXRaSW5k
ZXgoKSArIDEpOwoKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgICAvLyBjcmVh
dGUgcmVzaXplIHNlc3Npb24KICAgICAgICB2YXIgcyA9IHRoaXMuX3Jlc2l6ZVNlc3Npb24gPSB7
fTsKICAgICAgICB2YXIgbWluUmVmID0gdGhpcy5fZ2V0TWluU2l6ZVJlZmVyZW5jZSgpOwoKICAg
ICAgICBpZiAodGhpcy5fcmVzaXplV2VzdCkKICAgICAgICB7CiAgICAgICAgICBzLmJveFdpZHRo
ID0gcXguaHRtbC5EaW1lbnNpb24uZ2V0Qm94V2lkdGgoZWwpOwogICAgICAgICAgcy5ib3hSaWdo
dCA9IHF4Lmh0bWwuTG9jYXRpb24uZ2V0Q2xpZW50Qm94UmlnaHQoZWwpOwogICAgICAgIH0KCiAg
ICAgICAgaWYgKHRoaXMuX3Jlc2l6ZVdlc3QgfHwgdGhpcy5fcmVzaXplRWFzdCkKICAgICAgICB7
CiAgICAgICAgICBzLmJveExlZnQgPSBxeC5odG1sLkxvY2F0aW9uLmdldENsaWVudEJveExlZnQo
ZWwpOwoKICAgICAgICAgIHMucGFyZW50QXJlYU9mZnNldExlZnQgPSBsOwogICAgICAgICAgcy5w
YXJlbnRBcmVhT2Zmc2V0UmlnaHQgPSByOwoKICAgICAgICAgIHMubWluV2lkdGggPSBtaW5SZWYu
Z2V0TWluV2lkdGhWYWx1ZSgpOwogICAgICAgICAgcy5tYXhXaWR0aCA9IG1pblJlZi5nZXRNYXhX
aWR0aFZhbHVlKCk7CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5fcmVzaXplTm9ydGgpCiAg
ICAgICAgewogICAgICAgICAgcy5ib3hIZWlnaHQgPSBxeC5odG1sLkRpbWVuc2lvbi5nZXRCb3hI
ZWlnaHQoZWwpOwogICAgICAgICAgcy5ib3hCb3R0b20gPSBxeC5odG1sLkxvY2F0aW9uLmdldENs
aWVudEJveEJvdHRvbShlbCk7CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5fcmVzaXplTm9y
dGggfHwgdGhpcy5fcmVzaXplU291dGgpCiAgICAgICAgewogICAgICAgICAgcy5ib3hUb3AgPSBx
eC5odG1sLkxvY2F0aW9uLmdldENsaWVudEJveFRvcChlbCk7CgogICAgICAgICAgcy5wYXJlbnRB
cmVhT2Zmc2V0VG9wID0gdDsKICAgICAgICAgIHMucGFyZW50QXJlYU9mZnNldEJvdHRvbSA9IGI7
CgogICAgICAgICAgcy5taW5IZWlnaHQgPSBtaW5SZWYuZ2V0TWluSGVpZ2h0VmFsdWUoKTsKICAg
ICAgICAgIHMubWF4SGVpZ2h0ID0gbWluUmVmLmdldE1heEhlaWdodFZhbHVlKCk7CiAgICAgICAg
fQogICAgICB9CiAgICAgIGVsc2UKICAgICAgewogICAgICAgIC8vIGNsZWFudXAgcmVzaXplIHNl
c3Npb24KICAgICAgICBkZWxldGUgdGhpcy5fcmVzaXplU2Vzc2lvbjsKICAgICAgfQoKICAgICAg
Ly8gc3RvcCBldmVudAogICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgfSwKCgogICAgLyoq
CiAgICAgKiBUT0RPQwogICAgICoKICAgICAqIEB0eXBlIG1lbWJlcgogICAgICogQHBhcmFtIGUg
e0V2ZW50fSBUT0RPQwogICAgICogQHJldHVybiB7dm9pZH0KICAgICAqLwogICAgX29ubW91c2V1
cCA6IGZ1bmN0aW9uKGUpCiAgICB7CiAgICAgIHZhciBzID0gdGhpcy5fcmVzaXplU2Vzc2lvbjsK
CiAgICAgIGlmIChzKQogICAgICB7CiAgICAgICAgLy8gZGlzYWJsZSBjYXB0dXJpbmcKICAgICAg
ICB0aGlzLnNldENhcHR1cmUoZmFsc2UpOwoKICAgICAgICAvLyBkZWFjdGl2YXRlIGdsb2JhbCBj
dXJzb3IKICAgICAgICB0aGlzLmdldFRvcExldmVsV2lkZ2V0KCkuc2V0R2xvYmFsQ3Vyc29yKG51
bGwpOwoKICAgICAgICAvLyBzeW5jIHNpemVzIHRvIGZyYW1lCiAgICAgICAgc3dpdGNoKHRoaXMu
Z2V0UmVzaXplTWV0aG9kKCkpCiAgICAgICAgewogICAgICAgICAgY2FzZSAiZnJhbWUiOgogICAg
ICAgICAgICB2YXIgbyA9IHRoaXMuX2ZyYW1lOwoKICAgICAgICAgICAgaWYgKCEobyAmJiBvLmdl
dFBhcmVudCgpKSkgewogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAg
ICAgICAvLyBubyBicmVhayBoZXJlCgogICAgICAgICAgY2FzZSAibGF6eW9wYXF1ZSI6CiAgICAg
ICAgICAgIGlmIChzLmxhc3RMZWZ0ICE9IG51bGwpIHsKICAgICAgICAgICAgICB0aGlzLnNldExl
ZnQocy5sYXN0TGVmdCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChzLmxhc3RUb3Ag
IT0gbnVsbCkgewogICAgICAgICAgICAgIHRoaXMuc2V0VG9wKHMubGFzdFRvcCk7CiAgICAgICAg
ICAgIH0KCiAgICAgICAgICAgIGlmIChzLmxhc3RXaWR0aCAhPSBudWxsKQogICAgICAgICAgICB7
CiAgICAgICAgICAgICAgdGhpcy5fY2hhbmdlV2lkdGgocy5sYXN0V2lkdGgpOwogICAgICAgICAg
ICB9CgogICAgICAgICAgICBpZiAocy5sYXN0SGVpZ2h0ICE9IG51bGwpCiAgICAgICAgICAgIHsK
ICAgICAgICAgICAgICB0aGlzLl9jaGFuZ2VIZWlnaHQocy5sYXN0SGVpZ2h0KTsKICAgICAgICAg
ICAgfQoKICAgICAgICAgICAgaWYgKHRoaXMuZ2V0UmVzaXplTWV0aG9kKCkgPT0gImZyYW1lIikg
ewogICAgICAgICAgICAgIHRoaXMuX2ZyYW1lLnNldFBhcmVudChudWxsKTsKICAgICAgICAgICAg
fQoKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAidHJhbnNsdWNlbnQiOgogICAg
ICAgICAgICB0aGlzLnNldE9wYWNpdHkobnVsbCk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAg
IH0KCiAgICAgICAgLy8gY2xlYW51cCBzZXNzaW9uCiAgICAgICAgZGVsZXRlIHRoaXMuX3Jlc2l6
ZU5vcnRoOwogICAgICAgIGRlbGV0ZSB0aGlzLl9yZXNpemVFYXN0OwogICAgICAgIGRlbGV0ZSB0
aGlzLl9yZXNpemVTb3V0aDsKICAgICAgICBkZWxldGUgdGhpcy5fcmVzaXplV2VzdDsKCiAgICAg
ICAgZGVsZXRlIHRoaXMuX3Jlc2l6ZVNlc3Npb247CiAgICAgIH0KCiAgICAgIC8vIHN0b3AgZXZl
bnQKICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgIH0sCgoKICAgIC8qKgogICAgICogVE9E
T0MKICAgICAqCiAgICAgKiBAdHlwZSBtZW1iZXIKICAgICAqIEBwYXJhbSBwIHt2YXJ9IFRPRE9D
CiAgICAgKiBAcGFyYW0gZSB7RXZlbnR9IFRPRE9DCiAgICAgKiBAcmV0dXJuIHt2YXJ9IFRPRE9D
CiAgICAgKi8KICAgIF9uZWFyIDogZnVuY3Rpb24ocCwgZSkgewogICAgICByZXR1cm4gZSA+IChw
IC0gNSkgJiYgZSA8IChwICsgNSk7CiAgICB9LAoKCiAgICAvKioKICAgICAqIFRPRE9DCiAgICAg
KgogICAgICogQHR5cGUgbWVtYmVyCiAgICAgKiBAcGFyYW0gZSB7RXZlbnR9IFRPRE9DCiAgICAg
KiBAcmV0dXJuIHt2b2lkfQogICAgICovCiAgICBfb25tb3VzZW1vdmUgOiBmdW5jdGlvbihlKQog
ICAgewogICAgICB2YXIgcyA9IHRoaXMuX3Jlc2l6ZVNlc3Npb247CgogICAgICBpZiAocykKICAg
ICAgewogICAgICAgIGlmICh0aGlzLl9yZXNpemVXZXN0KQogICAgICAgIHsKICAgICAgICAgIHMu
bGFzdFdpZHRoID0gcXgubGFuZy5OdW1iZXIubGltaXQocy5ib3hXaWR0aCArIHMuYm94TGVmdCAt
IE1hdGgubWF4KGUuZ2V0Q2xpZW50WCgpLCBzLnBhcmVudEFyZWFPZmZzZXRMZWZ0KSwgcy5taW5X
aWR0aCwgcy5tYXhXaWR0aCk7CiAgICAgICAgICBzLmxhc3RMZWZ0ID0gcy5ib3hSaWdodCAtIHMu
bGFzdFdpZHRoIC0gcy5wYXJlbnRBcmVhT2Zmc2V0TGVmdDsKICAgICAgICB9CiAgICAgICAgZWxz
ZSBpZiAodGhpcy5fcmVzaXplRWFzdCkKICAgICAgICB7CiAgICAgICAgICBzLmxhc3RXaWR0aCA9
IHF4LmxhbmcuTnVtYmVyLmxpbWl0KE1hdGgubWluKGUuZ2V0Q2xpZW50WCgpLCBzLnBhcmVudEFy
ZWFPZmZzZXRSaWdodCkgLSBzLmJveExlZnQsIHMubWluV2lkdGgsIHMubWF4V2lkdGgpOwogICAg
ICAgIH0KCiAgICAgICAgaWYgKHRoaXMuX3Jlc2l6ZU5vcnRoKQogICAgICAgIHsKICAgICAgICAg
IHMubGFzdEhlaWdodCA9IHF4LmxhbmcuTnVtYmVyLmxpbWl0KHMuYm94SGVpZ2h0ICsgcy5ib3hU
b3AgLSBNYXRoLm1heChlLmdldENsaWVudFkoKSwgcy5wYXJlbnRBcmVhT2Zmc2V0VG9wKSwgcy5t
aW5IZWlnaHQsIHMubWF4SGVpZ2h0KTsKICAgICAgICAgIHMubGFzdFRvcCA9IHMuYm94Qm90dG9t
IC0gcy5sYXN0SGVpZ2h0IC0gcy5wYXJlbnRBcmVhT2Zmc2V0VG9wOwogICAgICAgIH0KICAgICAg
ICBlbHNlIGlmICh0aGlzLl9yZXNpemVTb3V0aCkKICAgICAgICB7CiAgICAgICAgICBzLmxhc3RI
ZWlnaHQgPSBxeC5sYW5nLk51bWJlci5saW1pdChNYXRoLm1pbihlLmdldENsaWVudFkoKSwgcy5w
YXJlbnRBcmVhT2Zmc2V0Qm90dG9tKSAtIHMuYm94VG9wLCBzLm1pbkhlaWdodCwgcy5tYXhIZWln
aHQpOwogICAgICAgIH0KCiAgICAgICAgc3dpdGNoKHRoaXMuZ2V0UmVzaXplTWV0aG9kKCkpCiAg
ICAgICAgewogICAgICAgICAgY2FzZSAib3BhcXVlIjoKICAgICAgICAgIGNhc2UgInRyYW5zbHVj
ZW50IjoKICAgICAgICAgICAgaWYgKHRoaXMuX3Jlc2l6ZVdlc3QgfHwgdGhpcy5fcmVzaXplRWFz
dCkKICAgICAgICAgICAgewogICAgICAgICAgICAgIHRoaXMuc2V0V2lkdGgocy5sYXN0V2lkdGgp
OwoKICAgICAgICAgICAgICBpZiAodGhpcy5fcmVzaXplV2VzdCkgewogICAgICAgICAgICAgICAg
dGhpcy5zZXRMZWZ0KHMubGFzdExlZnQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoK
ICAgICAgICAgICAgaWYgKHRoaXMuX3Jlc2l6ZU5vcnRoIHx8IHRoaXMuX3Jlc2l6ZVNvdXRoKQog
ICAgICAgICAgICB7CiAgICAgICAgICAgICAgdGhpcy5zZXRIZWlnaHQocy5sYXN0SGVpZ2h0KTsK
CiAgICAgICAgICAgICAgaWYgKHRoaXMuX3Jlc2l6ZU5vcnRoKSB7CiAgICAgICAgICAgICAgICB0
aGlzLnNldFRvcChzLmxhc3RUb3ApOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAg
ICAgICAgICAgYnJlYWs7CgogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgdmFyIG8gPSB0
aGlzLmdldFJlc2l6ZU1ldGhvZCgpID09ICJmcmFtZSIgPyB0aGlzLl9mcmFtZSA6IHRoaXM7Cgog
ICAgICAgICAgICBpZiAodGhpcy5fcmVzaXplV2VzdCB8fCB0aGlzLl9yZXNpemVFYXN0KQogICAg
ICAgICAgICB7CiAgICAgICAgICAgICAgby5fcmVuZGVyUnVudGltZVdpZHRoKHMubGFzdFdpZHRo
KTsKCiAgICAgICAgICAgICAgaWYgKHRoaXMuX3Jlc2l6ZVdlc3QpIHsKICAgICAgICAgICAgICAg
IG8uX3JlbmRlclJ1bnRpbWVMZWZ0KHMubGFzdExlZnQpOwogICAgICAgICAgICAgIH0KICAgICAg
ICAgICAgfQoKICAgICAgICAgICAgaWYgKHRoaXMuX3Jlc2l6ZU5vcnRoIHx8IHRoaXMuX3Jlc2l6
ZVNvdXRoKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgby5fcmVuZGVyUnVudGltZUhlaWdo
dChzLmxhc3RIZWlnaHQpOwoKICAgICAgICAgICAgICBpZiAodGhpcy5fcmVzaXplTm9ydGgpIHsK
ICAgICAgICAgICAgICAgIG8uX3JlbmRlclJ1bnRpbWVUb3Aocy5sYXN0VG9wKTsKICAgICAgICAg
ICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgZWxzZQogICAgICB7
CiAgICAgICAgdmFyIHJlc2l6ZU1vZGUgPSAiIjsKICAgICAgICB2YXIgZWwgPSB0aGlzLmdldEVs
ZW1lbnQoKTsKCiAgICAgICAgdGhpcy5fcmVzaXplTm9ydGggPSB0aGlzLl9yZXNpemVTb3V0aCA9
IHRoaXMuX3Jlc2l6ZVdlc3QgPSB0aGlzLl9yZXNpemVFYXN0ID0gZmFsc2U7CgogICAgICAgIGlm
ICh0aGlzLl9uZWFyKHF4Lmh0bWwuTG9jYXRpb24uZ2V0Q2xpZW50Qm94VG9wKGVsKSwgZS5nZXRD
bGllbnRZKCkpKQogICAgICAgIHsKICAgICAgICAgIGlmICh0aGlzLmdldFJlc2l6YWJsZU5vcnRo
KCkpCiAgICAgICAgICB7CiAgICAgICAgICAgIHJlc2l6ZU1vZGUgPSAibiI7CiAgICAgICAgICAg
IHRoaXMuX3Jlc2l6ZU5vcnRoID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAg
ZWxzZSBpZiAodGhpcy5fbmVhcihxeC5odG1sLkxvY2F0aW9uLmdldENsaWVudEJveEJvdHRvbShl
bCksIGUuZ2V0Q2xpZW50WSgpKSkKICAgICAgICB7CiAgICAgICAgICBpZiAodGhpcy5nZXRSZXNp
emFibGVTb3V0aCgpKQogICAgICAgICAgewogICAgICAgICAgICByZXNpemVNb2RlID0gInMiOwog
ICAgICAgICAgICB0aGlzLl9yZXNpemVTb3V0aCA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAg
fQoKICAgICAgICBpZiAodGhpcy5fbmVhcihxeC5odG1sLkxvY2F0aW9uLmdldENsaWVudEJveExl
ZnQoZWwpLCBlLmdldENsaWVudFgoKSkpCiAgICAgICAgewogICAgICAgICAgaWYgKHRoaXMuZ2V0
UmVzaXphYmxlV2VzdCgpKQogICAgICAgICAgewogICAgICAgICAgICByZXNpemVNb2RlICs9ICJ3
IjsKICAgICAgICAgICAgdGhpcy5fcmVzaXplV2VzdCA9IHRydWU7CiAgICAgICAgICB9CiAgICAg
ICAgfQogICAgICAgIGVsc2UgaWYgKHRoaXMuX25lYXIocXguaHRtbC5Mb2NhdGlvbi5nZXRDbGll
bnRCb3hSaWdodChlbCksIGUuZ2V0Q2xpZW50WCgpKSkKICAgICAgICB7CiAgICAgICAgICBpZiAo
dGhpcy5nZXRSZXNpemFibGVFYXN0KCkpCiAgICAgICAgICB7CiAgICAgICAgICAgIHJlc2l6ZU1v
ZGUgKz0gImUiOwogICAgICAgICAgICB0aGlzLl9yZXNpemVFYXN0ID0gdHJ1ZTsKICAgICAgICAg
IH0KICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLl9yZXNpemVOb3J0aCB8fCB0aGlzLl9yZXNp
emVTb3V0aCB8fCB0aGlzLl9yZXNpemVXZXN0IHx8IHRoaXMuX3Jlc2l6ZUVhc3QpIHsKICAgICAg
ICAgIHRoaXMuc2V0Q3Vyc29yKHJlc2l6ZU1vZGUgKyAiLXJlc2l6ZSIpOwogICAgICAgIH0gZWxz
ZSB7CiAgICAgICAgICB0aGlzLnJlc2V0Q3Vyc29yKCk7CiAgICAgICAgfQogICAgICB9CgogICAg
ICAvLyBzdG9wIGV2ZW50CiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICB9CiAgfSwKCgoK
CgogIC8qCiAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICAgICBERVNUUlVDVE9SCiAgKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioKICAqLwoKICBkZXN0cnVjdCA6IGZ1bmN0aW9uKCkgewogICAgdGhpcy5fZGlz
cG9zZU9iamVjdHMoIl9mcmFtZSIpOwogIH0KfSk7Cg==
</data>

          </attachment>
      

    </bug>