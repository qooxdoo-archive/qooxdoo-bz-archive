<bug>
          <bug_id>5151</bug_id>
          
          <creation_ts>2011-05-20 17:28:00 +0200</creation_ts>
          <short_desc>generator does not translate packages</short_desc>
          <delta_ts>2014-02-17 17:33:22 +0100</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>1</classification_id>
          <classification>Unclassified</classification>
          <product>framework</product>
          <component>tool.generator.compiler</component>
          <version>master</version>
          <rep_platform>All</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>RESOLVED</bug_status>
          <resolution>INVALID</resolution>
          
          
          
          
          
          <priority>P4</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>unspecified</target_milestone>
          
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Stefan Andersson">dev</reporter>
          <assigned_to name="Richard Sternagel">richard.sternagel</assigned_to>
          <cc>qooxdoo</cc>
          <qa_contact name="Richard Sternagel">richard.sternagel</qa_contact>
          <cf_browser>---</cf_browser>
          

      

      

      

          <long_desc isprivate="0">
            <commentid>24650</commentid>
            <who name="Stefan Andersson">dev</who>
            <bug_when>2011-05-20 17:28:13 +0200</bug_when>
            <thetext>With a config.json defining package A and B:

      &quot;packages&quot; :
      {
        &quot;parts&quot; :
        {
          &quot;A&quot; :
          {
            &quot;include&quot; : [ &quot;${QXTHEME}&quot;, &quot;test.A&quot; ]
          },

          &quot;B&quot; :
          {
            &quot;include&quot; : [ &quot;test.B&quot; ]
          },
        }
      }

in calling class Zero in Zero.js :

#use(A)
#use(B)

the classes are pointed at by strings and NOT namespace paths:

var str1 = &quot;A&quot;;
var str2 = &quot;B&quot;;

        var clazz = qx.Class.getByName(str1); //str2
        var p = new clazz();

in the files A.js and B.js :

we have this.tr(&quot;xxxx&quot;);


now we run &quot;./generate.py translation

Result: only translation info in the .po file from Zero.js and Nothing from A.js and B.js


It means that the generator is not using the info from config.json and ONLY use namespace paths if available and else not. Must be a bug because the locale info in the A.js and B.js files can not be extracted.</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>24653</commentid>
            <who name="Stefan Andersson">dev</who>
            <bug_when>2011-05-21 23:34:41 +0200</bug_when>
            <thetext>Use widgetborwser. Add one more language in config.json. Then ./generate.py translation and after that ./generate.py

Translations are not done for MControls.js and Header.js. then change this.tr in those files to this.marktr instead and rerun ./generate.py translation. Now the translation strings appear empty in the .po of the new language but not before. Then remove marktr and use tr instead and rerun again. The strings are still in .po file of the new language.

Some odd behaviour here.</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>24662</commentid>
            <who name="Martin Wittemann">martin.wittemann</who>
            <bug_when>2011-05-23 11:47:22 +0200</bug_when>
            <thetext>Thanks for the detailed description here. Sounds odd in deed.

@Thomas: Please check that and get back if you know how much work it is to get that fixed.</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>24665</commentid>
            <who name="Thomas Herchenroeder">thron7</who>
            <bug_when>2011-05-23 13:04:14 +0200</bug_when>
            <thetext>Please provide a minimal working skeleton, with classes A,B, Zero and a config as indicated that reproduces the issue. Thanks.</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>24671</commentid>
            <who name="Stefan Andersson">dev</who>
            <bug_when>2011-05-23 15:03:30 +0200</bug_when>
            <thetext>as I pointed out before:

use application/widgetbroswer

add a new language in config.json and go!</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>24672</commentid>
            <who name="Thomas Herchenroeder">thron7</who>
            <bug_when>2011-05-23 15:19:24 +0200</bug_when>
            <thetext>(In reply to comment #4)
&gt; as I pointed out before:
&gt; 
&gt; use application/widgetbroswer
&gt; 
&gt; add a new language in config.json and go!

Widgetbrowser doesn&#39;t use .tr, .marktr or any of those functions at all, so you get empty .po files anyway. Provide a proper skeleton.</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>24674</commentid>
              <attachid>990</attachid>
            <who name="Stefan Andersson">dev</who>
            <bug_when>2011-05-23 15:49:14 +0200</bug_when>
            <thetext>Created attachment 990
this.tr in all files

Here! We have done the job for you!</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>24677</commentid>
            <who name="Thomas Herchenroeder">thron7</who>
            <bug_when>2011-05-23 17:46:16 +0200</bug_when>
            <thetext>(In reply to comment #6)
&gt; Created attachment 990 [details]
&gt; this.tr in all files
&gt; 
&gt; Here! We have done the job for you!

No, actually not.</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>24678</commentid>
            <who name="Stefan Andersson">dev</who>
            <bug_when>2011-05-23 18:14:30 +0200</bug_when>
            <thetext>yes, you are right! :-)
you only have to:

 ./generate.py translation
 ./generate.py</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>24737</commentid>
            <who name="Thomas Herchenroeder">thron7</who>
            <bug_when>2011-05-26 13:00:57 +0200</bug_when>
            <thetext>Applying your patch to Widgetbrowser and running generate.py translation shows: 
The default en.po contains all message keys of Header.js (&quot;Widget Browser&quot;, &quot; 
Theme&quot; and &quot;Theme&quot;) and all keys of MControls.js (&quot;Disabled&quot;, &quot;Selected&quot;, 
&quot;Focused&quot;, &quot;Hovered&quot; and &quot;Invalid&quot;). After adding another language in 
config.json, and re-running generate.py translation, all those keys also show 
up in the second .po file. - I don&#39;t know what you are talking about.</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>24780</commentid>
            <who name="Stefan Andersson">dev</who>
            <bug_when>2011-05-30 14:09:56 +0200</bug_when>
            <thetext>We have reproduced it again. Can it be a date and time checking of files as a go or nogo to regenerate a package/file? Soon back with more details.</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>25050</commentid>
            <who name="Thomas Herchenroeder">thron7</who>
            <bug_when>2011-06-10 11:45:58 +0200</bug_when>
            <thetext>Need more input to do anything.</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>35095</commentid>
            <who name="Andreas Ecker">qooxdoo</who>
            <bug_when>2014-02-17 17:33:22 +0100</bug_when>
            <thetext>Acc. to comment #9 it seems to work as expected in the framework.</thetext>
          </long_desc>
      
          <attachment isobsolete="0" ispatch="0" isprivate="0" isurl="0">
            <attachid>990</attachid>
            <date>2011-05-23 15:49:00 +0200</date>
            <delta_ts>2011-05-23 15:49:14 +0200</delta_ts>
            <desc>this.tr in all files</desc>
            <filename>widgetbrowser.diff</filename>
            <type>text/plain</type>
            <size>51175</size>
            <attacher>dev</attacher>
            
              <data encoding="base64">SW5kZXg6IHNvdXJjZS9jbGFzcy93aWRnZXRicm93c2VyL01Db250cm9scy5qcwo9PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
Ci0tLSBzb3VyY2UvY2xhc3Mvd2lkZ2V0YnJvd3Nlci9NQ29udHJvbHMuanMJKHJldmlzaW9uIDI3
Mzc3KQorKysgc291cmNlL2NsYXNzL3dpZGdldGJyb3dzZXIvTUNvbnRyb2xzLmpzCSh3b3JraW5n
IGNvcHkpCkBAIC0zMiw3ICszMiw3IEBACiAgICAgICB0aGlzLmFkZChjb250cm9scyk7CiAKICAg
ICAgIGlmIChvcHRpb25zLmRpc2FibGVkKSB7Ci0gICAgICAgIHZhciB0b2dnbGVEaXNhYmxlZCA9
IG5ldyBxeC51aS5mb3JtLlRvZ2dsZUJ1dHRvbigiRGlzYWJsZWQiKTsKKyAgICAgICAgdmFyIHRv
Z2dsZURpc2FibGVkID0gbmV3IHF4LnVpLmZvcm0uVG9nZ2xlQnV0dG9uKHRoaXMudHIoIkRpc2Fi
bGVkIikpOwogICAgICAgICB0b2dnbGVEaXNhYmxlZC5hZGRMaXN0ZW5lcigiY2hhbmdlVmFsdWUi
LCBmdW5jdGlvbigpIHsKICAgICAgICAgICB3aWRnZXRzLmZvckVhY2goZnVuY3Rpb24od2lkZ2V0
LCBpbmRleCkgewogICAgICAgICAgICAgaWYgKHdpZGdldC5zZXRFbmFibGVkKSB7CkBAIC00NCw3
ICs0NCw3IEBACiAgICAgICB9CiAKICAgICAgIGlmIChvcHRpb25zLmhvdmVyZWQpIHsKLSAgICAg
ICAgdmFyIHRvZ2dsZUhvdmVyZWQgPSBuZXcgcXgudWkuZm9ybS5Ub2dnbGVCdXR0b24oIkhvdmVy
ZWQiKTsKKyAgICAgICAgdmFyIHRvZ2dsZUhvdmVyZWQgPSBuZXcgcXgudWkuZm9ybS5Ub2dnbGVC
dXR0b24odGhpcy50cigiSG92ZXJlZCIpKTsKICAgICAgICAgdG9nZ2xlSG92ZXJlZC5hZGRMaXN0
ZW5lcigiY2hhbmdlVmFsdWUiLCBmdW5jdGlvbigpIHsKICAgICAgICAgICB3aWRnZXRzLmZvckVh
Y2goZnVuY3Rpb24od2lkZ2V0LCBpbmRleCkgewogICAgICAgICAgICAgaWYgKHRoaXMuZ2V0VmFs
dWUoKSkgewpAQCAtNTgsNyArNTgsNyBAQAogICAgICAgfQogCiAgICAgICBpZiAob3B0aW9ucy5z
ZWxlY3RlZCkgewotICAgICAgICB2YXIgdG9nZ2xlU2VsZWN0ZWQgPSBuZXcgcXgudWkuZm9ybS5U
b2dnbGVCdXR0b24oIlNlbGVjdGVkIik7CisgICAgICAgIHZhciB0b2dnbGVTZWxlY3RlZCA9IG5l
dyBxeC51aS5mb3JtLlRvZ2dsZUJ1dHRvbih0aGlzLnRyKCJTZWxlY3RlZCIpKTsKICAgICAgICAg
dG9nZ2xlU2VsZWN0ZWQuYWRkTGlzdGVuZXIoImNoYW5nZVZhbHVlIiwgZnVuY3Rpb24oKSB7CiAg
ICAgICAgICAgd2lkZ2V0cy5mb3JFYWNoKGZ1bmN0aW9uKHdpZGdldCwgaW5kZXgpIHsKICAgICAg
ICAgICAgIGlmICh0aGlzLmdldFZhbHVlKCkpIHsKQEAgLTcyLDcgKzcyLDcgQEAKICAgICAgIH0K
IAogICAgICAgaWYgKG9wdGlvbnMuZm9jdXNlZCkgewotICAgICAgICB2YXIgdG9nZ2xlRm9jdXNl
ZCA9IG5ldyBxeC51aS5mb3JtLlRvZ2dsZUJ1dHRvbigiRm9jdXNlZCIpOworICAgICAgICB2YXIg
dG9nZ2xlRm9jdXNlZCA9IG5ldyBxeC51aS5mb3JtLlRvZ2dsZUJ1dHRvbih0aGlzLnRyKCJGb2N1
c2VkIikpOwogICAgICAgICB0b2dnbGVGb2N1c2VkLmFkZExpc3RlbmVyKCJjaGFuZ2VWYWx1ZSIs
IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICB3aWRnZXRzLmZvckVhY2goZnVuY3Rpb24od2lkZ2V0
LCBpbmRleCkgewogICAgICAgICAgICAgaWYgKHRoaXMuZ2V0VmFsdWUoKSkgewpAQCAtODYsNyAr
ODYsNyBAQAogICAgICAgfQogCiAgICAgICBpZiAob3B0aW9ucy5pbnZhbGlkKSB7Ci0gICAgICAg
IHZhciB0b2dnbGVJbnZhbGlkID0gbmV3IHF4LnVpLmZvcm0uVG9nZ2xlQnV0dG9uKCJJbnZhbGlk
Iik7CisgICAgICAgIHZhciB0b2dnbGVJbnZhbGlkID0gbmV3IHF4LnVpLmZvcm0uVG9nZ2xlQnV0
dG9uKHRoaXMudHIoIkludmFsaWQiKSk7CiAgICAgICAgIHRvZ2dsZUludmFsaWQuYWRkTGlzdGVu
ZXIoImNoYW5nZVZhbHVlIiwgZnVuY3Rpb24oZSkgewogICAgICAgICAgIHdpZGdldHMuZm9yRWFj
aChmdW5jdGlvbih3aWRnZXQsIGluZGV4KSB7CiAgICAgICAgICAgICBpZiAod2lkZ2V0LnNldElu
dmFsaWRNZXNzYWdlICYmIHdpZGdldC5zZXRWYWxpZCkgewpAQCAtMTAwLDQgKzEwMCw0IEBACiAK
ICAgICB9CiAgIH0KLX0pOwpcIE5vIG5ld2xpbmUgYXQgZW5kIG9mIGZpbGUKK30pOwpJbmRleDog
c291cmNlL2NsYXNzL3dpZGdldGJyb3dzZXIvcGFnZXMvVHJlZVZpcnR1YWwuanMKPT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PQotLS0gc291cmNlL2NsYXNzL3dpZGdldGJyb3dzZXIvcGFnZXMvVHJlZVZpcnR1YWwuanMJKHJl
dmlzaW9uIDI3Mzc3KQorKysgc291cmNlL2NsYXNzL3dpZGdldGJyb3dzZXIvcGFnZXMvVHJlZVZp
cnR1YWwuanMJKHdvcmtpbmcgY29weSkKQEAgLTQyLDcgKzQyLDcgQEAKICAgICB7CiAgICAgICB2
YXIgd2lkZ2V0cyA9IHRoaXMuX3dpZGdldHM7CiAKLSAgICAgIHZhciB0cmVlID0gbmV3IHF4LnVp
LnRyZWV2aXJ0dWFsLlRyZWVWaXJ0dWFsKCJUcmVlVmlydHVhbCIpOworICAgICAgdmFyIHRyZWUg
PSBuZXcgcXgudWkudHJlZXZpcnR1YWwuVHJlZVZpcnR1YWwodGhpcy50cigiVHJlZVZpcnR1YWwi
KSk7CiAgICAgICB3aWRnZXRzLnB1c2godHJlZSk7CiAgICAgICB0cmVlLnNldFdpZHRoKDMwMCk7
CiAgICAgICB0cmVlLnNldEhlaWdodCgzMDApOwpAQCAtNTQsMjIgKzU0LDIyIEBACiAgICAgICB2
YXIgZGF0YU1vZGVsID0gdHJlZS5nZXREYXRhTW9kZWwoKTsKIAogICAgICAgdmFyIHRlMiA9IGRh
dGFNb2RlbC5hZGRCcmFuY2goCi0gICAgICAgIG51bGwsICJJbmJveCIsIHRydWUsIGZhbHNlCisg
ICAgICAgIG51bGwsIHRoaXMudHIoIkluYm94IiksIHRydWUsIGZhbHNlCiAgICAgICApOwogCi0g
ICAgICB2YXIgdGUgPSBkYXRhTW9kZWwuYWRkQnJhbmNoKHRlMiwgIlNwYW0iLCBmYWxzZSk7Cisg
ICAgICB2YXIgdGUgPSBkYXRhTW9kZWwuYWRkQnJhbmNoKHRlMiwgdGhpcy50cigiU3BhbSIpLCBm
YWxzZSk7CiAKICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgMzAwMDsgaSsrKQogICAgICAgewot
ICAgICAgICBkYXRhTW9kZWwuYWRkTGVhZih0ZSwgIlNwYW0gTWVzc2FnZSAjIiArIGkpOworICAg
ICAgICBkYXRhTW9kZWwuYWRkTGVhZih0ZSwgdGhpcy50cigiU3BhbSBNZXNzYWdlICMiKSArIGkp
OwogICAgICAgfQogCi0gICAgICBkYXRhTW9kZWwuYWRkQnJhbmNoKHRlMiwgIlNlbnQiLCB0cnVl
KTsKLSAgICAgIGRhdGFNb2RlbC5hZGRCcmFuY2godGUyLCAiVHJhc2giLCB0cnVlKTsKLSAgICAg
IGRhdGFNb2RlbC5hZGRCcmFuY2godGUyLCAiRGF0YSIsIHRydWUpOwotICAgICAgZGF0YU1vZGVs
LmFkZEJyYW5jaCh0ZTIsICJFZGl0IiwgdHJ1ZSk7CisgICAgICBkYXRhTW9kZWwuYWRkQnJhbmNo
KHRlMiwgdGhpcy50cigiU2VudCIpLCB0cnVlKTsKKyAgICAgIGRhdGFNb2RlbC5hZGRCcmFuY2go
dGUyLCB0aGlzLnRyKCJUcmFzaCIpLCB0cnVlKTsKKyAgICAgIGRhdGFNb2RlbC5hZGRCcmFuY2go
dGUyLCB0aGlzLnRyKCJEYXRhIiksIHRydWUpOworICAgICAgZGF0YU1vZGVsLmFkZEJyYW5jaCh0
ZTIsIHRoaXMudHIoIkVkaXQiKSwgdHJ1ZSk7CiAKICAgICAgIGRhdGFNb2RlbC5zZXREYXRhKCk7
CiAgICAgfQogICB9Ci19KTsKXCBObyBuZXdsaW5lIGF0IGVuZCBvZiBmaWxlCit9KTsKSW5kZXg6
IHNvdXJjZS9jbGFzcy93aWRnZXRicm93c2VyL3BhZ2VzL0VtYmVkRnJhbWUuanMKPT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PQotLS0gc291cmNlL2NsYXNzL3dpZGdldGJyb3dzZXIvcGFnZXMvRW1iZWRGcmFtZS5qcwkocmV2
aXNpb24gMjczNzcpCisrKyBzb3VyY2UvY2xhc3Mvd2lkZ2V0YnJvd3Nlci9wYWdlcy9FbWJlZEZy
YW1lLmpzCSh3b3JraW5nIGNvcHkpCkBAIC01NSw3ICs1NSw3IEBACiAgICAgICB0aGlzLmFkZChz
cGxpdFBhbmUpOwogCiAgICAgICAvLyBJZnJhbWUKLSAgICAgIGxhYmVsID0gbmV3IHF4LnVpLmJh
c2ljLkxhYmVsKCJJZnJhbWUiKTsKKyAgICAgIGxhYmVsID0gbmV3IHF4LnVpLmJhc2ljLkxhYmVs
KHRoaXMudHIoIklmcmFtZSIpKTsKICAgICAgIGxlZnQgPSBuZXcgcXgudWkuY29udGFpbmVyLkNv
bXBvc2l0ZShuZXcgcXgudWkubGF5b3V0LkNhbnZhcygpKTsKICAgICAgIHZhciBpRnJhbWUgPSBu
ZXcgcXgudWkuZW1iZWQuSWZyYW1lKCkuc2V0KHsKICAgICAgICAgc291cmNlOiB1cmwsCkBAIC02
Nyw3ICs2Nyw3IEBACiAgICAgICBsZWZ0LmFkZChpRnJhbWUsIHt0b3A6IDIwLCBsZWZ0OiAwLCBy
aWdodDogMH0pOwogCiAgICAgICAvLyBUaGVtZWRJZnJhbWUKLSAgICAgIGxhYmVsID0gbmV3IHF4
LnVpLmJhc2ljLkxhYmVsKCJUaGVtZWRJZnJhbWUiKTsKKyAgICAgIGxhYmVsID0gbmV3IHF4LnVp
LmJhc2ljLkxhYmVsKHRoaXMudHIoIlRoZW1lZElmcmFtZSIpKTsKICAgICAgIHJpZ2h0ID0gbmV3
IHF4LnVpLmNvbnRhaW5lci5Db21wb3NpdGUobmV3IHF4LnVpLmxheW91dC5DYW52YXMoKSk7CiAK
ICAgICAgIHZhciB0aGVtZWRJRnJhbWUgPSBuZXcgcXgudWkuZW1iZWQuVGhlbWVkSWZyYW1lKCku
c2V0KHsKQEAgLTg0LDQgKzg0LDQgQEAKIAogICAgIH0KICAgfQotfSk7ClwgTm8gbmV3bGluZSBh
dCBlbmQgb2YgZmlsZQorfSk7CkluZGV4OiBzb3VyY2UvY2xhc3Mvd2lkZ2V0YnJvd3Nlci9wYWdl
cy9UYWJsZS5qcwo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09Ci0tLSBzb3VyY2UvY2xhc3Mvd2lkZ2V0YnJvd3Nlci9wYWdl
cy9UYWJsZS5qcwkocmV2aXNpb24gMjczNzcpCisrKyBzb3VyY2UvY2xhc3Mvd2lkZ2V0YnJvd3Nl
ci9wYWdlcy9UYWJsZS5qcwkod29ya2luZyBjb3B5KQpAQCAtNjksNyArNjksNyBAQAogICAgICAg
dmFyIHJvd0RhdGEgPSB0aGlzLl9fY3JlYXRlUmFuZG9tUm93cyg1MCk7CiAKICAgICAgIHZhciB0
YWJsZU1vZGVsID0gbmV3IHF4LnVpLnRhYmxlLm1vZGVsLlNpbXBsZSgpOwotICAgICAgdGFibGVN
b2RlbC5zZXRDb2x1bW5zKFsgIklEIiwgIkEgbnVtYmVyIiwgIkEgZGF0ZSIsICJCb29sZWFuIiBd
KTsKKyAgICAgIHRhYmxlTW9kZWwuc2V0Q29sdW1ucyhbIHRoaXMudHIoIklEIiksIHRoaXMudHIo
IkEgbnVtYmVyIiksdGhpcy50ciggIkEgZGF0ZSIpLCB0aGlzLnRyKCJCb29sZWFuIikgXSk7CiAg
ICAgICB0YWJsZU1vZGVsLnNldERhdGEocm93RGF0YSk7CiAgICAgICB0YWJsZU1vZGVsLnNldENv
bHVtbkVkaXRhYmxlKDEsIHRydWUpOwogICAgICAgdGFibGVNb2RlbC5zZXRDb2x1bW5FZGl0YWJs
ZSgyLCB0cnVlKTsKQEAgLTEwNSw0ICsxMDUsNCBAQAogICAgICAgcmV0dXJuIHJvd0RhdGE7CiAg
ICAgfQogICB9Ci19KTsKXCBObyBuZXdsaW5lIGF0IGVuZCBvZiBmaWxlCit9KTsKSW5kZXg6IHNv
dXJjZS9jbGFzcy93aWRnZXRicm93c2VyL3BhZ2VzL1dpbmRvdy5qcwo9PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci0tLSBz
b3VyY2UvY2xhc3Mvd2lkZ2V0YnJvd3Nlci9wYWdlcy9XaW5kb3cuanMJKHJldmlzaW9uIDI3Mzc3
KQorKysgc291cmNlL2NsYXNzL3dpZGdldGJyb3dzZXIvcGFnZXMvV2luZG93LmpzCSh3b3JraW5n
IGNvcHkpCkBAIC04MiwyMyArODIsMjMgQEAKICAgICBfX2NyZWF0ZVdpbmRvdzEgOiBmdW5jdGlv
bigpCiAgICAgewogICAgICAgLy8gQ3JlYXRlIHRoZSBXaW5kb3cKLSAgICAgIHZhciB3aW4gPSBu
ZXcgcXgudWkud2luZG93LldpbmRvdygiRmlyc3QgV2luZG93IiwgImljb24vMTYvYXBwcy9vZmZp
Y2UtY2FsZW5kYXIucG5nIik7CisgICAgICB2YXIgd2luID0gbmV3IHF4LnVpLndpbmRvdy5XaW5k
b3codGhpcy50cigiRmlyc3QgV2luZG93IiksICJpY29uLzE2L2FwcHMvb2ZmaWNlLWNhbGVuZGFy
LnBuZyIpOwogICAgICAgd2luLnNldExheW91dChuZXcgcXgudWkubGF5b3V0LlZCb3goMTApKTsK
ICAgICAgIHdpbi5zZXRTaG93U3RhdHVzYmFyKHRydWUpOwotICAgICAgd2luLnNldFN0YXR1cygi
RGVtbyBsb2FkZWQiKTsKKyAgICAgIHdpbi5zZXRTdGF0dXModGhpcy50cigiRGVtbyBsb2FkZWQi
KSk7CiAKICAgICAgIC8vIFRlc3QgZm9yIG1vdmUgbGlzdGVuZXIKICAgICAgIHdpbi5hZGRMaXN0
ZW5lcigibW92ZSIsIGZ1bmN0aW9uKGUpIHsKLSAgICAgICAgdGhpcy5kZWJ1ZygiTW92ZWQgdG86
ICIgKyBlLmdldERhdGEoKS5sZWZ0ICsgIngiICsgZS5nZXREYXRhKCkudG9wKTsKKyAgICAgICAg
dGhpcy5kZWJ1Zyh0aGlzLnRyKCJNb3ZlZCB0bzogIikgKyBlLmdldERhdGEoKS5sZWZ0ICsgIngi
ICsgZS5nZXREYXRhKCkudG9wKTsKICAgICAgIH0sIHRoaXMpOwogCiAgICAgICAvLyBUZXN0IGZv
ciByZXNpemUgbGlzdGVuZXIKICAgICAgIHdpbi5hZGRMaXN0ZW5lcigicmVzaXplIiwgZnVuY3Rp
b24oZSkgewotICAgICAgICB0aGlzLmRlYnVnKCJSZXNpemVkIHRvOiAiICsgZS5nZXREYXRhKCku
d2lkdGggKyAieCIgKyBlLmdldERhdGEoKS5oZWlnaHQpOworICAgICAgICB0aGlzLmRlYnVnKHRo
aXMudHIoIlJlc2l6ZWQgdG86ICIpICsgZS5nZXREYXRhKCkud2lkdGggKyAieCIgKyBlLmdldERh
dGEoKS5oZWlnaHQpOwogICAgICAgfSwgdGhpcyk7CiAKICAgICAgIC8vIEFkZCBhbiBBdG9tCi0g
ICAgICB2YXIgYXRvbSA9IG5ldyBxeC51aS5iYXNpYy5BdG9tKCJXZWxjb21lIHRvIHlvdXIgZmly
c3Qgb3duIFdpbmRvdy48YnIvPkhhdmUgZnVuISIsICJpY29uLzMyL2FwcHMvb2ZmaWNlLWFkZHJl
c3MtYm9vay5wbmciKTsKKyAgICAgIHZhciBhdG9tID0gbmV3IHF4LnVpLmJhc2ljLkF0b20odGhp
cy50cigiV2VsY29tZSB0byB5b3VyIGZpcnN0IG93biBXaW5kb3cuPGJyLz5IYXZlIGZ1biEiKSwg
Imljb24vMzIvYXBwcy9vZmZpY2UtYWRkcmVzcy1ib29rLnBuZyIpOwogICAgICAgYXRvbS5zZXRS
aWNoKHRydWUpOwogICAgICAgd2luLmFkZChhdG9tKTsKIApAQCAtMTA2LDEzICsxMDYsMTMgQEAK
ICAgICAgIHZhciB0YWJWaWV3ID0gbmV3IHF4LnVpLnRhYnZpZXcuVGFiVmlldzsKICAgICAgIHdp
bi5hZGQodGFiVmlldywge2ZsZXg6MX0pOwogCi0gICAgICB2YXIgcGFnZTEgPSBuZXcgcXgudWku
dGFidmlldy5QYWdlKCJQYWdlIDEiKTsKKyAgICAgIHZhciBwYWdlMSA9IG5ldyBxeC51aS50YWJ2
aWV3LlBhZ2UodGhpcy50cigiUGFnZSAxIikpOwogICAgICAgdGFiVmlldy5hZGQocGFnZTEpOwog
Ci0gICAgICB2YXIgcGFnZTIgPSBuZXcgcXgudWkudGFidmlldy5QYWdlKCJQYWdlIDIiKTsKKyAg
ICAgIHZhciBwYWdlMiA9IG5ldyBxeC51aS50YWJ2aWV3LlBhZ2UodGhpcy50cigiUGFnZSAyIikp
OwogICAgICAgdGFiVmlldy5hZGQocGFnZTIpOwogCi0gICAgICB2YXIgcGFnZTMgPSBuZXcgcXgu
dWkudGFidmlldy5QYWdlKCJQYWdlIDMiKTsKKyAgICAgIHZhciBwYWdlMyA9IG5ldyBxeC51aS50
YWJ2aWV3LlBhZ2UodGhpcy50cigiUGFnZSAzIikpOwogICAgICAgdGFiVmlldy5hZGQocGFnZTMp
OwogCiAgICAgICByZXR1cm4gd2luOwpAQCAtMTIxLDExICsxMjEsMTEgQEAKIAogICAgIF9fY3Jl
YXRlV2luZG93MiA6IGZ1bmN0aW9uKCkKICAgICB7Ci0gICAgICB2YXIgd2luID0gbmV3IHF4LnVp
LndpbmRvdy5XaW5kb3coIlNlY29uZCBXaW5kb3ciLCAiaWNvbi8xNi9hcHBzL2ludGVybmV0LWZl
ZWQtcmVhZGVyLnBuZyIpOworICAgICAgdmFyIHdpbiA9IG5ldyBxeC51aS53aW5kb3cuV2luZG93
KHRoaXMudHIoIlNlY29uZCBXaW5kb3ciKSwgImljb24vMTYvYXBwcy9pbnRlcm5ldC1mZWVkLXJl
YWRlci5wbmciKTsKICAgICAgIHdpbi5zZXRMYXlvdXQobmV3IHF4LnVpLmxheW91dC5WQm94KDEw
KSk7Ci0gICAgICB3aW4uc2V0U3RhdHVzKCJBcHBsaWNhdGlvbiBpcyByZWFkeSIpOworICAgICAg
d2luLnNldFN0YXR1cyh0aGlzLnRyKCJBcHBsaWNhdGlvbiBpcyByZWFkeSIpKTsKIAotICAgICAg
dmFyIGF0b20gPSBuZXcgcXgudWkuYmFzaWMuQXRvbSgiVGhlIHNlY29uZCB3aW5kb3ciLCAiaWNv
bi8yMi9hcHBzL3V0aWxpdGllcy1jYWxjdWxhdG9yLnBuZyIpOworICAgICAgdmFyIGF0b20gPSBu
ZXcgcXgudWkuYmFzaWMuQXRvbSh0aGlzLnRyKCJUaGUgc2Vjb25kIHdpbmRvdyIpLCAiaWNvbi8y
Mi9hcHBzL3V0aWxpdGllcy1jYWxjdWxhdG9yLnBuZyIpOwogICAgICAgd2luLmFkZChhdG9tKTsK
IAogCkBAIC0xMzUsMjcgKzEzNSwyNyBAQAogCiAKIAotICAgICAgdmFyIGJhc2ljU2V0dGluZ3Mg
PSBuZXcgcXgudWkuZ3JvdXBib3guR3JvdXBCb3goIkJhc2ljcyIpOworICAgICAgdmFyIGJhc2lj
U2V0dGluZ3MgPSBuZXcgcXgudWkuZ3JvdXBib3guR3JvdXBCb3godGhpcy50cigiQmFzaWNzIikp
OwogICAgICAgYmFzaWNTZXR0aW5ncy5zZXRMYXlvdXQobmV3IHF4LnVpLmxheW91dC5WQm94KDQp
KTsKICAgICAgIGJveC5hZGQoYmFzaWNTZXR0aW5ncywge2ZsZXg6MX0pOwogCiAKIAotICAgICAg
dmFyIHNob3dDbG9zZSA9IG5ldyBxeC51aS5mb3JtLkNoZWNrQm94KCJTaG93IENsb3NlIik7Cisg
ICAgICB2YXIgc2hvd0Nsb3NlID0gbmV3IHF4LnVpLmZvcm0uQ2hlY2tCb3godGhpcy50cigiU2hv
dyBDbG9zZSIpKTsKICAgICAgIHNob3dDbG9zZS5zZXRWYWx1ZSh0cnVlKTsKICAgICAgIHNob3dD
bG9zZS5hZGRMaXN0ZW5lcigiY2hhbmdlVmFsdWUiLCBmdW5jdGlvbihlKSB7CiAgICAgICAgIHdp
bi5zZXRTaG93Q2xvc2UoZS5nZXREYXRhKCkpOwogICAgICAgfSk7CiAgICAgICBiYXNpY1NldHRp
bmdzLmFkZChzaG93Q2xvc2UpOwogCi0gICAgICB2YXIgc2hvd01heGltaXplID0gbmV3IHF4LnVp
LmZvcm0uQ2hlY2tCb3goIlNob3cgTWF4aW1pemUiKTsKKyAgICAgIHZhciBzaG93TWF4aW1pemUg
PSBuZXcgcXgudWkuZm9ybS5DaGVja0JveCh0aGlzLnRyKCJTaG93IE1heGltaXplIikpOwogICAg
ICAgc2hvd01heGltaXplLnNldFZhbHVlKHRydWUpOwogICAgICAgc2hvd01heGltaXplLmFkZExp
c3RlbmVyKCJjaGFuZ2VWYWx1ZSIsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgd2luLnNldFNob3dN
YXhpbWl6ZShlLmdldERhdGEoKSk7CiAgICAgICB9KTsKICAgICAgIGJhc2ljU2V0dGluZ3MuYWRk
KHNob3dNYXhpbWl6ZSk7CiAKLSAgICAgIHZhciBzaG93TWluaW1pemUgPSBuZXcgcXgudWkuZm9y
bS5DaGVja0JveCgiU2hvdyBNaW5pbWl6ZSIpOworICAgICAgdmFyIHNob3dNaW5pbWl6ZSA9IG5l
dyBxeC51aS5mb3JtLkNoZWNrQm94KHRoaXMudHIoIlNob3cgTWluaW1pemUiKSk7CiAgICAgICBz
aG93TWluaW1pemUuc2V0VmFsdWUodHJ1ZSk7CiAgICAgICBzaG93TWluaW1pemUuYWRkTGlzdGVu
ZXIoImNoYW5nZVZhbHVlIiwgZnVuY3Rpb24oZSkgewogICAgICAgICB3aW4uc2V0U2hvd01pbmlt
aXplKGUuZ2V0RGF0YSgpKTsKQEAgLTE2NCwyMSArMTY0LDIxIEBACiAKIAogCi0gICAgICB2YXIg
YWxsb3dDbG9zZSA9IG5ldyBxeC51aS5mb3JtLkNoZWNrQm94KCJBbGxvdyBDbG9zZSIpOworICAg
ICAgdmFyIGFsbG93Q2xvc2UgPSBuZXcgcXgudWkuZm9ybS5DaGVja0JveCh0aGlzLnRyKCJBbGxv
dyBDbG9zZSIpKTsKICAgICAgIGFsbG93Q2xvc2Uuc2V0VmFsdWUodHJ1ZSk7CiAgICAgICBhbGxv
d0Nsb3NlLmFkZExpc3RlbmVyKCJjaGFuZ2VWYWx1ZSIsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAg
d2luLnNldEFsbG93Q2xvc2UoZS5nZXREYXRhKCkpOwogICAgICAgfSk7CiAgICAgICBiYXNpY1Nl
dHRpbmdzLmFkZChhbGxvd0Nsb3NlKTsKIAotICAgICAgdmFyIGFsbG93TWF4aW1pemUgPSBuZXcg
cXgudWkuZm9ybS5DaGVja0JveCgiQWxsb3cgTWF4aW1pemUiKTsKKyAgICAgIHZhciBhbGxvd01h
eGltaXplID0gbmV3IHF4LnVpLmZvcm0uQ2hlY2tCb3godGhpcy50cigiQWxsb3cgTWF4aW1pemUi
KSk7CiAgICAgICBhbGxvd01heGltaXplLnNldFZhbHVlKHRydWUpOwogICAgICAgYWxsb3dNYXhp
bWl6ZS5hZGRMaXN0ZW5lcigiY2hhbmdlVmFsdWUiLCBmdW5jdGlvbihlKSB7CiAgICAgICAgIHdp
bi5zZXRBbGxvd01heGltaXplKGUuZ2V0RGF0YSgpKTsKICAgICAgIH0pOwogICAgICAgYmFzaWNT
ZXR0aW5ncy5hZGQoYWxsb3dNYXhpbWl6ZSk7CiAKLSAgICAgIHZhciBhbGxvd01pbmltaXplID0g
bmV3IHF4LnVpLmZvcm0uQ2hlY2tCb3goIkFsbG93IE1pbmltaXplIik7CisgICAgICB2YXIgYWxs
b3dNaW5pbWl6ZSA9IG5ldyBxeC51aS5mb3JtLkNoZWNrQm94KHRoaXMudHIoIkFsbG93IE1pbmlt
aXplIikpOwogICAgICAgYWxsb3dNaW5pbWl6ZS5zZXRWYWx1ZSh0cnVlKTsKICAgICAgIGFsbG93
TWluaW1pemUuYWRkTGlzdGVuZXIoImNoYW5nZVZhbHVlIiwgZnVuY3Rpb24oZSkgewogICAgICAg
ICB3aW4uc2V0QWxsb3dNaW5pbWl6ZShlLmdldERhdGEoKSk7CkBAIC0xODcsNyArMTg3LDcgQEAK
IAogCiAKLSAgICAgIHZhciBzaG93U3RhdHVzYmFyID0gbmV3IHF4LnVpLmZvcm0uQ2hlY2tCb3go
IlNob3cgU3RhdHVzYmFyIik7CisgICAgICB2YXIgc2hvd1N0YXR1c2JhciA9IG5ldyBxeC51aS5m
b3JtLkNoZWNrQm94KHRoaXMudHIoIlNob3cgU3RhdHVzYmFyIikpOwogICAgICAgc2hvd1N0YXR1
c2Jhci5zZXRWYWx1ZShmYWxzZSk7CiAgICAgICBzaG93U3RhdHVzYmFyLmFkZExpc3RlbmVyKCJj
aGFuZ2VWYWx1ZSIsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgd2luLnNldFNob3dTdGF0dXNiYXIo
ZS5nZXREYXRhKCkpOwpAQCAtMTk2LDExICsxOTYsMTEgQEAKIAogCiAKLSAgICAgIHZhciByZXNp
emUgPSBuZXcgcXgudWkuZ3JvdXBib3guR3JvdXBCb3goIlJlc2l6YWJsZSIpOworICAgICAgdmFy
IHJlc2l6ZSA9IG5ldyBxeC51aS5ncm91cGJveC5Hcm91cEJveCh0aGlzLnRyKCJSZXNpemFibGUi
KSk7CiAgICAgICByZXNpemUuc2V0TGF5b3V0KG5ldyBxeC51aS5sYXlvdXQuVkJveCg0KSk7CiAg
ICAgICBib3guYWRkKHJlc2l6ZSwge2ZsZXg6MX0pOwogCi0gICAgICB2YXIgcmVzaXplRnJhbWUg
PSBuZXcgcXgudWkuZm9ybS5DaGVja0JveCgiVXNlIHJlc2l6ZSBmcmFtZSIpOworICAgICAgdmFy
IHJlc2l6ZUZyYW1lID0gbmV3IHF4LnVpLmZvcm0uQ2hlY2tCb3godGhpcy50cigiVXNlIHJlc2l6
ZSBmcmFtZSIpKTsKICAgICAgIHJlc2l6ZUZyYW1lLnNldFZhbHVlKHRydWUpOwogICAgICAgcmVz
aXplRnJhbWUuYWRkTGlzdGVuZXIoImNoYW5nZVZhbHVlIiwgZnVuY3Rpb24oZSkgewogICAgICAg
ICB3aW4uc2V0VXNlUmVzaXplRnJhbWUoZS5nZXREYXRhKCkpOwpAQCAtMjExLDI1ICsyMTEsMjUg
QEAKICAgICAgIGZvciAodmFyIGk9MDsgaTxlZGdlcy5sZW5ndGg7IGkrKykKICAgICAgIHsKICAg
ICAgICAgdmFyIGVkZ2UgPSBlZGdlc1tpXTsKLSAgICAgICAgdmFyIHJlc2l6YWJsZSA9IG5ldyBx
eC51aS5mb3JtLkNoZWNrQm94KCJSZXNpemFibGUgIiArIGVkZ2UpLnNldCh7CisgICAgICAgIHZh
ciByZXNpemFibGUgPSBuZXcgcXgudWkuZm9ybS5DaGVja0JveCh0aGlzLnRyKCJSZXNpemFibGUg
IikgKyBlZGdlKS5zZXQoewogICAgICAgICAgIHZhbHVlOiB0cnVlCiAgICAgICAgIH0pOwogICAg
ICAgICByZXNpemFibGUuYmluZCgidmFsdWUiLCB3aW4sICJyZXNpemFibGUiICsgcXgubGFuZy5T
dHJpbmcuZmlyc3RVcChlZGdlKSk7CiAgICAgICAgIHJlc2l6ZS5hZGQocmVzaXphYmxlKTsKICAg
ICAgIH0KIAotICAgICAgdmFyIG1vdmUgPSBuZXcgcXgudWkuZ3JvdXBib3guR3JvdXBCb3goIk1v
dmVhYmxlIik7CisgICAgICB2YXIgbW92ZSA9IG5ldyBxeC51aS5ncm91cGJveC5Hcm91cEJveCh0
aGlzLnRyKCJNb3ZlYWJsZSIpKTsKICAgICAgIG1vdmUuc2V0TGF5b3V0KG5ldyBxeC51aS5sYXlv
dXQuVkJveCg0KSk7CiAgICAgICBib3guYWRkKG1vdmUsIHtmbGV4OjF9KTsKIAotICAgICAgdmFy
IG1vdmFibGUgPSBuZXcgcXgudWkuZm9ybS5DaGVja0JveCgiTW92YWJsZSIpOworICAgICAgdmFy
IG1vdmFibGUgPSBuZXcgcXgudWkuZm9ybS5DaGVja0JveCh0aGlzLnRyKCJNb3ZhYmxlIikpOwog
ICAgICAgbW92YWJsZS5zZXRWYWx1ZSh0cnVlKTsKICAgICAgIG1vdmFibGUuYWRkTGlzdGVuZXIo
ImNoYW5nZVZhbHVlIiwgZnVuY3Rpb24oZSkgewogICAgICAgICB3aW4uc2V0TW92YWJsZShlLmdl
dERhdGEoKSk7CiAgICAgICB9KTsKICAgICAgIG1vdmUuYWRkKG1vdmFibGUpOwogCi0gICAgICB2
YXIgbW92ZUZyYW1lID0gbmV3IHF4LnVpLmZvcm0uQ2hlY2tCb3goIlVzZSBtb3ZlIGZyYW1lIik7
CisgICAgICB2YXIgbW92ZUZyYW1lID0gbmV3IHF4LnVpLmZvcm0uQ2hlY2tCb3godGhpcy50cigi
VXNlIG1vdmUgZnJhbWUiKSk7CiAgICAgICBtb3ZlRnJhbWUuYWRkTGlzdGVuZXIoImNoYW5nZVZh
bHVlIiwgZnVuY3Rpb24oZSkgewogICAgICAgICB3aW4uc2V0VXNlTW92ZUZyYW1lKGUuZ2V0RGF0
YSgpKTsKICAgICAgIH0pOwpAQCAtMjQxLDcgKzI0MSw3IEBACiAKICAgICBfX2NyZWF0ZVdpbmRv
dzMgOiBmdW5jdGlvbigpCiAgICAgewotICAgICAgdmFyIHdpbiA9IG5ldyBxeC51aS53aW5kb3cu
V2luZG93KCJUaGlyZCBXaW5kb3ciLCAiaWNvbi8xNi9hcHBzL2ludGVybmV0LXRlbGVwaG9ueS5w
bmciKTsKKyAgICAgIHZhciB3aW4gPSBuZXcgcXgudWkud2luZG93LldpbmRvdyh0aGlzLnRyKCJU
aGlyZCBXaW5kb3ciKSwgImljb24vMTYvYXBwcy9pbnRlcm5ldC10ZWxlcGhvbnkucG5nIik7CiAg
ICAgICB3aW4uc2V0TGF5b3V0KG5ldyBxeC51aS5sYXlvdXQuVkJveCk7CiAgICAgICB3aW4uc2V0
TWluV2lkdGgoMjAwKTsKICAgICAgIHdpbi5zZXRNYXhXaWR0aCg0NTApOwpAQCAtMjQ5LDcgKzI0
OSw3IEBACiAgICAgICB3aW4uc2V0QWxsb3dNYXhpbWl6ZShmYWxzZSk7CiAKICAgICAgIHZhciB3
bTEgPSB0aGlzLl9fZ2V0TW9kYWxXaW5kb3cxKCk7Ci0gICAgICB2YXIgYnRuMSA9IG5ldyBxeC51
aS5mb3JtLkJ1dHRvbigiT3BlbiBNb2RhbCBEaWFsb2cgMSIsICJpY29uLzE2L2FwcHMvb2ZmaWNl
LWNhbGVuZGFyLnBuZyIpOworICAgICAgdmFyIGJ0bjEgPSBuZXcgcXgudWkuZm9ybS5CdXR0b24o
dGhpcy50cigiT3BlbiBNb2RhbCBEaWFsb2cgMSIpLCAiaWNvbi8xNi9hcHBzL29mZmljZS1jYWxl
bmRhci5wbmciKTsKICAgICAgIGJ0bjEuYWRkTGlzdGVuZXIoImV4ZWN1dGUiLCB3bTEub3Blbiwg
d20xKTsKICAgICAgIHdpbi5hZGQoYnRuMSk7CiAKQEAgLTI1OSw3ICsyNTksNyBAQAogCiAgICAg
X19nZXRNb2RhbFdpbmRvdzEgOiBmdW5jdGlvbigpCiAgICAgewotICAgICAgdmFyIHdtMSA9IG5l
dyBxeC51aS53aW5kb3cuV2luZG93KCJGaXJzdCBNb2RhbCBEaWFsb2ciKTsKKyAgICAgIHZhciB3
bTEgPSBuZXcgcXgudWkud2luZG93LldpbmRvdyh0aGlzLnRyKCJGaXJzdCBNb2RhbCBEaWFsb2ci
KSk7CiAgICAgICB3bTEuc2V0TGF5b3V0KG5ldyBxeC51aS5sYXlvdXQuVkJveCgxMCkpOwogICAg
ICAgd20xLnNldE1vZGFsKHRydWUpOwogICAgICAgd20xLm1vdmVUbygxNTAsIDE1MCk7CkBAIC0y
NjcsMTEgKzI2NywxMSBAQAogCiAgICAgICB2YXIgd20yID0gdGhpcy5fX2dldE1vZGFsV2luZG93
MigpOwogCi0gICAgICB2YXIgYnRuMiA9IG5ldyBxeC51aS5mb3JtLkJ1dHRvbigiT3BlbiBNb2Rh
bCBEaWFsb2cgMiIsICJpY29uLzE2L2FwcHMvb2ZmaWNlLWNhbGVuZGFyLnBuZyIpOworICAgICAg
dmFyIGJ0bjIgPSBuZXcgcXgudWkuZm9ybS5CdXR0b24odGhpcy50cigiT3BlbiBNb2RhbCBEaWFs
b2cgMiIpLCAiaWNvbi8xNi9hcHBzL29mZmljZS1jYWxlbmRhci5wbmciKTsKICAgICAgIGJ0bjIu
YWRkTGlzdGVuZXIoImV4ZWN1dGUiLCB3bTIub3Blbiwgd20yKTsKICAgICAgIHdtMS5hZGQoYnRu
Mik7CiAKLSAgICAgIHZhciBjaGttMSA9IG5ldyBxeC51aS5mb3JtLkNoZWNrQm94KCJNb2RhbCIp
OworICAgICAgdmFyIGNoa20xID0gbmV3IHF4LnVpLmZvcm0uQ2hlY2tCb3godGhpcy50cigiTW9k
YWwiKSk7CiAgICAgICBjaGttMS5zZXRWYWx1ZSh0cnVlKTsKICAgICAgIHdtMS5hZGQoY2hrbTEp
OwogCkBAIC0yODUsMzMgKzI4NSwzMyBAQAogCiAgICAgX19nZXRNb2RhbFdpbmRvdzIgOiBmdW5j
dGlvbigpCiAgICAgewotICAgICAgdmFyIHdtMiA9IG5ldyBxeC51aS53aW5kb3cuV2luZG93KCJT
ZWNvbmQgTW9kYWwgRGlhbG9nIik7CisgICAgICB2YXIgd20yID0gbmV3IHF4LnVpLndpbmRvdy5X
aW5kb3codGhpcy50cigiU2Vjb25kIE1vZGFsIERpYWxvZyIpKTsKICAgICAgIHdtMi5zZXRMYXlv
dXQobmV3IHF4LnVpLmxheW91dC5WQm94KDEwKSk7CiAgICAgICB3bTIuc2V0TW9kYWwodHJ1ZSk7
CiAgICAgICB3bTIuc2V0U2hvd0Nsb3NlKGZhbHNlKTsKICAgICAgIHdtMi5tb3ZlVG8oMzAwLCAz
MDApOwogICAgICAgdGhpcy5fX2Rlc2t0b3AuYWRkKHdtMik7CiAKLSAgICAgIHZhciB3YXJuMSA9
IG5ldyBxeC51aS5iYXNpYy5BdG9tKCJEbyB5b3Ugd2FudCB0byBmbHkgdG8gQmVybGluPyIsICJp
Y29uLzMyL3N0YXR1cy9kaWFsb2ctZXJyb3IucG5nIik7CisgICAgICB2YXIgd2FybjEgPSBuZXcg
cXgudWkuYmFzaWMuQXRvbSh0aGlzLnRyKCJEbyB5b3Ugd2FudCB0byBmbHkgdG8gQmVybGluPyIp
LCAiaWNvbi8zMi9zdGF0dXMvZGlhbG9nLWVycm9yLnBuZyIpOwogICAgICAgd20yLmFkZCh3YXJu
MSk7CiAKICAgICAgIHZhciBib3ggPSBuZXcgcXgudWkuY29udGFpbmVyLkNvbXBvc2l0ZTsKICAg
ICAgIGJveC5zZXRMYXlvdXQobmV3IHF4LnVpLmxheW91dC5IQm94KDEwLCAicmlnaHQiKSk7CiAg
ICAgICB3bTIuYWRkKGJveCk7CiAKLSAgICAgIHZhciBidG4zID0gbmV3IHF4LnVpLmZvcm0uQnV0
dG9uKCJZZXMiLCAiaWNvbi8xNi9hY3Rpb25zL2RpYWxvZy1vay5wbmciKTsKKyAgICAgIHZhciBi
dG4zID0gbmV3IHF4LnVpLmZvcm0uQnV0dG9uKHRoaXMudHIoIlllcyIpLCAiaWNvbi8xNi9hY3Rp
b25zL2RpYWxvZy1vay5wbmciKTsKICAgICAgIGJ0bjMuYWRkTGlzdGVuZXIoImV4ZWN1dGUiLCBm
dW5jdGlvbihlKSB7CiAgICAgICAgIHdtMi5jbG9zZSgpOwogICAgICAgfSk7CiAgICAgICBib3gu
YWRkKGJ0bjMpOwogCi0gICAgICB2YXIgYnRuNCA9IG5ldyBxeC51aS5mb3JtLkJ1dHRvbigiTm8i
LCAiaWNvbi8xNi9hY3Rpb25zL2RpYWxvZy1jYW5jZWwucG5nIik7CisgICAgICB2YXIgYnRuNCA9
IG5ldyBxeC51aS5mb3JtLkJ1dHRvbih0aGlzLnRyKCJObyIpLCAiaWNvbi8xNi9hY3Rpb25zL2Rp
YWxvZy1jYW5jZWwucG5nIik7CiAgICAgICBidG40LmFkZExpc3RlbmVyKCJleGVjdXRlIiwgZnVu
Y3Rpb24oZSkgewotICAgICAgICBhbGVydCgiU29ycnksIHBsZWFzZSBjbGljayAnWWVzJyEiKTsK
KyAgICAgICAgYWxlcnQodGhpcy50cigiU29ycnksIHBsZWFzZSBjbGljayAnWWVzJyEiKSk7CiAg
ICAgICB9KTsKICAgICAgIGJveC5hZGQoYnRuNCk7CiAKICAgICAgIHJldHVybiB3bTI7CiAgICAg
fQogICB9Ci19KTsKXCBObyBuZXdsaW5lIGF0IGVuZCBvZiBmaWxlCit9KTsKSW5kZXg6IHNvdXJj
ZS9jbGFzcy93aWRnZXRicm93c2VyL3BhZ2VzL01pc2MuanMKPT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQotLS0gc291cmNl
L2NsYXNzL3dpZGdldGJyb3dzZXIvcGFnZXMvTWlzYy5qcwkocmV2aXNpb24gMjczNzcpCisrKyBz
b3VyY2UvY2xhc3Mvd2lkZ2V0YnJvd3Nlci9wYWdlcy9NaXNjLmpzCSh3b3JraW5nIGNvcHkpCkBA
IC01NiwxNCArNTYsMTQgQEAKICAgICAgIHZhciBzdWJjb250YWluZXI7CiAKICAgICAgIC8vIFBy
b2dyZXNzQmFyCi0gICAgICB2YXIgbGFiZWwgPSBuZXcgcXgudWkuYmFzaWMuTGFiZWwoIlByb2dy
ZXNzQmFyIik7CisgICAgICB2YXIgbGFiZWwgPSBuZXcgcXgudWkuYmFzaWMuTGFiZWwodGhpcy50
cigiUHJvZ3Jlc3NCYXIiKSk7CiAgICAgICB2YXIgcGIgPSBuZXcgcXgudWkuaW5kaWNhdG9yLlBy
b2dyZXNzQmFyKDAsIDEwMCkuc2V0KHt2YWx1ZTogNTB9KTsKICAgICAgIHdpZGdldHMucHVzaChw
Yik7CiAgICAgICB0aGlzLl9fdmJveC5hZGQobGFiZWwpOwogICAgICAgdGhpcy5fX3Zib3guYWRk
KHBiKTsKIAogICAgICAgLy8gU2xpZGVCYXIKLSAgICAgIGxhYmVsID0gbmV3IHF4LnVpLmJhc2lj
LkxhYmVsKCJTbGlkZUJhciIpOworICAgICAgbGFiZWwgPSBuZXcgcXgudWkuYmFzaWMuTGFiZWwo
dGhpcy50cigiU2xpZGVCYXIiKSk7CiAgICAgICB2YXIgc2xpZGVCYXIgPSBuZXcgcXgudWkuY29u
dGFpbmVyLlNsaWRlQmFyKCk7CiAgICAgICBzbGlkZUJhci5zZXRXaWR0aCgzMDApOwogICAgICAg
c2xpZGVCYXIuc2V0TGF5b3V0KG5ldyBxeC51aS5sYXlvdXQuSEJveCgzKSk7CkBAIC04NCw3ICs4
NCw3IEBACiAgICAgICB0aGlzLl9fdmJveC5hZGQoc2xpZGVCYXIpOwogCiAgICAgICAvLyBQb3At
VXAKLSAgICAgIGxhYmVsID0gbmV3IHF4LnVpLmJhc2ljLkxhYmVsKCJQb3AtVXAiKTsKKyAgICAg
IGxhYmVsID0gbmV3IHF4LnVpLmJhc2ljLkxhYmVsKHRoaXMudHIoIlBvcC1VcCIpKTsKICAgICAg
IHZhciBwb3B1cCA9IG5ldyBxeC51aS5wb3B1cC5Qb3B1cChuZXcgcXgudWkubGF5b3V0LkNhbnZh
cygpKS5zZXQoewogICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICIjRkZGQUQzIiwKICAgICAgICAg
cGFkZGluZzogWzIsIDRdLApAQCAtOTUsMTQgKzk1LDE0IEBACiAgICAgICAgIGFsbG93U3RyZXRj
aFg6IGZhbHNlLAogICAgICAgICBhdXRvSGlkZTogZmFsc2UKICAgICAgIH0pOwotICAgICAgcG9w
dXAuYWRkKG5ldyBxeC51aS5iYXNpYy5BdG9tKCJQb3AtVXAiLCAiaWNvbi8zMi9hcHBzL21lZGlh
LXBob3RvLWFsYnVtLnBuZyIpKTsKKyAgICAgIHBvcHVwLmFkZChuZXcgcXgudWkuYmFzaWMuQXRv
bSh0aGlzLnRyKCJQb3AtVXAiKSwgImljb24vMzIvYXBwcy9tZWRpYS1waG90by1hbGJ1bS5wbmci
KSk7CiAgICAgICB3aWRnZXRzLnB1c2gocG9wdXApOwogICAgICAgdGhpcy5fX3Zib3guYWRkKGxh
YmVsKTsKICAgICAgIHRoaXMuX192Ym94LmFkZChwb3B1cCk7CiAgICAgICBwb3B1cC5zaG93KCk7
CiAKICAgICAgIC8vIFJlc2l6ZXIKLSAgICAgIGxhYmVsID0gbmV3IHF4LnVpLmJhc2ljLkxhYmVs
KCJSZXNpemVyIikKKyAgICAgIGxhYmVsID0gbmV3IHF4LnVpLmJhc2ljLkxhYmVsKHRoaXMudHIo
IlJlc2l6ZXIiKSk7CiAgICAgICBzdWJjb250YWluZXIgPSBuZXcgcXgudWkuY29udGFpbmVyLkNv
bXBvc2l0ZShuZXcgcXgudWkubGF5b3V0LkNhbnZhcygpKTsKICAgICAgIHZhciByZXNpemVyID0g
bmV3IHF4LnVpLmNvbnRhaW5lci5SZXNpemVyKCkuc2V0KHsKICAgICAgICAgcmVzaXphYmxlOiBm
YWxzZSwKQEAgLTEyMSw3ICsxMjEsNyBAQAogICAgICAgdGhpcy5fX3Zib3guYWRkKHN1YmNvbnRh
aW5lcik7CiAKICAgICAgIC8vIERyYWdEcm9wCi0gICAgICBsYWJlbCA9IG5ldyBxeC51aS5iYXNp
Yy5MYWJlbCgiRHJhZ0Ryb3AiKTsKKyAgICAgIGxhYmVsID0gbmV3IHF4LnVpLmJhc2ljLkxhYmVs
KHRoaXMudHIoIkRyYWdEcm9wIikpOwogICAgICAgc3ViY29udGFpbmVyID0gbmV3IHF4LnVpLmNv
bnRhaW5lci5Db21wb3NpdGUobmV3IHF4LnVpLmxheW91dC5IQm94KDEwKSk7CiAgICAgICBzdWJj
b250YWluZXIuc2V0KHsKICAgICAgICAgYWxsb3dTdHJldGNoWSA6IGZhbHNlLApAQCAtMTM0LDcg
KzEzNCw3IEBACiAgICAgICBzb3VyY2Uuc2V0RHJhZ2dhYmxlKHRydWUpOwogICAgICAgc291cmNl
LnNldFNlbGVjdGlvbk1vZGUoIm11bHRpIik7CiAgICAgICBmb3IgKHZhciBpPTA7IGk8MTA7IGkr
KykgewotICAgICAgICBzb3VyY2UuYWRkKG5ldyBxeC51aS5mb3JtLkxpc3RJdGVtKCJJdGVtICIg
KyBpLCAiaWNvbi8xNi9wbGFjZXMvZm9sZGVyLnBuZyIpKTsKKyAgICAgICAgc291cmNlLmFkZChu
ZXcgcXgudWkuZm9ybS5MaXN0SXRlbSh0aGlzLnRyKCJJdGVtICIpICsgaSwgImljb24vMTYvcGxh
Y2VzL2ZvbGRlci5wbmciKSk7CiAgICAgICB9CiAKICAgICAgIHNvdXJjZS5hZGRMaXN0ZW5lcigi
ZHJhZ3N0YXJ0IiwgZnVuY3Rpb24oZSkKQEAgLTE5OCw0ICsxOTgsNCBAQAogCiAgICAgfQogICB9
Ci19KTsKXCBObyBuZXdsaW5lIGF0IGVuZCBvZiBmaWxlCit9KTsKSW5kZXg6IHNvdXJjZS9jbGFz
cy93aWRnZXRicm93c2VyL3BhZ2VzL0VtYmVkLmpzCj09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KLS0tIHNvdXJjZS9jbGFz
cy93aWRnZXRicm93c2VyL3BhZ2VzL0VtYmVkLmpzCShyZXZpc2lvbiAyNzM3NykKKysrIHNvdXJj
ZS9jbGFzcy93aWRnZXRicm93c2VyL3BhZ2VzL0VtYmVkLmpzCSh3b3JraW5nIGNvcHkpCkBAIC01
OSwxMCArNTksMTAgQEAKICAgICAgIHZhciBsYWJlbDsKIAogICAgICAgLy8gRmxhc2gKLSAgICAg
IGxhYmVsID0gbmV3IHF4LnVpLmJhc2ljLkxhYmVsKCJGbGFzaCIpOworICAgICAgbGFiZWwgPSBu
ZXcgcXgudWkuYmFzaWMuTGFiZWwodGhpcy50cigiRmxhc2giKSk7CiAgICAgICB0aGlzLl9fZ3Jp
ZC5hZGQobGFiZWwsIHtyb3c6IDAsIGNvbHVtbjogMH0pOwogICAgICAgdmFyIGZsYXNoVmFycyA9
IHsKLSAgICAgICAgZmxhc2hWYXJUZXh0OiAidGhpcyBpcyBwYXNzZWQgaW4gdmlhIEZsYXNoVmFy
cyIKKyAgICAgICAgZmxhc2hWYXJUZXh0OiB0aGlzLnRyKCJ0aGlzIGlzIHBhc3NlZCBpbiB2aWEg
Rmxhc2hWYXJzIikKICAgICAgIH07CiAgICAgICB2YXIgZmxhc2ggPSBuZXcgcXgudWkuZW1iZWQu
Rmxhc2goIndpZGdldGJyb3dzZXIvZm9fdGVzdGVyLnN3ZiIpLnNldCh7CiAgICAgICAgIHNjYWxl
OiAibm9zY2FsZSIsCkBAIC03NSw3ICs3NSw3IEBACiAgICAgICB0aGlzLl9fZ3JpZC5hZGQoZmxh
c2gsIHtyb3c6IDEsIGNvbHVtbjogMCwgY29sU3BhbjogMn0pOwogCiAgICAgICAvLyBDYW52YXMK
LSAgICAgIGxhYmVsID0gbmV3IHF4LnVpLmJhc2ljLkxhYmVsKCJDYW52YXMiKTsKKyAgICAgIGxh
YmVsID0gbmV3IHF4LnVpLmJhc2ljLkxhYmVsKHRoaXMudHIoIkNhbnZhcyIpKTsKICAgICAgIHRo
aXMuX19ncmlkLmFkZChsYWJlbCwge3JvdzogMiwgY29sdW1uOiAwfSk7CiAgICAgICBpZiAocXgu
Y29yZS5FbnZpcm9ubWVudC5nZXQoImh0bWwuY2FudmFzIikpIHsKICAgICAgICAgdmFyIGNhbnZh
cyA9IG5ldyBxeC51aS5lbWJlZC5DYW52YXMoKS5zZXQoewpAQCAtODksMTEgKzg5LDExIEBACiAg
ICAgICAgIHdpZGdldHMucHVzaChjYW52YXMpOwogICAgICAgICB0aGlzLl9fZ3JpZC5hZGQoY2Fu
dmFzLCB7cm93OiAzLCBjb2x1bW46IDB9KTsKICAgICAgIH0gZWxzZSB7Ci0gICAgICAgIHRoaXMu
X19ncmlkLmFkZChuZXcgcXgudWkuYmFzaWMuTGFiZWwoIkJyb3dzZXIgZG9lcyBub3Qgc3VwcG9y
dCBjYW52YXMiKSwge3JvdzogMywgY29sdW1uOiAwfSk7CisgICAgICAgIHRoaXMuX19ncmlkLmFk
ZChuZXcgcXgudWkuYmFzaWMuTGFiZWwodGhpcy50cigiQnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0
IGNhbnZhcyIpKSwge3JvdzogMywgY29sdW1uOiAwfSk7CiAgICAgICB9CiAKICAgICAgIC8vIEhU
TUwKLSAgICAgIGxhYmVsID0gbmV3IHF4LnVpLmJhc2ljLkxhYmVsKCJIVE1MIik7CisgICAgICBs
YWJlbCA9IG5ldyBxeC51aS5iYXNpYy5MYWJlbCh0aGlzLnRyKCJIVE1MIikpOwogICAgICAgdGhp
cy5fX2dyaWQuYWRkKGxhYmVsLCB7cm93OiAyLCBjb2x1bW46IDF9KTsKIAogICAgICAgdmFyIGh0
bWxDb250YWluZXIgPSBuZXcgcXgudWkuY29udGFpbmVyLkNvbXBvc2l0ZShuZXcgcXgudWkubGF5
b3V0LlZCb3goMTApKTsKQEAgLTExNCw3ICsxMTQsNyBAQAogICAgICAgaHRtbENvbnRhaW5lci5h
ZGQoZW1iZWQxKTsKIAogICAgICAgLy8gRXhhbXBsZSBIVE1MIGVtYmVkIHdpdGggc2V0IGZvbnQK
LSAgICAgIHZhciBodG1sMiA9ICJUZXh0IHdpdGggc2V0IGZvbnQgKGJvbGQpISI7CisgICAgICB2
YXIgaHRtbDIgPSB0aGlzLnRyKCJUZXh0IHdpdGggc2V0IGZvbnQgKGJvbGQpISIpOwogICAgICAg
dmFyIGVtYmVkMiA9IG5ldyBxeC51aS5lbWJlZC5IdG1sKGh0bWwyKTsKICAgICAgIHdpZGdldHMu
cHVzaChlbWJlZDIpOwogICAgICAgZW1iZWQyLnNldE1heFdpZHRoKDIwMCk7CkBAIC0xNDYsNCAr
MTQ2LDQgQEAKICAgICAgIGN0eC5maWxsUmVjdCAoNzAsIDcwLCAxMDUsIDEwMCkKICAgICB9CiAg
IH0KLX0pOwpcIE5vIG5ld2xpbmUgYXQgZW5kIG9mIGZpbGUKK30pOwpJbmRleDogc291cmNlL2Ns
YXNzL3dpZGdldGJyb3dzZXIvcGFnZXMvVHJlZS5qcwo9PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci0tLSBzb3VyY2UvY2xh
c3Mvd2lkZ2V0YnJvd3Nlci9wYWdlcy9UcmVlLmpzCShyZXZpc2lvbiAyNzM3NykKKysrIHNvdXJj
ZS9jbGFzcy93aWRnZXRicm93c2VyL3BhZ2VzL1RyZWUuanMJKHdvcmtpbmcgY29weSkKQEAgLTYw
LDQwICs2MCw0MCBAQAogICAgICAgICBoZWlnaHQgOiA0MDAKICAgICAgIH0pOwogCi0gICAgICB2
YXIgcm9vdCA9IG5ldyBxeC51aS50cmVlLlRyZWVGb2xkZXIoInJvb3QiKTsKKyAgICAgIHZhciBy
b290ID0gbmV3IHF4LnVpLnRyZWUuVHJlZUZvbGRlcih0aGlzLnRyKCJyb290IikpOwogICAgICAg
cm9vdC5zZXRPcGVuKHRydWUpOwogICAgICAgdHJlZS5zZXRSb290KHJvb3QpOwogCi0gICAgICB2
YXIgdGUxID0gbmV3IHF4LnVpLnRyZWUuVHJlZUZvbGRlcigiRGVza3RvcCIpOworICAgICAgdmFy
IHRlMSA9IG5ldyBxeC51aS50cmVlLlRyZWVGb2xkZXIodGhpcy50cigiRGVza3RvcCIpKTsKICAg
ICAgIHRlMS5zZXRPcGVuKHRydWUpOwogICAgICAgdGUxLnNldEljb24oImljb24vMjIvcGxhY2Vz
L3VzZXItZGVza3RvcC5wbmciKTsKICAgICAgIHJvb3QuYWRkKHRlMSk7CiAKLSAgICAgIHZhciB0
ZTFfMSA9IG5ldyBxeC51aS50cmVlLlRyZWVGb2xkZXIoIkZpbGVzIik7Ci0gICAgICB2YXIgdGUx
XzIgPSBuZXcgcXgudWkudHJlZS5UcmVlRm9sZGVyKCJXb3Jrc3BhY2UiKTsKLSAgICAgIHZhciB0
ZTFfMyA9IG5ldyBxeC51aS50cmVlLlRyZWVGb2xkZXIoIk5ldHdvcmsiKTsKLSAgICAgIHZhciB0
ZTFfNCA9IG5ldyBxeC51aS50cmVlLlRyZWVGb2xkZXIoIlRyYXNoIik7CisgICAgICB2YXIgdGUx
XzEgPSBuZXcgcXgudWkudHJlZS5UcmVlRm9sZGVyKHRoaXMudHIoIkZpbGVzIikpOworICAgICAg
dmFyIHRlMV8yID0gbmV3IHF4LnVpLnRyZWUuVHJlZUZvbGRlcih0aGlzLnRyKCJXb3Jrc3BhY2Ui
KSk7CisgICAgICB2YXIgdGUxXzMgPSBuZXcgcXgudWkudHJlZS5UcmVlRm9sZGVyKHRoaXMudHIo
Ik5ldHdvcmsiKSk7CisgICAgICB2YXIgdGUxXzQgPSBuZXcgcXgudWkudHJlZS5UcmVlRm9sZGVy
KHRoaXMudHIoIlRyYXNoIikpOwogICAgICAgdGUxLmFkZCh0ZTFfMSwgdGUxXzIsIHRlMV8zLCB0
ZTFfNCk7CiAKIAotICAgICAgdmFyIHRlMV8yXzEgPSBuZXcgcXgudWkudHJlZS5UcmVlRmlsZSgi
V2luZG93cyAoQzopIik7Ci0gICAgICB2YXIgdGUxXzJfMiA9IG5ldyBxeC51aS50cmVlLlRyZWVG
aWxlKCJEb2N1bWVudHMgKEQ6KSIpOworICAgICAgdmFyIHRlMV8yXzEgPSBuZXcgcXgudWkudHJl
ZS5UcmVlRmlsZSh0aGlzLnRyKCJXaW5kb3dzIChDOikiKSk7CisgICAgICB2YXIgdGUxXzJfMiA9
IG5ldyBxeC51aS50cmVlLlRyZWVGaWxlKHRoaXMudHIoIkRvY3VtZW50cyAoRDopIikpOwogICAg
ICAgdGUxXzIuYWRkKHRlMV8yXzEsIHRlMV8yXzIpOwogCiAKIAotICAgICAgdmFyIHRlMiA9IG5l
dyBxeC51aS50cmVlLlRyZWVGb2xkZXIoIkluYm94Iik7CisgICAgICB2YXIgdGUyID0gbmV3IHF4
LnVpLnRyZWUuVHJlZUZvbGRlcih0aGlzLnRyKCJJbmJveCIpKTsKIAotICAgICAgdmFyIHRlMl8x
ID0gbmV3IHF4LnVpLnRyZWUuVHJlZUZvbGRlcigiUHJlc2V0cyIpOwotICAgICAgdmFyIHRlMl8y
ID0gbmV3IHF4LnVpLnRyZWUuVHJlZUZvbGRlcigiU2VudCIpOwotICAgICAgdmFyIHRlMl8zID0g
bmV3IHF4LnVpLnRyZWUuVHJlZUZvbGRlcigiVHJhc2giKTsKKyAgICAgIHZhciB0ZTJfMSA9IG5l
dyBxeC51aS50cmVlLlRyZWVGb2xkZXIodGhpcy50cigiUHJlc2V0cyIpKTsKKyAgICAgIHZhciB0
ZTJfMiA9IG5ldyBxeC51aS50cmVlLlRyZWVGb2xkZXIodGhpcy50cigiU2VudCIpKTsKKyAgICAg
IHZhciB0ZTJfMyA9IG5ldyBxeC51aS50cmVlLlRyZWVGb2xkZXIodGhpcy50cigiVHJhc2giKSk7
CiAKICAgICAgIGZvciAodmFyIGk9MDsgaTwzMDsgaSsrKSB7Ci0gICAgICAgIHRlMl8zLmFkZChu
ZXcgcXgudWkudHJlZS5UcmVlRmlsZSgiSnVuayAjIiArIGkpKTsKKyAgICAgICAgdGUyXzMuYWRk
KG5ldyBxeC51aS50cmVlLlRyZWVGaWxlKHRoaXMudHIoIkp1bmsgIyIpICsgaSkpOwogICAgICAg
fQogCi0gICAgICB2YXIgdGUyXzQgPSBuZXcgcXgudWkudHJlZS5UcmVlRm9sZGVyKCJEYXRhIik7
Ci0gICAgICB2YXIgdGUyXzUgPSBuZXcgcXgudWkudHJlZS5UcmVlRm9sZGVyKCJFZGl0Iik7Cisg
ICAgICB2YXIgdGUyXzQgPSBuZXcgcXgudWkudHJlZS5UcmVlRm9sZGVyKHRoaXMudHIoIkRhdGEi
KSk7CisgICAgICB2YXIgdGUyXzUgPSBuZXcgcXgudWkudHJlZS5UcmVlRm9sZGVyKHRoaXMudHIo
IkVkaXQiKSk7CiAKICAgICAgIHRlMi5hZGQodGUyXzEsIHRlMl8yLCB0ZTJfMywgdGUyXzQsIHRl
Ml81KTsKIApAQCAtMTAyLDQgKzEwMiw0IEBACiAgICAgICByZXR1cm4gdHJlZTsKICAgICB9CiAg
IH0KLX0pOwpcIE5vIG5ld2xpbmUgYXQgZW5kIG9mIGZpbGUKK30pOwpJbmRleDogc291cmNlL2Ns
YXNzL3dpZGdldGJyb3dzZXIvcGFnZXMvQ29udHJvbC5qcwo9PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci0tLSBzb3VyY2Uv
Y2xhc3Mvd2lkZ2V0YnJvd3Nlci9wYWdlcy9Db250cm9sLmpzCShyZXZpc2lvbiAyNzM3NykKKysr
IHNvdXJjZS9jbGFzcy93aWRnZXRicm93c2VyL3BhZ2VzL0NvbnRyb2wuanMJKHdvcmtpbmcgY29w
eSkKQEAgLTQ5LDE4ICs0OSwxOCBAQAogICAgICAgdmFyIGxhYmVsOwogCiAgICAgICAvLyBDb2xv
clNlbGVjdG9yCi0gICAgICBsYWJlbCA9IG5ldyBxeC51aS5iYXNpYy5MYWJlbCgiQ29sb3JTZWxl
Y3RvciIpOworICAgICAgbGFiZWwgPSBuZXcgcXgudWkuYmFzaWMuTGFiZWwodGhpcy50cigiQ29s
b3JTZWxlY3RvciIpKTsKICAgICAgIHZhciBjb2xvclNlbGVjdG9yID0gbmV3IHF4LnVpLmNvbnRy
b2wuQ29sb3JTZWxlY3RvcigpOwogICAgICAgd2lkZ2V0cy5wdXNoKGNvbG9yU2VsZWN0b3IpOwog
ICAgICAgdGhpcy5fX3Zib3guYWRkKGxhYmVsKTsKICAgICAgIHRoaXMuX192Ym94LmFkZChjb2xv
clNlbGVjdG9yKTsKIAogICAgICAgLy8gQ29sb3JQb3B1cAotICAgICAgbGFiZWwgPSBuZXcgcXgu
dWkuYmFzaWMuTGFiZWwoIkNvbG9yUG9wdXAiKTsKKyAgICAgIGxhYmVsID0gbmV3IHF4LnVpLmJh
c2ljLkxhYmVsKHRoaXMudHIoIkNvbG9yUG9wdXAiKSk7CiAgICAgICB2YXIgY29sb3JQb3B1cCA9
IG5ldyBxeC51aS5jb250cm9sLkNvbG9yUG9wdXAoKTsKICAgICAgIGNvbG9yUG9wdXAuZXhjbHVk
ZSgpOwogCi0gICAgICB2YXIgb3BlbkNvbG9yUG9wdXAgPSBuZXcgcXgudWkuZm9ybS5CdXR0b24o
Ik9wZW4gQ29sb3IgUG9wdXAiKS5zZXQoe21heFdpZHRoOiAxNTB9KTsKKyAgICAgIHZhciBvcGVu
Q29sb3JQb3B1cCA9IG5ldyBxeC51aS5mb3JtLkJ1dHRvbih0aGlzLnRyKCJPcGVuIENvbG9yIFBv
cHVwIikpLnNldCh7bWF4V2lkdGg6IDE1MH0pOwogICAgICAgd2lkZ2V0cy5wdXNoKG9wZW5Db2xv
clBvcHVwKTsKICAgICAgIHRoaXMuX192Ym94LmFkZChsYWJlbCk7CiAgICAgICB0aGlzLl9fdmJv
eC5hZGQob3BlbkNvbG9yUG9wdXApOwpAQCAtNzIsNyArNzIsNyBAQAogCiAgICAgICAvLyBEYXRl
Q2hvb3NlcgogICAgICAgdmFyIGRhdGVDaG9vc2VyID0gbmV3IHF4LnVpLmNvbnRyb2wuRGF0ZUNo
b29zZXIoKS5zZXQoe21heFdpZHRoOiAyNDB9KTsKLSAgICAgIGxhYmVsID0gbmV3IHF4LnVpLmJh
c2ljLkxhYmVsKCJEYXRlQ2hvb3NlciIpOworICAgICAgbGFiZWwgPSBuZXcgcXgudWkuYmFzaWMu
TGFiZWwodGhpcy50cigiRGF0ZUNob29zZXIiKSk7CiAgICAgICB3aWRnZXRzLnB1c2goZGF0ZUNo
b29zZXIpOwogICAgICAgdGhpcy5fX3Zib3guYWRkKGxhYmVsKTsKICAgICAgIHRoaXMuX192Ym94
LmFkZChkYXRlQ2hvb3Nlcik7CkluZGV4OiBzb3VyY2UvY2xhc3Mvd2lkZ2V0YnJvd3Nlci9wYWdl
cy9CYXNpYy5qcwo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09Ci0tLSBzb3VyY2UvY2xhc3Mvd2lkZ2V0YnJvd3Nlci9wYWdl
cy9CYXNpYy5qcwkocmV2aXNpb24gMjczNzcpCisrKyBzb3VyY2UvY2xhc3Mvd2lkZ2V0YnJvd3Nl
ci9wYWdlcy9CYXNpYy5qcwkod29ya2luZyBjb3B5KQpAQCAtNTQsMTkgKzU0LDE5IEBACiAgICAg
ICB2YXIgd2lkZ2V0cyA9IHRoaXMuX3dpZGdldHM7CiAKICAgICAgIC8vIExhYmVsCi0gICAgICB2
YXIgbGFiZWwgPSBuZXcgcXgudWkuYmFzaWMuTGFiZWwoIkxhYmVsIikuc2V0KHthbGlnblk6ICJt
aWRkbGUifSk7CisgICAgICB2YXIgbGFiZWwgPSBuZXcgcXgudWkuYmFzaWMuTGFiZWwodGhpcy50
cigiTGFiZWwiKSkuc2V0KHthbGlnblk6ICJtaWRkbGUifSk7CiAgICAgICB3aWRnZXRzLnB1c2go
bGFiZWwpOwogICAgICAgdGhpcy5fX2hib3guYWRkKGxhYmVsKTsKIAogICAgICAgLy8gSW1hZ2UK
LSAgICAgIHZhciBpbWFnZSA9IG5ldyBxeC51aS5iYXNpYy5BdG9tKCJJbWFnZSIsICJpY29uLzMy
L3N0YXR1cy9kaWFsb2ctaW5mb3JtYXRpb24ucG5nIik7CisgICAgICB2YXIgaW1hZ2UgPSBuZXcg
cXgudWkuYmFzaWMuQXRvbSh0aGlzLnRyKCJJbWFnZSIpLCAiaWNvbi8zMi9zdGF0dXMvZGlhbG9n
LWluZm9ybWF0aW9uLnBuZyIpOwogICAgICAgd2lkZ2V0cy5wdXNoKGltYWdlKTsKICAgICAgIHRo
aXMuX19oYm94LmFkZChpbWFnZSk7CiAKICAgICAgIC8vIEF0b20KLSAgICAgIHZhciBhdG9tID0g
bmV3IHF4LnVpLmJhc2ljLkF0b20oIkF0b20iLCAiaWNvbi8zMi9zdGF0dXMvZGlhbG9nLWluZm9y
bWF0aW9uLnBuZyIpOworICAgICAgdmFyIGF0b20gPSBuZXcgcXgudWkuYmFzaWMuQXRvbSh0aGlz
LnRyKCJBdG9tIiksICJpY29uLzMyL3N0YXR1cy9kaWFsb2ctaW5mb3JtYXRpb24ucG5nIik7CiAg
ICAgICB3aWRnZXRzLnB1c2goYXRvbSk7CiAgICAgICB0aGlzLl9faGJveC5hZGQoYXRvbSk7CiAg
ICAgfQogICB9Ci19KTsKXCBObyBuZXdsaW5lIGF0IGVuZCBvZiBmaWxlCit9KTsKSW5kZXg6IHNv
dXJjZS9jbGFzcy93aWRnZXRicm93c2VyL3BhZ2VzL1Rvb2xCYXIuanMKPT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQotLS0g
c291cmNlL2NsYXNzL3dpZGdldGJyb3dzZXIvcGFnZXMvVG9vbEJhci5qcwkocmV2aXNpb24gMjcz
NzcpCisrKyBzb3VyY2UvY2xhc3Mvd2lkZ2V0YnJvd3Nlci9wYWdlcy9Ub29sQmFyLmpzCSh3b3Jr
aW5nIGNvcHkpCkBAIC02Nyw3ICs2Nyw3IEBACiAgICAgICB2YXIgbGFiZWw7CiAKICAgICAgIC8v
IFRvb2xiYXIKLSAgICAgIGxhYmVsID0gbmV3IHF4LnVpLmJhc2ljLkxhYmVsKCJUb29sQmFyICYg
TWVudSIpOworICAgICAgbGFiZWwgPSBuZXcgcXgudWkuYmFzaWMuTGFiZWwodGhpcy50cigiVG9v
bEJhciAmIE1lbnUiKSk7CiAgICAgICB0aGlzLmFkZChsYWJlbCwge2xlZnQ6IDAsIHRvcDogMH0p
OwogICAgICAgdGhpcy5hZGQodGhpcy5nZXRUb29sQmFyKCksIHtsZWZ0OiAwLCB0b3A6IDIwfSk7
CiAKQEAgLTc1LDcgKzc1LDcgQEAKICAgICAgIHRoaXMuYWRkKHRoaXMuZ2V0TWVudVdpdGhTbGlk
ZUJhcigpLCB7bGVmdDogMCwgdG9wOiA3MH0pOwogCiAgICAgICAvLyBNZW51QmFyCi0gICAgICBs
YWJlbCA9IG5ldyBxeC51aS5iYXNpYy5MYWJlbCgiTWVudUJhciAmIE1lbnUiKTsKKyAgICAgIGxh
YmVsID0gbmV3IHF4LnVpLmJhc2ljLkxhYmVsKHRoaXMudHIoIk1lbnVCYXIgJiBNZW51IikpOwog
ICAgICAgdGhpcy5hZGQobGFiZWwsIHtsZWZ0OiAwLCB0b3A6IDIxMH0pOwogICAgICAgdGhpcy5h
ZGQodGhpcy5nZXRNZW51QmFyKCksIHtsZWZ0OiAwLCB0b3A6IDIzMH0pOwogICAgIH0sCkBAIC0x
MDIsMjcgKzEwMiwyNyBAQAogICAgICAgdG9vbGJhci5hZGQoc2Vjb25kUGFydCk7CiAKICAgICAg
IC8vIFNwbGl0QnV0dG9uCi0gICAgICB2YXIgc3BsaXRCdXR0b24gPSBuZXcgcXgudWkudG9vbGJh
ci5TcGxpdEJ1dHRvbigiVG9vbGJhciBTcGxpdEJ1dHRvbiIsICJpY29uLzE2L2FjdGlvbnMvZ28t
cHJldmlvdXMucG5nIiwgdGhpcy5nZXRTcGxpdEJ1dHRvbk1lbnUoKSk7Ci0gICAgICBzcGxpdEJ1
dHRvbi5zZXRUb29sVGlwKG5ldyBxeC51aS50b29sdGlwLlRvb2xUaXAoIlRvb2xiYXIgU3BsaXRC
dXR0b24iKSk7CisgICAgICB2YXIgc3BsaXRCdXR0b24gPSBuZXcgcXgudWkudG9vbGJhci5TcGxp
dEJ1dHRvbih0aGlzLnRyKCJUb29sYmFyIFNwbGl0QnV0dG9uIiksICJpY29uLzE2L2FjdGlvbnMv
Z28tcHJldmlvdXMucG5nIiwgdGhpcy5nZXRTcGxpdEJ1dHRvbk1lbnUoKSk7CisgICAgICBzcGxp
dEJ1dHRvbi5zZXRUb29sVGlwKG5ldyBxeC51aS50b29sdGlwLlRvb2xUaXAodGhpcy50cigiVG9v
bGJhciBTcGxpdEJ1dHRvbiIpKSk7CiAgICAgICB0aGlzLl93aWRnZXRzLnB1c2goc3BsaXRCdXR0
b24pOwogCiAgICAgICAvLyBCdXR0b24KLSAgICAgIHZhciBidXR0b24gPSBuZXcgcXgudWkudG9v
bGJhci5CdXR0b24oIlRvb2xiYXIgQnV0dG9uIiwgImljb24vMTYvYWN0aW9ucy9kb2N1bWVudC1u
ZXcucG5nIik7Ci0gICAgICBidXR0b24uc2V0VG9vbFRpcChuZXcgcXgudWkudG9vbHRpcC5Ub29s
VGlwKCJUb29sYmFyIEJ1dHRvbiIpKTsKKyAgICAgIHZhciBidXR0b24gPSBuZXcgcXgudWkudG9v
bGJhci5CdXR0b24odGhpcy50cigiVG9vbGJhciBCdXR0b24iKSwgImljb24vMTYvYWN0aW9ucy9k
b2N1bWVudC1uZXcucG5nIik7CisgICAgICBidXR0b24uc2V0VG9vbFRpcChuZXcgcXgudWkudG9v
bHRpcC5Ub29sVGlwKHRoaXMudHIoIlRvb2xiYXIgQnV0dG9uIikpKTsKICAgICAgIHRoaXMuX3dp
ZGdldHMucHVzaChidXR0b24pOwogCiAgICAgICAvLyBDaGVja0JveAotICAgICAgdmFyIGNoZWNr
Qm94ID0gbmV3IHF4LnVpLnRvb2xiYXIuQ2hlY2tCb3goIlRvZ2dsZSIsICJpY29uLzE2L2FjdGlv
bnMvZm9ybWF0LXRleHQtdW5kZXJsaW5lLnBuZyIpOwotICAgICAgY2hlY2tCb3guc2V0VG9vbFRp
cChuZXcgcXgudWkudG9vbHRpcC5Ub29sVGlwKCJUb29sYmFyIENoZWNrQm94IikpOworICAgICAg
dmFyIGNoZWNrQm94ID0gbmV3IHF4LnVpLnRvb2xiYXIuQ2hlY2tCb3godGhpcy50cigiVG9nZ2xl
IiksICJpY29uLzE2L2FjdGlvbnMvZm9ybWF0LXRleHQtdW5kZXJsaW5lLnBuZyIpOworICAgICAg
Y2hlY2tCb3guc2V0VG9vbFRpcChuZXcgcXgudWkudG9vbHRpcC5Ub29sVGlwKHRoaXMudHIoIlRv
b2xiYXIgQ2hlY2tCb3giKSkpOwogICAgICAgdGhpcy5fd2lkZ2V0cy5wdXNoKGNoZWNrQm94KTsK
IAogICAgICAgLy8gUmFkaW9CdXR0b24KLSAgICAgIHZhciByYWRpb0J1dHRvbjEgPSBuZXcgcXgu
dWkudG9vbGJhci5SYWRpb0J1dHRvbigiTGVmdCIsICJpY29uLzE2L2FjdGlvbnMvZm9ybWF0LWp1
c3RpZnktbGVmdC5wbmciKTsKLSAgICAgIHJhZGlvQnV0dG9uMS5zZXRUb29sVGlwKG5ldyBxeC51
aS50b29sdGlwLlRvb2xUaXAoIlRvb2xiYXIgUmFkaW9CdXR0b24iKSk7CisgICAgICB2YXIgcmFk
aW9CdXR0b24xID0gbmV3IHF4LnVpLnRvb2xiYXIuUmFkaW9CdXR0b24odGhpcy50cigiTGVmdCIp
LCAiaWNvbi8xNi9hY3Rpb25zL2Zvcm1hdC1qdXN0aWZ5LWxlZnQucG5nIik7CisgICAgICByYWRp
b0J1dHRvbjEuc2V0VG9vbFRpcChuZXcgcXgudWkudG9vbHRpcC5Ub29sVGlwKHRoaXMudHIoIlRv
b2xiYXIgUmFkaW9CdXR0b24iKSkpOwogICAgICAgdGhpcy5fd2lkZ2V0cy5wdXNoKHJhZGlvQnV0
dG9uMSk7CiAKLSAgICAgIHZhciByYWRpb0J1dHRvbjIgPSBuZXcgcXgudWkudG9vbGJhci5SYWRp
b0J1dHRvbigiQ2VudGVyIiwgImljb24vMTYvYWN0aW9ucy9mb3JtYXQtanVzdGlmeS1jZW50ZXIu
cG5nIik7Ci0gICAgICByYWRpb0J1dHRvbjIuc2V0VG9vbFRpcChuZXcgcXgudWkudG9vbHRpcC5U
b29sVGlwKCJUb29sYmFyIFJhZGlvQnV0dG9uIikpOworICAgICAgdmFyIHJhZGlvQnV0dG9uMiA9
IG5ldyBxeC51aS50b29sYmFyLlJhZGlvQnV0dG9uKHRoaXMudHIoIkNlbnRlciIpLCAiaWNvbi8x
Ni9hY3Rpb25zL2Zvcm1hdC1qdXN0aWZ5LWNlbnRlci5wbmciKTsKKyAgICAgIHJhZGlvQnV0dG9u
Mi5zZXRUb29sVGlwKG5ldyBxeC51aS50b29sdGlwLlRvb2xUaXAodGhpcy50cigiVG9vbGJhciBS
YWRpb0J1dHRvbiIpKSk7CiAgICAgICB0aGlzLl93aWRnZXRzLnB1c2gocmFkaW9CdXR0b24yKTsK
IAogICAgICAgdmFyIHJhZGlvR3JvdXAgPSBuZXcgcXgudWkuZm9ybS5SYWRpb0dyb3VwKHJhZGlv
QnV0dG9uMSwgcmFkaW9CdXR0b24yKTsKQEAgLTEzNyw3ICsxMzcsNyBAQAogICAgICAgZmlyc3RQ
YXJ0LnNldFNob3coImljb24iKTsKIAogICAgICAgLy8gTWVudUJ1dHRvbgotICAgICAgdmFyIG1l
bnVCdXR0b24gPSBuZXcgcXgudWkudG9vbGJhci5NZW51QnV0dG9uKCJUb29sYmFyIE1lbnVCdXR0
b24iKTsKKyAgICAgIHZhciBtZW51QnV0dG9uID0gbmV3IHF4LnVpLnRvb2xiYXIuTWVudUJ1dHRv
bih0aGlzLnRyKCJUb29sYmFyIE1lbnVCdXR0b24iKSk7CiAgICAgICB0aGlzLl93aWRnZXRzLnB1
c2gobWVudUJ1dHRvbik7CiAgICAgICBtZW51QnV0dG9uLnNldE1lbnUodGhpcy5nZXRCdXR0b25N
ZW51KCkpOwogICAgICAgc2Vjb25kUGFydC5hZGQobWVudUJ1dHRvbik7CkBAIC0xNTQsNyArMTU0
LDcgQEAKICAgICAgIC8vCiAKICAgICAgIC8vIE1lbnVCdXR0b24KLSAgICAgIHZhciBidXR0b24x
ID0gbmV3IHF4LnVpLm1lbnUuQnV0dG9uKCJNZW51IE1lbnVCdXR0b24iKTsKKyAgICAgIHZhciBi
dXR0b24xID0gbmV3IHF4LnVpLm1lbnUuQnV0dG9uKHRoaXMudHIoIk1lbnUgTWVudUJ1dHRvbiIp
KTsKICAgICAgIHRoaXMuX3dpZGdldHMucHVzaChidXR0b24xKTsKIAogICAgICAgbWVudS5hZGQo
YnV0dG9uMSk7CkBAIC0xNzEsMjMgKzE3MSwyMyBAQAogICAgICAgLy8KIAogICAgICAgLy8gTWVu
dUJ1dHRvbgotICAgICAgdmFyIGJ1dHRvbiA9IG5ldyBxeC51aS5tZW51LkJ1dHRvbigiTWVudSBN
ZW51QnV0dG9uIiwgImljb24vMTYvYWN0aW9ucy9kb2N1bWVudC1uZXcucG5nIik7CisgICAgICB2
YXIgYnV0dG9uID0gbmV3IHF4LnVpLm1lbnUuQnV0dG9uKHRoaXMudHIoIk1lbnUgTWVudUJ1dHRv
biIpLCAiaWNvbi8xNi9hY3Rpb25zL2RvY3VtZW50LW5ldy5wbmciKTsKICAgICAgIHRoaXMuX3dp
ZGdldHMucHVzaChidXR0b24pOwogCiAgICAgICAvLyBDaGVja0JveAotICAgICAgdmFyIGNoZWNr
Qm94ID0gbmV3IHF4LnVpLm1lbnUuQ2hlY2tCb3goIk1lbnUgTWVudUNoZWNrQm94Iik7CisgICAg
ICB2YXIgY2hlY2tCb3ggPSBuZXcgcXgudWkubWVudS5DaGVja0JveCh0aGlzLnRyKCJNZW51IE1l
bnVDaGVja0JveCIpKTsKICAgICAgIHRoaXMuX3dpZGdldHMucHVzaChjaGVja0JveCk7CiAKICAg
ICAgIC8vIENoZWNrQm94IChjaGVja2VkKQotICAgICAgdmFyIGNoZWNrQm94Q2hlY2tlZCA9IG5l
dyBxeC51aS5tZW51LkNoZWNrQm94KCJNZW51IE1lbnVDaGVja0JveCIpLnNldCh7dmFsdWU6IHRy
dWV9KTsKKyAgICAgIHZhciBjaGVja0JveENoZWNrZWQgPSBuZXcgcXgudWkubWVudS5DaGVja0Jv
eCh0aGlzLnRyKCJNZW51IE1lbnVDaGVja0JveCIpKS5zZXQoe3ZhbHVlOiB0cnVlfSk7CiAgICAg
ICB0aGlzLl93aWRnZXRzLnB1c2goY2hlY2tCb3hDaGVja2VkKTsKIAogICAgICAgLy8gUmFkaW9C
dXR0b24KLSAgICAgIHZhciByYWRpb0J1dHRvbiA9IG5ldyBxeC51aS5tZW51LlJhZGlvQnV0dG9u
KCJNZW51IFJhZGlvQnV0dG9uIik7CisgICAgICB2YXIgcmFkaW9CdXR0b24gPSBuZXcgcXgudWku
bWVudS5SYWRpb0J1dHRvbih0aGlzLnRyKCJNZW51IFJhZGlvQnV0dG9uIikpOwogICAgICAgdGhp
cy5fd2lkZ2V0cy5wdXNoKHJhZGlvQnV0dG9uKTsKIAogICAgICAgLy8gUmFkaW9CdXR0b24gKGFj
dGl2ZSkKLSAgICAgIHZhciByYWRpb0J1dHRvbkFjdGl2ZSA9IG5ldyBxeC51aS5tZW51LlJhZGlv
QnV0dG9uKCJNZW51IFJhZGlvQnV0dG9uIikuc2V0KHt2YWx1ZTogdHJ1ZX0pOworICAgICAgdmFy
IHJhZGlvQnV0dG9uQWN0aXZlID0gbmV3IHF4LnVpLm1lbnUuUmFkaW9CdXR0b24odGhpcy50cigi
TWVudSBSYWRpb0J1dHRvbiIpKS5zZXQoe3ZhbHVlOiB0cnVlfSk7CiAgICAgICB0aGlzLl93aWRn
ZXRzLnB1c2gocmFkaW9CdXR0b25BY3RpdmUpOwogCiAgICAgICBtZW51LmFkZChidXR0b24pOwpA
QCAtMjA5LDcgKzIwOSw3IEBACiAgICAgICB2YXIgYnV0dG9uOwogCiAgICAgICBmb3IgKHZhciBp
PTA7IGk8MzsgaSsrKSB7Ci0gICAgICAgIGJ1dHRvbiA9IG5ldyBxeC51aS5tZW51YmFyLkJ1dHRv
bigiTWVudWJhciBCdXR0b24iLCBudWxsLCB0aGlzLmdldEJ1dHRvbk1lbnUoKSk7CisgICAgICAg
IGJ1dHRvbiA9IG5ldyBxeC51aS5tZW51YmFyLkJ1dHRvbih0aGlzLnRyKCJNZW51YmFyIEJ1dHRv
biIpLCBudWxsLCB0aGlzLmdldEJ1dHRvbk1lbnUoKSk7CiAgICAgICAgIHRoaXMuX3dpZGdldHMu
cHVzaChidXR0b24pOwogICAgICAgICBtZW51YmFyLmFkZChidXR0b24pOwogICAgICAgfQpAQCAt
MjIxLDcgKzIyMSw3IEBACiAgICAgLy8KICAgICAvLyAoRXZpbCBoYWNrcyBiZWxvdykKICAgICBn
ZXRNZW51V2l0aFNsaWRlQmFyIDogZnVuY3Rpb24oKSB7Ci0gICAgICB2YXIgbGFiZWwgPSBuZXcg
cXgudWkuYmFzaWMuTGFiZWwoIk1lbnUgKHdpdGggc2xpZGViYXIpIik7CisgICAgICB2YXIgbGFi
ZWwgPSBuZXcgcXgudWkuYmFzaWMuTGFiZWwodGhpcy50cigiTWVudSAod2l0aCBzbGlkZWJhciki
KSk7CiAKICAgICAgIHZhciBzdWJDb250YWluZXIgPSBuZXcgcXgudWkuY29udGFpbmVyLkNvbXBv
c2l0ZShuZXcgcXgudWkubGF5b3V0LkNhbnZhcygpKTsKICAgICAgIHN1YkNvbnRhaW5lci5zZXRI
ZWlnaHQoMTIwKTsKQEAgLTIzOSw0ICsyMzksNCBAQAogICAgICAgcmV0dXJuIHN1YkNvbnRhaW5l
cjsKICAgICB9CiAgIH0KLX0pOwpcIE5vIG5ld2xpbmUgYXQgZW5kIG9mIGZpbGUKK30pOwpJbmRl
eDogc291cmNlL2NsYXNzL3dpZGdldGJyb3dzZXIvcGFnZXMvRm9ybS5qcwo9PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci0t
LSBzb3VyY2UvY2xhc3Mvd2lkZ2V0YnJvd3Nlci9wYWdlcy9Gb3JtLmpzCShyZXZpc2lvbiAyNzM3
NykKKysrIHNvdXJjZS9jbGFzcy93aWRnZXRicm93c2VyL3BhZ2VzL0Zvcm0uanMJKHdvcmtpbmcg
Y29weSkKQEAgLTU3LDE2ICs1NywxNiBAQAogICAgICAgICogVEVYVCBJTlBVVAogICAgICAgICog
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCiAKLSAgICAgIHZhciB0ZXh0
R3JvdXBCb3ggPSBuZXcgcXgudWkuZ3JvdXBib3guR3JvdXBCb3goIlRleHQiKTsKKyAgICAgIHZh
ciB0ZXh0R3JvdXBCb3ggPSBuZXcgcXgudWkuZ3JvdXBib3guR3JvdXBCb3godGhpcy50cigiVGV4
dCIpKTsKICAgICAgIHRleHRHcm91cEJveC5zZXRMYXlvdXQobmV3IHF4LnVpLmxheW91dC5Hcmlk
KDgsIDgpKTsKICAgICAgIHRleHRHcm91cEJveC5zZXRXaWR0aCgyOTApOwogICAgICAgdmlldy5h
ZGQodGV4dEdyb3VwQm94LCB7cm93OiAwLCBjb2x1bW46IDB9KTsKIAogICAgICAgLy8gdGV4dCBm
aWVsZAogICAgICAgdmFyIHRleHRGaWVsZCA9IG5ldyBxeC51aS5mb3JtLlRleHRGaWVsZCgpOwot
ICAgICAgdGV4dEZpZWxkLnNldFBsYWNlaG9sZGVyKCJwbGFjZWhvbGRlciIpOworICAgICAgdGV4
dEZpZWxkLnNldFBsYWNlaG9sZGVyKHRoaXMudHIoInBsYWNlaG9sZGVyIikpOwogICAgICAgdGV4
dEZpZWxkLnNldFRhYkluZGV4KHRhYkluZGV4KyspOwotICAgICAgdmFyIGxhYmVsID0gbmV3IHF4
LnVpLmJhc2ljLkxhYmVsKCJUZXh0RmllbGQ6Iik7CisgICAgICB2YXIgbGFiZWwgPSBuZXcgcXgu
dWkuYmFzaWMuTGFiZWwodGhpcy50cigiVGV4dEZpZWxkOiIpKTsKICAgICAgIGxhYmVsLnNldEJ1
ZGR5KHRleHRGaWVsZCk7CiAgICAgICB0ZXh0R3JvdXBCb3guYWRkKGxhYmVsLCB7cm93OiAwLCBj
b2x1bW46IDB9KTsKICAgICAgIHRleHRHcm91cEJveC5hZGQodGV4dEZpZWxkLCB7cm93OiAwLCBj
b2x1bW46IDF9KTsKQEAgLTc1LDggKzc1LDggQEAKICAgICAgIC8vIHBhc3N3b3JkIGZpZWxkCiAg
ICAgICB2YXIgcGFzc3dvcmRGaWVsZCA9IG5ldyBxeC51aS5mb3JtLlBhc3N3b3JkRmllbGQoKTsK
ICAgICAgIHBhc3N3b3JkRmllbGQuc2V0VGFiSW5kZXgodGFiSW5kZXgrKyk7Ci0gICAgICBwYXNz
d29yZEZpZWxkLnNldFBsYWNlaG9sZGVyKCJwYXNzd29yZCIpOwotICAgICAgbGFiZWwgPSBuZXcg
cXgudWkuYmFzaWMuTGFiZWwoIlBhc3N3b3JkRmllbGQ6Iik7CisgICAgICBwYXNzd29yZEZpZWxk
LnNldFBsYWNlaG9sZGVyKHRoaXMudHIoInBhc3N3b3JkIikpOworICAgICAgbGFiZWwgPSBuZXcg
cXgudWkuYmFzaWMuTGFiZWwodGhpcy50cigiUGFzc3dvcmRGaWVsZDoiKSk7CiAgICAgICBsYWJl
bC5zZXRCdWRkeShwYXNzd29yZEZpZWxkKTsKICAgICAgIHRleHRHcm91cEJveC5hZGQobGFiZWws
IHtyb3c6IDEsIGNvbHVtbjogMH0pOwogICAgICAgdGV4dEdyb3VwQm94LmFkZChwYXNzd29yZEZp
ZWxkLCB7cm93OiAxLCBjb2x1bW46IDF9KTsKQEAgLTg1LDggKzg1LDggQEAKICAgICAgIC8vIHRl
eHQgYXJlYQogICAgICAgdmFyIHRleHRBcmVhID0gbmV3IHF4LnVpLmZvcm0uVGV4dEFyZWEoKTsK
ICAgICAgIHRleHRBcmVhLnNldFRhYkluZGV4KHRhYkluZGV4KyspOwotICAgICAgdGV4dEFyZWEu
c2V0UGxhY2Vob2xkZXIoInBsYWNlaG9sZGVyIik7Ci0gICAgICBsYWJlbCA9IG5ldyBxeC51aS5i
YXNpYy5MYWJlbCgiVGV4dEFyZWE6Iik7CisgICAgICB0ZXh0QXJlYS5zZXRQbGFjZWhvbGRlcih0
aGlzLnRyKCJwbGFjZWhvbGRlciIpKTsKKyAgICAgIGxhYmVsID0gbmV3IHF4LnVpLmJhc2ljLkxh
YmVsKHRoaXMudHIoIlRleHRBcmVhOiIpKTsKICAgICAgIGxhYmVsLnNldEJ1ZGR5KHRleHRBcmVh
KTsKICAgICAgIHRleHRHcm91cEJveC5hZGQobGFiZWwsIHtyb3c6IDIsIGNvbHVtbjogMH0pOwog
ICAgICAgdGV4dEdyb3VwQm94LmFkZCh0ZXh0QXJlYSwge3JvdzogMiwgY29sdW1uOiAxfSk7CkBA
IC05NSw4ICs5NSw4IEBACiAgICAgICAvLyBjb21ibyBib3gKICAgICAgIHZhciBjb21ib0JveCA9
IG5ldyBxeC51aS5mb3JtLkNvbWJvQm94KCk7CiAgICAgICBjb21ib0JveC5zZXRUYWJJbmRleCh0
YWJJbmRleCsrKTsKLSAgICAgIGNvbWJvQm94LnNldFBsYWNlaG9sZGVyKCJwbGFjZWhvbGRlciIp
OwotICAgICAgbGFiZWwgPSBuZXcgcXgudWkuYmFzaWMuTGFiZWwoIkNvbWJvQm94OiIpOworICAg
ICAgY29tYm9Cb3guc2V0UGxhY2Vob2xkZXIodGhpcy50cigicGxhY2Vob2xkZXIiKSk7CisgICAg
ICBsYWJlbCA9IG5ldyBxeC51aS5iYXNpYy5MYWJlbCh0aGlzLnRyKCJDb21ib0JveDoiKSk7CiAg
ICAgICBsYWJlbC5zZXRCdWRkeShjb21ib0JveCk7CiAgICAgICB0ZXh0R3JvdXBCb3guYWRkKGxh
YmVsLCB7cm93OiAzLCBjb2x1bW46IDB9KTsKICAgICAgIHRleHRHcm91cEJveC5hZGQoY29tYm9C
b3gsIHtyb3c6IDMsIGNvbHVtbjogMX0pOwpAQCAtMTA2LDggKzEwNiw4IEBACiAgICAgICAvLyBk
YXRlIGZpZWxkCiAgICAgICB2YXIgZGF0ZUZpZWxkID0gbmV3IHF4LnVpLmZvcm0uRGF0ZUZpZWxk
KCk7CiAgICAgICBkYXRlRmllbGQuc2V0VGFiSW5kZXgodGFiSW5kZXgrKyk7Ci0gICAgICBkYXRl
RmllbGQuc2V0UGxhY2Vob2xkZXIoImRkLm1tLllZWVkiKTsKLSAgICAgIGxhYmVsID0gbmV3IHF4
LnVpLmJhc2ljLkxhYmVsKCJEYXRlRmllbGQ6Iik7CisgICAgICBkYXRlRmllbGQuc2V0UGxhY2Vo
b2xkZXIodGhpcy50cigiZGQubW0uWVlZWSIpKTsKKyAgICAgIGxhYmVsID0gbmV3IHF4LnVpLmJh
c2ljLkxhYmVsKHRoaXMudHIoIkRhdGVGaWVsZDoiKSk7CiAgICAgICBsYWJlbC5zZXRCdWRkeShk
YXRlRmllbGQpOwogICAgICAgdGV4dEdyb3VwQm94LmFkZChsYWJlbCwge3JvdzogNCwgY29sdW1u
OiAwfSk7CiAgICAgICB0ZXh0R3JvdXBCb3guYWRkKGRhdGVGaWVsZCwge3JvdzogNCwgY29sdW1u
OiAxfSk7CkBAIC0xMTgsNyArMTE4LDcgQEAKICAgICAgICAqIFNFTEVDVElPTgogICAgICAgICog
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCiAKLSAgICAgIHZhciBzZWxl
Y3Rpb25Hcm91cEJveCA9IG5ldyBxeC51aS5ncm91cGJveC5Hcm91cEJveCgiU2VsZWN0aW9uIik7
CisgICAgICB2YXIgc2VsZWN0aW9uR3JvdXBCb3ggPSBuZXcgcXgudWkuZ3JvdXBib3guR3JvdXBC
b3godGhpcy50cigiU2VsZWN0aW9uIikpOwogICAgICAgc2VsZWN0aW9uR3JvdXBCb3guc2V0TGF5
b3V0KG5ldyBxeC51aS5sYXlvdXQuR3JpZCg4LCA4KSk7CiAgICAgICBzZWxlY3Rpb25Hcm91cEJv
eC5zZXRXaWR0aCgyOTApOwogICAgICAgdmlldy5hZGQoc2VsZWN0aW9uR3JvdXBCb3gsIHtyb3c6
MSwgY29sdW1uOiAwLCByb3dTcGFuOiAyfSk7CkBAIC0xMjYsNyArMTI2LDcgQEAKICAgICAgIC8v
IHNlbGVjdCBib3gKICAgICAgIHZhciBzZWxlY3RCb3ggPSBuZXcgcXgudWkuZm9ybS5TZWxlY3RC
b3goKTsKICAgICAgIHNlbGVjdEJveC5zZXRUYWJJbmRleCh0YWJJbmRleCsrKTsKLSAgICAgIGxh
YmVsID0gbmV3IHF4LnVpLmJhc2ljLkxhYmVsKCJTZWxlY3RCb3g6Iik7CisgICAgICBsYWJlbCA9
IG5ldyBxeC51aS5iYXNpYy5MYWJlbCh0aGlzLnRyKCJTZWxlY3RCb3g6IikpOwogICAgICAgbGFi
ZWwuc2V0QnVkZHkoc2VsZWN0Qm94KTsKICAgICAgIHNlbGVjdGlvbkdyb3VwQm94LmFkZChsYWJl
bCwge3JvdzogMCwgY29sdW1uOiAwfSk7CiAgICAgICBzZWxlY3Rpb25Hcm91cEJveC5hZGQoc2Vs
ZWN0Qm94LCB7cm93OiAwLCBjb2x1bW46IDF9KTsKQEAgLTEzOCw3ICsxMzgsNyBAQAogICAgICAg
bGlzdC5zZXRUYWJJbmRleCh0YWJJbmRleCsrKTsKICAgICAgIGxpc3Quc2V0SGVpZ2h0KDYwKTsK
ICAgICAgIGxpc3Quc2V0V2lkdGgoMTU1KQotICAgICAgbGFiZWwgPSBuZXcgcXgudWkuYmFzaWMu
TGFiZWwoIkxpc3Q6Iik7CisgICAgICBsYWJlbCA9IG5ldyBxeC51aS5iYXNpYy5MYWJlbCh0aGlz
LnRyKCJMaXN0OiIpKTsKICAgICAgIGxhYmVsLnNldEJ1ZGR5KGxpc3QpOwogICAgICAgc2VsZWN0
aW9uR3JvdXBCb3guYWRkKGxhYmVsLCB7cm93OiAxLCBjb2x1bW46IDB9KTsKICAgICAgIHNlbGVj
dGlvbkdyb3VwQm94LmFkZChsaXN0LCB7cm93OiAxLCBjb2x1bW46IDF9KTsKQEAgLTE0NywxMCAr
MTQ3LDEwIEBACiAKICAgICAgIC8vIHJhZGlvIGJ1dHRvbiBncm91cAogICAgICAgdmFyIHJhZGlv
QnV0dG9uR3JvdXAgPSBuZXcgcXgudWkuZm9ybS5SYWRpb0J1dHRvbkdyb3VwKCk7Ci0gICAgICBy
YWRpb0J1dHRvbkdyb3VwLmFkZChuZXcgcXgudWkuZm9ybS5SYWRpb0J1dHRvbigiUmFkaW9CdXR0
b24gMSIpLnNldCh7dGFiSW5kZXg6IHRhYkluZGV4Kyt9KSk7Ci0gICAgICByYWRpb0J1dHRvbkdy
b3VwLmFkZChuZXcgcXgudWkuZm9ybS5SYWRpb0J1dHRvbigiUmFkaW9CdXR0b24gMiIpLnNldCh7
dGFiSW5kZXg6IHRhYkluZGV4Kyt9KSk7Ci0gICAgICByYWRpb0J1dHRvbkdyb3VwLmFkZChuZXcg
cXgudWkuZm9ybS5SYWRpb0J1dHRvbigiUmFkaW9CdXR0b24gMyIpLnNldCh7dGFiSW5kZXg6IHRh
YkluZGV4Kyt9KSk7Ci0gICAgICBsYWJlbCA9IG5ldyBxeC51aS5iYXNpYy5MYWJlbCgiUmFkaW9C
dXR0b25Hcm91cDoiKTsKKyAgICAgIHJhZGlvQnV0dG9uR3JvdXAuYWRkKG5ldyBxeC51aS5mb3Jt
LlJhZGlvQnV0dG9uKHRoaXMudHIoIlJhZGlvQnV0dG9uIDEiKSkuc2V0KHt0YWJJbmRleDogdGFi
SW5kZXgrK30pKTsKKyAgICAgIHJhZGlvQnV0dG9uR3JvdXAuYWRkKG5ldyBxeC51aS5mb3JtLlJh
ZGlvQnV0dG9uKHRoaXMudHIoIlJhZGlvQnV0dG9uIDIiKSkuc2V0KHt0YWJJbmRleDogdGFiSW5k
ZXgrK30pKTsKKyAgICAgIHJhZGlvQnV0dG9uR3JvdXAuYWRkKG5ldyBxeC51aS5mb3JtLlJhZGlv
QnV0dG9uKHRoaXMudHIoIlJhZGlvQnV0dG9uIDMiKSkuc2V0KHt0YWJJbmRleDogdGFiSW5kZXgr
K30pKTsKKyAgICAgIGxhYmVsID0gbmV3IHF4LnVpLmJhc2ljLkxhYmVsKHRoaXMudHIoIlJhZGlv
QnV0dG9uR3JvdXA6IikpOwogICAgICAgbGFiZWwuc2V0QnVkZHkocmFkaW9CdXR0b25Hcm91cCk7
CiAgICAgICBzZWxlY3Rpb25Hcm91cEJveC5hZGQobGFiZWwsIHtyb3c6IDIsIGNvbHVtbjogMH0p
OwogICAgICAgc2VsZWN0aW9uR3JvdXBCb3guYWRkKHJhZGlvQnV0dG9uR3JvdXAsIHtyb3c6IDIs
IGNvbHVtbjogMX0pOwpAQCAtMTYzLDIyICsxNjMsMjIgQEAKICAgICAgICAqIEJVVFRPUwogICAg
ICAgICogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCiAKLSAgICAgIHZh
ciBidXR0b25Hcm91cEJveCA9IG5ldyBxeC51aS5ncm91cGJveC5Hcm91cEJveCgiQnV0dG9ucyIp
OworICAgICAgdmFyIGJ1dHRvbkdyb3VwQm94ID0gbmV3IHF4LnVpLmdyb3VwYm94Lkdyb3VwQm94
KHRoaXMudHIoIkJ1dHRvbnMiKSk7CiAgICAgICBidXR0b25Hcm91cEJveC5zZXRMYXlvdXQobmV3
IHF4LnVpLmxheW91dC5HcmlkKDgsIDgpKTsKICAgICAgIGJ1dHRvbkdyb3VwQm94LnNldFdpZHRo
KDI1MCk7CiAgICAgICB2aWV3LmFkZChidXR0b25Hcm91cEJveCwge3JvdzogMCwgY29sdW1uOiAx
fSk7CiAKICAgICAgIC8vIGJ1dHRvbgotICAgICAgdmFyIGJ1dHRvbiA9IG5ldyBxeC51aS5mb3Jt
LkJ1dHRvbigiQnV0dG9uIikuc2V0KHt0YWJJbmRleDogdGFiSW5kZXgrK30pOwotICAgICAgbGFi
ZWwgPSBuZXcgcXgudWkuYmFzaWMuTGFiZWwoIkJ1dHRvbjoiKTsKKyAgICAgIHZhciBidXR0b24g
PSBuZXcgcXgudWkuZm9ybS5CdXR0b24odGhpcy50cigiQnV0dG9uIikpLnNldCh7dGFiSW5kZXg6
IHRhYkluZGV4Kyt9KTsKKyAgICAgIGxhYmVsID0gbmV3IHF4LnVpLmJhc2ljLkxhYmVsKHRoaXMu
dHIoIkJ1dHRvbjoiKSk7CiAgICAgICBsYWJlbC5zZXRCdWRkeShidXR0b24pOwogICAgICAgYnV0
dG9uR3JvdXBCb3guYWRkKGxhYmVsLCB7cm93OiAwLCBjb2x1bW46IDB9KTsKICAgICAgIGJ1dHRv
bkdyb3VwQm94LmFkZChidXR0b24sIHtyb3c6IDAsIGNvbHVtbjogMX0pOwogICAgICAgdGhpcy5f
d2lkZ2V0cy5wdXNoKGJ1dHRvbik7CiAKICAgICAgIC8vIHRvZ2dsZSBidXR0b24KLSAgICAgIHZh
ciB0b2dnbGVCdXR0b24gPSBuZXcgcXgudWkuZm9ybS5Ub2dnbGVCdXR0b24oIlRvZ2dsZUJ1dHRv
biIpLnNldCh7dGFiSW5kZXg6IHRhYkluZGV4Kyt9KTsKLSAgICAgIGxhYmVsID0gbmV3IHF4LnVp
LmJhc2ljLkxhYmVsKCJUb2dnbGVCdXR0b246Iik7CisgICAgICB2YXIgdG9nZ2xlQnV0dG9uID0g
bmV3IHF4LnVpLmZvcm0uVG9nZ2xlQnV0dG9uKHRoaXMudHIoIlRvZ2dsZUJ1dHRvbiIpKS5zZXQo
e3RhYkluZGV4OiB0YWJJbmRleCsrfSk7CisgICAgICBsYWJlbCA9IG5ldyBxeC51aS5iYXNpYy5M
YWJlbCh0aGlzLnRyKCJUb2dnbGVCdXR0b246IikpOwogICAgICAgbGFiZWwuc2V0QnVkZHkodG9n
Z2xlQnV0dG9uKTsKICAgICAgIGJ1dHRvbkdyb3VwQm94LmFkZChsYWJlbCwge3JvdzogMSwgY29s
dW1uOiAwfSk7CiAgICAgICBidXR0b25Hcm91cEJveC5hZGQodG9nZ2xlQnV0dG9uLCB7cm93OiAx
LCBjb2x1bW46IDF9KTsKQEAgLTE4NiwyMyArMTg2LDIzIEBACiAKICAgICAgIC8vIHJlcGVhdCBi
dXR0b24KICAgICAgIHZhciByZXBlYXRCdXR0b24gPSBuZXcgcXgudWkuZm9ybS5SZXBlYXRCdXR0
b24oIjAiKS5zZXQoe3RhYkluZGV4OiB0YWJJbmRleCsrfSk7Ci0gICAgICBsYWJlbCA9IG5ldyBx
eC51aS5iYXNpYy5MYWJlbCgiUmVwZWF0QnV0dG9uOiIpOworICAgICAgbGFiZWwgPSBuZXcgcXgu
dWkuYmFzaWMuTGFiZWwodGhpcy50cigiUmVwZWF0QnV0dG9uOiIpKTsKICAgICAgIGxhYmVsLnNl
dEJ1ZGR5KHJlcGVhdEJ1dHRvbik7CiAgICAgICBidXR0b25Hcm91cEJveC5hZGQobGFiZWwsIHty
b3c6IDIsIGNvbHVtbjogMH0pOwogICAgICAgYnV0dG9uR3JvdXBCb3guYWRkKHJlcGVhdEJ1dHRv
biwge3JvdzogMiwgY29sdW1uOiAxfSk7CiAgICAgICB0aGlzLl93aWRnZXRzLnB1c2gocmVwZWF0
QnV0dG9uKTsKIAogICAgICAgLy8gbWVudSBidXR0b24KLSAgICAgIHZhciBtZW51ZUJ1dHRvbiA9
IG5ldyBxeC51aS5mb3JtLk1lbnVCdXR0b24oIk1lbnVCdXR0b24iLCBudWxsLCB0aGlzLl9fY3Jl
YXRlTWVudUZvck1lbnVCdXR0b24oKSkuc2V0KHt0YWJJbmRleDogdGFiSW5kZXgrK30pOwotICAg
ICAgbGFiZWwgPSBuZXcgcXgudWkuYmFzaWMuTGFiZWwoIk1lbnVCdXR0b246Iik7CisgICAgICB2
YXIgbWVudWVCdXR0b24gPSBuZXcgcXgudWkuZm9ybS5NZW51QnV0dG9uKHRoaXMudHIoIk1lbnVC
dXR0b24iKSwgbnVsbCwgdGhpcy5fX2NyZWF0ZU1lbnVGb3JNZW51QnV0dG9uKCkpLnNldCh7dGFi
SW5kZXg6IHRhYkluZGV4Kyt9KTsKKyAgICAgIGxhYmVsID0gbmV3IHF4LnVpLmJhc2ljLkxhYmVs
KHRoaXMudHIoIk1lbnVCdXR0b246IikpOwogICAgICAgbGFiZWwuc2V0QnVkZHkobWVudWVCdXR0
b24pOwogICAgICAgYnV0dG9uR3JvdXBCb3guYWRkKGxhYmVsLCB7cm93OiAzLCBjb2x1bW46IDB9
KTsKICAgICAgIGJ1dHRvbkdyb3VwQm94LmFkZChtZW51ZUJ1dHRvbiwge3JvdzogMywgY29sdW1u
OiAxfSk7CiAgICAgICB0aGlzLl93aWRnZXRzLnB1c2gobWVudWVCdXR0b24pOwogCiAgICAgICAv
LyBzcGxpdCBidXR0b24KLSAgICAgIHZhciBzcGxpdEJ1dHRvbiA9IG5ldyBxeC51aS5mb3JtLlNw
bGl0QnV0dG9uKCJTcGxpdEJ1dHRvbiIsIG51bGwsIHRoaXMuX19jcmVhdGVNZW51Rm9yU3BsaXRC
dXR0b24oKSkuc2V0KHt0YWJJbmRleDogdGFiSW5kZXgrK30pOwotICAgICAgbGFiZWwgPSBuZXcg
cXgudWkuYmFzaWMuTGFiZWwoIlNwbGl0QnV0dG9uOiIpOworICAgICAgdmFyIHNwbGl0QnV0dG9u
ID0gbmV3IHF4LnVpLmZvcm0uU3BsaXRCdXR0b24odGhpcy50cigiU3BsaXRCdXR0b24iKSwgbnVs
bCwgdGhpcy5fX2NyZWF0ZU1lbnVGb3JTcGxpdEJ1dHRvbigpKS5zZXQoe3RhYkluZGV4OiB0YWJJ
bmRleCsrfSk7CisgICAgICBsYWJlbCA9IG5ldyBxeC51aS5iYXNpYy5MYWJlbCh0aGlzLnRyKCJT
cGxpdEJ1dHRvbjoiKSk7CiAgICAgICBsYWJlbC5zZXRCdWRkeShzcGxpdEJ1dHRvbik7CiAgICAg
ICBidXR0b25Hcm91cEJveC5hZGQobGFiZWwsIHtyb3c6IDQsIGNvbHVtbjogMH0pOwogICAgICAg
YnV0dG9uR3JvdXBCb3guYWRkKHNwbGl0QnV0dG9uLCB7cm93OiA0LCBjb2x1bW46IDF9KTsKQEAg
LTIyMSwzMyArMjIxLDMzIEBACiAgICAgICAgKiBCT09MRUFOIElOUFVUCiAgICAgICAgKiAqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KIAotICAgICAgdmFyIGJvb2xlYW5H
cm91cEJveCA9IG5ldyBxeC51aS5ncm91cGJveC5Hcm91cEJveCgiQm9vbGVhbiIpOworICAgICAg
dmFyIGJvb2xlYW5Hcm91cEJveCA9IG5ldyBxeC51aS5ncm91cGJveC5Hcm91cEJveCh0aGlzLnRy
KCJCb29sZWFuIikpOwogICAgICAgYm9vbGVhbkdyb3VwQm94LnNldExheW91dChuZXcgcXgudWku
bGF5b3V0LkdyaWQoOCwgOCkpOwogICAgICAgYm9vbGVhbkdyb3VwQm94LnNldFdpZHRoKDI1MCk7
CiAgICAgICB2aWV3LmFkZChib29sZWFuR3JvdXBCb3gsIHtyb3c6MSwgY29sdW1uOiAxfSk7CiAK
ICAgICAgIC8vIGNoZWNrIGJveAotICAgICAgdmFyIGNoZWNrQm94ID0gbmV3IHF4LnVpLmZvcm0u
Q2hlY2tCb3goIkNoZWNrQm94Iikuc2V0KHt0YWJJbmRleDogdGFiSW5kZXgrK30pOwotICAgICAg
bGFiZWwgPSBuZXcgcXgudWkuYmFzaWMuTGFiZWwoIkNoZWNrQm94OiIpOworICAgICAgdmFyIGNo
ZWNrQm94ID0gbmV3IHF4LnVpLmZvcm0uQ2hlY2tCb3godGhpcy50cigiQ2hlY2tCb3giKSkuc2V0
KHt0YWJJbmRleDogdGFiSW5kZXgrK30pOworICAgICAgbGFiZWwgPSBuZXcgcXgudWkuYmFzaWMu
TGFiZWwodGhpcy50cigiQ2hlY2tCb3g6IikpOwogICAgICAgbGFiZWwuc2V0QnVkZHkoY2hlY2tC
b3gpOwogICAgICAgYm9vbGVhbkdyb3VwQm94LmFkZChsYWJlbCwge3JvdzogMCwgY29sdW1uOiAw
fSk7CiAgICAgICBib29sZWFuR3JvdXBCb3guYWRkKGNoZWNrQm94LCB7cm93OiAwLCBjb2x1bW46
IDF9KTsKICAgICAgIHRoaXMuX3dpZGdldHMucHVzaChjaGVja0JveCk7CiAKICAgICAgIC8vIFRy
aS1TdGF0ZSBjaGVjayBib3gKLSAgICAgIHZhciB0cmlDaGVja0JveCA9IG5ldyBxeC51aS5mb3Jt
LkNoZWNrQm94KCJUcmktU3RhdGUgQ2hlY2tCb3giKS5zZXQoeworICAgICAgdmFyIHRyaUNoZWNr
Qm94ID0gbmV3IHF4LnVpLmZvcm0uQ2hlY2tCb3godGhpcy50cigiVHJpLVN0YXRlIENoZWNrQm94
IikpLnNldCh7CiAgICAgICAgIHRyaVN0YXRlOiB0cnVlLAogICAgICAgICB2YWx1ZTogbnVsbAog
ICAgICAgfSk7CiAgICAgICB0aGlzLl93aWRnZXRzLnB1c2godHJpQ2hlY2tCb3gpOwotICAgICAg
bGFiZWwgPSBuZXcgcXgudWkuYmFzaWMuTGFiZWwoIlRyaS1TdGF0ZSBDaGVja0JveDoiKTsKKyAg
ICAgIGxhYmVsID0gbmV3IHF4LnVpLmJhc2ljLkxhYmVsKHRoaXMudHIoIlRyaS1TdGF0ZSBDaGVj
a0JveDoiKSk7CiAgICAgICBsYWJlbC5zZXRCdWRkeSh0cmlDaGVja0JveCk7CiAgICAgICBib29s
ZWFuR3JvdXBCb3guYWRkKGxhYmVsLCB7cm93OiAxLCBjb2x1bW46IDB9KTsKICAgICAgIGJvb2xl
YW5Hcm91cEJveC5hZGQodHJpQ2hlY2tCb3gsIHtyb3c6IDEsIGNvbHVtbjogMX0pOwogCiAgICAg
ICAvLyByYWRpbyBidXR0b24KLSAgICAgIHZhciByYWRpb0J1dHRvbiA9IG5ldyBxeC51aS5mb3Jt
LlJhZGlvQnV0dG9uKCJSYWRpb0J1dHRvbiIpLnNldCh7dGFiSW5kZXg6IHRhYkluZGV4Kyt9KTsK
LSAgICAgIGJvb2xlYW5Hcm91cEJveC5hZGQobmV3IHF4LnVpLmJhc2ljLkxhYmVsKCJSYWRpb0J1
dHRvbnM6IiksIHtyb3c6IDIsIGNvbHVtbjogMH0pOworICAgICAgdmFyIHJhZGlvQnV0dG9uID0g
bmV3IHF4LnVpLmZvcm0uUmFkaW9CdXR0b24odGhpcy50cigiUmFkaW9CdXR0b24iKSkuc2V0KHt0
YWJJbmRleDogdGFiSW5kZXgrK30pOworICAgICAgYm9vbGVhbkdyb3VwQm94LmFkZChuZXcgcXgu
dWkuYmFzaWMuTGFiZWwodGhpcy50cigiUmFkaW9CdXR0b25zOiIpKSwge3JvdzogMiwgY29sdW1u
OiAwfSk7CiAgICAgICBib29sZWFuR3JvdXBCb3guYWRkKHJhZGlvQnV0dG9uLCB7cm93OiAyLCBj
b2x1bW46IDF9KTsKICAgICAgIHRoaXMuX3dpZGdldHMucHVzaChyYWRpb0J1dHRvbik7CiAKQEAg
LTI1NiwxNCArMjU2LDE0IEBACiAgICAgICAgKiBOVU1CRVIgSU5QVVQKICAgICAgICAqICoqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwogCi0gICAgICB2YXIgbnVtYmVyR3Jv
dXBCb3ggPSBuZXcgcXgudWkuZ3JvdXBib3guR3JvdXBCb3goIk51bWJlciIpOworICAgICAgdmFy
IG51bWJlckdyb3VwQm94ID0gbmV3IHF4LnVpLmdyb3VwYm94Lkdyb3VwQm94KHRoaXMudHIoIk51
bWJlciIpKTsKICAgICAgIG51bWJlckdyb3VwQm94LnNldExheW91dChuZXcgcXgudWkubGF5b3V0
LkdyaWQoOCwgOCkpOwogICAgICAgbnVtYmVyR3JvdXBCb3guc2V0V2lkdGgoMjUwKTsKICAgICAg
IHZpZXcuYWRkKG51bWJlckdyb3VwQm94LCB7cm93OiAyLCBjb2x1bW46IDF9KTsKIAogICAgICAg
Ly8gc3Bpbm5lcgogICAgICAgdmFyIHNwaW5uZXIgPSBuZXcgcXgudWkuZm9ybS5TcGlubmVyKDAs
IDUwLCAxMDApLnNldCh7dGFiSW5kZXg6IHRhYkluZGV4Kyt9KTsKLSAgICAgIGxhYmVsID0gbmV3
IHF4LnVpLmJhc2ljLkxhYmVsKCJTcGlubmVyOiIpOworICAgICAgbGFiZWwgPSBuZXcgcXgudWku
YmFzaWMuTGFiZWwodGhpcy50cigiU3Bpbm5lcjoiKSk7CiAgICAgICBsYWJlbC5zZXRCdWRkeShz
cGlubmVyKTsKICAgICAgIG51bWJlckdyb3VwQm94LmFkZChsYWJlbCwge3JvdzogMCwgY29sdW1u
OiAwfSk7CiAgICAgICBudW1iZXJHcm91cEJveC5hZGQoc3Bpbm5lciwge3JvdzogMCwgY29sdW1u
OiAxfSk7CkBAIC0yNzIsNyArMjcyLDcgQEAKICAgICAgIC8vIHNsaWRlcgogICAgICAgdmFyIHNs
aWRlciA9IG5ldyBxeC51aS5mb3JtLlNsaWRlcigpLnNldCh7dGFiSW5kZXg6IHRhYkluZGV4Kyt9
KTsKICAgICAgIHNsaWRlci5zZXRXaWR0aCgxMzApOwotICAgICAgbGFiZWwgPSBuZXcgcXgudWku
YmFzaWMuTGFiZWwoIlNsaWRlcjoiKTsKKyAgICAgIGxhYmVsID0gbmV3IHF4LnVpLmJhc2ljLkxh
YmVsKHRoaXMudHIoIlNsaWRlcjoiKSk7CiAgICAgICBsYWJlbC5zZXRCdWRkeShzbGlkZXIpOwog
ICAgICAgbnVtYmVyR3JvdXBCb3guYWRkKGxhYmVsLCB7cm93OiAxLCBjb2x1bW46IDB9KTsKICAg
ICAgIG51bWJlckdyb3VwQm94LmFkZChzbGlkZXIsIHtyb3c6IDEsIGNvbHVtbjogMX0pOwpAQCAt
Mjg4LDcgKzI4OCw3IEBACiAgICAgX19jcmVhdGVJdGVtczogZnVuY3Rpb24od2lkZ2V0KQogICAg
IHsKICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTA7IGkrKykgewotICAgICAgICB2YXIgdGVt
cEl0ZW0gPSBuZXcgcXgudWkuZm9ybS5MaXN0SXRlbSgiSXRlbSAiICsgaSk7CisgICAgICAgIHZh
ciB0ZW1wSXRlbSA9IG5ldyBxeC51aS5mb3JtLkxpc3RJdGVtKHRoaXMudHIoIkl0ZW0gIikgKyBp
KTsKICAgICAgICAgd2lkZ2V0LmFkZCh0ZW1wSXRlbSk7CiAgICAgICB9CiAgICAgfSwKQEAgLTMw
MCw3ICszMDAsNyBAQAogICAgICAgdmFyIG9wdGlvbk1lbnUgPSBuZXcgcXgudWkubWVudS5NZW51
OwogCiAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKykgewotICAgICAgICBvcHRpb25N
ZW51LmFkZChuZXcgcXgudWkubWVudS5SYWRpb0J1dHRvbigiT3B0aW9uIiArIGkpKTsKKyAgICAg
ICAgb3B0aW9uTWVudS5hZGQobmV3IHF4LnVpLm1lbnUuUmFkaW9CdXR0b24odGhpcy50cigiT3B0
aW9uIikgKyBpKSk7CiAgICAgICB9CiAKICAgICAgIHZhciBncm91cE9wdGlvbnMgPSBuZXcgcXgu
dWkuZm9ybS5SYWRpb0dyb3VwOwpAQCAtMzEwLDExICszMTAsMTEgQEAKICAgICAgIHZhciBtZW51
ID0gbmV3IHF4LnVpLm1lbnUuTWVudSgpOwogCiAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7
IGkrKykgewotICAgICAgICB2YXIgdGVtcEJ1dHRvbiA9IG5ldyBxeC51aS5tZW51LkJ1dHRvbigi
QnV0dG9uIiArIGkpOworICAgICAgICB2YXIgdGVtcEJ1dHRvbiA9IG5ldyBxeC51aS5tZW51LkJ1
dHRvbih0aGlzLnRyKCJCdXR0b24iKSArIGkpOwogICAgICAgICBtZW51LmFkZCh0ZW1wQnV0dG9u
KTsKICAgICAgIH0KIAotICAgICAgdmFyIG9wdGlvbkJ1dHRvbiA9IG5ldyBxeC51aS5tZW51LkJ1
dHRvbigiT3B0aW9ucyIsICIiLCBudWxsLCBvcHRpb25NZW51KTsKKyAgICAgIHZhciBvcHRpb25C
dXR0b24gPSBuZXcgcXgudWkubWVudS5CdXR0b24odGhpcy50cigiT3B0aW9ucyIpLCAiIiwgbnVs
bCwgb3B0aW9uTWVudSk7CiAgICAgICBtZW51LmFkZFNlcGFyYXRvcigpOwogICAgICAgbWVudS5h
ZGQob3B0aW9uQnV0dG9uKTsKIApAQCAtMzI2LDkgKzMyNiw5IEBACiAgICAgewogICAgICAgdmFy
IG1lbnUgPSBuZXcgcXgudWkubWVudS5NZW51OwogCi0gICAgICB2YXIgc2l0ZTEgPSBuZXcgcXgu
dWkubWVudS5CdXR0b24oIldlYnNpdGUgMSIpOwotICAgICAgdmFyIHNpdGUyID0gbmV3IHF4LnVp
Lm1lbnUuQnV0dG9uKCJXZWJzaXRlIDIiKTsKLSAgICAgIHZhciBzaXRlMyA9IG5ldyBxeC51aS5t
ZW51LkJ1dHRvbigiV2Vic2l0ZSAzIik7CisgICAgICB2YXIgc2l0ZTEgPSBuZXcgcXgudWkubWVu
dS5CdXR0b24odGhpcy50cigiV2Vic2l0ZSAxIikpOworICAgICAgdmFyIHNpdGUyID0gbmV3IHF4
LnVpLm1lbnUuQnV0dG9uKHRoaXMudHIoIldlYnNpdGUgMiIpKTsKKyAgICAgIHZhciBzaXRlMyA9
IG5ldyBxeC51aS5tZW51LkJ1dHRvbih0aGlzLnRyKCJXZWJzaXRlIDMiKSk7CiAKICAgICAgIG1l
bnUuYWRkKHNpdGUxKTsKICAgICAgIG1lbnUuYWRkKHNpdGUyKTsKQEAgLTMzNyw0ICszMzcsNCBA
QAogICAgICAgcmV0dXJuIG1lbnU7CiAgICAgfQogICB9Ci19KTsKXCBObyBuZXdsaW5lIGF0IGVu
ZCBvZiBmaWxlCit9KTsKSW5kZXg6IHNvdXJjZS9jbGFzcy93aWRnZXRicm93c2VyL3ZpZXcvSGVh
ZGVyLmpzCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT0KLS0tIHNvdXJjZS9jbGFzcy93aWRnZXRicm93c2VyL3ZpZXcvSGVh
ZGVyLmpzCShyZXZpc2lvbiAyNzM3NykKKysrIHNvdXJjZS9jbGFzcy93aWRnZXRicm93c2VyL3Zp
ZXcvSGVhZGVyLmpzCSh3b3JraW5nIGNvcHkpCkBAIC0zOSwxNSArMzksNDkgQEAKICAgICB0aGlz
LnNldExheW91dChuZXcgcXgudWkubGF5b3V0LkhCb3gpOwogICAgIHRoaXMuc2V0QXBwZWFyYW5j
ZSgiYXBwLWhlYWRlciIpOwogCi0gICAgdmFyIHRpdGxlID0gbmV3IHF4LnVpLmJhc2ljLkxhYmVs
KCJXaWRnZXQgQnJvd3NlciIpOworICAgIHZhciB0aXRsZSA9IG5ldyBxeC51aS5iYXNpYy5MYWJl
bCh0aGlzLnRyKCJXaWRnZXQgQnJvd3NlciIpKTsKICAgICB2YXIgdmVyc2lvbiA9IG5ldyBxeC51
aS5iYXNpYy5MYWJlbCgicW9veGRvbyAiICsgcXguY29yZS5FbnZpcm9ubWVudC5nZXQoInF4LnZl
cnNpb24iKSk7CiAgICAgdmVyc2lvbi5zZXRGb250KCJkZWZhdWx0Iik7CiAgICAgdmVyc2lvbi5z
ZXRBcHBlYXJhbmNlKCJhcHAtaGVhZGVyLWxhYmVsIik7CiAKKwkJLy8gTG9jYWxlIHNlbGVjdCBi
b3hlcworCQl2YXIgbG9jYWxlcyA9IHF4LmxvY2FsZS5NYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0
QXZhaWxhYmxlTG9jYWxlcygpOworCisgICAgdmFyIGxhbmd1YWdlU0IgPSBuZXcgcXgudWkuZm9y
bS5TZWxlY3RCb3goKTsKKwkJbGFuZ3VhZ2VTQi5hZGQobmV3IHF4LnVpLmZvcm0uTGlzdEl0ZW0o
IkVuZ2xpc2giKSk7CisJCWxhbmd1YWdlU0IuYWRkKG5ldyBxeC51aS5mb3JtLkxpc3RJdGVtKCJB
cmFiaWMiKSk7CisJCWxhbmd1YWdlU0IuYWRkTGlzdGVuZXIoImNoYW5nZVNlbGVjdGlvbiIsIGZ1
bmN0aW9uKGUpIHsKKwkJCWlmKGUuZ2V0RGF0YSgpWzBdLmdldExhYmVsKCkgPT09ICJBcmFiaWMi
KQorCQkJeworCQkJdmFyIGxhbmcgPSAiYXIiOworCisvLyAgICAgIHZhciBrbm93blBhcnRzID0g
cXguUGFydC5nZXRJbnN0YW5jZSgpLmdldFBhcnRzKCk7CisKKyAgICAgIC8vIGlmIHRoZSBsb2Nh
bGUgaXMgYXZhaWxhYmxlIGFzIHBhcnQKKy8vICAgICAgaWYgKGtub3duUGFydHNbbGFuZ10pCisv
LwkJCXsKKyAgICAgICAgLy8gbG9hZCB0aGlzIHBhcnQKKy8vICAgICAgICBxeC5pby5QYXJ0TG9h
ZGVyLnJlcXVpcmUoW2xhbmddLCBmdW5jdGlvbigpIHsKKyAgICAgICAgICAvLyBmb3JjaW5nIGlk
ZW50aWNhbCBsb2NhbGUKKyAgICAgICAgICBxeC5sb2NhbGUuTWFuYWdlci5nZXRJbnN0YW5jZSgp
LnNldExvY2FsZShsYW5nKTsKKy8vICAgICAgICB9LCB0aGlzKTsKKy8vICAgICAgfQorLy8JCQll
bHNlCisvLwkJCXsKKy8vICAgICAgICB0aGlzLndhcm4oIkNhbm5vdCBsb2FkIGxvY2FsZSBwYXJ0
IGZvciBjdXJyZW50IGxhbmd1YWdlICIgKyBsYW5nICsgIiwgZmFsbGluZyBiYWNrIHRvIEVuZ2xp
c2guIik7CisvLyAgICAgIH0KKwkJCX0KKwkJCWVsc2UKKwkJCXsKKwkJCQlxeC5sb2NhbGUuTWFu
YWdlci5nZXRJbnN0YW5jZSgpLnNldExvY2FsZSgiQyIpOworCQkJfQorCQl9LCB0aGlzKTsKKwog
ICAgIC8vIEJ1aWxkIHNlbGVjdC1ib3gKLSAgICB2YXIgc2VsZWN0ID0gbmV3IHF4LnVpLmZvcm0u
U2VsZWN0Qm94KCJUaGVtZSIpOworCQl2YXIgdGhlbWVTdHIgPSB0aGlzLnRyKCIgVGhlbWUiKTsK
KyAgICB2YXIgc2VsZWN0ID0gbmV3IHF4LnVpLmZvcm0uU2VsZWN0Qm94KHRoaXMudHIoIlRoZW1l
IikpOwogICAgIFsiTW9kZXJuIiwgIlNpbXBsZSIsICJDbGFzc2ljIl0uZm9yRWFjaChmdW5jdGlv
bihuYW1lKSB7Ci0gICAgICB2YXIgaXRlbSA9IG5ldyBxeC51aS5mb3JtLkxpc3RJdGVtKG5hbWUg
KyAiIFRoZW1lIik7CisgICAgICB2YXIgaXRlbSA9IG5ldyBxeC51aS5mb3JtLkxpc3RJdGVtKG5h
bWUgKyB0aGVtZVN0cik7CiAgICAgICBpdGVtLnNldFVzZXJEYXRhKCJ2YWx1ZSIsICJxeC50aGVt
ZS4iICsgbmFtZSk7CiAgICAgICBzZWxlY3QuYWRkKGl0ZW0pOwogICAgIH0pOwpAQCAtNzYsOSAr
MTEwLDEwIEBACiAgICAgLy8gRmluYWxseSBhc3NlbWJsZSBoZWFkZXIKICAgICB0aGlzLmFkZCh0
aXRsZSk7CiAgICAgdGhpcy5hZGQobmV3IHF4LnVpLmNvcmUuU3BhY2VyLCB7ZmxleCA6IDF9KTsK
KyAgICB0aGlzLmFkZChsYW5ndWFnZVNCKTsKICAgICB0aGlzLmFkZChzZWxlY3QpOwogICAgIHRo
aXMuYWRkKG5ldyBxeC51aS5jb3JlLlNwYWNlciwge3dpZHRoOiAiMiUifSk7CiAgICAgdGhpcy5h
ZGQodmVyc2lvbik7CiAKICAgfQotfSk7ClwgTm8gbmV3bGluZSBhdCBlbmQgb2YgZmlsZQorfSk7
CkluZGV4OiBzb3VyY2UvY2xhc3Mvd2lkZ2V0YnJvd3Nlci92aWV3L1RhYlZpZXcuanMKPT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PQotLS0gc291cmNlL2NsYXNzL3dpZGdldGJyb3dzZXIvdmlldy9UYWJWaWV3LmpzCShyZXZp
c2lvbiAyNzM3NykKKysrIHNvdXJjZS9jbGFzcy93aWRnZXRicm93c2VyL3ZpZXcvVGFiVmlldy5q
cwkod29ya2luZyBjb3B5KQpAQCAtMzksNzMgKzM5LDczIEBACiAgICAgICAvLyBGb3JtCiAgICAg
ICBjbGFzc25hbWUgPSAid2lkZ2V0YnJvd3Nlci5wYWdlcy5Gb3JtIjsKICAgICAgIGNvbnRyb2xz
ID0ge2Rpc2FibGVkOiB0cnVlLCBob3ZlcmVkOiB0cnVlLCBmb2N1c2VkOiB0cnVlLCBpbnZhbGlk
OiB0cnVlfTsKLSAgICAgIHZhciBmb3JtID0gbmV3IHdpZGdldGJyb3dzZXIudmlldy5UYWJQYWdl
KCJGb3JtIiwgY2xhc3NuYW1lLCBjb250cm9scyk7CisgICAgICB2YXIgZm9ybSA9IG5ldyB3aWRn
ZXRicm93c2VyLnZpZXcuVGFiUGFnZSh0aGlzLnRyKCJGb3JtIiksIGNsYXNzbmFtZSwgY29udHJv
bHMpOwogICAgICAgdGhpcy5hZGQoZm9ybSk7CiAKICAgICAgIC8vIFRyZWUKICAgICAgIGNsYXNz
bmFtZSA9ICJ3aWRnZXRicm93c2VyLnBhZ2VzLlRyZWUiOwogICAgICAgY29udHJvbHMgPSB7ZGlz
YWJsZWQ6IHRydWV9OwotICAgICAgdmFyIHRyZWUgPSBuZXcgd2lkZ2V0YnJvd3Nlci52aWV3LlRh
YlBhZ2UoIlRyZWUiLCBjbGFzc25hbWUsIGNvbnRyb2xzKTsKKyAgICAgIHZhciB0cmVlID0gbmV3
IHdpZGdldGJyb3dzZXIudmlldy5UYWJQYWdlKHRoaXMudHIoIlRyZWUiKSwgY2xhc3NuYW1lLCBj
b250cm9scyk7CiAgICAgICB0aGlzLmFkZCh0cmVlKTsKIAogICAgICAgLy8gTGlzdAogICAgICAg
Y2xhc3NuYW1lID0gIndpZGdldGJyb3dzZXIucGFnZXMuTGlzdCI7CiAgICAgICBjb250cm9scyA9
IHtkaXNhYmxlZDogdHJ1ZX07Ci0gICAgICB2YXIgbGlzdCA9IG5ldyB3aWRnZXRicm93c2VyLnZp
ZXcuVGFiUGFnZSgiTGlzdCIsIGNsYXNzbmFtZSwgY29udHJvbHMpOworICAgICAgdmFyIGxpc3Qg
PSBuZXcgd2lkZ2V0YnJvd3Nlci52aWV3LlRhYlBhZ2UodGhpcy50cigiTGlzdCIpLCBjbGFzc25h
bWUsIGNvbnRyb2xzKTsKICAgICAgIHRoaXMuYWRkKGxpc3QpOwogCiAgICAgICAvLyBUYWJsZQog
ICAgICAgY2xhc3NuYW1lID0gIndpZGdldGJyb3dzZXIucGFnZXMuVGFibGUiOwogICAgICAgY29u
dHJvbHMgPSB7ZGlzYWJsZWQ6IHRydWV9OwotICAgICAgdmFyIHRyZWUgPSBuZXcgd2lkZ2V0YnJv
d3Nlci52aWV3LlRhYlBhZ2UoIlRhYmxlIiwgY2xhc3NuYW1lLCBjb250cm9scyk7CisgICAgICB2
YXIgdHJlZSA9IG5ldyB3aWRnZXRicm93c2VyLnZpZXcuVGFiUGFnZSh0aGlzLnRyKCJUYWJsZSIp
LCBjbGFzc25hbWUsIGNvbnRyb2xzKTsKICAgICAgIHRoaXMuYWRkKHRyZWUpOwogCiAgICAgICAv
LyBNZW51CiAgICAgICBjbGFzc25hbWUgPSAid2lkZ2V0YnJvd3Nlci5wYWdlcy5Ub29sQmFyIjsK
ICAgICAgIGNvbnRyb2xzID0ge2Rpc2FibGVkOiB0cnVlLCBob3ZlcmVkOiB0cnVlLCBzZWxlY3Rl
ZDogdHJ1ZX07Ci0gICAgICB2YXIgbWVudSA9IG5ldyB3aWRnZXRicm93c2VyLnZpZXcuVGFiUGFn
ZSgiVG9vbGJhci9NZW51IiwgY2xhc3NuYW1lLCBjb250cm9scyk7CisgICAgICB2YXIgbWVudSA9
IG5ldyB3aWRnZXRicm93c2VyLnZpZXcuVGFiUGFnZSh0aGlzLnRyKCJUb29sYmFyL01lbnUiKSwg
Y2xhc3NuYW1lLCBjb250cm9scyk7CiAgICAgICB0aGlzLmFkZChtZW51KTsKIAogICAgICAgLy8g
V2luZG93CiAgICAgICBjbGFzc25hbWUgPSAid2lkZ2V0YnJvd3Nlci5wYWdlcy5XaW5kb3ciOwog
ICAgICAgY29udHJvbHMgPSB7ZGlzYWJsZWQ6IHRydWV9OwotICAgICAgdmFyIHdpbiA9IG5ldyB3
aWRnZXRicm93c2VyLnZpZXcuVGFiUGFnZSgiV2luZG93IiwgY2xhc3NuYW1lLCBjb250cm9scyk7
CisgICAgICB2YXIgd2luID0gbmV3IHdpZGdldGJyb3dzZXIudmlldy5UYWJQYWdlKHRoaXMudHIo
IldpbmRvdyIpLCBjbGFzc25hbWUsIGNvbnRyb2xzKTsKICAgICAgIHRoaXMuYWRkKHdpbik7CiAK
ICAgICAgIC8vIENvbnRyb2wKICAgICAgIGNsYXNzbmFtZSA9ICJ3aWRnZXRicm93c2VyLnBhZ2Vz
LkNvbnRyb2wiOwogICAgICAgY29udHJvbHMgPSB7ZGlzYWJsZWQ6IHRydWV9OwotICAgICAgdmFy
IGNvbnRyb2wgPSBuZXcgd2lkZ2V0YnJvd3Nlci52aWV3LlRhYlBhZ2UoIkNvbnRyb2wiLCBjbGFz
c25hbWUsIGNvbnRyb2xzKTsKKyAgICAgIHZhciBjb250cm9sID0gbmV3IHdpZGdldGJyb3dzZXIu
dmlldy5UYWJQYWdlKHRoaXMudHIoIkNvbnRyb2wiKSwgY2xhc3NuYW1lLCBjb250cm9scyk7CiAg
ICAgICB0aGlzLmFkZChjb250cm9sKTsKIAogICAgICAgLy8gVHJlZVZpcnR1YWwKICAgICAgIGNs
YXNzbmFtZSA9ICJ3aWRnZXRicm93c2VyLnBhZ2VzLlRyZWVWaXJ0dWFsIjsKICAgICAgIGNvbnRy
b2xzID0ge307Ci0gICAgICB2YXIgdHJlZVZpcnR1YWwgPSBuZXcgd2lkZ2V0YnJvd3Nlci52aWV3
LlRhYlBhZ2UoIlRyZWVWaXJ0dWFsIiwgY2xhc3NuYW1lLCBjb250cm9scyk7CisgICAgICB2YXIg
dHJlZVZpcnR1YWwgPSBuZXcgd2lkZ2V0YnJvd3Nlci52aWV3LlRhYlBhZ2UodGhpcy50cigiVHJl
ZVZpcnR1YWwiKSwgY2xhc3NuYW1lLCBjb250cm9scyk7CiAgICAgICB0aGlzLmFkZCh0cmVlVmly
dHVhbCk7CiAKICAgICAgIC8vIEVtYmVkCiAgICAgICBjbGFzc25hbWUgPSAid2lkZ2V0YnJvd3Nl
ci5wYWdlcy5FbWJlZCI7CiAgICAgICBjb250cm9scyA9IHt9OwotICAgICAgdmFyIGVtYmVkID0g
bmV3IHdpZGdldGJyb3dzZXIudmlldy5UYWJQYWdlKCJFbWJlZCIsIGNsYXNzbmFtZSwgY29udHJv
bHMpOworICAgICAgdmFyIGVtYmVkID0gbmV3IHdpZGdldGJyb3dzZXIudmlldy5UYWJQYWdlKHRo
aXMudHIoIkVtYmVkIiksIGNsYXNzbmFtZSwgY29udHJvbHMpOwogICAgICAgdGhpcy5hZGQoZW1i
ZWQpOwogCiAgICAgICAvLyBFbWJlZEZyYW1lCiAgICAgICBjbGFzc25hbWUgPSAid2lkZ2V0YnJv
d3Nlci5wYWdlcy5FbWJlZEZyYW1lIjsKICAgICAgIGNvbnRyb2xzID0ge307Ci0gICAgICB2YXIg
ZW1iZWRGcmFtZSA9IG5ldyB3aWRnZXRicm93c2VyLnZpZXcuVGFiUGFnZSgiRW1iZWRGcmFtZSIs
IGNsYXNzbmFtZSwgY29udHJvbHMpOworICAgICAgdmFyIGVtYmVkRnJhbWUgPSBuZXcgd2lkZ2V0
YnJvd3Nlci52aWV3LlRhYlBhZ2UodGhpcy50cigiRW1iZWRGcmFtZSIpLCBjbGFzc25hbWUsIGNv
bnRyb2xzKTsKICAgICAgIHRoaXMuYWRkKGVtYmVkRnJhbWUpOwogCiAgICAgICAvLyBCYXNpYwog
ICAgICAgY2xhc3NuYW1lID0gIndpZGdldGJyb3dzZXIucGFnZXMuQmFzaWMiOwogICAgICAgY29u
dHJvbHMgPSB7ZGlzYWJsZWQ6IHRydWV9OwotICAgICAgdmFyIGJhc2ljID0gbmV3IHdpZGdldGJy
b3dzZXIudmlldy5UYWJQYWdlKCJCYXNpYyIsIGNsYXNzbmFtZSwgY29udHJvbHMpOworICAgICAg
dmFyIGJhc2ljID0gbmV3IHdpZGdldGJyb3dzZXIudmlldy5UYWJQYWdlKHRoaXMudHIoIkJhc2lj
IiksIGNsYXNzbmFtZSwgY29udHJvbHMpOwogICAgICAgdGhpcy5hZGQoYmFzaWMpOwogCiAgICAg
ICAvLyBNaXNjCiAgICAgICBjbGFzc25hbWUgPSAid2lkZ2V0YnJvd3Nlci5wYWdlcy5NaXNjIjsK
ICAgICAgIGNvbnRyb2xzID0ge2Rpc2FibGVkOiB0cnVlfTsKLSAgICAgIHZhciBtaXNjID0gbmV3
IHdpZGdldGJyb3dzZXIudmlldy5UYWJQYWdlKCJNaXNjIiwgY2xhc3NuYW1lLCBjb250cm9scyk7
CisgICAgICB2YXIgbWlzYyA9IG5ldyB3aWRnZXRicm93c2VyLnZpZXcuVGFiUGFnZSh0aGlzLnRy
KCJNaXNjIiksIGNsYXNzbmFtZSwgY29udHJvbHMpOwogICAgICAgdGhpcy5hZGQobWlzYyk7CiAK
ICAgICB9LApJbmRleDogc291cmNlL2NsYXNzL3dpZGdldGJyb3dzZXIvdmlldy9UYWJQYWdlLmpz
Cj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT0KLS0tIHNvdXJjZS9jbGFzcy93aWRnZXRicm93c2VyL3ZpZXcvVGFiUGFnZS5q
cwkocmV2aXNpb24gMjczNzcpCisrKyBzb3VyY2UvY2xhc3Mvd2lkZ2V0YnJvd3Nlci92aWV3L1Rh
YlBhZ2UuanMJKHdvcmtpbmcgY29weSkKQEAgLTk5LDQgKzk5LDQgQEAKICAgbWVtYmVycyA6CiAg
IHsKICAgfQotfSk7ClwgTm8gbmV3bGluZSBhdCBlbmQgb2YgZmlsZQorfSk7Cg==
</data>

          </attachment>
      

    </bug>